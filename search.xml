<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>oracle11g删除某一用户下所有表</title>
    <url>/blog/2020/10/19/Oracle%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7%E4%B8%8B%E6%89%80%E6%9C%89%E8%A1%A8/</url>
    <content><![CDATA[<p>oracle11g删除数据</p>
<a id="more"></a>

<p>在命令窗口执行</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;drop  table &#x27;</span>|| table_name || <span class="string">&#x27;;&#x27;</span> <span class="keyword">FROM</span> USER_TABLES <span class="keyword">ORDER</span> <span class="keyword">BY</span> TABLE_NAME;</span><br></pre></td></tr></table></figure>

<p><a href="https://imgchr.com/i/0xrL3n"><img src="https://s1.ax1x.com/2020/10/19/0xrL3n.png" alt="0xrL3n.png"></a></p>
<p>然后将查询的结果复制之后重新执行</p>
]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>oracle</tag>
        <tag>工作日志</tag>
      </tags>
  </entry>
  <entry>
    <title>git学习笔记</title>
    <url>/blog/2020/10/15/git%E5%85%A5%E9%97%A8%E5%88%B0%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>通过观看狂神讲师的视频所做的笔记，以便后来自己复习：<a href="https://www.bilibili.com/video/BV1FE411P7B3?p=1">地址</a></p>
<a id="more"></a>

<h1 id="版本控制"><a href="#版本控制" class="headerlink" title="版本控制"></a>版本控制</h1><blockquote>
<p>版本控制（Revision control）是一种在开发的过程中用于管理我们对文件、目录或工程等内容的修改历史，方便查看更改历史记录，备份以便恢复以前的版本的软件工程技术。</p>
</blockquote>
<h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2><ul>
<li>实现跨区域多人协同开发</li>
<li>追踪和记载一个或者多个文件的历史记录</li>
<li>组织和保护你的源代码和文档</li>
<li>统计工作量</li>
<li>并行开发、提高开发效率</li>
<li>跟踪记录整个软件的开发过程</li>
<li>减轻开发人员的负担，节省时间，同时降低人为错误</li>
</ul>
<p>简单说就是用于管理多人协同开发项目的技术。</p>
<p>没有进行版本控制或者版本控制本身缺乏正确的流程管理，在软件开发过程中将会引入很多问题，如软件代码的一致性、软件内容的冗余、软件过程的事物性、软件开发过程中的并发性、软件源代码的安全性，以及软件的整合等问题。</p>
<p>无论是工作还是学习，或者是自己做笔记，都经历过这样一个阶段！我们就迫切需要一个版本控制工具！</p>
<h2 id="常见的版本控制"><a href="#常见的版本控制" class="headerlink" title="常见的版本控制"></a>常见的版本控制</h2><ul>
<li><strong>Git</strong></li>
<li><strong>SVN</strong>（Subversion）</li>
<li><strong>CVS</strong>（Concurrent Versions System）</li>
<li><strong>VSS</strong>（Micorosoft Visual SourceSafe）</li>
<li><strong>TFS</strong>（Team Foundation Server）</li>
<li>Visual Studio Online</li>
</ul>
<p>现在影响力最大且使用最广泛的是Git与SVN</p>
<h2 id="版本控制分类"><a href="#版本控制分类" class="headerlink" title="版本控制分类"></a>版本控制分类</h2><h3 id="本地版本控制"><a href="#本地版本控制" class="headerlink" title="本地版本控制"></a>本地版本控制</h3><p>记录文件每次的更新，可以对每个版本做一个快照，或是记录补丁文件，适合个人用，如RCS。</p>
<p><img src="https://s1.ax1x.com/2020/10/15/07CAAA.png" alt="07CAAA.png"></p>
<h3 id="集中版本控制-SVN"><a href="#集中版本控制-SVN" class="headerlink" title="集中版本控制  SVN"></a>集中版本控制  SVN</h3><p>所有的版本数据都保存在服务器上，协同开发者从服务器上同步更新或上传自己的修改</p>
<p><img src="https://s1.ax1x.com/2020/10/15/07CMng.png" alt="07CMng.png"></p>
<p><strong>缺点：</strong>所有的版本数据都存在服务器上，用户的本地只有自己以前所同步的版本，如果不连网的话，用户就看不到历史版本，也无法切换版本验证问题，或在不同分支工作。而且，所有数据都保存在单一的服务器上，有很大的风险这个服务器会损坏，这样就会丢失所有的数据，当然可以定期备份。代表产品：SVN、CVS、VSS</p>
<h3 id="分布式版本控制-Git"><a href="#分布式版本控制-Git" class="headerlink" title="分布式版本控制 Git"></a>分布式版本控制 Git</h3><p>所有版本信息仓库全部同步到本地的每个用户，这样就可以在本地查看所有版本历史，可以离线在本地提交，只需在连网时push到相应的服务器或其他用户那里。由于每个用户那里保存的都是所有的版本数据，只要有一个用户的设备没有问题就可以恢复所有的数据，但这增加了本地存储空间的占用。</p>
<p><img src="https://s1.ax1x.com/2020/10/15/07CrNR.png" alt="07CrNR.png"></p>
<h2 id="Git和SVN的主要区别"><a href="#Git和SVN的主要区别" class="headerlink" title="Git和SVN的主要区别"></a>Git和SVN的主要区别</h2><p>SVN是集中式版本控制系统，版本库是集中放在中央服务器的，而工作的时候，用的都是自己的电脑，所以首先要从中央服务器得到最新的版本，然后工作，完成工作后，需要把自己做完的活推送到中央服务器。集中式版本控制系统是必须联网才能工作，对网络带宽要求较高。</p>
<p>Git是分布式版本控制系统，没有中央服务器，每个人的电脑就是一个完整的版本库，工作的时候不需要联网了，因为版本都在自己电脑上。协同的方法是这样的：比如说自己在电脑上改了文件A，其他人也在电脑上改了文件A，这时，你们两之间只需把各自的修改推送给对方，就可以互相看到对方的修改了。Git可以直接看到更新了哪些代码和文件！</p>
<p><strong>Git是目前世界上最先进的分布式版本控制系统。</strong></p>
<h1 id="Git历史"><a href="#Git历史" class="headerlink" title="Git历史"></a>Git历史</h1><p>同生活中的许多伟大事物一样，Git 诞生于一个极富纷争大举创新的年代。</p>
<p>Linux 内核开源项目有着为数众广的参与者。绝大多数的 Linux 内核维护工作都花在了提交补丁和保存归档的繁琐事务上(1991－2002年间)。到 2002 年，整个项目组开始启用一个专有的分布式版本控制系统 BitKeeper 来管理和维护代码。</p>
<p>Linux社区中存在很多的大佬！破解研究 BitKeeper ！</p>
<p>到了 2005 年，开发 BitKeeper 的商业公司同 Linux 内核开源社区的合作关系结束，他们收回了 Linux 内核社区免费使用 BitKeeper 的权力。这就迫使 Linux 开源社区(特别是 Linux 的缔造者 Linus Torvalds)基于使用 BitKeeper 时的经验教训，开发出自己的版本系统。（2周左右！） 也就是后来的 Git！</p>
<p><strong>Git是目前世界上最先进的分布式版本控制系统。</strong></p>
<p>Git是免费、开源的，最初Git是为辅助 Linux 内核开发的，来替代 BitKeeper！</p>
<p>Linux和Git之父李纳斯·托沃兹（Linus Benedic Torvalds）1969、芬兰</p>
<h1 id="git环境配置"><a href="#git环境配置" class="headerlink" title="git环境配置"></a>git环境配置</h1><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p><a href="http://npm.taobao.org/mirrors/git-for-windows/">淘宝镜像网址</a></p>
<p><a href="https://www.bilibili.com/video/BV1FE411P7B3?p=4">安装教程</a></p>
<h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><p><strong>Git Bash：</strong>Unix与Linux风格的命令行，使用最多，推荐最多</p>
<p><strong>Git CMD：</strong>Windows风格的命令行</p>
<p><strong>Git GUI</strong>：图形界面的Git，不建议初学者使用，尽量先熟悉常用命令</p>
<h2 id="基本linux命令"><a href="#基本linux命令" class="headerlink" title="基本linux命令"></a>基本linux命令</h2><p>1）、cd : 改变目录。</p>
<p>2）、cd . . 回退到上一个目录，直接cd进入默认目录</p>
<p>3）、pwd : 显示当前所在的目录路径。</p>
<p>4）、ls(ll):  都是列出当前目录中的所有文件，只不过ll(两个ll)列出的内容更为详细。</p>
<p>5）、touch : 新建一个文件 如 touch index.js 就会在当前目录下新建一个index.js文件。</p>
<p>6）、rm:  删除一个文件, rm index.js 就会把index.js文件删除。</p>
<p>7）、mkdir:  新建一个目录,就是新建一个文件夹。</p>
<p>8）、rm -r :  删除一个文件夹, rm -r src 删除src目录</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rm -rf &#x2F; 切勿在Linux中尝试！删除电脑中全部文件！</span><br></pre></td></tr></table></figure>

<p>9）、mv 移动文件, mv index.html src index.html 是我们要移动的文件, src 是目标文件夹,当然, 这样写,必须保证文件和目标文件夹在同一目录下。</p>
<p>10）、reset 重新初始化终端/清屏。</p>
<p>11）、clear 清屏。</p>
<p>12）、history 查看命令历史。</p>
<p>13）、help 帮助。</p>
<p>14）、exit 退出。</p>
<p>15）、#表示注释</p>
<h2 id="git配置"><a href="#git配置" class="headerlink" title="git配置"></a>git配置</h2><h3 id="查看配置-git-config-l"><a href="#查看配置-git-config-l" class="headerlink" title="查看配置 git config -l"></a>查看配置 git config -l</h3><p><img src="https://s1.ax1x.com/2020/10/16/07jUEt.png" alt="07jUEt.png"></p>
<h3 id="查看不同级别的配置文件："><a href="#查看不同级别的配置文件：" class="headerlink" title="查看不同级别的配置文件："></a>查看不同级别的配置文件：</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">#查看系统config</span><br><span class="line">git config --system --list</span><br><span class="line">　　</span><br><span class="line">#查看当前用户（global）配置</span><br><span class="line">git config --global  --list</span><br></pre></td></tr></table></figure>

<h3 id="Git相关的配置文件："><a href="#Git相关的配置文件：" class="headerlink" title="Git相关的配置文件："></a><strong>Git相关的配置文件：</strong></h3><p>1）、Git\etc\gitconfig  ：Git 安装目录下的 gitconfig   –system 系统级</p>
<p>2）、C:\Users\Administrator\ .gitconfig   只适用于当前登录用户的配置  –global 全局</p>
<h3 id="设置用户名与邮箱（用户标识，必要）"><a href="#设置用户名与邮箱（用户标识，必要）" class="headerlink" title="设置用户名与邮箱（用户标识，必要）"></a>设置用户名与邮箱（用户标识，必要）</h3><p>当你安装Git后首先要做的事情是设置你的用户名称和e-mail地址。这是非常重要的，因为每次Git提交都会使用该信息。它被永远的嵌入到了你的提交中：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">git config --global user.name &quot;kuangshen&quot;  #名称</span><br><span class="line">git config --global user.email 24736743@qq.com   #邮箱</span><br></pre></td></tr></table></figure>

<p>只需要做一次这个设置，如果你传递了–global 选项，因为Git将总是会使用该信息来处理你在系统中所做的一切操作。如果你希望在一个特定的项目中使用不同的名称或e-mail地址，你可以在该项目中运行该命令而不要–global选项。总之–global为全局配置，不加为某个项目的特定配置。</p>
<h1 id="Git基本理论（核心）"><a href="#Git基本理论（核心）" class="headerlink" title="Git基本理论（核心）"></a>Git基本理论（核心）</h1><h2 id="git本地有三个工作区域"><a href="#git本地有三个工作区域" class="headerlink" title="git本地有三个工作区域"></a>git本地有三个工作区域</h2><p>Git本地有三个工作区域：工作目录（Working Directory）、暂存区(Stage/Index)、资源库(Repository或Git Directory)。如果在加上远程的git仓库(Remote Directory)就可以分为四个工作区域。文件在这四个区域之间的转换关系如下：</p>
<p><a href="https://imgchr.com/i/07vurj"><img src="https://s1.ax1x.com/2020/10/16/07vurj.png" alt="07vurj.png"></a></p>
<ul>
<li>Workspace：工作区，就是你平时存放项目代码的地方</li>
<li>Index / Stage：暂存区，用于临时存放你的改动，事实上它只是一个文件，保存即将提交到文件列表信息</li>
<li>Repository：仓库区（或本地仓库），就是安全存放数据的位置，这里面有你提交到所有版本的数据。其中HEAD指向最新放入仓库的版本</li>
<li>Remote：远程仓库，托管代码的服务器，可以简单的认为是你项目组中的一台电脑用于远程数据交换</li>
</ul>
<p>本地的三个区域确切的说应该是git仓库中HEAD指向的版本：</p>
<p><img src="https://s1.ax1x.com/2020/10/16/07vri6.png" alt="07vri6.png"></p>
<ul>
<li>Directory：使用Git管理的一个目录，也就是一个仓库，包含我们的工作空间和Git的管理空间。</li>
<li>WorkSpace：需要通过Git进行版本控制的目录和文件，这些目录和文件组成了工作空间。</li>
<li>.git：存放Git管理信息的目录，初始化仓库的时候自动创建。</li>
<li>Index/Stage：暂存区，或者叫待提交更新区，在提交进入repo之前，我们可以把所有的更新放在暂存区。</li>
<li>Local Repo：本地仓库，一个存放在本地的版本库；HEAD会只是当前的开发分支（branch）。</li>
<li>Stash：隐藏，是一个工作状态保存栈，用于保存/恢复WorkSpace中的临时状态。</li>
</ul>
<h2 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h2><p>git的工作流程一般是这样的：</p>
<p>１、在工作目录中添加、修改文件；</p>
<p>２、将需要进行版本管理的文件放入暂存区域；</p>
<p>３、将暂存区域的文件提交到git仓库。</p>
<p>因此，git管理的文件有三种状态：已修改（modified）,已暂存（staged）,已提交(committed)</p>
<p><img src="https://s1.ax1x.com/2020/10/16/07v6zD.png" alt="07v6zD.png"></p>
<h1 id="Git项目搭建"><a href="#Git项目搭建" class="headerlink" title="Git项目搭建"></a>Git项目搭建</h1><h2 id="创建工作目录与常用指令"><a href="#创建工作目录与常用指令" class="headerlink" title="创建工作目录与常用指令"></a>创建工作目录与常用指令</h2><p>工作目录（WorkSpace)一般就是你希望Git帮助你管理的文件夹，可以是你项目的目录，也可以是一个空目录，建议不要有中文。</p>
<p>日常使用只要记住下图6个命令：</p>
<p><img src="https://s1.ax1x.com/2020/10/16/0Hpbhq.png" alt="0Hpbhq.png"></p>
<h2 id="本地仓库搭建"><a href="#本地仓库搭建" class="headerlink" title="本地仓库搭建"></a>本地仓库搭建</h2><p>创建本地仓库的方法有两种：一种是创建全新的仓库，另一种是克隆远程仓库。</p>
<h3 id="创建全新的仓库"><a href="#创建全新的仓库" class="headerlink" title="创建全新的仓库"></a>创建全新的仓库</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># 在当前目录新建一个Git代码库</span><br><span class="line">$ git init</span><br></pre></td></tr></table></figure>

<p>执行后可以看到，仅仅在项目目录多出了一个.git目录，关于版本等的所有信息都在这个目录里面。</p>
<h3 id="克隆远程仓库"><a href="#克隆远程仓库" class="headerlink" title="克隆远程仓库"></a>克隆远程仓库</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># 克隆一个项目和它的整个代码历史(版本信息)</span><br><span class="line">$ git clone [url]  # https://gitee.com/kuangstudy/openclass.git</span><br></pre></td></tr></table></figure>

<p>是将远程服务器上的仓库完全镜像一份至本地！</p>
<h1 id="Git文件操作"><a href="#Git文件操作" class="headerlink" title="Git文件操作"></a>Git文件操作</h1><h2 id="文件的四种状态"><a href="#文件的四种状态" class="headerlink" title="文件的四种状态"></a>文件的四种状态</h2><p>版本控制就是对文件的版本控制，要对文件进行修改、提交等操作，首先要知道文件当前在什么状态，不然可能会提交了现在还不想提交的文件，或者要提交的文件没提交上。</p>
<ul>
<li>Untracked: 未跟踪, 此文件在文件夹中, 但并没有加入到git库, 不参与版本控制. 通过<strong>git add</strong> 状态变为<strong>Staged</strong>.</li>
<li>Unmodify: 文件已经入库, 未修改, 即版本库中的文件快照内容与文件夹中完全一致. 这种类型的文件有两种去处, 如果它被修改, 而变为Modified. 如果使用git rm移出版本库, 则成为Untracked文件</li>
<li>Modified: 文件已修改, 仅仅是修改, 并没有进行其他的操作. 这个文件也有两个去处, 通过git add可进入暂存staged状态, 使用git checkout 则丢弃修改过, 返回到unmodify状态, 这个git checkout即从库中取出文件, 覆盖当前修改 !</li>
<li>Staged: 暂存状态. 执行git commit则将修改同步到库中, 这时库中的文件和本地文件又变为一致, 文件为Unmodify状态. 执行git reset HEAD filename取消暂存, 文件状态为Modified</li>
</ul>
<h2 id="查看文件状态"><a href="#查看文件状态" class="headerlink" title="查看文件状态"></a>查看文件状态</h2><p>上面说文件有4种状态，通过如下命令可以查看到文件的状态：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">#查看指定文件状态</span><br><span class="line">git status [filename]</span><br><span class="line"></span><br><span class="line">#查看所有文件状态</span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"># git add .                  添加所有文件到暂存区</span><br><span class="line"># git commit -m &quot;消息内容&quot;    提交暂存区中的内容到本地仓库 -m 提交信息</span><br></pre></td></tr></table></figure>

<h2 id="忽略文件"><a href="#忽略文件" class="headerlink" title="忽略文件"></a>忽略文件</h2><p>有些时候我们不想把某些文件纳入版本控制中，比如数据库文件，临时文件，设计文件等</p>
<p>在主目录下建立”.gitignore”文件，此文件有如下规则：</p>
<ol>
<li><p>忽略文件中的空行或以井号（#）开始的行将会被忽略。</p>
</li>
<li><p>可以使用Linux通配符。例如：星号（*）代表任意多个字符，问号（？）代表一个字符，方括号（[abc]）代表可选字符范围，大括号（{string1,string2,…}）代表可选的字符串等。</p>
</li>
<li><p>如果名称的最前面有一个感叹号（!），表示例外规则，将不被忽略。</p>
</li>
<li><p>如果名称的最前面是一个路径分隔符（/），表示要忽略的文件在此目录下，而子目录中的文件不忽略。</p>
</li>
<li><p>如果名称的最后面是一个路径分隔符（/），表示要忽略的是此目录下该名称的子目录，而非文件（默认文件或目录都忽略）。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">#为注释</span><br><span class="line">*.txt        #忽略所有 .txt结尾的文件,这样的话上传就不会被选中！</span><br><span class="line">!lib.txt     #但lib.txt除外</span><br><span class="line">/temp        #仅忽略项目根目录下的TODO文件,不包括其它目录temp</span><br><span class="line">build/       #忽略build/目录下的所有文件</span><br><span class="line">doc/*.txt    #会忽略 doc/notes.txt 但不包括 doc/server/arch.txt</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="码云的使用"><a href="#码云的使用" class="headerlink" title="码云的使用"></a>码云的使用</h1><p><a href="https://www.bilibili.com/video/BV1FE411P7B3?p=10">参考视频</a></p>
<h1 id="git分支"><a href="#git分支" class="headerlink" title="git分支"></a>git分支</h1>]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>版本控制</tag>
      </tags>
  </entry>
  <entry>
    <title>java学习</title>
    <url>/blog/2020/10/06/java%E9%AB%98%E7%BA%A7%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<p>java介绍</p>
<a id="more"></a>

<h1 id="java泛型"><a href="#java泛型" class="headerlink" title="java泛型"></a>java泛型</h1><blockquote>
<p>Java泛型方法和泛型类支持程序员使用一个方法指定一组相关方法，或者使用一个类指定一组相关的类型。</p>
<p>Java泛型（generics）是JDK 5中引入的一个新特性,泛型提供了编译时类型安全检测机制，该机制允许程序员在编译时检测到非法的类型。</p>
<p> 使用Java泛型的概念，我们可以写一个泛型方法来对一个对象数组排序。然后，调用该泛型方法来对整型数组、浮点数数组、字符串数组等进行排序。</p>
</blockquote>
<h2 id="泛型方法"><a href="#泛型方法" class="headerlink" title="泛型方法"></a>泛型方法</h2><blockquote>
<p>可以写一个方法，该方法在调用时可以接收不同类型的参数。根据传递给泛型方法的参数类型，编译器适当地处理每一个方法调用</p>
</blockquote>
<ul>
<li><p>定义泛型方法的规则</p>
<ul>
<li>所有泛型方法声明都有一个参数声明部分（由尖括号分隔），该类型参数声明部分在方法返回类型之前</li>
<li>每一个类型参数声明部分都包含一个或多个类型参数，参数间用逗号隔开。一个泛型参数，也被称为一个类型变量，是用于指定一个泛型类型名称的标识符。</li>
<li>类型参数能被用来声明返回值类型，并且能作为泛型方法得到的实际参数类型的占位符</li>
<li>泛型方法方法体的声明和其他方法一样。</li>
</ul>
<p><strong>注意：</strong> 类型参数只能代表引用类型，不能是原始类型（像int，double，char等）</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">	<span class="comment">//泛型方法</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> &lt;E&gt; <span class="function"><span class="keyword">void</span> <span class="title">printArray</span><span class="params">(E[] inputArray)</span></span>&#123;</span><br><span class="line">		<span class="comment">//输出数组元素</span></span><br><span class="line">		<span class="keyword">for</span>(E element:inputArray)&#123;</span><br><span class="line">			System.out.printf(<span class="string">&quot;%s &quot;</span>,element);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] ages)</span></span>&#123;</span><br><span class="line">		<span class="comment">//创建不同类型数组</span></span><br><span class="line">		Integer[] intArray = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">		Double[] doubleArray = &#123;<span class="number">1.1</span>,<span class="number">2.2</span>,<span class="number">3.3</span>,<span class="number">4.4</span>&#125;;</span><br><span class="line">		Character[] charArray = &#123;<span class="string">&#x27;H&#x27;</span>,<span class="string">&#x27;E&#x27;</span>,<span class="string">&#x27;L&#x27;</span>,<span class="string">&#x27;K&#x27;</span>&#125;;</span><br><span class="line">		System.out.println(<span class="string">&quot;Array integerArray contains:&quot;</span>);</span><br><span class="line">		printArray(intArray);</span><br><span class="line">		System.out.println(<span class="string">&quot;Array doubleArray contains:&quot;</span>);</span><br><span class="line">		printArray(doubleArray);</span><br><span class="line">		System.out.println(<span class="string">&quot;Array characterArray contains:&quot;</span>);</span><br><span class="line">		printArray(charArray);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">运行结果：</span><br><span class="line">    Array integerArray contains:</span><br><span class="line">    <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line">    Array doubleArray contains:</span><br><span class="line">    <span class="number">1.1</span> <span class="number">2.2</span> <span class="number">3.3</span> <span class="number">4.4</span></span><br><span class="line">    Array characterArray contains:</span><br><span class="line">    H E L K</span><br></pre></td></tr></table></figure>

<h2 id="有界类型参数"><a href="#有界类型参数" class="headerlink" title="有界类型参数"></a>有界类型参数</h2><blockquote>
<p>可能有时候，你会想限制那些被允许传递到一个类型参数的类型种类范围。例如，一个操作数字的方法可能只希望接受Number或者Number子类的实例。这就是有界类型参数的目的。</p>
</blockquote>
<p>要声明一个有界的类型参数，首先列出类型参数的名称，后跟extends关键字，最后紧跟它的上界。</p>
<p><strong>实例：</strong></p>
<p>下面的例子演示了”extends”如何使用在一般意义上的意思”extends”（类）或者”implements”（接口）。该例子中的泛型方法返回三个可比较对象的最大值。 </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">   <span class="comment">// 比较三个值并返回最大值</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends Comparable&lt;T&gt;&gt; Tmaximum(T x, T y, T z)&#123;                     </span><br><span class="line">      T max = x; <span class="comment">// 假设x是初始最大值</span></span><br><span class="line">      <span class="keyword">if</span> ( y.compareTo( max ) &gt; <span class="number">0</span> )&#123;</span><br><span class="line">         max = y; <span class="comment">//y 更大</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> ( z.compareTo( max ) &gt; <span class="number">0</span> )&#123;</span><br><span class="line">         max = z; <span class="comment">// 现在 z 更大           </span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> max; <span class="comment">// 返回最大对象</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( String args[] )</span></span>&#123;</span><br><span class="line">      System.out.printf( <span class="string">&quot;Max of %d, %d and %d is %d\n\n&quot;</span>,<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, maximum( <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ) );</span><br><span class="line"> 		System.out.printf( <span class="string">&quot;Maxm of %.1f,%.1f and %.1f is %.1f\n\n&quot;</span>,<span class="number">6.6</span>, <span class="number">8.8</span>, <span class="number">7.7</span>, maximum( <span class="number">6.6</span>, <span class="number">8.8</span>, <span class="number">7.7</span> ) );</span><br><span class="line"> 		System.out.printf( <span class="string">&quot;Max of %s, %s and %s is %s\n&quot;</span>,<span class="string">&quot;pear&quot;</span>,<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;orange&quot;</span>, maximum( <span class="string">&quot;pear&quot;</span>, <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;orange&quot;</span> ) );</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">    Maximum of <span class="number">3</span>, <span class="number">4</span> and <span class="number">5</span> is <span class="number">5</span></span><br><span class="line">    Maximum of <span class="number">6.6</span>, <span class="number">8.8</span> and <span class="number">7.7</span> is <span class="number">8.8</span></span><br><span class="line">    Maximum of pear, apple and orange is pear</span><br></pre></td></tr></table></figure>

<h2 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h2><blockquote>
<p>泛型类的声明和非泛型类的声明类似，除了在类名后面添加了类型参数声明部分。 </p>
<p>和泛型方法一样，泛型类的类型参数声明部分也包含一个或多个类型参数，参数间用逗号隔开。一个泛型参数，也被称为一个类型变量，是用于指定一个泛型类型名称的标识符。因为他们接受一个或多个参数，这些类被称为参数化的类或参数化的类型。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Box</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> T t;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.t = t;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">     Box&lt;Integer&gt; integerBox = <span class="keyword">new</span> Box&lt;Integer&gt;();</span><br><span class="line">     Box&lt;String&gt; stringBox = <span class="keyword">new</span> Box&lt;String&gt;();</span><br><span class="line">   </span><br><span class="line">     integerBox.add(<span class="keyword">new</span> Integer(<span class="number">10</span>));</span><br><span class="line">     stringBox.add(<span class="keyword">new</span> String(<span class="string">&quot;Hello World&quot;</span>));</span><br><span class="line"> </span><br><span class="line">     System.out.printf(<span class="string">&quot;Integer Value :%d\n\n&quot;</span>, integerBox.get());</span><br><span class="line">     System.out.printf(<span class="string">&quot;String Value :%s\n&quot;</span>, stringBox.get());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">    Integer Value :<span class="number">10</span></span><br><span class="line">	String Value :Hello World</span><br></pre></td></tr></table></figure>

<h1 id="Java序列化"><a href="#Java序列化" class="headerlink" title="Java序列化"></a>Java序列化</h1><p>Java 提供了一种对象序列化的机制，该机制中，一个对象可以被表示为一个字节序列，该字节序列包括该对象的数据、有关对象的类型的信息和存储在对象中数据的类型。 </p>
<p>将序列化对象写入文件之后，可以从文件中读取出来，并且对它进行反序列化，也就是说，对象的类型信息、对象的数据，还有对象中的数据类型可以用来在内存中新建对象。 </p>
<p>整个过程都是Java虚拟机（JVM）独立的，也就是说，在一个平台上序列化的对象可以在另一个完全不同的平台上反序列化该对象。 </p>
<p>类<code>ObjectInputStream </code>和<code>ObjectOutputStream</code>是高层次的数据流，它们包含序列化和反序列化对象的方法。 </p>
<p><code>ObjectOutputStream </code>类包含很多写方法来写各种数据类型，但是一个特别的方法例外：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">(Object x)</span> <span class="keyword">throws</span> IOException</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>java复习</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>复习</tag>
        <tag>随笔</tag>
      </tags>
  </entry>
  <entry>
    <title>oracle11g在windows环境下完全卸载</title>
    <url>/blog/2020/10/09/oracle11g%E5%9C%A8windows10%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%8C%E5%85%A8%E5%8D%B8%E8%BD%BD/</url>
    <content><![CDATA[<p>oracle11g卸载</p>
<a id="more"></a>

<h1 id="1-停止所有oracle相关的服务"><a href="#1-停止所有oracle相关的服务" class="headerlink" title="1.停止所有oracle相关的服务"></a>1.停止所有oracle相关的服务</h1><p><strong>步骤：控制面板－＞管理工具－＞服务停止所有Oracle服务</strong>。</p>
<p><img src="https://i.loli.net/2020/10/09/grk6Vv7IhOU4Tit.png" alt="image.png"></p>
<h1 id="2-卸载oracle"><a href="#2-卸载oracle" class="headerlink" title="2.卸载oracle"></a>2.卸载oracle</h1><p>搜索Universal Installer</p>
<p><img src="https://i.loli.net/2020/10/09/RJ8N6LWY4ghbc1K.png" alt="image.png"></p>
<p>点击卸载产品</p>
<p><img src="https://i.loli.net/2020/10/09/WublcLNPkT2azKI.png" alt="image.png"></p>
<p>注意这个目录不要选</p>
<p><img src="https://i.loli.net/2020/10/09/pnL4Qy9EV1HYfeb.png" alt="image.png"></p>
<p>然后点击删除，选择是</p>
<p><img src="https://i.loli.net/2020/10/09/WZBaO3stIGAYCiE.png" alt="image.png"></p>
<p>删除中</p>
<p><img src="https://i.loli.net/2020/10/09/WMjbPrHtXsBpy8k.png" alt="image.png"></p>
<p>卸载完成之后，点击关闭</p>
<p><img src="https://i.loli.net/2020/10/09/IVkDUjebtAo12hg.png" alt="image.png"></p>
<p>关闭窗口</p>
<p><img src="https://i.loli.net/2020/10/09/8rSPC3hsDTE6jFN.png" alt="image.png"></p>
<h1 id="3-清空注册表"><a href="#3-清空注册表" class="headerlink" title="3.清空注册表"></a>3.清空注册表</h1><p>windows+R键-&gt;输入regedit-&gt;回车 打开注册表</p>
<p>找到HKEY_LOCAL_MACHINE -&gt;SOFTWARE-&gt;ORACLE 删除ORACLE及其子项（直接删除ORACLE目录）</p>
<p><img src="https://i.loli.net/2020/10/09/EfyRuCnwoHtmgIv.png" alt="image.png"></p>
<p>找到HKEY_LOCAL_MACHINE-&gt;SYSTEM-&gt;CurrentControlSet-&gt;Services中，删除所有oracle开头的服务。</p>
<p><img src="https://i.loli.net/2020/10/09/DjAsPRXC37Oalqz.png" alt="image.png"></p>
<p>找到HKEY_LOCAL_MACHINE-&gt;SYSTEM-&gt;CurrentControlSet-&gt;Services-&gt;Eventlog-&gt;Application，删除所有oracle开头的项</p>
<p><img src="https://i.loli.net/2020/10/09/6ZHcRhgpaQO1Irl.png" alt="image.png"></p>
<p>在HKEY_CLASSES_ROOT，删除以ora开头的项</p>
<p><img src="https://i.loli.net/2020/10/09/saiW1OEmRBgz8xP.png" alt="image.png"></p>
<h1 id="4-重启电脑"><a href="#4-重启电脑" class="headerlink" title="4.重启电脑"></a>4.重启电脑</h1><h1 id="5-删除安装目录"><a href="#5-删除安装目录" class="headerlink" title="5.删除安装目录"></a>5.删除安装目录</h1>]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>oracle</tag>
        <tag>工作日志</tag>
      </tags>
  </entry>
  <entry>
    <title>oracle11g创建用户并指定表空间</title>
    <url>/blog/2020/10/19/oracle%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%B9%B6%E6%8C%87%E5%AE%9A%E8%A1%A8%E7%A9%BA%E9%97%B4/</url>
    <content><![CDATA[<p>oracle创建表空间并赋值给用户</p>
<a id="more"></a>





<h1 id="创建表空间"><a href="#创建表空间" class="headerlink" title="创建表空间"></a>创建表空间</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> eprk</span><br><span class="line"><span class="keyword">logging</span> <span class="keyword">datafile</span> <span class="string">&#x27;D:\oracle\oradata\orcl\eprk.dbf&#x27;</span><span class="comment">#表空间的路径</span></span><br><span class="line"><span class="keyword">size</span> <span class="number">100</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span></span><br><span class="line"><span class="keyword">next</span> <span class="number">50</span>m <span class="keyword">maxsize</span> <span class="number">20480</span>m <span class="keyword">extent</span> <span class="keyword">management</span> <span class="keyword">local</span>;</span><br></pre></td></tr></table></figure>

<h1 id="创建qh2用户并指定表空间"><a href="#创建qh2用户并指定表空间" class="headerlink" title="创建qh2用户并指定表空间"></a>创建qh2用户并指定表空间</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> qh2 <span class="keyword">identified</span> <span class="keyword">by</span> <span class="number">123456</span></span><br><span class="line"><span class="keyword">default</span> <span class="keyword">tablespace</span> eprk</span><br><span class="line"><span class="keyword">temporary</span> <span class="keyword">tablespace</span> temp profile <span class="keyword">default</span>;</span><br></pre></td></tr></table></figure>

<h1 id="给qh2用户授予权限"><a href="#给qh2用户授予权限" class="headerlink" title="给qh2用户授予权限"></a>给qh2用户授予权限</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">connect</span>,<span class="keyword">resource</span> <span class="keyword">to</span> qh2;</span><br><span class="line"><span class="keyword">grant</span> dba <span class="keyword">to</span> qh2;</span><br></pre></td></tr></table></figure>



<h1 id="远程导入dmp文件"><a href="#远程导入dmp文件" class="headerlink" title="远程导入dmp文件"></a>远程导入dmp文件</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">cd /d D:\oraclexe\app\oracle\product\11.2.0\server\bin</span><br><span class="line"></span><br><span class="line">imp qh2/123456@192.168.0.1:1521/orcl file=G:\global.dmp full=y</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>oracle</tag>
        <tag>工作日志</tag>
      </tags>
  </entry>
  <entry>
    <title>typora设置自动编号</title>
    <url>/blog/2020/10/14/typora%E8%AE%BE%E7%BD%AE%E6%A0%87%E9%A2%98%E8%87%AA%E5%8A%A8%E7%BC%96%E5%8F%B7/</url>
    <content><![CDATA[<p>设置主题文件</p>
<a id="more"></a>

<h1 id="找到主题文件"><a href="#找到主题文件" class="headerlink" title="找到主题文件"></a>找到主题文件</h1><p>文件-&gt;偏好设置-&gt;外观</p>
<p><img src="https://s1.ax1x.com/2020/10/14/052zV0.png" alt="052zV0.png"></p>
<h1 id="新建base-user-css文件"><a href="#新建base-user-css文件" class="headerlink" title="新建base.user.css文件"></a>新建base.user.css文件</h1><p><img src="https://s1.ax1x.com/2020/10/14/05WMT0.png" alt="05WMT0.png"></p>
<h1 id="添加代码"><a href="#添加代码" class="headerlink" title="添加代码"></a>添加代码</h1><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**************************************</span></span><br><span class="line"><span class="comment">* Header Counters in TOC</span></span><br><span class="line"><span class="comment">**************************************/</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/* No link underlines in TOC */</span></span><br><span class="line"><span class="selector-class">.md-toc-inner</span> &#123;</span><br><span class="line"><span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-content</span> &#123;</span><br><span class="line"><span class="attribute">counter-reset</span>: h1toc</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h1</span> &#123;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">1.5rem</span>;</span><br><span class="line"><span class="attribute">counter-reset</span>: h2toc</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h2</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">1.1rem</span>;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">2rem</span>;</span><br><span class="line"><span class="attribute">counter-reset</span>: h3toc</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h3</span> &#123;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">3rem</span>;</span><br><span class="line"><span class="attribute">font-size</span>: .<span class="number">9rem</span>;</span><br><span class="line"><span class="attribute">counter-reset</span>: h4toc</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h4</span> &#123;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">4rem</span>;</span><br><span class="line"><span class="attribute">font-size</span>: .<span class="number">85rem</span>;</span><br><span class="line"><span class="attribute">counter-reset</span>: h5toc</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h5</span> &#123;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">5rem</span>;</span><br><span class="line"><span class="attribute">font-size</span>: .<span class="number">8rem</span>;</span><br><span class="line"><span class="attribute">counter-reset</span>: h6toc</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h6</span> &#123;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">6rem</span>;</span><br><span class="line"><span class="attribute">font-size</span>: .<span class="number">75rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h1</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: black;</span><br><span class="line"><span class="attribute">counter-increment</span>: h1toc;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h1</span> <span class="selector-class">.md-toc-inner</span> &#123;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h2</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: black;</span><br><span class="line"><span class="attribute">counter-increment</span>: h2toc;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h2</span> <span class="selector-class">.md-toc-inner</span> &#123;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h3</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: black;</span><br><span class="line"><span class="attribute">counter-increment</span>: h3toc;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h3toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h3</span> <span class="selector-class">.md-toc-inner</span> &#123;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h4</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: black;</span><br><span class="line"><span class="attribute">counter-increment</span>: h4toc;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h3toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h4toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h4</span> <span class="selector-class">.md-toc-inner</span> &#123;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h5</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: black;</span><br><span class="line"><span class="attribute">counter-increment</span>: h5toc;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h3toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h4toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h5toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h5</span> <span class="selector-class">.md-toc-inner</span> &#123;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h6</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: black;</span><br><span class="line"><span class="attribute">counter-increment</span>: h6toc;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h3toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h4toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h5toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h6toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.md-toc-h6</span> <span class="selector-class">.md-toc-inner</span> &#123;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**************************************</span></span><br><span class="line"><span class="comment">* Header Counters in Content</span></span><br><span class="line"><span class="comment">**************************************/</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** initialize css counter */</span></span><br><span class="line"><span class="selector-id">#write</span> &#123;</span><br><span class="line"><span class="attribute">counter-reset</span>: h1</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line"><span class="attribute">counter-reset</span>: h2</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line"><span class="attribute">counter-reset</span>: h3</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-tag">h3</span> &#123;</span><br><span class="line"><span class="attribute">counter-reset</span>: h4</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-tag">h4</span> &#123;</span><br><span class="line"><span class="attribute">counter-reset</span>: h5</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-tag">h5</span> &#123;</span><br><span class="line"><span class="attribute">counter-reset</span>: h6</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** put counter result into headings */</span></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h1</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">counter-increment</span>: h1;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h2</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">counter-increment</span>: h2;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h3</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">h3</span><span class="selector-class">.md-focus</span><span class="selector-class">.md-heading</span><span class="selector-pseudo">:before</span> &#123; <span class="comment">/*override the default style for focused headings */</span></span><br><span class="line"><span class="attribute">counter-increment</span>: h3;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h4</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">h4</span><span class="selector-class">.md-focus</span><span class="selector-class">.md-heading</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">counter-increment</span>: h4;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h5</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">h5</span><span class="selector-class">.md-focus</span><span class="selector-class">.md-heading</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">counter-increment</span>: h5;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h5) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h6</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">h6</span><span class="selector-class">.md-focus</span><span class="selector-class">.md-heading</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">counter-increment</span>: h6;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h5) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h6) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** override the default style for focused headings */</span></span><br><span class="line"><span class="selector-id">#write</span>&gt;<span class="selector-tag">h3</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span>, <span class="selector-id">#write</span>&gt;<span class="selector-tag">h4</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span>, <span class="selector-id">#write</span>&gt;<span class="selector-tag">h5</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span>, <span class="selector-id">#write</span>&gt;<span class="selector-tag">h6</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">h3</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">h4</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">h5</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">h6</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: inherit;</span><br><span class="line"><span class="attribute">border</span>: inherit;</span><br><span class="line"><span class="attribute">border-radius</span>: inherit;</span><br><span class="line"><span class="attribute">position</span>: inherit;</span><br><span class="line"><span class="attribute">left</span>: initial;</span><br><span class="line"><span class="attribute">float</span>: none;</span><br><span class="line"><span class="attribute">top</span>: initial;</span><br><span class="line"><span class="attribute">font-size</span>: inherit;</span><br><span class="line"><span class="attribute">padding-left</span>: inherit;</span><br><span class="line"><span class="attribute">padding-right</span>: inherit;</span><br><span class="line"><span class="attribute">vertical-align</span>: inherit;</span><br><span class="line"><span class="attribute">font-weight</span>: inherit;</span><br><span class="line"><span class="attribute">line-height</span>: inherit;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**************************************</span></span><br><span class="line"><span class="comment">* Header Counters in sidebar</span></span><br><span class="line"><span class="comment">**************************************/</span></span><br><span class="line"><span class="selector-class">.sidebar-content</span> &#123;</span><br><span class="line"><span class="attribute">counter-reset</span>: h1</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.outline-h1</span> &#123;</span><br><span class="line"><span class="attribute">counter-reset</span>: h2</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.outline-h2</span> &#123;</span><br><span class="line"><span class="attribute">counter-reset</span>: h3</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.outline-h3</span> &#123;</span><br><span class="line"><span class="attribute">counter-reset</span>: h4</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.outline-h4</span> &#123;</span><br><span class="line"><span class="attribute">counter-reset</span>: h5</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.outline-h5</span> &#123;</span><br><span class="line"><span class="attribute">counter-reset</span>: h6</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.outline-h1</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">counter-increment</span>: h1;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.outline-h2</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">counter-increment</span>: h2;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.outline-h3</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">counter-increment</span>: h3;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.outline-h4</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">counter-increment</span>: h4;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.outline-h5</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">counter-increment</span>: h5;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h5) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.outline-h6</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">counter-increment</span>: h6;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h5) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h6) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h1><p><strong>参考文章</strong>：<a href="https://blog.csdn.net/zhongqi2513/article/details/105123345/?utm_medium=distribute.pc_relevant.none-task-blog-title-6">https://blog.csdn.net/zhongqi2513/article/details/105123345/?utm_medium=distribute.pc_relevant.none-task-blog-title-6</a></p>
]]></content>
      <categories>
        <category>typora</category>
      </categories>
      <tags>
        <tag>工作日志</tag>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue.js学习</title>
    <url>/blog/2020/10/23/vue%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<p>Vue是一个渐进式的框架，意味着你可以将Vue作为你应用的一部分嵌入其中，带来丰富的交互体验</p>
<a id="more"></a>

<h1 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h1><p><a href="https://imgchr.com/i/BQfGRI"><img src="https://s1.ax1x.com/2020/10/27/BQfGRI.png" alt="BQfGRI.png"></a></p>
<h1 id="Vue-引言"><a href="#Vue-引言" class="headerlink" title="Vue 引言"></a>Vue 引言</h1><blockquote>
<p><code>渐进式</code> JavaScript 框架   –摘自官网</p>
</blockquote>
<h2 id="渐进式"><a href="#渐进式" class="headerlink" title="渐进式"></a>渐进式</h2><pre><code>  1. 易用  html css javascript
  2. 高效  开发前端页面 非常高效 
  3. 灵活  开发灵活 多样性</code></pre>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>Vue 是一个javascript 框架</p>
<h2 id="后端服务端开发人员"><a href="#后端服务端开发人员" class="headerlink" title="后端服务端开发人员:"></a>后端服务端开发人员:</h2><p>Vue 渐进式javascript框架: 让我们通过操作很少的DOM,甚至不需要操作页面中任何DOM元素,就很容易的完成数据和视图绑定  双向绑定 MVVM  </p>
<p>注意: 日后在使用Vue过程中页面中不要在引入Jquery框架</p>
<p>htmlcss—&gt;javascript —–&gt;jquery—-&gt;angularjs —–&gt; Vue</p>
<h2 id="Vue-作者"><a href="#Vue-作者" class="headerlink" title="Vue 作者"></a>Vue 作者</h2><pre><code>      尤雨溪   国内的    </code></pre>
<h1 id="Vue入门"><a href="#Vue入门" class="headerlink" title="Vue入门"></a>Vue入门</h1><h2 id="下载Vuejs"><a href="#下载Vuejs" class="headerlink" title="下载Vuejs"></a>下载Vuejs</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//开发版本:</span></span><br><span class="line">&lt;!-- 开发环境版本，包含了有帮助的命令行警告 --&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//生产版本:</span></span><br><span class="line">&lt;!-- 生产环境版本，优化了尺寸和速度 --&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Vue第一个入门应用"><a href="#Vue第一个入门应用" class="headerlink" title="Vue第一个入门应用"></a>Vue第一个入门应用</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">&#x27;#app&#x27;</span>,<span class="comment">//element 用来给Vue实例定义一个作用范围</span></span></span><br><span class="line"><span class="javascript">        data:&#123;<span class="comment">//用来给Vue实例定义一些相关数据</span></span></span><br><span class="line"><span class="javascript">            message:<span class="string">&quot;你好&quot;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结:"></a>总结:</h2><ul>
<li>1.vue实例(对象)中el属性:     代表Vue的作用范围  日后在Vue的作用范围内都可以使用Vue的语法</li>
<li>2.vue实例(对象)中data属性: 用来给Vue实例绑定一些相关数据, 绑定的数据可以通过在Vue作用范围内取出</li>
<li>3.在使用<code>&#123;&#123;&#125;&#125;`进行获取data中数据时,可以在`&#123;&#123;&#125;&#125;</code>中书写表达式,运算符,调用相关方法,以及逻辑运算等</li>
<li>4.el属性中可以书写任意的CSS选择器[jquery选择器],但是在使用Vue开发是推荐使用 id选择器</li>
</ul>
<h1 id="v-text和v-html"><a href="#v-text和v-html" class="headerlink" title="v-text和v-html"></a>v-text和v-html</h1><blockquote>
<p><code>v-text</code>:用来获取data中数据将数据以文本的形式渲染到指定标签内部             类似于javascript 中 innerText</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><ul>
<li>1.<code>&#123;&#123;&#125;&#125;</code>(插值表达式)和v-text获取数据的区别在于 <ul>
<li>a.使用v-text取值会将标签中原有的数据覆盖 使用插值表达式的形式不会覆盖标签原有的数据</li>
<li>b.使用v-text可以避免在网络环境较差的情况下出现插值闪烁</li>
</ul>
</li>
</ul>
<h2 id="v-html"><a href="#v-html" class="headerlink" title="v-html"></a>v-html</h2><blockquote>
<p>v-html`:用来获取data中数据将数据中含有的html标签先解析在渲染到指定标签的内部  类似于javascript中 innerHTML</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-text</span>=<span class="string">&quot;message&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-html</span>=<span class="string">&quot;link2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入vue.js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">&#x27;#app&#x27;</span>,<span class="comment">//element 用来给Vue实例定义一个作用范围</span></span></span><br><span class="line"><span class="javascript">        data:&#123;<span class="comment">//用来给Vue实例定义一些相关数据</span></span></span><br><span class="line"><span class="javascript">            message:<span class="string">&quot;你好&quot;</span>,</span></span><br><span class="line"><span class="handlebars"><span class="xml">            link2:&quot;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;www.baidu.com&#x27;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span>&quot;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a href="https://imgchr.com/i/BF4Pp9"><img src="https://s1.ax1x.com/2020/10/22/BF4Pp9.png" alt="BF4Pp9.png"></a></p>
<h1 id="vue中事件绑定-v-on"><a href="#vue中事件绑定-v-on" class="headerlink" title="vue中事件绑定(v-on)"></a>vue中事件绑定(v-on)</h1><h2 id="绑定事件基本语法"><a href="#绑定事件基本语法" class="headerlink" title="绑定事件基本语法"></a>绑定事件基本语法</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-text</span>=<span class="string">&quot;message&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-html</span>=<span class="string">&quot;link2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span> <span class="attr">value</span>=<span class="string">&quot;+&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;sub&quot;</span> <span class="attr">value</span>=<span class="string">&quot;-&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入vue.js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">&#x27;#app&#x27;</span>,<span class="comment">//element 用来给Vue实例定义一个作用范围</span></span></span><br><span class="line"><span class="javascript">        data:&#123;<span class="comment">//用来给Vue实例定义一些相关数据</span></span></span><br><span class="line"><span class="javascript">            message:<span class="string">&quot;你好&quot;</span>,</span></span><br><span class="line"><span class="handlebars"><span class="xml">            link2:&quot;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;www.baidu.com&#x27;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span>&quot;,</span></span></span><br><span class="line">            age:23</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        methods:&#123;<span class="comment">//methods 用来定义vue中事件</span></span></span><br><span class="line"><span class="javascript">            add:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.age++;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            sub()&#123;</span><br><span class="line"><span class="javascript">              <span class="keyword">if</span> (<span class="built_in">this</span>.age&lt;<span class="number">10</span>)&#123;</span></span><br><span class="line"><span class="javascript">                  alert(<span class="string">&quot;已经很小了&quot;</span>);</span></span><br><span class="line"><span class="javascript">              &#125;   <span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                  <span class="built_in">this</span>.age--;</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a href="https://imgchr.com/i/BFIgSJ"><img src="https://s1.ax1x.com/2020/10/22/BFIgSJ.png" alt="BFIgSJ.png"></a></p>
<h2 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a>总结</h2><p>事件  事件源:发生事件dom元素  事件: 发生特定的动作  click….  监听器  发生特定动作之后的事件处理程序 通常是js中函数<br>    1.在vue中绑定事件是通过v-on指令来完成的 v-on:事件名 如  v-on:click<br>    2.在v-on:事件名的赋值语句中是当前时间触发调用的函数名<br>    3.在vue中事件的函数统一定义在Vue实例的methods属性中<br>    4.在vue定义的事件中this指的就是当前的Vue实例,日后可以在事件中通过使用this获取Vue实例中相关数据</p>
<h2 id="Vue事件参数传递"><a href="#Vue事件参数传递" class="headerlink" title="Vue事件参数传递"></a>Vue事件参数传递</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-text</span>=<span class="string">&quot;message&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-html</span>=<span class="string">&quot;link2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span> <span class="attr">value</span>=<span class="string">&quot;+&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;sub&quot;</span> <span class="attr">value</span>=<span class="string">&quot;-&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;change(100,&#x27;张三&#x27;)&quot;</span> <span class="attr">value</span>=<span class="string">&quot;改成100岁&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入vue.js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">&#x27;#app&#x27;</span>,<span class="comment">//element 用来给Vue实例定义一个作用范围</span></span></span><br><span class="line"><span class="javascript">        data:&#123;<span class="comment">//用来给Vue实例定义一些相关数据</span></span></span><br><span class="line"><span class="javascript">            message:<span class="string">&quot;你好&quot;</span>,</span></span><br><span class="line"><span class="handlebars"><span class="xml">            link2:&quot;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;www.baidu.com&#x27;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span>&quot;,</span></span></span><br><span class="line">            age:23</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        methods:&#123;<span class="comment">//methods 用来定义vue中事件</span></span></span><br><span class="line"><span class="javascript">            add:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.age++;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            sub()&#123;</span><br><span class="line"><span class="javascript">              <span class="keyword">if</span> (<span class="built_in">this</span>.age&lt;<span class="number">10</span>)&#123;</span></span><br><span class="line"><span class="javascript">                  alert(<span class="string">&quot;已经很小了&quot;</span>);</span></span><br><span class="line"><span class="javascript">              &#125;   <span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                  <span class="built_in">this</span>.age--;</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            change(count,name)&#123;</span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.age=count;</span></span><br><span class="line">                alert(name);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a href="https://imgchr.com/i/BFolc9"><img src="https://s1.ax1x.com/2020/10/22/BFolc9.png" alt="BFolc9.png"></a></p>
<h2 id="总结-4"><a href="#总结-4" class="headerlink" title="总结"></a>总结</h2><blockquote>
<p>在使用事件时,可以直接在事件调用出给事件进行参数传递,在事件定义出通过定义对应变量接收传递的参数</p>
</blockquote>
<h1 id="v-show-v-if-v-bind"><a href="#v-show-v-if-v-bind" class="headerlink" title="v-show v-if v-bind"></a>v-show v-if v-bind</h1><h2 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a>v-show</h2><blockquote>
<p><code>v-show</code>:用来控制页面中某个标签元素是否展示        底层使用控制是 display 属性</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:v-on</span>=<span class="string">&quot;http://www.w3.org/1999/xhtml&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        v-show: 用来控制标签展示还是隐藏的</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;show&quot;</span> <span class="attr">v-text</span>=<span class="string">&quot;message&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点击展示隐藏内容&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;look&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入vue.js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line">        data:&#123;</span><br><span class="line"><span class="javascript">            message:<span class="string">&quot;你好啊&quot;</span>,</span></span><br><span class="line"><span class="javascript">        show:<span class="literal">false</span></span></span><br><span class="line">        &#125;,methods:&#123;</span><br><span class="line">         look()&#123;</span><br><span class="line"><span class="javascript">             <span class="built_in">this</span>.show = !<span class="built_in">this</span>.show;</span></span><br><span class="line">         &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a href="https://imgchr.com/i/BENEpF"><img src="https://s1.ax1x.com/2020/10/23/BENEpF.md.png" alt="BENEpF.md.png"></a></p>
<p><strong>虽然页面上面没有显示元素，但是通过审查元素还是可以看见</strong></p>
<h2 id="总结-5"><a href="#总结-5" class="headerlink" title="总结"></a>总结</h2><ul>
<li>1.在使用v-show时可以直接书写boolean值控制元素展示,也可以通过变量控制标签展示和隐藏</li>
<li>2.在v-show中可以通过boolean表达式控制标签的展示课隐藏    </li>
</ul>
<h2 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a>v-if</h2><blockquote>
<p>v-if`: 用来控制页面元素是否展示                底层控制是DOM元素    操作DOM</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:v-on</span>=<span class="string">&quot;http://www.w3.org/1999/xhtml&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-if</span>=<span class="string">&quot;show&quot;</span> <span class="attr">v-text</span>=<span class="string">&quot;message&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点击展示隐藏内容&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;look&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入vue.js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line">        data:&#123;</span><br><span class="line"><span class="javascript">            message:<span class="string">&quot;你好啊&quot;</span>,</span></span><br><span class="line"><span class="javascript">        show:<span class="literal">false</span></span></span><br><span class="line">        &#125;,methods:&#123;</span><br><span class="line">         look()&#123;</span><br><span class="line"><span class="javascript">             <span class="built_in">this</span>.show = !<span class="built_in">this</span>.show;</span></span><br><span class="line">         &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a href="https://imgchr.com/i/BEUS3D"><img src="https://s1.ax1x.com/2020/10/23/BEUS3D.png" alt="BEUS3D.png"></a></p>
<p><strong>可以看到，通过v-if操作的在审查元素中不存在</strong></p>
<h2 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a>v-bind</h2><blockquote>
<p><code> v-bind</code>: 用来绑定标签的属性从而通过vue动态修改标签的属性</p>
<p>vue为了方便我们日后绑定标签的属性提供了对属性绑定的简化写法如 <code>v-bind:属性名</code> 简化之后 <code>:属性名</code></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:v-bind</span>=<span class="string">&quot;http://www.w3.org/1999/xhtml&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:title</span>=<span class="string">&quot;msg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://dss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3892521478,1695688217&amp;fm=26&amp;gp=0.jpg&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;change&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;msg2&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入vue.js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line">        data:&#123;</span><br><span class="line"><span class="javascript">            msg:<span class="string">&quot;你好啊&quot;</span>,</span></span><br><span class="line"><span class="javascript">            msg2:<span class="string">&quot;点击改变图片标题和按钮值&quot;</span>,</span></span><br><span class="line">        &#125;,methods:&#123;</span><br><span class="line">            change()&#123;</span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.msg=<span class="string">&quot;hello&quot;</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.msg2=<span class="string">&quot;按钮改变了！&quot;</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>点击前</li>
</ul>
<p><a href="https://imgchr.com/i/BEax6e"><img src="https://s1.ax1x.com/2020/10/23/BEax6e.png" alt="BEax6e.png"></a></p>
<ul>
<li>点击后</li>
</ul>
<p><a href="https://imgchr.com/i/BEdkff"><img src="https://s1.ax1x.com/2020/10/23/BEdkff.md.png" alt="BEdkff.md.png"></a></p>
<h1 id="v-for的使用"><a href="#v-for的使用" class="headerlink" title="v-for的使用"></a>v-for的使用</h1><blockquote>
<p><code>v-for</code>: 作用就是用来对对象进行遍历的(数组也是对象的一种)</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:v-bind</span>=<span class="string">&quot;http://www.w3.org/1999/xhtml&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;user.name&#125;&#125;&#123;&#123;user.age&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--v-for遍历对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-for</span>=<span class="string">&quot;(value,key,index) in user&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;index&#125;&#125;:&#123;&#123;key&#125;&#125;:&#123;&#123;value&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-for</span>=<span class="string">&quot;(value,key,index) in user&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;index&#125;&#125; : &#123;&#123;key&#125;&#125; : &#123;&#123;value&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       通过v-for遍历数组</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;a,index in arr&quot;</span> &gt;</span></span><br><span class="line">            &#123;&#123;index&#125;&#125; &#123;&#123;a&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        通过v-for遍历数组中对象</span></span><br><span class="line"><span class="comment">        :key 便于vue内部做重用和排序</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;user,index in users&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;user.id&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123;index+1&#125;&#125; &#123;&#123; user.name &#125;&#125;  === &#123;&#123; user.age &#125;&#125; ==== &#123;&#123; user.content &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入vue.js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line">        data:&#123;</span><br><span class="line"><span class="javascript">           user:&#123;<span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,<span class="attr">age</span>:<span class="number">23</span>&#125;,</span></span><br><span class="line"><span class="javascript">           arr:[<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;河南&quot;</span>,<span class="string">&quot;天津&quot;</span>],</span></span><br><span class="line">            users:[</span><br><span class="line"><span class="javascript">                &#123;<span class="attr">id</span>:<span class="string">&quot;1&quot;</span>,<span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,<span class="attr">age</span>:<span class="number">23</span>&#125;,</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">id</span>:<span class="string">&quot;2&quot;</span>,<span class="attr">name</span>:<span class="string">&quot;李四&quot;</span>,<span class="attr">age</span>:<span class="number">24</span>&#125;</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,methods:&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="总结-6"><a href="#总结-6" class="headerlink" title="总结"></a>总结</h2><pre><code>1.在使用v-for的时候一定要注意加入:key 用来给vue内部提供重用和排序的唯一key </code></pre>
<h1 id="v-model双向绑定"><a href="#v-model双向绑定" class="headerlink" title="v-model双向绑定"></a>v-model双向绑定</h1><blockquote>
<p><code>v-model</code>: 作用用来绑定标签元素的值与vue实例对象中data数据保持一致,从而实现双向的数据绑定机制</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-text</span>=<span class="string">&quot;message&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;改变表格中的值&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeValue&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入vue.js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line">        data:&#123;</span><br><span class="line"><span class="javascript">           message:<span class="string">&quot;&quot;</span></span></span><br><span class="line">        &#125;,methods:&#123;</span><br><span class="line">            changeValue()&#123;</span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.message=<span class="string">&#x27;你好吗&#x27;</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="总结-7"><a href="#总结-7" class="headerlink" title="总结"></a>总结</h2><ul>
<li>1.使用v-model指令可以实现数据的双向绑定 </li>
<li>2.所谓双向绑定 表单中数据变化导致vue实例data数据变化   vue实例中data数据的变化导致表单中数据变化 称之为双向绑定</li>
</ul>
<h2 id="MVVM架构-双向绑定机制"><a href="#MVVM架构-双向绑定机制" class="headerlink" title="MVVM架构  双向绑定机制"></a>MVVM架构  双向绑定机制</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">Model: 数据  Vue实例中绑定数据</span><br><span class="line"></span><br><span class="line">VM:   ViewModel  监听器</span><br><span class="line"></span><br><span class="line">View:  页面  页面展示的数据</span><br></pre></td></tr></table></figure>
<h1 id="页面记事本案例"><a href="#页面记事本案例" class="headerlink" title="页面记事本案例"></a>页面记事本案例</h1><blockquote>
<p>实现简单增删</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;添加&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item,index in lists&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123;index+1&#125;&#125;、&#123;&#123;item&#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javaScript:&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;deleteByOne(index)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-text</span>=<span class="string">&quot;&#x27;共有：&#x27;+lists.length+&#x27; 条数据&#x27;&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;lists.length!=0&quot;</span> <span class="attr">value</span>=<span class="string">&quot;删除全部&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;deleteAll&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入vue.js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line">        data:&#123;</span><br><span class="line"><span class="javascript">            lists:[<span class="string">&#x27;vue&#x27;</span>,<span class="string">&#x27;java&#x27;</span>,<span class="string">&#x27;html&#x27;</span>],</span></span><br><span class="line"><span class="javascript">           message:<span class="string">&quot;&quot;</span></span></span><br><span class="line">        &#125;,methods:&#123;</span><br><span class="line">           save()&#123;</span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.lists.push(<span class="built_in">this</span>.message);</span></span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.message=<span class="string">&quot;&quot;</span>;</span></span><br><span class="line">           &#125;,</span><br><span class="line">            deleteByOne(index)&#123;</span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.lists.splice(index,<span class="number">1</span>);<span class="comment">//从第index个元素开始删除，删除一个元素</span></span></span><br><span class="line">            &#125;,</span><br><span class="line">            deleteAll()&#123;</span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.lists=[];</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h2><p><a href="https://imgchr.com/i/BQZDCF"><img src="https://s1.ax1x.com/2020/10/27/BQZDCF.png" alt="BQZDCF.png"></a></p>
<h1 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h1><blockquote>
<p><code>修饰符</code>: 作用用来和事件连用,用来决定事件触发条件或者是阻止事件的触发机制</p>
</blockquote>
<h2 id="常用的事件修饰符"><a href="#常用的事件修饰符" class="headerlink" title="常用的事件修饰符"></a>常用的事件修饰符</h2><ul>
<li>.stop     –&gt; 用来阻止事件冒泡</li>
<li>.prevent   –&gt;用来阻止标签的默认行为</li>
<li>.capture   –&gt;</li>
<li>.self    –&gt;用来针对于当前标签的事件触发     ===========&gt; 只触发自己标签的上特定动作的事件     只关心自己标签上触发的事件 不监听事件冒泡</li>
<li>.once    –&gt;once 一次 作用:  就是让指定事件只触发一次</li>
<li>.passive    –&gt;用来与键盘中按键事件绑定在一起,用来修饰特定的按键事件的修饰符</li>
</ul>
<h2 id="stop事件修饰符"><a href="#stop事件修饰符" class="headerlink" title="stop事件修饰符"></a>stop事件修饰符</h2><ul>
<li>未使用stop之前</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.aa</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">width</span><span class="selector-pseudo">:380px</span>;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">height</span><span class="selector-pseudo">:200px</span>;</span></span><br><span class="line">        background-color: red;</span><br><span class="line"><span class="css">        <span class="selector-tag">border</span><span class="selector-pseudo">:2px</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">solid</span> <span class="selector-id">#3C3C3C</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;aa&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;divClick&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;这是一个按钮&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入vue.js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line">        data:&#123;</span><br><span class="line"></span><br><span class="line">        &#125;,methods:&#123;</span><br><span class="line">            btnClick()&#123;</span><br><span class="line"><span class="javascript">                alert(<span class="string">&quot;button被点击了&quot;</span>);</span></span><br><span class="line">            &#125;,</span><br><span class="line">            divClick()&#123;</span><br><span class="line"><span class="javascript">                alert(<span class="string">&quot;div被点击了&quot;</span>)</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>此时运行</p>
<p><a href="https://imgchr.com/i/BQMr8K"><img src="https://s1.ax1x.com/2020/10/27/BQMr8K.png" alt="BQMr8K.png"></a></p>
<p>会先执行button按钮的事件之后接着执行div的事件</p>
<p>使用stop可以阻止事件冒泡。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;aa&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;divClick&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;这是一个按钮&quot;</span> @<span class="attr">click.stop</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="prevent-事件修饰符"><a href="#prevent-事件修饰符" class="headerlink" title="prevent 事件修饰符"></a>prevent 事件修饰符</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;www.baidu.com&quot;</span> @<span class="attr">click.prevent</span>=<span class="string">&quot;aClick&quot;</span>&gt;</span>百度一下<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a href="https://imgchr.com/i/BQQxwd"><img src="https://s1.ax1x.com/2020/10/27/BQQxwd.png" alt="BQQxwd.png"></a></p>
<p>此时不会发生跳转</p>
<h2 id="once事件修饰符"><a href="#once事件修饰符" class="headerlink" title="once事件修饰符"></a>once事件修饰符</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span> @<span class="attr">click.prevent.once</span>=<span class="string">&quot;aClick&quot;</span>&gt;</span>百度一下<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>此时当第一个点击时候触发prevent，第二次失效</p>
<h2 id="self-事件修饰符"><a href="#self-事件修饰符" class="headerlink" title="self 事件修饰符"></a>self 事件修饰符</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">	<span class="comment">&lt;!--只触发标签自身的事件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;aa&quot;</span> @<span class="attr">click.self</span>=<span class="string">&quot;divClick&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--用来阻止事件冒泡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;按钮&quot;</span> @<span class="attr">click.stop</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;按钮1&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>此时点击第二个button时候，div不会执行</p>
<h1 id="按键修饰符"><a href="#按键修饰符" class="headerlink" title="按键修饰符"></a>按键修饰符</h1><blockquote>
<p>用来与键盘中按键事件绑定在一起,用来修饰特定的按键事件的修饰符</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">.enter    --&gt;用来触发回车按键之后触发的事件</span><br><span class="line">.tab      --&gt;用来捕获到tab键执行到当前标签是才会触发</span><br><span class="line">.delete (捕获“删除”和“退格”键)</span><br><span class="line">.esc</span><br><span class="line">.space</span><br><span class="line">.up</span><br><span class="line">.down</span><br><span class="line">.left</span><br><span class="line">.right</span><br></pre></td></tr></table></figure>
<h1 id="Axios基本使用"><a href="#Axios基本使用" class="headerlink" title="Axios基本使用"></a>Axios基本使用</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><blockquote>
<p><code>Axios</code> 是一个异步请求技术,核心作用就是用来在页面中发送异步请求,并获取对应数据在页面中渲染       页面局部更新技术  Ajax</p>
</blockquote>
<h2 id="Axios第一个程序"><a href="#Axios第一个程序" class="headerlink" title="Axios第一个程序"></a>Axios第一个程序</h2><p>中文网站:<a href="https://www.kancloud.cn/yunye/axios/234845">https://www.kancloud.cn/yunye/axios/234845</a></p>
<p>安装: <a href="https://unpkg.com/axios/dist/axios.min.js">https://unpkg.com/axios/dist/axios.min.js</a></p>
<h3 id="GET请求方式"><a href="#GET请求方式" class="headerlink" title="GET请求方式"></a>GET请求方式</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//发送GET方式请求</span></span><br><span class="line"> axios.get(<span class="string">&quot;http://localhost:8989/user/findAll?name=xiaochen&quot;</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(response.data);</span><br><span class="line"> &#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(err);</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="POST请求"><a href="#POST请求" class="headerlink" title="POST请求"></a>POST请求</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//发送POST方式请求</span></span><br><span class="line">axios.post(<span class="string">&quot;http://localhost:8989/user/save&quot;</span>,&#123;</span><br><span class="line">    username:<span class="string">&quot;xiaochen&quot;</span>,</span><br><span class="line">    age:<span class="number">23</span>,</span><br><span class="line">    email:<span class="string">&quot;xiaochen@zparkhr.com&quot;</span>,</span><br><span class="line">    phone:<span class="number">13260426185</span></span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response.data);</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="axios并发请求"><a href="#axios并发请求" class="headerlink" title="axios并发请求"></a>axios并发请求</h3><blockquote>
<p><code>并发请求</code>:  将多个请求在同一时刻发送到后端服务接口,最后在集中处理每个请求的响应结果</p>
</blockquote>
<p> //1.创建一个查询所有请求<br>    function findAll(){<br>        return axios.get(“<a href="http://localhost:8989/user/findAll?name=xiaochen&quot;">http://localhost:8989/user/findAll?name=xiaochen&quot;</a>);<br>    }</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//2.创建一个保存的请求</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">save</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> axios.post(<span class="string">&quot;http://localhost:8989/user/save&quot;</span>,&#123;</span><br><span class="line">        username:<span class="string">&quot;xiaochen&quot;</span>,</span><br><span class="line">        age:<span class="number">23</span>,</span><br><span class="line">        email:<span class="string">&quot;xiaochen@zparkhr.com&quot;</span>,</span><br><span class="line">        phone:<span class="number">13260426185</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.并发执行</span></span><br><span class="line">axios.all([findAll(),save()]).then(</span><br><span class="line">    axios.spread(<span class="function"><span class="keyword">function</span>(<span class="params">res1,res2</span>)</span>&#123;  <span class="comment">//用来将一组函数的响应结果汇总处理</span></span><br><span class="line">        <span class="built_in">console</span>.log(res1.data);</span><br><span class="line">        <span class="built_in">console</span>.log(res2.data);</span><br><span class="line">    &#125;)</span><br><span class="line">);<span class="comment">//用来发送一组并发请求</span></span><br></pre></td></tr></table></figure>
<h1 id="Vue生命周期"><a href="#Vue生命周期" class="headerlink" title="Vue生命周期"></a>Vue生命周期</h1><blockquote>
<p><code>生命周期钩子</code>   ====&gt;  <code>生命周期函数</code></p>
</blockquote>
<p><img src="https://cn.vuejs.org/images/lifecycle.png" alt="BQIDBV.png"></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>06.Vue的生命周期函数<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;sp&quot;</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeData&quot;</span> <span class="attr">value</span>=<span class="string">&quot;修改数据&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入vue--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="javascript">            msg:<span class="string">&quot;你好&quot;</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            changeData()&#123;</span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.msg = <span class="built_in">Math</span>.random();</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        beforeCreate()&#123; <span class="comment">//1.生命周期中第一个函数,该函数在执行时Vue实例仅仅完成了自身事件的绑定和生命周期函数的初始化工作,Vue实例中还没有 Data el methods相关属性</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&quot;beforeCreate: &quot;</span>+<span class="built_in">this</span>.msg);</span></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        created()&#123; <span class="comment">//2.生命周期中第二个函数,该函数在执行时Vue实例已经初始化了data属性和methods中相关方法</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&quot;created: &quot;</span>+<span class="built_in">this</span>.msg);</span></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        beforeMount()&#123;<span class="comment">//3.生命周期中第三个函数,该函数在执行时Vue将El中指定作用范围作为模板编译</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&quot;beforeMount: &quot;</span>+<span class="built_in">document</span>.getElementById(<span class="string">&quot;sp&quot;</span>).innerText);</span></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        mounted()&#123;<span class="comment">//4.生命周期中第四个函数,该函数在执行过程中,已经将数据渲染到界面中并且已经更新页面</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&quot;Mounted: &quot;</span>+<span class="built_in">document</span>.getElementById(<span class="string">&quot;sp&quot;</span>).innerText);</span></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        beforeUpdate()&#123;<span class="comment">//5.生命周期中第五个函数,该函数是data中数据发生变化时执行 这个事件执行时仅仅是Vue实例中data数据变化页面显示的依然是原始数据</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&quot;beforeUpdate:&quot;</span>+<span class="built_in">this</span>.msg);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&quot;beforeUpdate:&quot;</span>+<span class="built_in">document</span>.getElementById(<span class="string">&quot;sp&quot;</span>).innerText);</span></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        updated()&#123;    <span class="comment">//6.生命周期中第六个函数,该函数执行时data中数据发生变化,页面中数据也发生了变化  页面中数据已经和data中数据一致</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&quot;updated:&quot;</span>+<span class="built_in">this</span>.msg);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&quot;updated:&quot;</span>+<span class="built_in">document</span>.getElementById(<span class="string">&quot;sp&quot;</span>).innerText);</span></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        beforeDestory()&#123;<span class="comment">//7.生命周期第七个函数,该函数执行时,Vue中所有数据 methods componet 都没销毁</span></span></span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        destoryed()&#123; <span class="comment">//8.生命周期的第八个函数,该函数执行时,Vue实例彻底销毁</span></span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>执行结果：</p>
<p><a href="https://imgchr.com/i/BQIDBV"><img src="https://s1.ax1x.com/2020/10/27/BQIDBV.png" alt="BQIDBV.png"></a></p>
<h2 id="Vue生命周期总结"><a href="#Vue生命周期总结" class="headerlink" title="Vue生命周期总结"></a>Vue生命周期总结</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">1.初始化阶段</span><br><span class="line"><span class="code">		beforeCreate()&#123; //1.生命周期中第一个函数,该函数在执行时Vue实例仅仅完成了自身事件的绑定和生命周期函数的初始化工作,Vue实例中还没有 Data el methods相关属性</span></span><br><span class="line"><span class="code">       console.log(&quot;beforeCreate: &quot;+this.msg);</span></span><br><span class="line"><span class="code">   &#125;,</span></span><br><span class="line"><span class="code">   created()&#123; //2.生命周期中第二个函数,该函数在执行时Vue实例已经初始化了data属性和methods中相关方法</span></span><br><span class="line"><span class="code">       console.log(&quot;created: &quot;+this.msg);</span></span><br><span class="line"><span class="code">   &#125;,</span></span><br><span class="line"><span class="code">   beforeMount()&#123;//3.生命周期中第三个函数,该函数在执行时Vue将El中指定作用范围作为模板编译</span></span><br><span class="line"><span class="code">       console.log(&quot;beforeMount: &quot;+document.getElementById(&quot;sp&quot;).innerText);</span></span><br><span class="line"><span class="code">   &#125;,</span></span><br><span class="line"><span class="code">   mounted()&#123;//4.生命周期中第四个函数,该函数在执行过程中,已经将数据渲染到界面中并且已经更新页面</span></span><br><span class="line"><span class="code">       console.log(&quot;Mounted: &quot;+document.getElementById(&quot;sp&quot;).innerText);</span></span><br><span class="line"><span class="code">   &#125;</span></span><br><span class="line"><span class="code">   </span></span><br><span class="line"><span class="code">2.运行阶段</span></span><br><span class="line"><span class="code">	 	beforeUpdate()&#123;//5.生命周期中第五个函数,该函数是data中数据发生变化时执行 这个事件执行时仅仅是Vue实例中data数据变化页面显示的依然是原始数据</span></span><br><span class="line"><span class="code">       console.log(&quot;beforeUpdate:&quot;+this.msg);</span></span><br><span class="line"><span class="code">       console.log(&quot;beforeUpdate:&quot;+document.getElementById(&quot;sp&quot;).innerText);</span></span><br><span class="line"><span class="code">   &#125;,</span></span><br><span class="line"><span class="code">   updated()&#123;    //6.生命周期中第六个函数,该函数执行时data中数据发生变化,页面中数据也发生了变化  页面中数据已经和data中数据一致</span></span><br><span class="line"><span class="code">       console.log(&quot;updated:&quot;+this.msg);</span></span><br><span class="line"><span class="code">       console.log(&quot;updated:&quot;+document.getElementById(&quot;sp&quot;).innerText);</span></span><br><span class="line"><span class="code">   &#125;,</span></span><br><span class="line"><span class="code">   </span></span><br><span class="line"><span class="code">3.销毁阶段</span></span><br><span class="line"><span class="code">	 	beforeDestory()&#123;//7.生命周期第七个函数,该函数执行时,Vue中所有数据 methods componet 都没销毁</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">   &#125;,</span></span><br><span class="line"><span class="code">   destoryed()&#123; //8.生命周期的第八个函数,该函数执行时,Vue实例彻底销毁</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">   &#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="案例Springboot和vue实现前后端分离"><a href="#案例Springboot和vue实现前后端分离" class="headerlink" title="案例Springboot和vue实现前后端分离"></a>案例Springboot和vue实现前后端分离</h1><h2 id="vue-bootsrap用户简单页面"><a href="#vue-bootsrap用户简单页面" class="headerlink" title="vue+bootsrap用户简单页面"></a>vue+bootsrap用户简单页面</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入bootstrap的样式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./resources/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-default&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-user&quot;</span>  <span class="attr">style</span>=<span class="string">&quot;margin-left: 250px;&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav navbar-right navbar-brand&quot;</span>  <span class="attr">style</span>=<span class="string">&quot;margin-right: 100px;&quot;</span>&gt;</span>欢迎XXX登录 <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--中心布局--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 40px;margin-left: 300px;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--搜索框--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-8 col-md-offset-1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form-inline&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;searchName&quot;</span>&gt;</span>姓名:<span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;searchName&quot;</span> <span class="attr">id</span>=<span class="string">&quot;searchName&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;searchEmail&quot;</span>&gt;</span>电话号码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span>  <span class="attr">v-model</span>=<span class="string">&quot;searchCode&quot;</span> <span class="attr">id</span>=<span class="string">&quot;searchEmail&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-info&quot;</span> @<span class="attr">click.prevent</span>=<span class="string">&quot;searchLike&quot;</span>&gt;</span>搜索<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-8&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-striped table-bordered table-hover&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>薪资<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>电话号码<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">&quot;user,index in users&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;user.id&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;user.id&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;user.name&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;user.age&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;user.salary&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;user.number&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn_update&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;updateByUserId(user.id)&quot;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn  btn-danger&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn_delete&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;deleteByUserId(user.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-right: 200px;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>姓名:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入姓名&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;age&quot;</span>&gt;</span>年龄:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;age&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.age&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入年龄&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;salary&quot;</span>&gt;</span>薪资:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;salary&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.salary&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入工资&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;number&quot;</span>&gt;</span>电话号码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;number&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.number&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">placeholder</span>=<span class="string">&quot;请输入电话号码&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;saveUserInfo&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;restUserInfo&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入Vue js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./resources/js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入axios js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./resources/js/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line">        data:&#123;</span><br><span class="line">            users:[</span><br><span class="line"><span class="javascript">                &#123;<span class="attr">id</span>:<span class="number">1</span>,<span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,<span class="attr">age</span>:<span class="number">23</span>,<span class="attr">salary</span>:<span class="number">9998.99</span>,<span class="attr">number</span>:<span class="number">13017590533</span>&#125;,</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">id</span>:<span class="number">2</span>,<span class="attr">name</span>:<span class="string">&quot;李四&quot;</span>,<span class="attr">age</span>:<span class="number">23</span>,<span class="attr">salary</span>:<span class="number">9998.99</span>,<span class="attr">number</span>:<span class="number">13017590533</span>&#125;</span></span><br><span class="line">                ],</span><br><span class="line"><span class="javascript">            user: &#123;&#125;,<span class="comment">//用来完成数据双向绑定,</span></span></span><br><span class="line"><span class="javascript">            searchName:<span class="string">&quot;&quot;</span>,  <span class="comment">//用来处理搜索的数据绑定</span></span></span><br><span class="line"><span class="javascript">            searchCode:<span class="string">&quot;&quot;</span>,  <span class="comment">//用来处理搜索的数据绑定</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        methods:&#123;</span><br><span class="line">            updateByUserId(id)&#123;</span><br><span class="line"><span class="javascript">                alert(<span class="string">&quot;修改&quot;</span>)</span></span><br><span class="line">            &#125;,</span><br><span class="line">            deleteByUserId(id)&#123;</span><br><span class="line"><span class="javascript">                alert(<span class="string">&quot;删除&quot;</span>)</span></span><br><span class="line">            &#125;,</span><br><span class="line">            saveUserInfo()&#123;</span><br><span class="line"><span class="javascript">                alert(<span class="string">&quot;保存&quot;</span>)</span></span><br><span class="line">            &#125;,</span><br><span class="line">            restUserInfo()&#123;</span><br><span class="line"><span class="javascript">                alert(<span class="string">&quot;重置&quot;</span>)</span></span><br><span class="line">            &#125;,</span><br><span class="line">            searchLike()&#123;</span><br><span class="line"><span class="javascript">                alert(<span class="string">&quot;搜索&quot;</span>)</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a href="https://imgchr.com/i/B3BhZ9"><img src="https://s1.ax1x.com/2020/10/28/B3BhZ9.png" alt="B3BhZ9.png"></a></p>
<h2 id="springboot中application-yml文件配置"><a href="#springboot中application-yml文件配置" class="headerlink" title="springboot中application.yml文件配置"></a>springboot中application.yml文件配置</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8989</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/users</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">users</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/booVue?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC&amp;rewriteBatchedStatements=true</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:com/study/mapper/*.xml</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.study.entity</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="新建数据库boovue，表t-user"><a href="#新建数据库boovue，表t-user" class="headerlink" title="新建数据库boovue，表t_user"></a>新建数据库boovue，表t_user</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">table</span> t_user(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">VARCHAR</span>(<span class="number">30</span>) PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	age <span class="built_in">int</span>(<span class="number">3</span>),</span><br><span class="line">	salary <span class="keyword">double</span>(<span class="number">7</span>,<span class="number">2</span>),</span><br><span class="line">	<span class="built_in">number</span> <span class="built_in">VARCHAR</span>(<span class="number">11</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="新建entity"><a href="#新建entity" class="headerlink" title="新建entity"></a>新建entity</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.ToString;</span><br><span class="line"><span class="keyword">import</span> lombok.experimental.Accessors;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="meta">@Accessors(chain=true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Double salary;</span><br><span class="line">    <span class="keyword">private</span> String number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="新建UserDao"><a href="#新建UserDao" class="headerlink" title="新建UserDao"></a>新建UserDao</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.dao;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> com.study.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhangshuai</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询所有</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="新建UserDaoMapper-xml"><a href="#新建UserDaoMapper-xml" class="headerlink" title="新建UserDaoMapper.xml"></a>新建UserDaoMapper.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.study.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--查询所有功能--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select id,name,age,salary,number  from db_user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="测试查询"><a href="#测试查询" class="headerlink" title="测试查询"></a>测试查询</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest(classes = VueApplication.class)</span></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestUserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(userDao.findAll());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h2><p><a href="https://imgchr.com/i/B3WnYQ"><img src="https://s1.ax1x.com/2020/10/28/B3WnYQ.png" alt="B3WnYQ.png"></a></p>
<h2 id="修改前端页面的函数"><a href="#修改前端页面的函数" class="headerlink" title="修改前端页面的函数"></a>修改前端页面的函数</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">           updateByUserId(id)&#123;</span><br><span class="line">               alert(&quot;修改&quot;)</span><br><span class="line">           &#125;,</span><br><span class="line">           deleteByUserId(id)&#123;</span><br><span class="line">               alert(&quot;删除&quot;)</span><br><span class="line">           &#125;,</span><br><span class="line">           saveUserInfo()&#123;</span><br><span class="line">               alert(&quot;保存&quot;)</span><br><span class="line">           &#125;,</span><br><span class="line">           restUserInfo()&#123;</span><br><span class="line">               alert(&quot;重置&quot;)</span><br><span class="line">           &#125;,</span><br><span class="line">           searchLike()&#123;</span><br><span class="line">               alert(&quot;搜索&quot;)</span><br><span class="line">           &#125;,</span><br><span class="line">           findAllUser()&#123;</span><br><span class="line">               let _this = this;</span><br><span class="line">               //发送查询所有用户的信息操作</span><br><span class="line">               axios.get(&quot;http://localhost:8989/users/users/findAllUser&quot;).then(function (response) &#123;</span><br><span class="line">                   _this.users = response.data;</span><br><span class="line">               &#125;).catch(function (err) &#123;</span><br><span class="line">                   console.log(err);</span><br><span class="line">               &#125;)</span><br><span class="line">           &#125;,</span><br><span class="line">       &#125;,</span><br><span class="line">       //生命周期相关函数</span><br><span class="line">       created() &#123;</span><br><span class="line">           this.findAllUser();</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>

<h2 id="创建UserController"><a href="#创建UserController" class="headerlink" title="创建UserController"></a>创建UserController</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.study.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.CrossOrigin;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@CrossOrigin</span><span class="comment">/**声明可以跨域*/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;findAllUser&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;User&gt; users = userService.findAllUsers();</span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="启动springboot并访问"><a href="#启动springboot并访问" class="headerlink" title="启动springboot并访问"></a>启动springboot并访问</h2><p><a href="http://localhost:8989/users/users/findAllUser">http://localhost:8989/users/users/findAllUser</a>   成功显示页面</p>
<p><a href="https://imgchr.com/i/B3oUfO"><img src="https://s1.ax1x.com/2020/10/28/B3oUfO.png" alt="B3oUfO.png"></a></p>
<p>使用axios访问请求</p>
<p><a href="https://imgchr.com/i/B3o8mR"><img src="https://s1.ax1x.com/2020/10/28/B3o8mR.png" alt="B3o8mR.png"></a></p>
<h2 id="添加功能实现"><a href="#添加功能实现" class="headerlink" title="添加功能实现"></a>添加功能实现</h2><h3 id="修改前端html"><a href="#修改前端html" class="headerlink" title="修改前端html"></a>修改前端html</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">saveUserInfo()&#123;</span><br><span class="line">    console.log(this.user);</span><br><span class="line">    let _this = this;</span><br><span class="line">    //发送添加的操作</span><br><span class="line">    axios.post(&quot;http://localhost:8989/users/users/saveUser&quot;,this.user).then(function (response) &#123;</span><br><span class="line">        if (response.data.success)&#123;</span><br><span class="line">            //更新页面</span><br><span class="line">           _this.findAllUser();</span><br><span class="line">           //清空上次保存内容</span><br><span class="line">            _this.user=&#123;&#125;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            alert(response.data.message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="修改UserController"><a href="#修改UserController" class="headerlink" title="修改UserController"></a>修改UserController</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加操作</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;saveUser&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">saveUser</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span></span>&#123;</span><br><span class="line">    Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        userService.saveUser(user);</span><br><span class="line">        map.put(<span class="string">&quot;success&quot;</span>,<span class="keyword">true</span>);</span><br><span class="line">        map.put(<span class="string">&quot;message&quot;</span>,<span class="string">&quot;数据添加成功&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        map.put(<span class="string">&quot;success&quot;</span>,<span class="keyword">false</span>);</span><br><span class="line">        map.put(<span class="string">&quot;message&quot;</span>,<span class="string">&quot;数据添加失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改UserService"><a href="#修改UserService" class="headerlink" title="修改UserService"></a>修改UserService</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加操作</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">saveUser</span><span class="params">(User user)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="修改UserServiceImpl"><a href="#修改UserServiceImpl" class="headerlink" title="修改UserServiceImpl"></a>修改UserServiceImpl</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">    user.setId(UUID.randomUUID().toString());</span><br><span class="line">    userDao.saveUser(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改UserDao"><a href="#修改UserDao" class="headerlink" title="修改UserDao"></a>修改UserDao</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加操作</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">saveUser</span><span class="params">(User user)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="修改UserDaoMapper"><a href="#修改UserDaoMapper" class="headerlink" title="修改UserDaoMapper"></a>修改UserDaoMapper</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--添加操作--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;saveUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    insert into t_user values (#&#123;id&#125;,#&#123;name&#125;,#&#123;age&#125;,#&#123;salary&#125;,#&#123;number&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="添加功能完成效果"><a href="#添加功能完成效果" class="headerlink" title="添加功能完成效果"></a>添加功能完成效果</h3><p><a href="https://imgchr.com/i/B3Ovin"><img src="https://s1.ax1x.com/2020/10/28/B3Ovin.png" alt="B3Ovin.png"></a></p>
<p>！！！！下次该学</p>
<p><a href="https://www.bilibili.com/video/BV1SE411H7CY?p=4">链接</a></p>
]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>前端</tag>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>SSM框架之汽车租赁系统</title>
    <url>/blog/2020/10/06/SSM%E6%A1%86%E6%9E%B6%E4%B9%8B%E6%B1%BD%E8%BD%A6%E7%A7%9F%E8%B5%81%E9%A1%B9%E7%9B%AE/</url>
    <content><![CDATA[<p>涉及技术：前端：layui</p>
<p>后端框架：spring + springMVC +Mybatis+ maven</p>
<p>RBAC权限管理，Echarts图形展示</p>
<p><a href="https://gitee.com/SHUAI_code/Car.git">项目github地址</a></p>
<a id="more"></a>

<h1 id="功能分析"><a href="#功能分析" class="headerlink" title="功能分析"></a>功能分析</h1><p><img src="https://i.loli.net/2020/10/07/7qehoXM3zfvEVFb.png" alt="汽车出租管理系统.png"></p>
<h2 id="业务功能"><a href="#业务功能" class="headerlink" title="业务功能"></a>业务功能</h2><h3 id="客户管理"><a href="#客户管理" class="headerlink" title="客户管理"></a>客户管理</h3><ul>
<li>客户列表</li>
<li>客户分页和模糊查询</li>
<li>客户添加</li>
<li>客户修改</li>
<li>客户删除</li>
<li>导出客户数据</li>
</ul>
<h3 id="车辆管理"><a href="#车辆管理" class="headerlink" title="车辆管理"></a>车辆管理</h3><ul>
<li>车辆列表</li>
<li>车辆分页和模糊查询</li>
<li>车辆添加</li>
<li>车辆修改</li>
<li>车辆删除</li>
</ul>
<h3 id="汽车出租"><a href="#汽车出租" class="headerlink" title="汽车出租"></a>汽车出租</h3><ul>
<li>根据客户身份证查询所有未出租的车辆信息</li>
<li>汽车出租</li>
</ul>
<h3 id="出租单位管理"><a href="#出租单位管理" class="headerlink" title="出租单位管理"></a>出租单位管理</h3><ul>
<li>多条件模糊查询和分页</li>
<li>出租单修改</li>
<li>出租单删除</li>
<li>导出出租单</li>
</ul>
<h3 id="汽车入库"><a href="#汽车入库" class="headerlink" title="汽车入库"></a>汽车入库</h3><ul>
<li>根据出租单号查询出租单的信息并显示</li>
</ul>
<h3 id="检查单管理"><a href="#检查单管理" class="headerlink" title="检查单管理"></a>检查单管理</h3><ul>
<li>多条件模糊查询和分页</li>
<li>检查单修改</li>
<li>导出检查单</li>
</ul>
<h2 id="统计分析"><a href="#统计分析" class="headerlink" title="统计分析"></a>统计分析</h2><ul>
<li>客户地区图</li>
<li>公式年度月份销售额曲线图</li>
<li>业务员年度销售额柱子图</li>
</ul>
<h2 id="系统功能"><a href="#系统功能" class="headerlink" title="系统功能"></a>系统功能</h2><h3 id="用户登录"><a href="#用户登录" class="headerlink" title="用户登录"></a>用户登录</h3><ul>
<li>校验用户名和密码</li>
<li>登录成功之后写入登录日志</li>
<li>未登录拦截</li>
</ul>
<h3 id="菜单管理"><a href="#菜单管理" class="headerlink" title="菜单管理"></a>菜单管理</h3><ul>
<li>全查询菜单和根据左边的树查询菜单</li>
<li>添加菜单</li>
<li>修改菜单</li>
<li>删除菜单</li>
</ul>
<h3 id="角色管理"><a href="#角色管理" class="headerlink" title="角色管理"></a>角色管理</h3><ul>
<li>全查询加模糊查询</li>
<li>添加角色</li>
<li>修改角色</li>
<li>删除角色</li>
<li>分配菜单</li>
</ul>
<h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><ul>
<li>全查询加模糊查询</li>
<li>添加用户</li>
<li>修改用户</li>
<li>删除用户</li>
<li>分配角色</li>
<li>密码复位</li>
</ul>
<h3 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h3><ul>
<li>修改当前用户的密码</li>
</ul>
<h3 id="日志管理"><a href="#日志管理" class="headerlink" title="日志管理"></a>日志管理</h3><ul>
<li>查询</li>
<li>删除</li>
</ul>
<h3 id="系统公告管理"><a href="#系统公告管理" class="headerlink" title="系统公告管理"></a>系统公告管理</h3><ul>
<li>查询</li>
<li>添加</li>
<li>修改</li>
<li>删除</li>
<li>工作台的系统公告</li>
</ul>
<h1 id="数据库表"><a href="#数据库表" class="headerlink" title="数据库表"></a>数据库表</h1><blockquote>
<p>涉及到11张表</p>
</blockquote>
<h2 id="业务表"><a href="#业务表" class="headerlink" title="业务表"></a>业务表</h2><ul>
<li>客户表（bus_customers）</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>identity</td>
<td>身份证</td>
<td>varhcar</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>custname</td>
<td>姓名</td>
<td>Varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>sex</td>
<td>性别</td>
<td>Int</td>
<td></td>
<td></td>
</tr>
<tr>
<td>address</td>
<td>地址</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>phone</td>
<td>电话</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>career</td>
<td>职位</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>createtime</td>
<td>录入时间</td>
<td>datetime</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>车辆表(bus_cars)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>carnumber</td>
<td>车牌号</td>
<td>varhcar</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>cartype</td>
<td>类型</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>color</td>
<td>颜色</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>price</td>
<td>购买价格</td>
<td>double</td>
<td></td>
<td></td>
</tr>
<tr>
<td>rentprice</td>
<td>出租价格</td>
<td>double</td>
<td></td>
<td></td>
</tr>
<tr>
<td>deposit</td>
<td>押金</td>
<td>double</td>
<td></td>
<td></td>
</tr>
<tr>
<td>isrenting</td>
<td>是否出租</td>
<td>int</td>
<td></td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>描述</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>carimg</td>
<td>车辆图片</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>createtime</td>
<td>录入时间</td>
<td>datetime</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>出租表(bus_rent)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>rentid</td>
<td>出租单号</td>
<td>varhcar</td>
<td>是</td>
<td>后台使用时间生成</td>
</tr>
<tr>
<td>price</td>
<td>出租实际价格</td>
<td>double</td>
<td></td>
<td></td>
</tr>
<tr>
<td>begindate</td>
<td>开始时间</td>
<td>Datetime</td>
<td></td>
<td></td>
</tr>
<tr>
<td>returndate</td>
<td>还车时间</td>
<td>Datetime</td>
<td></td>
<td></td>
</tr>
<tr>
<td>rentflag</td>
<td>出租状态</td>
<td>int</td>
<td></td>
<td>0未归还1已归还</td>
</tr>
<tr>
<td>identity</td>
<td>客户身份证</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>carnumber</td>
<td>车牌号</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>opername</td>
<td>操作员</td>
<td>varchar</td>
<td></td>
<td>当前登陆人</td>
</tr>
<tr>
<td>createtime</td>
<td>录入时间</td>
<td>datetime</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>还车表(bus_checks)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th align="left"><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>checkid</td>
<td align="left">检查单号</td>
<td>varhcar</td>
<td>是</td>
<td>后台使用时间生成</td>
</tr>
<tr>
<td>checkdate</td>
<td align="left">检查时间</td>
<td>datetime</td>
<td></td>
<td></td>
</tr>
<tr>
<td>checkdesc</td>
<td align="left">描述</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>problem</td>
<td align="left">存在问题</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>paymoney</td>
<td align="left">赔付金额</td>
<td>double</td>
<td></td>
<td></td>
</tr>
<tr>
<td>opername</td>
<td align="left">操作员</td>
<td>varchar</td>
<td></td>
<td>当前登陆人</td>
</tr>
<tr>
<td>rentid</td>
<td align="left">出租单号</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>createtime</td>
<td align="left">录入时间</td>
<td>datetime</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="系统表（RBAC权限管理）"><a href="#系统表（RBAC权限管理）" class="headerlink" title="系统表（RBAC权限管理）"></a>系统表（RBAC权限管理）</h2><ul>
<li>菜单表(sys_menus)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>ID</td>
<td>Int</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>pid</td>
<td>父节点id</td>
<td>Int</td>
<td></td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>菜单名称</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>href</td>
<td>跳转地址</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>open</td>
<td>是否打开</td>
<td>Int</td>
<td></td>
<td>0不打1打开</td>
</tr>
<tr>
<td>parent</td>
<td>是否父节点</td>
<td>Int</td>
<td></td>
<td>0非父节点1父节点</td>
</tr>
<tr>
<td>target</td>
<td>打开方式</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>icon</td>
<td>节点图标</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>tabicon</td>
<td>Tab图标</td>
<td>varchar</td>
<td></td>
<td><img src="https://i.loli.net/2020/10/07/wqvUj5zZdroxuHC.png" alt="image.png"></td>
</tr>
<tr>
<td>available</td>
<td>是否可用</td>
<td>Int</td>
<td></td>
<td>0不可用1可用</td>
</tr>
</tbody></table>
<ul>
<li>用户表(sys_users)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>userid</td>
<td>用户编号</td>
<td>Int</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>loginname</td>
<td>登陆名</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>identity</td>
<td>身份证号</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>realname</td>
<td>真实名称</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>sex</td>
<td>性别</td>
<td>Int</td>
<td></td>
<td>0女1男</td>
</tr>
<tr>
<td>address</td>
<td>地址</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>phone</td>
<td>电话</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>pwd</td>
<td>密码</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>position</td>
<td>职位</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>用户类型</td>
<td>Int</td>
<td></td>
<td>1，超级管理员  2，系统用户  Where  type&lt;&gt;1</td>
</tr>
</tbody></table>
<ul>
<li>角色表1.   (sys_roles)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>roleid</td>
<td>角色编号</td>
<td>Int</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>rolename</td>
<td>角色名称</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>roledesc</td>
<td>角色备注</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>角色和菜单关系表 (sys_role_menu)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>rid</td>
<td>角色编号</td>
<td>Int</td>
<td>是</td>
<td>角色表的roleid外键</td>
</tr>
<tr>
<td>mid</td>
<td>菜单编号</td>
<td>Int</td>
<td>是</td>
<td>菜单表的id外键</td>
</tr>
</tbody></table>
<ul>
<li>用户和角色和关系表(sys_role_user)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>uid</td>
<td>用户编号</td>
<td>Int</td>
<td>是</td>
<td>用户表的userid外键</td>
</tr>
<tr>
<td>rid</td>
<td>角色编号</td>
<td>Int</td>
<td>是</td>
<td>角色表的roleid外键</td>
</tr>
</tbody></table>
<h2 id="系统表（其他）"><a href="#系统表（其他）" class="headerlink" title="系统表（其他）"></a>系统表（其他）</h2><ul>
<li>登录日志表(sys_log_login)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>日志ID</td>
<td>Int</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>loginname</td>
<td>登陆名+真实姓名</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>loginip</td>
<td>登陆IP</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>logintime</td>
<td>登陆时间</td>
<td>datetime</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>系统公告表(sys_news)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>编号</td>
<td>Int</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>title</td>
<td>标题</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Content</td>
<td>内容</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>createtime</td>
<td>发布时间</td>
<td>datetime</td>
<td></td>
<td></td>
</tr>
<tr>
<td>opername</td>
<td>发布人</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id="搭建环境（eclipse）"><a href="#搭建环境（eclipse）" class="headerlink" title="搭建环境（eclipse）"></a>搭建环境（eclipse）</h1><h2 id="配置maven仓库"><a href="#配置maven仓库" class="headerlink" title="配置maven仓库"></a>配置maven仓库</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>rentalCar<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>rentalCar Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/aspectj/aspectjweaver --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-logging/commons-logging --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.github.jsqlparser/jsqlparser --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.jsqlparser<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsqlparser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/jstl --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.15<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.30<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- springMVC配置 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aop --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aspects --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.14.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context-support --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-support<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-expression --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-web --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-stdlib --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jetbrains.kotlin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>kotlin-stdlib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.72<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-orm --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-orm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-oxm --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-oxm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">finalName</span>&gt;</span>rentalCar<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="jar包说明"><a href="#jar包说明" class="headerlink" title="jar包说明"></a>jar包说明</h2><h3 id="commons包"><a href="#commons包" class="headerlink" title="commons包"></a>commons包</h3><blockquote>
<p>商品包,即产品. commons项目是作为JDK的补充拓展及优化的一系列方案,由apache公司编写. 包名org.apache.commons,由反转的域名org.apache和包名commons组成. 如: </p>
</blockquote>
<ul>
<li><p>org.apache.commons.logging包,是用来记录日期. </p>
</li>
<li><p>org.apache.commons.lang包,用来包装部份数据类型.</p>
</li>
<li><p>org.apache.collections包,Apache Commons包中的一个，包含了一些Apache开发的集合类，功能比java.util.*更为强大。 </p>
</li>
<li><p>StringUtil,字符串工具类</p>
</li>
<li><p>BeanUtil,揭供对象属性复制. </p>
</li>
<li><p>Commons-log,日志记录工具, </p>
</li>
<li><p>…. </p>
<p>由于commons包的强大与灵活性，它已被各种framework推荐采纳使用，像struts、hibernate、spring中都有部分jar文件是来自于commons包中的，在tomcat安装目录的bin目录下也包含了commons-logging.jar. </p>
</li>
</ul>
<h3 id="spring之aspects包、aop包和aspectj包的简单梳理"><a href="#spring之aspects包、aop包和aspectj包的简单梳理" class="headerlink" title="spring之aspects包、aop包和aspectj包的简单梳理"></a>spring之aspects包、aop包和aspectj包的简单梳理</h3><ol>
<li>aop包本身具有完整的AOP实现，但是只会使用Cglib或者JDK动态代理，在类加载时通过动态代理织入（补充一句：spring容器会在创建被代理bean时会自动创建代理bean），其使用了aspectj的部分功能</li>
<li>aspectj提供了非常完善的AOP能力，可以编译时织入、编译后织入、加载时织入，几乎能在java class的任何时刻使用织入功能；</li>
</ol>
<p><strong>因此可以说aspectj包是对aop包的aop功能进行支持；</strong></p>
<p>spring3.0以前实现aop需要3个包：</p>
<ul>
<li>aopalliance-1.0.0.jar</li>
<li>aspectj.weaver-xx.RELEASE.jar</li>
<li>spring-aop-xx.jar<br> spring4.0以后aopalliance并入spring-aop包，实现aop只需要2个包：</li>
<li>aspectj.weaver-xx.RELEASE.jar</li>
<li>spring-aop-xx.jar</li>
</ul>
<p>SpingAOP具有一定面向切面具体实现，但在功能上弱于AspectJ，AspectJ结合aop包，则可以在IOC中使用完整的AOP功能（仅仅AspectJ是没有IOC的功能的），而Spring也提供了对AspectJ的扩展Spring-aspects.jar和 Spring-instrument.jar</p>
<h3 id="jackson包"><a href="#jackson包" class="headerlink" title="jackson包"></a>jackson包</h3><p>Jackson处理Json，依赖jackjson的三个核心类库</p>
<p>jackson-core-2.5.3.jar<br>jackson-annotations-2.5.3.jar<br>jackson-databind-2.5.3.jar</p>
<h3 id="jsqlparser包"><a href="#jsqlparser包" class="headerlink" title="jsqlparser包"></a>jsqlparser包</h3><p>sql解析工具</p>
<h3 id="pagehelper包"><a href="#pagehelper包" class="headerlink" title="pagehelper包"></a>pagehelper包</h3><p>分页</p>
<h3 id="slf4j包"><a href="#slf4j包" class="headerlink" title="slf4j包"></a>slf4j包</h3><p>日志门面</p>
<h3 id="kotlin包"><a href="#kotlin包" class="headerlink" title="kotlin包"></a>kotlin包</h3><p>通讯处理</p>
<h2 id="配置文件处理"><a href="#配置文件处理" class="headerlink" title="配置文件处理"></a>配置文件处理</h2><h3 id="创建db-properties"><a href="#创建db-properties" class="headerlink" title="创建db.properties"></a>创建db.properties</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/rental?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line"><span class="attr">user</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>

<h3 id="创建log4j-properties"><a href="#创建log4j-properties" class="headerlink" title="创建log4j.properties"></a>创建log4j.properties</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Global logging configuration</span></span><br><span class="line"><span class="meta">log4j.rootLogger</span>=<span class="string">DEBUG, stdout</span></span><br><span class="line"><span class="comment"># MyBatis logging configuration...</span></span><br><span class="line"><span class="meta">log4j.logger.org.mybatis.example.BlogMapper</span>=<span class="string">TRACE</span></span><br><span class="line"><span class="comment"># Console output...</span></span><br><span class="line"><span class="meta">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout.ConversionPattern</span>=<span class="string">%5p [%t] - %m%n</span></span><br></pre></td></tr></table></figure>

<h3 id="创建application-dao-xml"><a href="#创建application-dao-xml" class="headerlink" title="创建application-dao.xml"></a>创建application-dao.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 引入db.properties --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:property-placeholder</span></span></span><br><span class="line"><span class="tag">		<span class="attr">location</span>=<span class="string">&quot;classpath:db.properties&quot;</span> <span class="attr">system-properties-mode</span>=<span class="string">&quot;FALLBACK&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 声明dataSource --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;user&#125;&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 声明sessionFactory 并注入mybatis.cfg.xml --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 注入数据源 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 注入mapper.xml --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:mapper/*/*Mapper.xml<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 插件 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;plugins&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 扫描mapper接口 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 注入mapper接口所在的包 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span></span><br><span class="line">				com.study.sys.mapper</span><br><span class="line">				com.study.bus.mapper</span><br><span class="line">			<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 注入sqlSessionFactory --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="创建application-service-xml"><a href="#创建application-service-xml" class="headerlink" title="创建application-service.xml"></a>创建application-service.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.3.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.study.sys.service.impl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.study.bus.service.impl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 1.声明事务管理器 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">		 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span>	</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 启动注解事务 --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &lt;tx:annotation-driven/&gt; --&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 2.声明事务的传播性（发送通知） --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;advise&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 以add开头的方法需要事务 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;add*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;save*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;update*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;delete*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;change*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;reset*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">			</span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;get*&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;load*&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 3.进行AOP织入 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 声明切面 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.sxt.sys.service.impl.*.*(..))&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pc1&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.sxt.bus.service.impl.*.*(..))&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pc2&quot;</span>/&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 织入 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;advise&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pc1&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;advise&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pc2&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="创建applicationContext-xml"><a href="#创建applicationContext-xml" class="headerlink" title="创建applicationContext.xml"></a>创建applicationContext.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;classpath:application-dao.xml&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;classpath:application-service.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="创建springmvc-xml"><a href="#创建springmvc-xml" class="headerlink" title="创建springmvc.xml"></a>创建springmvc.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 扫描controller --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span></span></span><br><span class="line"><span class="tag">		<span class="attr">base-package</span>=<span class="string">&quot;com.study.sys.conreoller&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span></span></span><br><span class="line"><span class="tag">		<span class="attr">base-package</span>=<span class="string">&quot;com.study.bus.controller&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 配置映射器和适配器 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 配置前视图解析器 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span></span></span><br><span class="line"><span class="tag">		<span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 注入前后缀 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/view/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 配置springmvc对文件上传的支持 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 设置文件名的编码 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 配置最上传文件的支持 20M --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20971520&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 设置文件上传的临时目录 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;uploadTempDir&quot;</span> <span class="attr">value</span>=<span class="string">&quot;upload/temp&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 配置静态文件放行 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="修改web-xml"><a href="#修改web-xml" class="headerlink" title="修改web.xml"></a>修改web.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">id</span>=<span class="string">&quot;WebApp_ID&quot;</span> <span class="attr">version</span>=<span class="string">&quot;3.1&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">display-name</span>&gt;</span>0328carrent<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 编码过滤器开始 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>EncodeingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>EncodeingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 编码过滤器结束 --&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 监听器开始 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 监听器结束 --&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 前端控制器开始 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.action<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 前端控制器结束 --&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建file-properties"><a href="#创建file-properties" class="headerlink" title="创建file.properties"></a>创建file.properties</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># file upload path config</span></span><br><span class="line"><span class="attr">path</span>=<span class="string">E:/work/upload</span></span><br></pre></td></tr></table></figure>

<h3 id="创建AppLister"><a href="#创建AppLister" class="headerlink" title="创建AppLister"></a>创建AppLister</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebListener;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppListener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent arg0)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent arg0)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//取到ServletContext</span></span><br><span class="line">		ServletContext context=arg0.getServletContext();</span><br><span class="line">		context.setAttribute(<span class="string">&quot;ctx&quot;</span>, context.getContextPath());</span><br><span class="line">		System.err.println(<span class="string">&quot;---------Servlet容器创建成功 ctx被放到ServletContext作用域-------&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="AppFileUtils"><a href="#AppFileUtils" class="headerlink" title="AppFileUtils"></a>AppFileUtils</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpHeaders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppFileUtils</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 得到文件上传的路径</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> String PATH=<span class="string">&quot;E:/upload/&quot;</span>;</span><br><span class="line">	<span class="keyword">static</span> &#123;</span><br><span class="line">		InputStream stream = AppFileUtils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;file.properties&quot;</span>);</span><br><span class="line">		Properties properties=<span class="keyword">new</span> Properties();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			properties.load(stream);</span><br><span class="line">			PATH=properties.getProperty(<span class="string">&quot;path&quot;</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 文件下载</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> path</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> oldName</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span>  ResponseEntity&lt;Object&gt; <span class="title">downloadFile</span><span class="params">(HttpServletResponse response, String path, String oldName)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//4,使用绝对路径+相对路径去找到文件对象</span></span><br><span class="line">		File file=<span class="keyword">new</span> File(AppFileUtils.PATH,path);</span><br><span class="line">		<span class="comment">//5,判断文件是否存在</span></span><br><span class="line">		<span class="keyword">if</span>(file.exists()) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					<span class="comment">//如果名字有中文 要处理编码</span></span><br><span class="line">					oldName=URLEncoder.encode(oldName, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">//把file转成一个bytes</span></span><br><span class="line">				<span class="keyword">byte</span> [] bytes=FileUtils.readFileToByteArray(file);</span><br><span class="line">				HttpHeaders header=<span class="keyword">new</span> HttpHeaders();</span><br><span class="line">				<span class="comment">//封装响应内容类型(APPLICATION_OCTET_STREAM 响应的内容不限定)</span></span><br><span class="line">				header.setContentType(MediaType.APPLICATION_OCTET_STREAM);</span><br><span class="line">				<span class="comment">//设置下载的文件的名称</span></span><br><span class="line">				header.setContentDispositionFormData(<span class="string">&quot;attachment&quot;</span>, oldName);</span><br><span class="line">				<span class="comment">//创建ResponseEntity对象</span></span><br><span class="line">				ResponseEntity&lt;Object&gt; entity=</span><br><span class="line">						<span class="keyword">new</span> ResponseEntity&lt;Object&gt;(bytes, header, HttpStatus.CREATED);</span><br><span class="line">				<span class="keyword">return</span> entity;</span><br><span class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			PrintWriter out;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				out = response.getWriter();</span><br><span class="line">				out.write(<span class="string">&quot;文件不存在&quot;</span>);</span><br><span class="line">				out.flush();</span><br><span class="line">				out.close();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据相对路径删除硬盘上文件</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> path2</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">deleteFileUsePath</span><span class="params">(String path)</span> </span>&#123;</span><br><span class="line">		String realPath=PATH+path;</span><br><span class="line">		<span class="comment">//根据文件</span></span><br><span class="line">		File file=<span class="keyword">new</span> File(realPath);</span><br><span class="line">		<span class="keyword">if</span>(file.exists()) &#123;</span><br><span class="line">			file.delete();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="创建RandomUtils"><a href="#创建RandomUtils" class="headerlink" title="创建RandomUtils"></a>创建RandomUtils</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 随机工具类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomUtils</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> SimpleDateFormat sdf1=<span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> SimpleDateFormat sdf2=<span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyyMMddHHmmssSSS&quot;</span>);</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Random random=<span class="keyword">new</span> Random();</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 得到当前日期</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getCurrentDateForString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> sdf1.format(<span class="keyword">new</span> Date());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 生成文件名使用时间+4位随机数</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> suffix 文件名称</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createFileNameUseTime</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">		String fileSuffix=fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>),fileName.length());</span><br><span class="line">		String time=sdf2.format(<span class="keyword">new</span> Date());</span><br><span class="line">		Integer num=random.nextInt(<span class="number">9000</span>)+<span class="number">1000</span>;</span><br><span class="line">		<span class="keyword">return</span> time+num+fileSuffix;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 生成文件名使用UUID</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> suffix 文件名称</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createFileNameUseUUID</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">		String fileSuffix=fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>),fileName.length());</span><br><span class="line">		<span class="keyword">return</span> UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>).toUpperCase()+fileSuffix;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="创建WebUtils"><a href="#创建WebUtils" class="headerlink" title="创建WebUtils"></a>创建WebUtils</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.RequestContextHolder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.ServletRequestAttributes;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * web的工具类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebUtils</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ServletRequestAttributes <span class="title">getServletRequestAttributes</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 得到当前线程的请求对象</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HttpServletRequest <span class="title">getHttpServletRequest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> getServletRequestAttributes().getRequest();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 得到当前线程的响应对象</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HttpServletResponse <span class="title">getHttpServletResponse</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> getServletRequestAttributes().getResponse();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 得到session对象</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HttpSession <span class="title">getHttpSession</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> getHttpServletRequest().getSession();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 得到servletContext对象</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ServletContext <span class="title">getServletContext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> getHttpServletRequest().getServletContext();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="引入layuicms的模板"><a href="#引入layuicms的模板" class="headerlink" title="引入layuicms的模板"></a>引入layuicms的模板</h3><p><img src="https://s1.ax1x.com/2020/10/13/0hKJx0.jpg" alt="0hKJx0.jpg"></p>
<h1 id="用户登录功能实现"><a href="#用户登录功能实现" class="headerlink" title="用户登录功能实现"></a>用户登录功能实现</h1><h2 id="使用mybatisplus生成器生成User"><a href="#使用mybatisplus生成器生成User" class="headerlink" title="使用mybatisplus生成器生成User"></a>使用mybatisplus生成器生成User</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer userid;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String loginname;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String identity;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String realname;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer sex;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String position;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer type;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer available;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getUserid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserid</span><span class="params">(Integer userid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userid = userid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLoginname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> loginname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLoginname</span><span class="params">(String loginname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.loginname = loginname == <span class="keyword">null</span> ? <span class="keyword">null</span> : loginname.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getIdentity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> identity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIdentity</span><span class="params">(String identity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.identity = identity == <span class="keyword">null</span> ? <span class="keyword">null</span> : identity.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getRealname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> realname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRealname</span><span class="params">(String realname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.realname = realname == <span class="keyword">null</span> ? <span class="keyword">null</span> : realname.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(Integer sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.address = address == <span class="keyword">null</span> ? <span class="keyword">null</span> : address.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPhone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPhone</span><span class="params">(String phone)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.phone = phone == <span class="keyword">null</span> ? <span class="keyword">null</span> : phone.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPwd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPwd</span><span class="params">(String pwd)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pwd = pwd == <span class="keyword">null</span> ? <span class="keyword">null</span> : pwd.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPosition</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPosition</span><span class="params">(String position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.position = position == <span class="keyword">null</span> ? <span class="keyword">null</span> : position.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setType</span><span class="params">(Integer type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAvailable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> available;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAvailable</span><span class="params">(Integer available)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.available = available;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="生成UserMapper"><a href="#生成UserMapper" class="headerlink" title="生成UserMapper"></a>生成UserMapper</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 12, 2020 6:09:30 PM 类说明</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">deleteByPrimaryKey</span><span class="params">(Integer userid)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(User record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">insertSelective</span><span class="params">(User record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">User <span class="title">selectByPrimaryKey</span><span class="params">(Integer userid)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">updateByPrimaryKeySelective</span><span class="params">(User record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">updateByPrimaryKey</span><span class="params">(User record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 登录</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">User <span class="title">login</span><span class="params">(User user)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="生成UserMapper-xml"><a href="#生成UserMapper-xml" class="headerlink" title="生成UserMapper.xml"></a>生成UserMapper.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.study.sys.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.study.sys.domain.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;userid&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;userid&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;loginname&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;loginname&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;identity&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;identity&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;realname&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;realname&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;address&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;address&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;phone&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;pwd&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;position&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;position&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;type&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;type&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;available&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;available&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;Base_Column_List&quot;</span>&gt;</span></span><br><span class="line">    userid, loginname, identity, realname, sex, address, phone, pwd, position, type, </span><br><span class="line">    available</span><br><span class="line">  <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select </span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from sys_user</span><br><span class="line">    where userid = #&#123;userid,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">    delete from sys_user</span><br><span class="line">    where userid = #&#123;userid,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.User&quot;</span>&gt;</span></span><br><span class="line">    insert into sys_user (userid, loginname, identity, </span><br><span class="line">      realname, sex, address, </span><br><span class="line">      phone, pwd, position, </span><br><span class="line">      type, available)</span><br><span class="line">    values (#&#123;userid,jdbcType=INTEGER&#125;, #&#123;loginname,jdbcType=VARCHAR&#125;, #&#123;identity,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;realname,jdbcType=VARCHAR&#125;, #&#123;sex,jdbcType=INTEGER&#125;, #&#123;address,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;phone,jdbcType=VARCHAR&#125;, #&#123;pwd,jdbcType=VARCHAR&#125;, #&#123;position,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;type,jdbcType=INTEGER&#125;, #&#123;available,jdbcType=INTEGER&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertSelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.User&quot;</span>&gt;</span></span><br><span class="line">    insert into sys_user</span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;(&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userid != null&quot;</span>&gt;</span></span><br><span class="line">        userid,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;loginname != null&quot;</span>&gt;</span></span><br><span class="line">        loginname,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;identity != null&quot;</span>&gt;</span></span><br><span class="line">        identity,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;realname != null&quot;</span>&gt;</span></span><br><span class="line">        realname,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != null&quot;</span>&gt;</span></span><br><span class="line">        sex,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;address != null&quot;</span>&gt;</span></span><br><span class="line">        address,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null&quot;</span>&gt;</span></span><br><span class="line">        phone,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pwd != null&quot;</span>&gt;</span></span><br><span class="line">        pwd,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;position != null&quot;</span>&gt;</span></span><br><span class="line">        position,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;type != null&quot;</span>&gt;</span></span><br><span class="line">        type,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">        available,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;values (&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userid != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;userid,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;loginname != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;loginname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;identity != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;identity,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;realname != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;realname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;sex,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;address != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;address,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;phone,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pwd != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;pwd,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;position != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;position,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;type != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;type,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;available,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKeySelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.User&quot;</span>&gt;</span></span><br><span class="line">    update sys_user</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;loginname != null&quot;</span>&gt;</span></span><br><span class="line">        loginname = #&#123;loginname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;identity != null&quot;</span>&gt;</span></span><br><span class="line">        identity = #&#123;identity,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;realname != null&quot;</span>&gt;</span></span><br><span class="line">        realname = #&#123;realname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != null&quot;</span>&gt;</span></span><br><span class="line">        sex = #&#123;sex,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;address != null&quot;</span>&gt;</span></span><br><span class="line">        address = #&#123;address,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null&quot;</span>&gt;</span></span><br><span class="line">        phone = #&#123;phone,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pwd != null&quot;</span>&gt;</span></span><br><span class="line">        pwd = #&#123;pwd,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;position != null&quot;</span>&gt;</span></span><br><span class="line">        position = #&#123;position,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;type != null&quot;</span>&gt;</span></span><br><span class="line">        type = #&#123;type,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">        available = #&#123;available,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    where userid = #&#123;userid,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.User&quot;</span>&gt;</span></span><br><span class="line">    update sys_user</span><br><span class="line">    set loginname = #&#123;loginname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      identity = #&#123;identity,jdbcType=VARCHAR&#125;,</span><br><span class="line">      realname = #&#123;realname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      sex = #&#123;sex,jdbcType=INTEGER&#125;,</span><br><span class="line">      address = #&#123;address,jdbcType=VARCHAR&#125;,</span><br><span class="line">      phone = #&#123;phone,jdbcType=VARCHAR&#125;,</span><br><span class="line">      pwd = #&#123;pwd,jdbcType=VARCHAR&#125;,</span><br><span class="line">      position = #&#123;position,jdbcType=VARCHAR&#125;,</span><br><span class="line">      type = #&#123;type,jdbcType=INTEGER&#125;,</span><br><span class="line">      available = #&#123;available,jdbcType=INTEGER&#125;</span><br><span class="line">    where userid = #&#123;userid,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- 用户登陆 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;login&quot;</span>  <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select </span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from sys_user</span><br><span class="line">    where loginname=#&#123;loginname&#125; and pwd=#&#123;pwd&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="创建UserVo"><a href="#创建UserVo" class="headerlink" title="创建UserVo"></a>创建UserVo</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 12, 2020 6:08:13 PM</span></span><br><span class="line"><span class="comment">* 类说明</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserVo</span> <span class="keyword">extends</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="创建UserService"><a href="#创建UserService" class="headerlink" title="创建UserService"></a>创建UserService</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.UserVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 12, 2020 6:07:14 PM</span></span><br><span class="line"><span class="comment">* 类说明：用户服务接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 用户登录</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> userVo</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">User <span class="title">login</span><span class="params">(UserVo userVo)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="创建UserService实现类"><a href="#创建UserService实现类" class="headerlink" title="创建UserService实现类"></a>创建UserService实现类</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.DigestUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.UserVo;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">login</span><span class="params">(UserVo userVo)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//明文123456</span></span><br><span class="line">		<span class="comment">//生成密文</span></span><br><span class="line">		String pwd = DigestUtils.md5DigestAsHex(userVo.getPwd().getBytes());</span><br><span class="line">		userVo.setPwd(pwd);</span><br><span class="line">		<span class="keyword">return</span> userMapper.login(userVo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="创建常量接口（SysConstast）"><a href="#创建常量接口（SysConstast）" class="headerlink" title="创建常量接口（SysConstast）"></a>创建常量接口（SysConstast）</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.constast;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 12, 2020 6:11:25 PM </span></span><br><span class="line"><span class="comment"> * 类说明:常量接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SysConstast</span> </span>&#123;</span><br><span class="line">	String USER_LOGIN_ERROR_MSG = <span class="string">&quot;用户名或密码不正确&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="创建LoginController"><a href="#创建LoginController" class="headerlink" title="创建LoginController"></a>创建LoginController</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.constast.SysConstast;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.WebUtils;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.UserVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 12, 2020 6:26:27 PM</span></span><br><span class="line"><span class="comment">* 类说明:用户操作控制器</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginController</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> UserService userService;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 跳转到登陆页面</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;toLogin&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toLogin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;system/main/login&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 登陆方法</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;login&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(UserVo userVo,Model model)</span> </span>&#123;</span><br><span class="line">		User user=<span class="keyword">this</span>.userService.login(userVo);</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">null</span>!=user) &#123;</span><br><span class="line">			<span class="comment">//放到session</span></span><br><span class="line">			WebUtils.getHttpSession().setAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">			<span class="comment">//记录登陆日志 向sys_login_log里面插入数据</span></span><br><span class="line">			<span class="keyword">return</span> <span class="string">&quot;system/main/index&quot;</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			model.addAttribute(<span class="string">&quot;error&quot;</span>,SysConstast.USER_LOGIN_ERROR_MSG);</span><br><span class="line">			<span class="keyword">return</span> <span class="string">&quot;system/main/login&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="创建index-jsp"><a href="#创建index-jsp" class="headerlink" title="创建index.jsp"></a>创建index.jsp</h2><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;登陆&lt;/title&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">	&lt;jsp:forward page=&quot;login/toLogin.action&quot;&gt;&lt;/jsp:forward&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="创建login-jsp"><a href="#创建login-jsp" class="headerlink" title="创建login.jsp"></a>创建login.jsp</h2><p><img src="https://s1.ax1x.com/2020/10/13/0hYjTP.jpg" alt="0hYjTP.jpg"></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;loginHtml&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;登录-汽车出租系统&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;$&#123;ctx&#125;/resources/favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx&#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx&#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;loginBody&quot;</span>&gt;</span><br><span class="line">	&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span> id=<span class="string">&quot;loginFrm&quot;</span> method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;$&#123;ctx &#125;/login/login.action&quot;</span>&gt;</span><br><span class="line">		&lt;div class=&quot;login_face&quot;&gt;&lt;img src=&quot;$&#123;ctx&#125;/resources/images/face.jpg&quot; class=&quot;userAvatar&quot;&gt;&lt;/div&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item input-item&quot;</span>&gt;</span><br><span class="line">			&lt;label for=&quot;userName&quot;&gt;用户名&lt;/label&gt;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;请输入用户名&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span> name=<span class="string">&quot;loginname&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span> lay-verify=<span class="string">&quot;required&quot;</span>&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item input-item&quot;</span>&gt;</span><br><span class="line">			&lt;label for=&quot;password&quot;&gt;密码&lt;/label&gt;</span><br><span class="line">			&lt;input type=<span class="string">&quot;password&quot;</span> placeholder=<span class="string">&quot;请输入密码&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span> name=<span class="string">&quot;pwd&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span> lay-verify=<span class="string">&quot;required&quot;</span>&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item input-item&quot;</span> id=<span class="string">&quot;imgCode&quot;</span>&gt;</span><br><span class="line">			&lt;label for=&quot;code&quot;&gt;验证码&lt;/label&gt;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;请输入验证码&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span> id=<span class="string">&quot;code&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">			&lt;img src=<span class="string">&quot;$&#123;ctx&#125;/resources/images/code.jpg&quot;</span>&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">			&lt;button class=&quot;layui-btn layui-block&quot; lay-filter=&quot;login&quot; lay-submit&gt;登录&lt;/button&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item layui-row&quot;</span> style=<span class="string">&quot;text-align: center;color: red;&quot;</span>&gt;</span><br><span class="line">			$&#123;error &#125;</span><br><span class="line">		&lt;!-- 	&lt;a href=&quot;javascript:;&quot; class=&quot;seraph icon-qq layui-col-xs4 layui-col-sm4 layui-col-md4 layui-col-lg4&quot;&gt;&lt;/a&gt;</span><br><span class="line">			&lt;a href=&quot;javascript:;&quot; class=&quot;seraph icon-wechat layui-col-xs4 layui-col-sm4 layui-col-md4 layui-col-lg4&quot;&gt;&lt;/a&gt;</span><br><span class="line">			&lt;a href=&quot;javascript:;&quot; class=&quot;seraph icon-sina layui-col-xs4 layui-col-sm4 layui-col-md4 layui-col-lg4&quot;&gt;&lt;/a&gt; --&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;ctx&#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;ctx&#125;/resources/js/cache.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	layui.use([<span class="string">&#x27;form&#x27;</span>,<span class="string">&#x27;layer&#x27;</span>,<span class="string">&#x27;jquery&#x27;</span>],function()&#123;</span><br><span class="line">	    <span class="keyword">var</span> form = layui.form,</span><br><span class="line">	        layer = parent.layer === undefined ? layui.layer : top.layer</span><br><span class="line">	        $ = layui.jquery;</span><br><span class="line">	    <span class="comment">//登录按钮</span></span><br><span class="line">	    form.on(<span class="string">&quot;submit(login)&quot;</span>,function(data)&#123;</span><br><span class="line">	        $(<span class="keyword">this</span>).text(<span class="string">&quot;登录中...&quot;</span>).attr(<span class="string">&quot;disabled&quot;</span>,<span class="string">&quot;disabled&quot;</span>).addClass(<span class="string">&quot;layui-disabled&quot;</span>);</span><br><span class="line">	        setTimeout(function()&#123;</span><br><span class="line">	           $(<span class="string">&quot;#loginFrm&quot;</span>).submit();</span><br><span class="line">	        &#125;,<span class="number">1000</span>);</span><br><span class="line">	        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	    &#125;)</span><br><span class="line"></span><br><span class="line">	    <span class="comment">//表单输入效果</span></span><br><span class="line">	    $(<span class="string">&quot;.loginBody .input-item&quot;</span>).click(function(e)&#123;</span><br><span class="line">	        e.stopPropagation();</span><br><span class="line">	        $(<span class="keyword">this</span>).addClass(<span class="string">&quot;layui-input-focus&quot;</span>).find(<span class="string">&quot;.layui-input&quot;</span>).focus();</span><br><span class="line">	    &#125;)</span><br><span class="line">	    $(<span class="string">&quot;.loginBody .layui-form-item .layui-input&quot;</span>).focus(function()&#123;</span><br><span class="line">	        $(<span class="keyword">this</span>).parent().addClass(<span class="string">&quot;layui-input-focus&quot;</span>);</span><br><span class="line">	    &#125;)</span><br><span class="line">	    $(<span class="string">&quot;.loginBody .layui-form-item .layui-input&quot;</span>).blur(function()&#123;</span><br><span class="line">	        $(<span class="keyword">this</span>).parent().removeClass(<span class="string">&quot;layui-input-focus&quot;</span>);</span><br><span class="line">	        <span class="keyword">if</span>($(<span class="keyword">this</span>).val() != <span class="string">&#x27;&#x27;</span>)&#123;</span><br><span class="line">	            $(<span class="keyword">this</span>).parent().addClass(<span class="string">&quot;layui-input-active&quot;</span>);</span><br><span class="line">	        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	            $(<span class="keyword">this</span>).parent().removeClass(<span class="string">&quot;layui-input-active&quot;</span>);</span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="创建index-jsp-1"><a href="#创建index-jsp-1" class="headerlink" title="创建index.jsp"></a>创建index.jsp</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;首页-汽车出租系统&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;Access-Control-Allow-Origin&quot;</span> content=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/index.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;main_body&quot;</span>&gt;</span><br><span class="line">	&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-layout layui-layout-admin&quot;</span>&gt;</span><br><span class="line">		&lt;!-- 顶部 --&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-header header&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-main mag0&quot;</span>&gt;</span><br><span class="line">				&lt;a href=&quot;#&quot; class=&quot;logo&quot;&gt;汽车出租&lt;/a&gt;</span><br><span class="line">				&lt;!-- 显示/隐藏菜单 --&gt;</span><br><span class="line">				&lt;a href=&quot;javascript:;&quot; class=&quot;seraph hideMenu icon-caidan&quot;&gt;&lt;/a&gt;</span><br><span class="line">			    &lt;!-- 顶部右侧菜单 --&gt;</span><br><span class="line">			    &lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav top_menu&quot;</span>&gt;</span><br><span class="line">					&lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav-item&quot;</span> pc&gt;</span><br><span class="line">						&lt;a href=&quot;javascript:;&quot; class=&quot;clearCache&quot;&gt;&lt;i class=&quot;layui-icon&quot; data-icon=&quot;&amp;#xe640;&quot;&gt;&amp;#xe640;&lt;/i&gt;&lt;cite&gt;清除缓存&lt;/cite&gt;&lt;span class=&quot;layui-badge-dot&quot;&gt;&lt;/span&gt;&lt;/a&gt;</span><br><span class="line">					&lt;/li&gt;</span><br><span class="line">					&lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav-item lockcms&quot;</span> pc&gt;</span><br><span class="line">						&lt;a href=&quot;javascript:;&quot;&gt;&lt;i class=&quot;seraph icon-lock&quot;&gt;&lt;/i&gt;&lt;cite&gt;锁屏&lt;/cite&gt;&lt;/a&gt;</span><br><span class="line">					&lt;/li&gt;</span><br><span class="line">					&lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav-item&quot;</span> id=<span class="string">&quot;userInfo&quot;</span>&gt;</span><br><span class="line">						&lt;a href=&quot;javascript:;&quot;&gt;&lt;img src=&quot;$&#123;ctx &#125;/resources/images/face.jpg&quot; class=&quot;layui-nav-img userAvatar&quot; width=&quot;35&quot; height=&quot;35&quot;&gt;&lt;cite class=&quot;adminName&quot;&gt;$&#123;user.realname &#125;&lt;/cite&gt;&lt;/a&gt;</span><br><span class="line">						&lt;dl <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav-child&quot;</span>&gt;</span><br><span class="line">							&lt;dd&gt;&lt;a href=&quot;javascript:;&quot; data-url=&quot;$&#123;ctx &#125;/resources/page/user/userInfo.html&quot;&gt;&lt;i class=&quot;seraph icon-ziliao&quot; data-icon=&quot;icon-ziliao&quot;&gt;&lt;/i&gt;&lt;cite&gt;个人资料&lt;/cite&gt;&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">							&lt;dd&gt;&lt;a href=&quot;javascript:;&quot; data-url=&quot;$&#123;ctx &#125;/resources/page/user/changePwd.html&quot;&gt;&lt;i class=&quot;seraph icon-xiugai&quot; data-icon=&quot;icon-xiugai&quot;&gt;&lt;/i&gt;&lt;cite&gt;修改密码&lt;/cite&gt;&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">							&lt;dd&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;showNotice&quot;&gt;&lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe645;&lt;/i&gt;&lt;cite&gt;系统公告&lt;/cite&gt;&lt;span class=&quot;layui-badge-dot&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">							&lt;dd pc&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;functionSetting&quot;&gt;&lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe620;&lt;/i&gt;&lt;cite&gt;功能设定&lt;/cite&gt;&lt;span class=&quot;layui-badge-dot&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">							&lt;dd pc&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;changeSkin&quot;&gt;&lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe61b;&lt;/i&gt;&lt;cite&gt;更换皮肤&lt;/cite&gt;&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">							&lt;dd&gt;&lt;a href=&quot;page/login/login.html&quot; class=&quot;signOut&quot;&gt;&lt;i class=&quot;seraph icon-tuichu&quot;&gt;&lt;/i&gt;&lt;cite&gt;退出&lt;/cite&gt;&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">						&lt;/dl&gt;</span><br><span class="line">					&lt;/li&gt;</span><br><span class="line">				&lt;/ul&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;!-- 左侧导航 --&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-side layui-bg-black&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;user-photo&quot;</span>&gt;</span><br><span class="line">				&lt;a class=&quot;img&quot; title=&quot;我的头像&quot; &gt;&lt;img src=&quot;$&#123;ctx &#125;/resources/images/face.jpg&quot; class=&quot;userAvatar&quot;&gt;&lt;/a&gt;</span><br><span class="line">				&lt;p&gt;你好！&lt;span class=&quot;userName&quot;&gt;$&#123;user.realname &#125;&lt;/span&gt;, 欢迎登录&lt;/p&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;!-- 搜索 --&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form component&quot;</span>&gt;</span><br><span class="line">				&lt;select name=<span class="string">&quot;search&quot;</span> id=<span class="string">&quot;search&quot;</span> lay-search lay-filter=<span class="string">&quot;searchPage&quot;</span>&gt;</span><br><span class="line">					&lt;option value=&quot;&quot;&gt;搜索页面或功能&lt;/option&gt;</span><br><span class="line">					&lt;option value=&quot;1&quot;&gt;layer&lt;/option&gt;</span><br><span class="line">					&lt;option value=&quot;2&quot;&gt;form&lt;/option&gt;</span><br><span class="line">				&lt;/select&gt;</span><br><span class="line">				&lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe615;&lt;/i&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;navBar layui-side-scroll&quot;</span> id=<span class="string">&quot;navBar&quot;</span>&gt;</span><br><span class="line">				&lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav layui-nav-tree&quot;</span>&gt;</span><br><span class="line">					&lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav-item layui-this&quot;</span>&gt;</span><br><span class="line">						&lt;a href=&quot;javascript:;&quot; data-url=&quot;$&#123;ctx &#125;/resources/page/main.html&quot;&gt;&lt;i class=&quot;layui-icon&quot; data-icon=&quot;&quot;&gt;&lt;/i&gt;&lt;cite&gt;后台首页&lt;/cite&gt;&lt;/a&gt;</span><br><span class="line">					&lt;/li&gt;</span><br><span class="line">				&lt;/ul&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;!-- 右侧内容 --&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-body layui-form&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-tab mag0&quot;</span> lay-filter=<span class="string">&quot;bodyTab&quot;</span> id=<span class="string">&quot;top_tabs_box&quot;</span>&gt;</span><br><span class="line">				&lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-tab-title top_tab&quot;</span> id=<span class="string">&quot;top_tabs&quot;</span>&gt;</span><br><span class="line">					&lt;li class=&quot;layui-this&quot; lay-id=&quot;&quot;&gt;&lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe68e;&lt;/i&gt; &lt;cite&gt;后台首页&lt;/cite&gt;&lt;/li&gt;</span><br><span class="line">				&lt;/ul&gt;</span><br><span class="line">				&lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav closeBox&quot;</span>&gt;</span><br><span class="line">				  &lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav-item&quot;</span>&gt;</span><br><span class="line">				    &lt;a href=&quot;javascript:;&quot;&gt;&lt;i class=&quot;layui-icon caozuo&quot;&gt;&amp;#xe643;&lt;/i&gt; 页面操作&lt;/a&gt;</span><br><span class="line">				    &lt;dl <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav-child&quot;</span>&gt;</span><br><span class="line">					  &lt;dd&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;refresh refreshThis&quot;&gt;&lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe669;&lt;/i&gt; 刷新当前&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">				      &lt;dd&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;closePageOther&quot;&gt;&lt;i class=&quot;seraph icon-prohibit&quot;&gt;&lt;/i&gt; 关闭其他&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">				      &lt;dd&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;closePageAll&quot;&gt;&lt;i class=&quot;seraph icon-guanbi&quot;&gt;&lt;/i&gt; 关闭全部&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">				    &lt;/dl&gt;</span><br><span class="line">				  &lt;/li&gt;</span><br><span class="line">				&lt;/ul&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-tab-content clildFrame&quot;</span>&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-tab-item layui-show&quot;</span>&gt;</span><br><span class="line">						&lt;iframe src=&quot;$&#123;ctx &#125;/resources/page/main.html&quot;&gt;&lt;/iframe&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;!-- 底部 --&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-footer footer&quot;</span>&gt;</span><br><span class="line">			&lt;p&gt;&lt;span&gt;copyright @2019 老雷&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 移动导航 --&gt;</span><br><span class="line">	&lt;div class=&quot;site-tree-mobile&quot;&gt;&lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe602;&lt;/i&gt;&lt;/div&gt;</span><br><span class="line">	&lt;div class=&quot;site-mobile-shade&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;ctx &#125;/resources/js/cache.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	<span class="keyword">var</span> $,tab,dataStr,layer;</span><br><span class="line">	layui.config(&#123;</span><br><span class="line">		base : <span class="string">&quot;$&#123;ctx &#125;/resources/js/&quot;</span></span><br><span class="line">	&#125;).extend(&#123;</span><br><span class="line">		<span class="string">&quot;bodyTab&quot;</span> : <span class="string">&quot;bodyTab&quot;</span></span><br><span class="line">	&#125;)</span><br><span class="line">	layui.use([<span class="string">&#x27;bodyTab&#x27;</span>,<span class="string">&#x27;form&#x27;</span>,<span class="string">&#x27;element&#x27;</span>,<span class="string">&#x27;layer&#x27;</span>,<span class="string">&#x27;jquery&#x27;</span>],function()&#123;</span><br><span class="line">		<span class="keyword">var</span> form = layui.form,</span><br><span class="line">			element = layui.element;</span><br><span class="line">			$ = layui.$;</span><br><span class="line">	    	layer = parent.layer === undefined ? layui.layer : top.layer;</span><br><span class="line">			tab = layui.bodyTab(&#123;</span><br><span class="line">				openTabNum : <span class="string">&quot;50&quot;</span>,  <span class="comment">//最大可打开窗口数量</span></span><br><span class="line">				url : <span class="string">&quot;$&#123;ctx &#125;/resources/json/navs.json&quot;</span> <span class="comment">//获取菜单json地址</span></span><br><span class="line">			&#125;);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//通过顶部菜单获取左侧二三级菜单   注：此处只做演示之用，实际开发中通过接口传参的方式获取导航数据</span></span><br><span class="line">		<span class="function">function <span class="title">getData</span><span class="params">(json)</span></span>&#123;</span><br><span class="line">			$.getJSON(tab.tabConfig.url,function(data)&#123;</span><br><span class="line">	                dataStr = data;</span><br><span class="line">	                <span class="comment">//重新渲染左侧菜单</span></span><br><span class="line">	                tab.render();</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//页面加载时判断左侧菜单是否显示</span></span><br><span class="line">		<span class="comment">//通过顶部菜单获取左侧菜单</span></span><br><span class="line">		$(<span class="string">&quot;.topLevelMenus li,.mobileTopLevelMenus dd&quot;</span>).click(function()&#123;</span><br><span class="line">			<span class="keyword">if</span>($(<span class="keyword">this</span>).parents(<span class="string">&quot;.mobileTopLevelMenus&quot;</span>).length != <span class="string">&quot;0&quot;</span>)&#123;</span><br><span class="line">				$(<span class="string">&quot;.topLevelMenus li&quot;</span>).eq($(<span class="keyword">this</span>).index()).addClass(<span class="string">&quot;layui-this&quot;</span>).siblings().removeClass(<span class="string">&quot;layui-this&quot;</span>);</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				$(<span class="string">&quot;.mobileTopLevelMenus dd&quot;</span>).eq($(<span class="keyword">this</span>).index()).addClass(<span class="string">&quot;layui-this&quot;</span>).siblings().removeClass(<span class="string">&quot;layui-this&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			$(<span class="string">&quot;.layui-layout-admin&quot;</span>).removeClass(<span class="string">&quot;showMenu&quot;</span>);</span><br><span class="line">			$(<span class="string">&quot;body&quot;</span>).addClass(<span class="string">&quot;site-mobile&quot;</span>);</span><br><span class="line">			getData($(<span class="keyword">this</span>).data(<span class="string">&quot;menu&quot;</span>));</span><br><span class="line">			<span class="comment">//渲染顶部窗口</span></span><br><span class="line">			tab.tabMove();</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		<span class="comment">//隐藏左侧导航</span></span><br><span class="line">		$(<span class="string">&quot;.hideMenu&quot;</span>).click(function()&#123;</span><br><span class="line">			<span class="keyword">if</span>($(<span class="string">&quot;.topLevelMenus li.layui-this a&quot;</span>).data(<span class="string">&quot;url&quot;</span>))&#123;</span><br><span class="line">				layer.msg(<span class="string">&quot;此栏目状态下左侧菜单不可展开&quot;</span>);  <span class="comment">//主要为了避免左侧显示的内容与顶部菜单不匹配</span></span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			$(<span class="string">&quot;.layui-layout-admin&quot;</span>).toggleClass(<span class="string">&quot;showMenu&quot;</span>);</span><br><span class="line">			<span class="comment">//渲染顶部窗口</span></span><br><span class="line">			tab.tabMove();</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		<span class="comment">//通过顶部菜单获取左侧二三级菜单   注：此处只做演示之用，实际开发中通过接口传参的方式获取导航数据</span></span><br><span class="line">		getData(<span class="string">&quot;contentManagement&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//手机设备的简单适配</span></span><br><span class="line">	    $(<span class="string">&#x27;.site-tree-mobile&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, function()&#123;</span><br><span class="line">			$(<span class="string">&#x27;body&#x27;</span>).addClass(<span class="string">&#x27;site-mobile&#x27;</span>);</span><br><span class="line">		&#125;);</span><br><span class="line">	    $(<span class="string">&#x27;.site-mobile-shade&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, function()&#123;</span><br><span class="line">			$(<span class="string">&#x27;body&#x27;</span>).removeClass(<span class="string">&#x27;site-mobile&#x27;</span>);</span><br><span class="line">		&#125;);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 添加新窗口</span></span><br><span class="line">		$(<span class="string">&quot;body&quot;</span>).on(<span class="string">&quot;click&quot;</span>,<span class="string">&quot;.layui-nav .layui-nav-item a:not(&#x27;.mobileTopLevelMenus .layui-nav-item a&#x27;)&quot;</span>,function()&#123;</span><br><span class="line">			<span class="comment">//如果不存在子级</span></span><br><span class="line">			<span class="keyword">if</span>($(<span class="keyword">this</span>).siblings().length == <span class="number">0</span>)&#123;</span><br><span class="line">				addTab($(<span class="keyword">this</span>));</span><br><span class="line">				$(<span class="string">&#x27;body&#x27;</span>).removeClass(<span class="string">&#x27;site-mobile&#x27;</span>);  <span class="comment">//移动端点击菜单关闭菜单层</span></span><br><span class="line">			&#125;</span><br><span class="line">			$(<span class="keyword">this</span>).parent(<span class="string">&quot;li&quot;</span>).siblings().removeClass(<span class="string">&quot;layui-nav-itemed&quot;</span>);</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		<span class="comment">//清除缓存</span></span><br><span class="line">		$(<span class="string">&quot;.clearCache&quot;</span>).click(function()&#123;</span><br><span class="line">			window.sessionStorage.clear();</span><br><span class="line">	        window.localStorage.clear();</span><br><span class="line">	        <span class="keyword">var</span> index = layer.msg(<span class="string">&#x27;清除缓存中，请稍候&#x27;</span>,&#123;icon: <span class="number">16</span>,time:<span class="keyword">false</span>,shade:<span class="number">0.8</span>&#125;);</span><br><span class="line">	        setTimeout(function()&#123;</span><br><span class="line">	            layer.close(index);</span><br><span class="line">	            layer.msg(<span class="string">&quot;缓存清除成功！&quot;</span>);</span><br><span class="line">	        &#125;,<span class="number">1000</span>);</span><br><span class="line">	    &#125;)</span><br><span class="line"></span><br><span class="line">		<span class="comment">//刷新后还原打开的窗口</span></span><br><span class="line">	    <span class="keyword">if</span>(cacheStr == <span class="string">&quot;true&quot;</span>) &#123;</span><br><span class="line">	        <span class="keyword">if</span> (window.sessionStorage.getItem(<span class="string">&quot;menu&quot;</span>) != <span class="keyword">null</span>) &#123;</span><br><span class="line">	            menu = JSON.parse(window.sessionStorage.getItem(<span class="string">&quot;menu&quot;</span>));</span><br><span class="line">	            curmenu = window.sessionStorage.getItem(<span class="string">&quot;curmenu&quot;</span>);</span><br><span class="line">	            <span class="keyword">var</span> openTitle = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">	            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; menu.length; i++) &#123;</span><br><span class="line">	                openTitle = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">	                <span class="keyword">if</span> (menu[i].icon) &#123;</span><br><span class="line">	                    <span class="keyword">if</span> (menu[i].icon.split(<span class="string">&quot;-&quot;</span>)[<span class="number">0</span>] == <span class="string">&#x27;icon&#x27;</span>) &#123;</span><br><span class="line">	                        openTitle += <span class="string">&#x27;&lt;i class=&quot;seraph &#x27;</span> + menu[i].icon + <span class="string">&#x27;&quot;&gt;&lt;/i&gt;&#x27;</span>;</span><br><span class="line">	                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                        openTitle += <span class="string">&#x27;&lt;i class=&quot;layui-icon&quot;&gt;&#x27;</span> + menu[i].icon + <span class="string">&#x27;&lt;/i&gt;&#x27;</span>;</span><br><span class="line">	                    &#125;</span><br><span class="line">	                &#125;</span><br><span class="line">	                openTitle += <span class="string">&#x27;&lt;cite&gt;&#x27;</span> + menu[i].title + <span class="string">&#x27;&lt;/cite&gt;&#x27;</span>;</span><br><span class="line">	                openTitle += <span class="string">&#x27;&lt;i class=&quot;layui-icon layui-unselect layui-tab-close&quot; data-id=&quot;&#x27;</span> + menu[i].layId + <span class="string">&#x27;&quot;&gt;&amp;#x1006;&lt;/i&gt;&#x27;</span>;</span><br><span class="line">	                element.tabAdd(<span class="string">&quot;bodyTab&quot;</span>, &#123;</span><br><span class="line">	                    title: openTitle,</span><br><span class="line">	                    content: <span class="string">&quot;&lt;iframe src=&#x27;&quot;</span> + menu[i].href + <span class="string">&quot;&#x27; data-id=&#x27;&quot;</span> + menu[i].layId + <span class="string">&quot;&#x27;&gt;&lt;/frame&gt;&quot;</span>,</span><br><span class="line">	                    id: menu[i].layId</span><br><span class="line">	                &#125;)</span><br><span class="line">	                <span class="comment">//定位到刷新前的窗口</span></span><br><span class="line">	                <span class="keyword">if</span> (curmenu != <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">	                    <span class="keyword">if</span> (curmenu == <span class="string">&#x27;&#x27;</span> || curmenu == <span class="string">&quot;null&quot;</span>) &#123;  <span class="comment">//定位到后台首页</span></span><br><span class="line">	                        element.tabChange(<span class="string">&quot;bodyTab&quot;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">	                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (JSON.parse(curmenu).title == menu[i].title) &#123;  <span class="comment">//定位到刷新前的页面</span></span><br><span class="line">	                        element.tabChange(<span class="string">&quot;bodyTab&quot;</span>, menu[i].layId);</span><br><span class="line">	                    &#125;</span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    element.tabChange(<span class="string">&quot;bodyTab&quot;</span>, menu[menu.length - <span class="number">1</span>].layId);</span><br><span class="line">	                &#125;</span><br><span class="line">	            &#125;</span><br><span class="line">	            <span class="comment">//渲染顶部窗口</span></span><br><span class="line">	            tab.tabMove();</span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			window.sessionStorage.removeItem(<span class="string">&quot;menu&quot;</span>);</span><br><span class="line">			window.sessionStorage.removeItem(<span class="string">&quot;curmenu&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//打开新窗口</span></span><br><span class="line">	<span class="function">function <span class="title">addTab</span><span class="params">(_this)</span></span>&#123;</span><br><span class="line">		tab.tabAdd(_this);</span><br><span class="line">	&#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="测试登录效果"><a href="#测试登录效果" class="headerlink" title="测试登录效果"></a>测试登录效果</h2><h3 id="账号密码不正确"><a href="#账号密码不正确" class="headerlink" title="账号密码不正确"></a>账号密码不正确</h3><p><img src="https://s1.ax1x.com/2020/10/13/0ht8Tx.png" alt="0ht8Tx.png"></p>
<h3 id="账号密码匹配，登录成功进入index-jsp"><a href="#账号密码匹配，登录成功进入index-jsp" class="headerlink" title="账号密码匹配，登录成功进入index.jsp"></a>账号密码匹配，登录成功进入index.jsp</h3><p><a href="https://imgchr.com/i/0htwXd"><img src="https://s1.ax1x.com/2020/10/13/0htwXd.png" alt="0htwXd.png"></a></p>
<h3 id="前端页面锁定功能"><a href="#前端页面锁定功能" class="headerlink" title="前端页面锁定功能"></a>前端页面锁定功能</h3><p><img src="https://s1.ax1x.com/2020/10/13/0htL3F.png" alt="0htL3F.png"></p>
<h1 id="工作台简单实现"><a href="#工作台简单实现" class="headerlink" title="工作台简单实现"></a>工作台简单实现</h1><h2 id="创建DeskController"><a href="#创建DeskController" class="headerlink" title="创建DeskController"></a>创建DeskController</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 13, 2020 6:17:06 PM</span></span><br><span class="line"><span class="comment">* 类说明:工作台控制器</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;desk&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeskController</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 跳转到工作台的页面</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;toDeskManager&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toDeskManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;system/main/deskManager&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="创建deskManager-jsp"><a href="#创建deskManager-jsp" class="headerlink" title="创建deskManager.jsp"></a>创建deskManager.jsp</h2><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;工作台&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;childrenBody&quot;</span>&gt;</span><br><span class="line">	&lt;blockquote <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-elem-quote layui-bg-green&quot;</span>&gt;</span><br><span class="line">		&lt;div id=&quot;nowTime&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;/blockquote&gt;</span><br><span class="line">	&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-row layui-col-space10&quot;</span>&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-col-lg6 layui-col-md6&quot;</span>&gt;</span><br><span class="line">			&lt;blockquote class=&quot;layui-elem-quote title&quot;&gt;最新文章 &lt;i class=&quot;layui-icon layui-red&quot;&gt;&amp;#xe756;&lt;/i&gt;&lt;/blockquote&gt;</span><br><span class="line">			&lt;table <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-table mag0&quot;</span> lay-skin=<span class="string">&quot;line&quot;</span>&gt;</span><br><span class="line">				&lt;colgroup&gt;</span><br><span class="line">					&lt;col&gt;</span><br><span class="line">					&lt;col width=<span class="string">&quot;110&quot;</span>&gt;</span><br><span class="line">				&lt;/colgroup&gt;</span><br><span class="line">				&lt;tbody class=&quot;hot_news&quot;&gt;&lt;/tbody&gt;</span><br><span class="line">			&lt;/table&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//获取系统时间</span></span><br><span class="line">	<span class="keyword">var</span> newDate = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">	getLangDate();</span><br><span class="line">	<span class="comment">//值小于10时，在前面补0</span></span><br><span class="line">	<span class="function">function <span class="title">dateFilter</span><span class="params">(date)</span></span>&#123;</span><br><span class="line">	    <span class="keyword">if</span>(date &lt; <span class="number">10</span>)&#123;<span class="keyword">return</span> <span class="string">&quot;0&quot;</span>+date;&#125;</span><br><span class="line">	    <span class="keyword">return</span> date;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">function <span class="title">getLangDate</span><span class="params">()</span></span>&#123;</span><br><span class="line">	    <span class="keyword">var</span> dateObj = <span class="keyword">new</span> Date(); <span class="comment">//表示当前系统时间的Date对象</span></span><br><span class="line">	    <span class="keyword">var</span> year = dateObj.getFullYear(); <span class="comment">//当前系统时间的完整年份值</span></span><br><span class="line">	    <span class="keyword">var</span> month = dateObj.getMonth()+<span class="number">1</span>; <span class="comment">//当前系统时间的月份值</span></span><br><span class="line">	    <span class="keyword">var</span> date = dateObj.getDate(); <span class="comment">//当前系统时间的月份中的日</span></span><br><span class="line">	    <span class="keyword">var</span> day = dateObj.getDay(); <span class="comment">//当前系统时间中的星期值</span></span><br><span class="line">	    <span class="keyword">var</span> weeks = [<span class="string">&quot;星期日&quot;</span>,<span class="string">&quot;星期一&quot;</span>,<span class="string">&quot;星期二&quot;</span>,<span class="string">&quot;星期三&quot;</span>,<span class="string">&quot;星期四&quot;</span>,<span class="string">&quot;星期五&quot;</span>,<span class="string">&quot;星期六&quot;</span>];</span><br><span class="line">	    <span class="keyword">var</span> week = weeks[day]; <span class="comment">//根据星期值，从数组中获取对应的星期字符串</span></span><br><span class="line">	    <span class="keyword">var</span> hour = dateObj.getHours(); <span class="comment">//当前系统时间的小时值</span></span><br><span class="line">	    <span class="keyword">var</span> minute = dateObj.getMinutes(); <span class="comment">//当前系统时间的分钟值</span></span><br><span class="line">	    <span class="keyword">var</span> second = dateObj.getSeconds(); <span class="comment">//当前系统时间的秒钟值</span></span><br><span class="line">	    <span class="keyword">var</span> timeValue = <span class="string">&quot;&quot;</span> +((hour &gt;= <span class="number">12</span>) ? (hour &gt;= <span class="number">18</span>) ? <span class="string">&quot;晚上&quot;</span> : <span class="string">&quot;下午&quot;</span> : <span class="string">&quot;上午&quot;</span> ); <span class="comment">//当前时间属于上午、晚上还是下午</span></span><br><span class="line">	    newDate = dateFilter(year)+<span class="string">&quot;年&quot;</span>+dateFilter(month)+<span class="string">&quot;月&quot;</span>+dateFilter(date)+<span class="string">&quot;日 &quot;</span>+<span class="string">&quot; &quot;</span>+dateFilter(hour)+<span class="string">&quot;:&quot;</span>+dateFilter(minute)+<span class="string">&quot;:&quot;</span>+dateFilter(second);</span><br><span class="line">	    document.getElementById(<span class="string">&quot;nowTime&quot;</span>).innerHTML = <span class="string">&quot;亲爱的$&#123;user.realname&#125;，&quot;</span>+timeValue+<span class="string">&quot;好！ 欢迎使用汽车出租系统。当前时间为： &quot;</span>+newDate+<span class="string">&quot;　&quot;</span>+week;</span><br><span class="line">	    setTimeout(<span class="string">&quot;getLangDate()&quot;</span>,<span class="number">1000</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	layui.use([<span class="string">&#x27;form&#x27;</span>,<span class="string">&#x27;element&#x27;</span>,<span class="string">&#x27;layer&#x27;</span>,<span class="string">&#x27;jquery&#x27;</span>],function()&#123;</span><br><span class="line">	    <span class="keyword">var</span> form = layui.form,</span><br><span class="line">	        layer = parent.layer === undefined ? layui.layer : top.layer,</span><br><span class="line">	        element = layui.element;</span><br><span class="line">	        $ = layui.jquery;</span><br><span class="line">	    <span class="comment">//上次登录时间【此处应该从接口获取，实际使用中请自行更换】</span></span><br><span class="line">	    $(<span class="string">&quot;.loginTime&quot;</span>).html(newDate.split(<span class="string">&quot;日&quot;</span>)[<span class="number">0</span>]+<span class="string">&quot;日&lt;/br&gt;&quot;</span>+newDate.split(<span class="string">&quot;日&quot;</span>)[<span class="number">1</span>]);</span><br><span class="line">	    <span class="comment">//icon动画</span></span><br><span class="line">	    $(<span class="string">&quot;.panel a&quot;</span>).hover(function()&#123;</span><br><span class="line">	        $(<span class="keyword">this</span>).find(<span class="string">&quot;.layui-anim&quot;</span>).addClass(<span class="string">&quot;layui-anim-scaleSpring&quot;</span>);</span><br><span class="line">	    &#125;,function()&#123;</span><br><span class="line">	        $(<span class="keyword">this</span>).find(<span class="string">&quot;.layui-anim&quot;</span>).removeClass(<span class="string">&quot;layui-anim-scaleSpring&quot;</span>);</span><br><span class="line">	    &#125;)</span><br><span class="line">	    $(<span class="string">&quot;.panel a&quot;</span>).click(function()&#123;</span><br><span class="line">	        parent.addTab($(<span class="keyword">this</span>));</span><br><span class="line">	    &#125;)</span><br><span class="line">	    <span class="comment">//最新文章列表</span></span><br><span class="line">	    $.get(<span class="string">&quot;$&#123;ctx&#125;/resources/json/newsList.json&quot;</span>,function(data)&#123;</span><br><span class="line">	        <span class="keyword">var</span> hotNewsHtml = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">	        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">	            hotNewsHtml += <span class="string">&#x27;&lt;tr&gt;&#x27;</span></span><br><span class="line">	                +<span class="string">&#x27;&lt;td align=&quot;left&quot;&gt;&lt;a href=&quot;javascript:;&quot;&gt; &#x27;</span>+data.data[i].newsName+<span class="string">&#x27;&lt;/a&gt;&lt;/td&gt;&#x27;</span></span><br><span class="line">	                +<span class="string">&#x27;&lt;td&gt;&#x27;</span>+data.data[i].newsTime.substring(<span class="number">0</span>,<span class="number">10</span>)+<span class="string">&#x27;&lt;/td&gt;&#x27;</span></span><br><span class="line">	                +<span class="string">&#x27;&lt;/tr&gt;&#x27;</span>;</span><br><span class="line">	        &#125;</span><br><span class="line">	        $(<span class="string">&quot;.hot_news&quot;</span>).html(hotNewsHtml);</span><br><span class="line">	        $(<span class="string">&quot;.userAll span&quot;</span>).text(data.length);</span><br><span class="line">	    &#125;)</span><br><span class="line"></span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="修改index-jsp"><a href="#修改index-jsp" class="headerlink" title="修改index.jsp"></a>修改index.jsp</h2><p><img src="https://s1.ax1x.com/2020/10/13/0hDidJ.png" alt="0hDidJ.png"></p>
<p><img src="https://s1.ax1x.com/2020/10/13/0hDmQK.png" alt="0hDmQK.png"></p>
<h2 id="工作台功能完成效果"><a href="#工作台功能完成效果" class="headerlink" title="工作台功能完成效果"></a>工作台功能完成效果</h2><p><img src="https://s1.ax1x.com/2020/10/13/0hDMee.png" alt="0hDMee.png"></p>
<h1 id="菜单管理-1"><a href="#菜单管理-1" class="headerlink" title="菜单管理"></a>菜单管理</h1><h2 id="菜单初始化"><a href="#菜单初始化" class="headerlink" title="菜单初始化"></a>菜单初始化</h2><h3 id="创建Menu类"><a href="#创建Menu类" class="headerlink" title="创建Menu类"></a>创建Menu类</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.domain;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 14, 2020 11:41:38 AM</span></span><br><span class="line"><span class="comment">* 类说明</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Menu</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Integer pid;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String href;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Integer spread;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String target;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String icon;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Integer available;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Menu</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Menu</span><span class="params">(Integer id, Integer pid, String title, String href, Integer spread, String target, String icon,</span></span></span><br><span class="line"><span class="function"><span class="params">			Integer available)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.pid = pid;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">		<span class="keyword">this</span>.href = href;</span><br><span class="line">		<span class="keyword">this</span>.spread = spread;</span><br><span class="line">		<span class="keyword">this</span>.target = target;</span><br><span class="line">		<span class="keyword">this</span>.icon = icon;</span><br><span class="line">		<span class="keyword">this</span>.available = available;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getPid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> pid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPid</span><span class="params">(Integer pid)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.pid = pid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> title;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getHref</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> href;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHref</span><span class="params">(String href)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.href = href;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getSpread</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> spread;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSpread</span><span class="params">(Integer spread)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.spread = spread;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getTarget</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> target;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTarget</span><span class="params">(String target)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.target = target;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getIcon</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> icon;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIcon</span><span class="params">(String icon)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.icon = icon;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getAvailable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> available;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAvailable</span><span class="params">(Integer available)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.available = available;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="编写初始化工具类-InitMenuDataUtil-java"><a href="#编写初始化工具类-InitMenuDataUtil-java" class="headerlink" title="编写初始化工具类:InitMenuDataUtil.java"></a>编写初始化工具类:InitMenuDataUtil.java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Menu;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.mapper.MenuMapper;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 14, 2020 1:59:28 PM 类说明:初始化菜单</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InitMenuDataUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> ApplicationContext context;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;classpath:applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">		MenuMapper menuMapper = context.getBean(MenuMapper.class);</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">1</span>, <span class="number">0</span>, <span class="string">&quot;汽车出租系统&quot;</span>, <span class="keyword">null</span>, <span class="number">1</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe68e;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">2</span>, <span class="number">1</span>, <span class="string">&quot;基础管理&quot;</span>, <span class="keyword">null</span>, <span class="number">1</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe653;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">3</span>, <span class="number">1</span>, <span class="string">&quot;业务管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe663;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">4</span>, <span class="number">1</span>, <span class="string">&quot;系统管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe716;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">5</span>, <span class="number">1</span>, <span class="string">&quot;统计分析&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe629;&quot;</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">6</span>, <span class="number">2</span>, <span class="string">&quot;客户管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe770;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">7</span>, <span class="number">2</span>, <span class="string">&quot;车辆管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe657;&quot;</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">8</span>, <span class="number">3</span>, <span class="string">&quot;汽车出租&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe65b;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">9</span>, <span class="number">3</span>, <span class="string">&quot;出租单管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe6b2;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">10</span>, <span class="number">3</span>, <span class="string">&quot;汽车入库&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe65a;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">11</span>, <span class="number">3</span>, <span class="string">&quot;检查单管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe705;&quot;</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">12</span>, <span class="number">4</span>, <span class="string">&quot;菜单管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe60f;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">13</span>, <span class="number">4</span>, <span class="string">&quot;角色管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe66f;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">14</span>, <span class="number">4</span>, <span class="string">&quot;用户管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe770;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">15</span>, <span class="number">4</span>, <span class="string">&quot;日志管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe655;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">16</span>, <span class="number">4</span>, <span class="string">&quot;公告管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe645;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">17</span>, <span class="number">4</span>, <span class="string">&quot;数据源监控&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe857;&quot;</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">18</span>, <span class="number">5</span>, <span class="string">&quot;客户地区统计&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe63c;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">19</span>, <span class="number">5</span>, <span class="string">&quot;公司年度月份销售额&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe62c;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">20</span>, <span class="number">5</span>, <span class="string">&quot;业务员年度销售额&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe62d;&quot;</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">&quot;初始化完成&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="清空sys-menu数据库表"><a href="#清空sys-menu数据库表" class="headerlink" title="清空sys_menu数据库表"></a>清空sys_menu数据库表</h3><p><img src="https://s1.ax1x.com/2020/10/14/05HHjf.png" alt="05HHjf.png"></p>
<h2 id="加载菜单"><a href="#加载菜单" class="headerlink" title="加载菜单"></a>加载菜单</h2><h3 id="创建MenuMapper接口"><a href="#创建MenuMapper接口" class="headerlink" title="创建MenuMapper接口"></a>创建MenuMapper接口</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Menu;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 14, 2020 1:41:37 PM 类说明</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MenuMapper</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">deleteByPrimaryKey</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(Menu record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">insertSelective</span><span class="params">(Menu record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">Menu <span class="title">selectByPrimaryKey</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">updateByPrimaryKeySelective</span><span class="params">(Menu record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">updateByPrimaryKey</span><span class="params">(Menu record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询所有菜单</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">List&lt;Menu&gt; <span class="title">queryAllMenu</span><span class="params">(Menu menu)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="编写MenuMapper-xml"><a href="#编写MenuMapper-xml" class="headerlink" title="编写MenuMapper.xml"></a>编写MenuMapper.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.study.sys.mapper.MenuMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.study.sys.domain.Menu&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;pid&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;pid&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;title&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;title&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;href&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;href&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;spread&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;spread&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;target&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;target&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;icon&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;available&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;available&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;Base_Column_List&quot;</span>&gt;</span></span><br><span class="line">    id, pid, title, href, spread, target, icon, available</span><br><span class="line">  <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select </span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from sys_menu</span><br><span class="line">    where id = #&#123;id,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">    delete from sys_menu</span><br><span class="line">    where id = #&#123;id,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Menu&quot;</span>&gt;</span></span><br><span class="line">    insert into sys_menu (id, pid, title, </span><br><span class="line">      href, spread, target, </span><br><span class="line">      icon, available)</span><br><span class="line">    values (#&#123;id,jdbcType=INTEGER&#125;, #&#123;pid,jdbcType=INTEGER&#125;, #&#123;title,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;href,jdbcType=VARCHAR&#125;, #&#123;spread,jdbcType=INTEGER&#125;, #&#123;target,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;icon,jdbcType=VARCHAR&#125;, #&#123;available,jdbcType=INTEGER&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertSelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Menu&quot;</span>&gt;</span></span><br><span class="line">    insert into sys_menu</span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;(&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="line">        id,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pid != null&quot;</span>&gt;</span></span><br><span class="line">        pid,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">        title,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;href != null&quot;</span>&gt;</span></span><br><span class="line">        href,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;spread != null&quot;</span>&gt;</span></span><br><span class="line">        spread,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;target != null&quot;</span>&gt;</span></span><br><span class="line">        target,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;icon != null&quot;</span>&gt;</span></span><br><span class="line">        icon,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">        available,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;values (&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pid != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;pid,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;title,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;href != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;href,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;spread != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;spread,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;target != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;target,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;icon != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;icon,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;available,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKeySelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Menu&quot;</span>&gt;</span></span><br><span class="line">    update sys_menu</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pid != null&quot;</span>&gt;</span></span><br><span class="line">        pid = #&#123;pid,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">        title = #&#123;title,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;href != null&quot;</span>&gt;</span></span><br><span class="line">        href = #&#123;href,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;spread != null&quot;</span>&gt;</span></span><br><span class="line">        spread = #&#123;spread,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;target != null&quot;</span>&gt;</span></span><br><span class="line">        target = #&#123;target,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;icon != null&quot;</span>&gt;</span></span><br><span class="line">        icon = #&#123;icon,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">        available = #&#123;available,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    where id = #&#123;id,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Menu&quot;</span>&gt;</span></span><br><span class="line">    update sys_menu</span><br><span class="line">    set pid = #&#123;pid,jdbcType=INTEGER&#125;,</span><br><span class="line">      title = #&#123;title,jdbcType=VARCHAR&#125;,</span><br><span class="line">      href = #&#123;href,jdbcType=VARCHAR&#125;,</span><br><span class="line">      spread = #&#123;spread,jdbcType=INTEGER&#125;,</span><br><span class="line">      target = #&#123;target,jdbcType=VARCHAR&#125;,</span><br><span class="line">      icon = #&#123;icon,jdbcType=VARCHAR&#125;,</span><br><span class="line">      available = #&#123;available,jdbcType=INTEGER&#125;</span><br><span class="line">    where id = #&#123;id,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- 查询所有菜单 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllMenu&quot;</span>  <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select </span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from sys_menu</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title!=null and title!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">    		and title like concat(&quot;%&quot;,#&#123;title&#125;,&quot;%&quot;)</span><br><span class="line">    	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available!=null&quot;</span>&gt;</span></span><br><span class="line">    		and available=#&#123;available&#125;</span><br><span class="line">    	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id!=null&quot;</span>&gt;</span></span><br><span class="line">    		and (id=#&#123;id&#125; or pid=#&#123;id&#125;)</span><br><span class="line">    	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h3 id="创建MenuVo"><a href="#创建MenuVo" class="headerlink" title="创建MenuVo"></a>创建MenuVo</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Menu;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 14, 2020 11:39:05 AM</span></span><br><span class="line"><span class="comment">* 类说明</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuVo</span> <span class="keyword">extends</span> <span class="title">Menu</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建MenuService接口"><a href="#创建MenuService接口" class="headerlink" title="创建MenuService接口"></a>创建MenuService接口</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Menu;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.MenuVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 14, 2020 4:47:57 PM</span></span><br><span class="line"><span class="comment">* 菜单管理接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MenuService</span> </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询所有菜单</span></span><br><span class="line"><span class="comment">	 * List&lt;Menu&gt;</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Menu&gt; <span class="title">queryAllMenuForList</span><span class="params">(MenuVo menuVo)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据用户id查询用户可用的菜单</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> menuVo</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> userId</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> </span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Menu&gt; <span class="title">queryMenuByUserIdForList</span><span class="params">(MenuVo menuVo,Integer userId)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建接口实现类MenuServiceImpl"><a href="#创建接口实现类MenuServiceImpl" class="headerlink" title="创建接口实现类MenuServiceImpl"></a>创建接口实现类MenuServiceImpl</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Menu;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.mapper.MenuMapper;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.service.MenuService;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.MenuVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 14, 2020 4:52:28 PM</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuServiceImpl</span> <span class="keyword">implements</span> <span class="title">MenuService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> MenuMapper menuMapper;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Menu&gt; <span class="title">queryAllMenuForList</span><span class="params">(MenuVo menuVo)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> menuMapper.queryAllMenu(menuVo);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 初步完成：权限系统完成之后继续修改</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Menu&gt; <span class="title">queryMenuByUserIdForList</span><span class="params">(MenuVo menuVo, Integer userId)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> menuMapper.queryAllMenu(menuVo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="修改SysConstast"><a href="#修改SysConstast" class="headerlink" title="修改SysConstast"></a>修改SysConstast</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.constast;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 12, 2020 6:11:25 PM </span></span><br><span class="line"><span class="comment"> * 类说明:常量接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SysConstast</span> </span>&#123;</span><br><span class="line">	String USER_LOGIN_ERROR_MSG = <span class="string">&quot;用户名或密码不正确&quot;</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 可用状态</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Integer AVAILABLE_TRUE = <span class="number">1</span>;</span><br><span class="line">	Integer AVAILABLE_FALSE = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 用户类型</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Integer USER_TYPE_SUPER = <span class="number">1</span>;</span><br><span class="line">	Integer USER_TYPE_NORMAL = <span class="number">2</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 是否展开</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Integer SPREAD_TRUE = <span class="number">1</span>;</span><br><span class="line">	Integer SPREAD_FALSE = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建TreeNode"><a href="#创建TreeNode" class="headerlink" title="创建TreeNode"></a>创建TreeNode</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonProperty;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 将parentId序列化成pid</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@JsonProperty(&quot;parentId&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Integer pid;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="keyword">private</span> String icon;</span><br><span class="line">	<span class="keyword">private</span> String href;</span><br><span class="line">	<span class="keyword">private</span> Boolean spread;</span><br><span class="line">	<span class="keyword">private</span> String target;</span><br><span class="line">	<span class="keyword">private</span> List&lt;TreeNode&gt; children = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 首页左边导航树的构造器</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> pid</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> title</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> icon</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> href</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> spread</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> target</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">TreeNode</span><span class="params">(Integer id, Integer pid, String title, String icon, String href, Boolean spread, String target)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.pid = pid;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">		<span class="keyword">this</span>.icon = icon;</span><br><span class="line">		<span class="keyword">this</span>.href = href;</span><br><span class="line">		<span class="keyword">this</span>.spread = spread;</span><br><span class="line">		<span class="keyword">this</span>.target = target;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getPid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> pid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPid</span><span class="params">(Integer pid)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.pid = pid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> title;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getIcon</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> icon;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIcon</span><span class="params">(String icon)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.icon = icon;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getHref</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> href;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHref</span><span class="params">(String href)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.href = href;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Boolean <span class="title">getSpread</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> spread;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSpread</span><span class="params">(Boolean spread)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.spread = spread;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getTarget</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> target;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTarget</span><span class="params">(String target)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.target = target;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;TreeNode&gt; <span class="title">getChildren</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> children;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setChildren</span><span class="params">(List&lt;TreeNode&gt; children)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.children = children;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建TreeNodeBuilder工具类"><a href="#创建TreeNodeBuilder工具类" class="headerlink" title="创建TreeNodeBuilder工具类"></a>创建TreeNodeBuilder工具类</h3><p>作用：将数据库中的列表转换成具有层级关系的目录</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNodeBuilder</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 把简单的集合转成有层级关系的集合</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> nodes</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> topPid</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;TreeNode&gt; <span class="title">builder</span><span class="params">(List&lt;TreeNode&gt; nodes, Integer topPid)</span> </span>&#123;</span><br><span class="line">		List&lt;TreeNode&gt; treeNodes = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		<span class="keyword">for</span> (TreeNode n1 : nodes) &#123;</span><br><span class="line">			<span class="keyword">if</span> (n1.getPid() == topPid) &#123;</span><br><span class="line">				treeNodes.add(n1);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span> (TreeNode n2 : nodes) &#123;</span><br><span class="line">				<span class="keyword">if</span> (n2.getPid() == n1.getId()) &#123;</span><br><span class="line">					n1.getChildren().add(n2);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> treeNodes;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="创建MenuController"><a href="#创建MenuController" class="headerlink" title="创建MenuController"></a>创建MenuController</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.constast.SysConstast;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Menu;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.service.MenuService;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.TreeNode;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.TreeNodeBuilder;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.WebUtils;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.MenuVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 14, 2020 4:56:01 PM 菜单控制器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;menu&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuController</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> MenuService menuService;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;loadIndexLeftMenuJson&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;TreeNode&gt; <span class="title">loadIndexLeftMenuJson</span><span class="params">(MenuVo menuVo)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 得到当前登陆的用户对象</span></span><br><span class="line">		User user = (User) WebUtils.getHttpSession().getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">		List&lt;Menu&gt; list = <span class="keyword">null</span>;</span><br><span class="line">		menuVo.setAvailable(SysConstast.AVAILABLE_TRUE);<span class="comment">// 只查询可用的</span></span><br><span class="line">		<span class="keyword">if</span> (user.getType() == SysConstast.USER_TYPE_SUPER) &#123;</span><br><span class="line">			list = <span class="keyword">this</span>.menuService.queryAllMenuForList(menuVo);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			list = <span class="keyword">this</span>.menuService.queryMenuByUserIdForList(menuVo, user.getUserid());</span><br><span class="line">		&#125;</span><br><span class="line">		List&lt;TreeNode&gt; nodes = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		<span class="comment">// 把list里面的数据放到nodes</span></span><br><span class="line">		<span class="keyword">for</span> (Menu menu : list) &#123;</span><br><span class="line">			Integer id = menu.getId();</span><br><span class="line">			Integer pid = menu.getPid();</span><br><span class="line">			String title = menu.getTitle();</span><br><span class="line">			String icon = menu.getIcon();</span><br><span class="line">			String href = menu.getHref();</span><br><span class="line">			Boolean spread = menu.getSpread() == SysConstast.SPREAD_TRUE ? <span class="keyword">true</span> : <span class="keyword">false</span>;</span><br><span class="line">			String target = menu.getTarget();</span><br><span class="line">			nodes.add(<span class="keyword">new</span> TreeNode(id, pid, title, icon, href, spread, target));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> TreeNodeBuilder.builder(nodes, <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="修改system-main-index-jsp"><a href="#修改system-main-index-jsp" class="headerlink" title="修改system/main/index.jsp"></a>修改system/main/index.jsp</h3><p><img src="https://s1.ax1x.com/2020/10/15/0oQp9g.png" alt="0oQp9g.png"></p>
<h3 id="启动测试"><a href="#启动测试" class="headerlink" title="启动测试"></a>启动测试</h3><p><strong>查询出超级管理员所有的菜单</strong></p>
<p><img src="https://s1.ax1x.com/2020/10/15/0oQCcj.png" alt="0oQCcj.png"></p>
<h2 id="对菜单进行权限管理分配"><a href="#对菜单进行权限管理分配" class="headerlink" title="对菜单进行权限管理分配"></a>对菜单进行权限管理分配</h2><blockquote>
<p>角色权限管理(Role-Based Access Control)</p>
</blockquote>
<h3 id="权限和角色和用户说明"><a href="#权限和角色和用户说明" class="headerlink" title="权限和角色和用户说明"></a>权限和角色和用户说明</h3><ul>
<li><p><strong>权限包括：</strong> 菜单、URL、按钮的权限；这次主要是对菜单权限进行设置  </p>
</li>
<li><p><strong>角色：</strong> 主要是对权限的打包</p>
<ul>
<li>超级管理员 ：可以操作所有菜单、所有URL、所有按钮权限</li>
<li>业务管理员：可以操作所有业务的菜单、所有业务的URL、所有业务的按钮</li>
<li>统计管理员：可以操作所有统计的菜单、所有统计的URL、所有统计的按钮</li>
</ul>
</li>
<li><p><strong>用户</strong></p>
</li>
</ul>
<p><strong>说明：</strong> 一个角色可以对应多个权限，一个权限可以被多个角色使用，所以角色和权限是多对多的关系，采用第三张表实现逻辑关系；一个用户对应多个角色，一个角色对应多个用户，所以用户和角色也是多对多关系。</p>
<h3 id="加深理解"><a href="#加深理解" class="headerlink" title="加深理解"></a>加深理解</h3><p><strong>分析菜单表与角色表与用户表的关系</strong></p>
<h4 id="菜单表"><a href="#菜单表" class="headerlink" title="菜单表"></a>菜单表</h4><table>
<thead>
<tr>
<th>菜单表(sys_menu)</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th align="center"></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>pid</td>
<td>name</td>
<td>href</td>
<td>open</td>
<td>parent</td>
<td>icon</td>
<td align="center">tabicon</td>
<td>available</td>
</tr>
<tr>
<td></td>
<td>(父节点id)</td>
<td></td>
<td>(地址)</td>
<td>(是否展开)</td>
<td>(是否父节点)</td>
<td></td>
<td align="center"></td>
<td>(是否可用)</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>汽车出租系统</td>
<td></td>
<td></td>
<td></td>
<td>/resouce/1.png</td>
<td align="center">icon-add</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>基础管理</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>客户管理</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>车辆管理</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>业务管理</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>6</td>
<td>5</td>
<td>汽车出租</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>7</td>
<td>5</td>
<td>出租单管理</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center"></td>
<td></td>
</tr>
</tbody></table>
<h4 id="角色表"><a href="#角色表" class="headerlink" title="角色表"></a>角色表</h4><table>
<thead>
<tr>
<th>角色表sys_role</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>name</td>
<td>remark</td>
</tr>
<tr>
<td>1</td>
<td>CEO</td>
<td>CEO</td>
</tr>
<tr>
<td>2</td>
<td>部门经理</td>
<td>经理</td>
</tr>
<tr>
<td>3</td>
<td>BA</td>
<td>保安</td>
</tr>
</tbody></table>
<h4 id="角色和菜单表的中间表"><a href="#角色和菜单表的中间表" class="headerlink" title="角色和菜单表的中间表"></a>角色和菜单表的中间表</h4><table>
<thead>
<tr>
<th>角色和菜单关系表（sys_role_menu）</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>rid(角色编号)</td>
<td>mid(菜单编号)</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td>1</td>
<td>7</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
</tr>
</tbody></table>
<h4 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h4><p>已知角色id=4 查询当前角色所拥有的菜单</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 方式一：</span></span><br><span class="line"><span class="keyword">SELECT</span> t2.* </span><br><span class="line"><span class="keyword">FROM</span> sys_role_menu t1,sys_menu t2</span><br><span class="line"><span class="keyword">WHERE</span> t1.<span class="string">`rid`</span>=<span class="number">4</span> <span class="keyword">AND</span> t1.<span class="string">`mid`</span>=t2.<span class="string">`id`</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式二：</span></span><br><span class="line"><span class="keyword">SELECT</span> t2.*</span><br><span class="line"><span class="keyword">FROM</span> sys_role_menu t1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> sys_menu t2 <span class="keyword">ON</span>(t2.<span class="string">`id`</span> = t1.<span class="string">`mid`</span>)</span><br><span class="line"><span class="keyword">WHERE</span> t1.<span class="string">`rid`</span> = <span class="number">4</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="用户表"><a href="#用户表" class="headerlink" title="用户表"></a>用户表</h4><table>
<thead>
<tr>
<th>用户表(sys_user)</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>loginame</td>
<td>identity</td>
<td>realname</td>
<td>sex</td>
<td>address</td>
<td>phone</td>
<td>pwd</td>
<td>position</td>
</tr>
<tr>
<td>1</td>
<td>admin</td>
<td>12312</td>
<td>小明</td>
<td>1</td>
<td>武汉</td>
<td>134131313</td>
<td>123456</td>
<td>CEO</td>
</tr>
<tr>
<td>2</td>
<td>zs</td>
<td>12312312</td>
<td>张三</td>
<td>0</td>
<td>深圳</td>
<td>12313131</td>
<td>12345678</td>
<td>BA</td>
</tr>
</tbody></table>
<h4 id="用户和角色关系表"><a href="#用户和角色关系表" class="headerlink" title="用户和角色关系表"></a>用户和角色关系表</h4><table>
<thead>
<tr>
<th>用户和角色关系表（sys_role_user）</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>uid(用户编号）</td>
<td>rid(角色编号)</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
</tr>
</tbody></table>
<h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><ul>
<li>已知用户id=userid  查询当前用户拥有的所有角色</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 方式一</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">t1.*</span><br><span class="line"><span class="keyword">FROM</span> sys_user t1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> sys_role_user t2 <span class="keyword">ON</span>(t1.<span class="string">`userid`</span> = t2.<span class="string">`uid`</span>)</span><br><span class="line"><span class="keyword">WHERE</span> t2.uid=t1.<span class="string">`userid`</span>;</span><br><span class="line"></span><br><span class="line">方式二</span><br><span class="line"><span class="keyword">SELECT</span> t1.* <span class="keyword">FROM</span> sys_user t1 ,sys_role_user t2 </span><br><span class="line"><span class="keyword">WHERE</span> t1.<span class="string">`userid`</span> = t2.<span class="string">`uid`</span> </span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li>已知用户id=userid 查询当前用户拥有的所有权限{菜单}</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span></span><br><span class="line">t1.<span class="string">`userid`</span>,t1.<span class="string">`loginname`</span>,t2.*,t3.*,t4.id,t4.pid,t4.title <span class="string">&quot;菜单&quot;</span></span><br><span class="line"><span class="keyword">FROM</span> sys_user t1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> sys_role_user t2 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> sys_role_menu t3 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> sys_menu t4</span><br><span class="line"><span class="keyword">ON</span>(t1.<span class="string">`userid`</span>=t2.<span class="string">`uid`</span> <span class="keyword">AND</span> t2.<span class="string">`rid`</span>=t3.rid <span class="keyword">AND</span> t3.mid=t4.id) </span><br></pre></td></tr></table></figure>



<h2 id="功能实现"><a href="#功能实现" class="headerlink" title="功能实现"></a>功能实现</h2><h3 id="查询功能"><a href="#查询功能" class="headerlink" title="查询功能"></a>查询功能</h3><h4 id="新增SysController（用来定向路径）"><a href="#新增SysController（用来定向路径）" class="headerlink" title="新增SysController（用来定向路径）"></a>新增SysController（用来定向路径）</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 15, 2020 9:37:32 AM</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;sys&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 跳转到菜单管理</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;toMenuManager&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toMenuManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;system/menu/menuManager&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 跳转左边的菜单树页面</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;toMenuLeft&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toMenuLeft</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;system/menu/menuLeft&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 跳转菜单管理右边的菜单列表</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;toMenuRight&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toMenuRight</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;system/menu/menuRight&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="为MenuController新增方法"><a href="#为MenuController新增方法" class="headerlink" title="为MenuController新增方法"></a>为MenuController新增方法</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;loadMenuManagerLeftTreeJson&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> DataGridView <span class="title">loadMenuManagerLeftTreeJson</span><span class="params">(MenuVo menuVo)</span> </span>&#123;</span><br><span class="line">	menuVo.setAvailable(SysConstast.AVAILABLE_TRUE);<span class="comment">// 只查询可用的</span></span><br><span class="line">	List&lt;Menu&gt; list = <span class="keyword">this</span>.menuService.queryAllMenuForList(menuVo);</span><br><span class="line"></span><br><span class="line">	List&lt;TreeNode&gt; nodes = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	<span class="comment">// 把list里面的数据放到nodes</span></span><br><span class="line">	<span class="keyword">for</span> (Menu menu : list) &#123;</span><br><span class="line">		Integer id = menu.getId();</span><br><span class="line">		Integer pid = menu.getPid();</span><br><span class="line">		String title = menu.getTitle();</span><br><span class="line">		String icon = menu.getIcon();</span><br><span class="line">		String href = menu.getHref();</span><br><span class="line">		Boolean spread = menu.getSpread() == SysConstast.SPREAD_TRUE ? <span class="keyword">true</span> : <span class="keyword">false</span>;</span><br><span class="line">		String target = menu.getTarget();</span><br><span class="line">		nodes.add(<span class="keyword">new</span> TreeNode(id, pid, title, icon, href, spread, target));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> DataGridView(nodes);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 加载菜单列表返回DataGridView</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;loadAllMenu&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> DataGridView <span class="title">loadAllMenu</span><span class="params">(MenuVo menuVo)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.menuService.queryAllMenu(menuVo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建DataGridView"><a href="#创建DataGridView" class="headerlink" title="创建DataGridView"></a>创建DataGridView</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.utils;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 15, 2020 5:45:25 PM</span></span><br><span class="line"><span class="comment">* 封装layui数据表格的数据对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataGridView</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> Integer code=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">private</span> String msg=<span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="keyword">private</span> Long count;</span><br><span class="line">	<span class="keyword">private</span> Object data;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">DataGridView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">DataGridView</span><span class="params">(Object data)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.data = data;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> code;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCode</span><span class="params">(Integer code)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.code = code;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> msg;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Long <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> count;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCount</span><span class="params">(Long count)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.count = count;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">getData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> data;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setData</span><span class="params">(Object data)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.data = data;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="修改MenuVo"><a href="#修改MenuVo" class="headerlink" title="修改MenuVo"></a>修改MenuVo</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Menu;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 14, 2020 11:39:05 AM 类说明</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuVo</span> <span class="keyword">extends</span> <span class="title">Menu</span> </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 分页参数</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> Integer page;</span><br><span class="line">	<span class="keyword">private</span> Integer limit;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> page;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPage</span><span class="params">(Integer page)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.page = page;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getLimit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> limit;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLimit</span><span class="params">(Integer limit)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.limit = limit;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="为MenuService接口添加方法"><a href="#为MenuService接口添加方法" class="headerlink" title="为MenuService接口添加方法"></a>为MenuService接口添加方法</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询所有菜单</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> menuVo</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataGridView <span class="title">queryAllMenu</span><span class="params">(MenuVo menuVo)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="添加MenuServiceImpl实现添加的方法"><a href="#添加MenuServiceImpl实现添加的方法" class="headerlink" title="添加MenuServiceImpl实现添加的方法"></a>添加MenuServiceImpl实现添加的方法</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataGridView <span class="title">queryAllMenu</span><span class="params">(MenuVo menuVo)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		</span><br><span class="line">		Page&lt;Object&gt; page = PageHelper.startPage(menuVo.getPage(),menuVo.getLimit());</span><br><span class="line">		List&lt;Menu&gt; data = <span class="keyword">this</span>.menuMapper.queryAllMenu(menuVo);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> DataGridView(page.getTotal(),data);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h4 id="为MenuMapper-xml添加查询方法"><a href="#为MenuMapper-xml添加查询方法" class="headerlink" title="为MenuMapper.xml添加查询方法"></a>为MenuMapper.xml添加查询方法</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 查询所有菜单 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllMenu&quot;</span>  <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select </span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from sys_menu</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title!=null and title!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">    		and title like concat(&quot;%&quot;,#&#123;title&#125;,&quot;%&quot;)</span><br><span class="line">    	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available!=null&quot;</span>&gt;</span></span><br><span class="line">    		and available=#&#123;available&#125;</span><br><span class="line">    	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id!=null&quot;</span>&gt;</span></span><br><span class="line">    		and (id=#&#123;id&#125; or pid=#&#123;id&#125;)</span><br><span class="line">    	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="修改数据库的菜单地址"><a href="#修改数据库的菜单地址" class="headerlink" title="修改数据库的菜单地址"></a>修改数据库的菜单地址</h4><p><img src="https://s1.ax1x.com/2020/10/15/0TXLGD.png" alt="0TXLGD.png"></p>
<h4 id="创建system-menu-menuManager-jsp"><a href="#创建system-menu-menuManager-jsp" class="headerlink" title="创建system/menu/menuManager.jsp"></a>创建system/menu/menuManager.jsp</h4><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">	pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;菜单管理&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;!-- 如果使用frameset 的包含页面  主页面不能有 body--&gt;</span><br><span class="line">&lt;frameset cols=<span class="string">&quot;250,*&quot;</span> border=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">	&lt;frame src=<span class="string">&quot;$&#123;ctx &#125;/sys/toMenuLeft.action&quot;</span> name=<span class="string">&quot;left&quot;</span>&gt;</span><br><span class="line">	&lt;frame src=<span class="string">&quot;$&#123;ctx &#125;/sys/toMenuRight.action&quot;</span> name=<span class="string">&quot;right&quot;</span>&gt;</span><br><span class="line">&lt;/frameset&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h4 id="创建system-menu-menuLeft-jsp"><a href="#创建system-menu-menuLeft-jsp" class="headerlink" title="创建system/menu/menuLeft.jsp"></a>创建system/menu/menuLeft.jsp</h4><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;菜单管理&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;Access-Control-Allow-Origin&quot;</span> content=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/dtree.css&quot;</span>&gt;</span><br><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/font/dtreefont.css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	 &lt;ul id=&quot;menuTree&quot; class=&quot;dtree&quot; data-id=&quot;0&quot;&gt;&lt;/ul&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	<span class="keyword">var</span> menuTree;</span><br><span class="line">	layui.extend(&#123;</span><br><span class="line">		dtree:<span class="string">&#x27;$&#123;ctx&#125;/resources/layui_ext/dist/dtree&#x27;</span></span><br><span class="line">	&#125;).use([ <span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;form&#x27;</span>,<span class="string">&#x27;dtree&#x27;</span> ], function() &#123;</span><br><span class="line">		<span class="keyword">var</span> $ = layui.jquery;</span><br><span class="line">		<span class="keyword">var</span> layer = layui.layer;</span><br><span class="line">		<span class="keyword">var</span> form = layui.form;</span><br><span class="line">		<span class="keyword">var</span> dtree=layui.dtree;</span><br><span class="line"></span><br><span class="line">		 <span class="comment">// 初始化树</span></span><br><span class="line">	    menuTree = dtree.render(&#123;</span><br><span class="line">	      elem: <span class="string">&quot;#menuTree&quot;</span>,</span><br><span class="line">		  dataStyle: <span class="string">&quot;layuiStyle&quot;</span>,  <span class="comment">//使用layui风格的数据格式</span></span><br><span class="line">	      response:&#123;message:<span class="string">&quot;msg&quot;</span>,statusCode:<span class="number">0</span>&#125;,  <span class="comment">//修改response中返回数据的定义</span></span><br><span class="line">          dataFormat: <span class="string">&quot;list&quot;</span>,  <span class="comment">//配置data的风格为list</span></span><br><span class="line">          url: <span class="string">&quot;$&#123;ctx&#125;/menu/loadMenuManagerLeftTreeJson.action&quot;</span> <span class="comment">// 使用url加载（可与data加载同时存在）</span></span><br><span class="line">	    &#125;);</span><br><span class="line">		 </span><br><span class="line">		 <span class="comment">//监听树的节点点击 事件</span></span><br><span class="line">	    dtree.on(<span class="string">&quot;node(&#x27;menuTree&#x27;)&quot;</span> ,function(obj)&#123;</span><br><span class="line">	    	<span class="keyword">var</span> id=obj.param.nodeId;</span><br><span class="line">	    	 window.parent.right.reloadTable(id);</span><br><span class="line">	    &#125;);</span><br><span class="line">	&#125;);</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h4 id="创建system-menu-menuRight-jsp"><a href="#创建system-menu-menuRight-jsp" class="headerlink" title="创建system/menu/menuRight.jsp"></a>创建system/menu/menuRight.jsp</h4><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;菜单管理&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;Access-Control-Allow-Origin&quot;</span> content=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/dtree.css&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/font/dtreefont.css&quot;</span>&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;style type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">		.select-test&#123;position: absolute;max-height: <span class="number">500</span>px;height: <span class="number">350</span>px;overflow: auto;width: <span class="number">100</span>%;z-index: <span class="number">123</span>;display: none;border:<span class="number">1</span>px solid silver;top: <span class="number">42</span>px;&#125;</span><br><span class="line">		.layui-show&#123;display: block!important;&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;childrenBody&quot;</span>&gt;</span><br><span class="line">	&lt;!-- 搜索条件开始 --&gt;</span><br><span class="line">	&lt;fieldset <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-elem-field layui-field-title&quot;</span> style=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span><br><span class="line">	  &lt;legend&gt;查询条件&lt;/legend&gt;</span><br><span class="line">	&lt;/fieldset&gt;</span><br><span class="line">	&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span> method=<span class="string">&quot;post&quot;</span> id=<span class="string">&quot;searchFrm&quot;</span>&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;菜单名称:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;title&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal  layui-icon layui-icon-search&quot; id=&quot;doSearch&quot;&gt;查询&lt;/button&gt;</span><br><span class="line">		      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm  layui-icon layui-icon-refresh&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		 &lt;/div&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 搜索条件结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 数据表格开始 --&gt;</span><br><span class="line">	&lt;table class=&quot;layui-hide&quot; id=&quot;menuTable&quot; lay-filter=&quot;menuTable&quot;&gt;&lt;/table&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;&quot;</span> id=<span class="string">&quot;menuToolBar&quot;</span>&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-sm&quot; lay-event=&quot;add&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-sm&quot; lay-event=&quot;batchDelete&quot;&gt;批量删除&lt;/button&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div  id=<span class="string">&quot;menuBar&quot;</span> style=<span class="string">&quot;display: none;&quot;</span>&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-xs&quot; lay-event=&quot;edit&quot;&gt;编辑&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-danger layui-btn-xs&quot; lay-event=&quot;del&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 数据表格结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 添加和修改的弹出层开始 --&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;padding: 20px&quot;</span> id=<span class="string">&quot;saveOrUpdateDiv&quot;</span> &gt;</span><br><span class="line">		&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span>  lay-filter=<span class="string">&quot;dataFrm&quot;</span> id=<span class="string">&quot;dataFrm&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				  &lt;label class=&quot;layui-form-label&quot;&gt;父给菜单：&lt;/label&gt;</span><br><span class="line">				   &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">				      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-unselect layui-form-select&quot;</span> id=<span class="string">&quot;pid_div&quot;</span>&gt;</span><br><span class="line">				        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-select-title&quot;</span>&gt;</span><br><span class="line">				          &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;pid&quot;</span> id=<span class="string">&quot;pid&quot;</span>&gt;</span><br><span class="line">				          &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;pid_str&quot;</span> id=<span class="string">&quot;pid_str&quot;</span> placeholder=<span class="string">&quot;请选择&quot;</span> readonly=<span class="string">&quot;&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input layui-unselect&quot;</span>&gt;</span><br><span class="line">				          &lt;i class=&quot;layui-edge&quot;&gt;&lt;/i&gt;</span><br><span class="line">				        &lt;/div&gt;</span><br><span class="line">				      &lt;/div&gt;</span><br><span class="line">				      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-card select-test&quot;</span> id=<span class="string">&quot;menuSelectDiv&quot;</span>&gt;</span><br><span class="line">				        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-card-body&quot;</span>&gt;</span><br><span class="line">				          &lt;div id=&quot;toolbarDiv&quot;&gt;&lt;ul id=&quot;menuTree&quot; class=&quot;dtree&quot; data-id=&quot;0&quot; style=&quot;width: 100%;&quot;&gt;&lt;/ul&gt;&lt;/div&gt;</span><br><span class="line">				        &lt;/div&gt;</span><br><span class="line">				      &lt;/div&gt;</span><br><span class="line">				  &lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;菜单名称:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;id&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;title&quot;</span>  placeholder=<span class="string">&quot;请输入菜单名称&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;菜单地址:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;href&quot;</span> placeholder=<span class="string">&quot;请输入菜单地址&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;菜单图标:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;icon&quot;</span>   placeholder=<span class="string">&quot;请输入菜单图标&quot;</span> lay-verify=<span class="string">&quot;required&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">							<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;TARGET:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;target&quot;</span>  placeholder=<span class="string">&quot;请输入TRAGET&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">							<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;是否展开:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;spread&quot;</span> value=<span class="string">&quot;1&quot;</span> title=<span class="string">&quot;展开&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;spread&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不展开&quot;</span>  checked=<span class="string">&quot;checked&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> checked=<span class="string">&quot;checked&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span> style=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span><br><span class="line">			    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">			      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal layui-btn-sm layui-icon layui-icon-release&quot; lay-filter=&quot;doSubmit&quot; lay-submit=&quot;&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">			      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm layui-btn-sm layui-icon layui-icon-refresh&quot; &gt;重置&lt;/button&gt;</span><br><span class="line">			    &lt;/div&gt;</span><br><span class="line">		  	&lt;/div&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 添加和修改的弹出层结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;script src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	    <span class="keyword">var</span> tableIns;</span><br><span class="line">	    layui.extend(&#123;</span><br><span class="line">			dtree:<span class="string">&#x27;$&#123;ctx&#125;/resources/layui_ext/dist/dtree&#x27;</span></span><br><span class="line">		&#125;).use([ <span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;form&#x27;</span>, <span class="string">&#x27;table&#x27;</span>,<span class="string">&#x27;dtree&#x27;</span>  ], function() &#123;</span><br><span class="line">			<span class="keyword">var</span> $ = layui.jquery;</span><br><span class="line">			<span class="keyword">var</span> layer = layui.layer;</span><br><span class="line">			<span class="keyword">var</span> form = layui.form;</span><br><span class="line">			<span class="keyword">var</span> table = layui.table;</span><br><span class="line">			<span class="keyword">var</span> dtree=layui.dtree;</span><br><span class="line">			<span class="comment">//渲染数据表格</span></span><br><span class="line">			 tableIns=table.render(&#123;</span><br><span class="line">				 elem: <span class="string">&#x27;#menuTable&#x27;</span>   <span class="comment">//渲染的目标对象</span></span><br><span class="line">			    ,url:<span class="string">&#x27;$&#123;ctx&#125;/menu/loadAllMenu.action&#x27;</span> <span class="comment">//数据接口</span></span><br><span class="line">			    ,title: <span class="string">&#x27;用户数据表&#x27;</span><span class="comment">//数据导出来的标题</span></span><br><span class="line">			    ,toolbar:<span class="string">&quot;#menuToolBar&quot;</span>   <span class="comment">//表格的工具条</span></span><br><span class="line">			    ,height:<span class="string">&#x27;full-150&#x27;</span></span><br><span class="line">			    ,cellMinWidth:<span class="number">100</span> <span class="comment">//设置列的最小默认宽度</span></span><br><span class="line">			    ,page: <span class="keyword">true</span>  <span class="comment">//是否启用分页</span></span><br><span class="line">			    ,cols: [[   <span class="comment">//列表数据</span></span><br><span class="line">			     &#123;type: <span class="string">&#x27;checkbox&#x27;</span>, fixed: <span class="string">&#x27;left&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;id&#x27;</span>, title:<span class="string">&#x27;ID&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;80&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;pid&#x27;</span>, title:<span class="string">&#x27;父节点ID&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;title&#x27;</span>, title:<span class="string">&#x27;菜单名称&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;120&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;href&#x27;</span>, title:<span class="string">&#x27;菜单地址&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;220&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;spread&#x27;</span>, title:<span class="string">&#x27;是否展开&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> d.spread==<span class="string">&#x27;1&#x27;</span>?<span class="string">&#x27;&lt;font color=blue&gt;展开&lt;/font&gt;&#x27;</span>:<span class="string">&#x27;&lt;font color=red&gt;不展开&lt;/font&gt;&#x27;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;target&#x27;</span>, title:<span class="string">&#x27;TARGET&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;icon&#x27;</span>, title:<span class="string">&#x27;菜单图标&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> <span class="string">&quot;&lt;div class=&#x27;layui-icon&#x27;&gt;&quot;</span>+d.icon+<span class="string">&quot;&lt;/div&gt;&quot;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;available&#x27;</span>, title:<span class="string">&#x27;是否可用&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> d.available==<span class="string">&#x27;1&#x27;</span>?<span class="string">&#x27;&lt;font color=blue&gt;可用&lt;/font&gt;&#x27;</span>:<span class="string">&#x27;&lt;font color=red&gt;不可用&lt;/font&gt;&#x27;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;fixed: <span class="string">&#x27;right&#x27;</span>, title:<span class="string">&#x27;操作&#x27;</span>, toolbar: <span class="string">&#x27;#menuBar&#x27;</span>, width:<span class="number">180</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			    ]]</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//模糊查询</span></span><br><span class="line">			$(<span class="string">&quot;#doSearch&quot;</span>).click(function()&#123;</span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#searchFrm&quot;</span>).serialize();</span><br><span class="line">				alert(params);</span><br><span class="line">				tableIns.reload(&#123;</span><br><span class="line">					url:<span class="string">&quot;$&#123;ctx&#125;/menu/loadAllMenu.action?&quot;</span>+params</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//监听头部工具栏事件</span></span><br><span class="line">			table.on(<span class="string">&quot;toolbar(menuTable)&quot;</span>,function(obj)&#123;</span><br><span class="line">				 <span class="keyword">switch</span>(obj.event)&#123;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">				      openAddMenu();</span><br><span class="line">				    <span class="keyword">break</span>;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;batchDelete&#x27;</span>:</span><br><span class="line">				      layer.msg(<span class="string">&#x27;批量删除&#x27;</span>);</span><br><span class="line">				    <span class="keyword">break</span>;</span><br><span class="line">				  &#125;;</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//监听行工具事件</span></span><br><span class="line">		   table.on(<span class="string">&#x27;tool(menuTable)&#x27;</span>, function(obj)&#123;</span><br><span class="line">			   <span class="keyword">var</span> data = obj.data; <span class="comment">//获得当前行数据</span></span><br><span class="line">			   <span class="keyword">var</span> layEvent = obj.event; <span class="comment">//获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）</span></span><br><span class="line">			  <span class="keyword">if</span>(layEvent === <span class="string">&#x27;del&#x27;</span>)&#123; <span class="comment">//删除</span></span><br><span class="line">				 layer.msg(<span class="string">&quot;删除&quot;</span>);</span><br><span class="line">			     layer.confirm(<span class="string">&#x27;真的删除行么&#x27;</span>, function(index)&#123;</span><br><span class="line">			       layer.close(index);</span><br><span class="line">			       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">			     &#125;);</span><br><span class="line">			   &#125; <span class="keyword">else</span> <span class="keyword">if</span>(layEvent === <span class="string">&#x27;edit&#x27;</span>)&#123; <span class="comment">//编辑</span></span><br><span class="line">			     <span class="comment">//do something</span></span><br><span class="line">				   layer.msg(<span class="string">&quot;修改&quot;</span>)</span><br><span class="line">			   &#125;</span><br><span class="line">			 &#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">var</span> url;</span><br><span class="line">			<span class="keyword">var</span> mainIndex;</span><br><span class="line">			<span class="comment">//打开添加页面</span></span><br><span class="line">			<span class="function">function <span class="title">openAddMenu</span><span class="params">()</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;添加菜单&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;450px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						<span class="comment">//清空表单数据       </span></span><br><span class="line">						$(<span class="string">&quot;#dataFrm&quot;</span>)[<span class="number">0</span>].reset();</span><br><span class="line">						$(<span class="string">&quot;#menuSelectDiv&quot;</span>).removeClass(<span class="string">&quot;layui-show&quot;</span>);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/menu/addMenu.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//打开修改页面</span></span><br><span class="line">			<span class="function">function <span class="title">openUpdateMenu</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;修改用户&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;450px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						form.val(<span class="string">&quot;dataFrm&quot;</span>,data);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/menu/updateMenu.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//保存</span></span><br><span class="line">			form.on(<span class="string">&quot;submit(doSubmit)&quot;</span>,function(obj)&#123;</span><br><span class="line">				<span class="comment">//序列化表单数据</span></span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#dataFrm&quot;</span>).serialize();</span><br><span class="line">				$.post(url,params,function(obj)&#123;</span><br><span class="line">					layer.msg(obj.msg);</span><br><span class="line">					<span class="comment">//关闭弹出层</span></span><br><span class="line">					layer.close(mainIndex)</span><br><span class="line">					<span class="comment">//刷新数据 表格</span></span><br><span class="line">					tableIns.reload();</span><br><span class="line">					<span class="comment">//刷新左边的树</span></span><br><span class="line">					<span class="comment">//window.parent.left.menuTree.reload();</span></span><br><span class="line">					<span class="comment">//刷新添加和修改的下拉树</span></span><br><span class="line">					menuTree.reload();</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			<span class="comment">//初始化添加和修改页面的下拉树</span></span><br><span class="line">			<span class="keyword">var</span> menuTree = dtree.render(&#123;</span><br><span class="line">				  elem: <span class="string">&quot;#menuTree&quot;</span>,</span><br><span class="line">				  dataStyle: <span class="string">&quot;layuiStyle&quot;</span>,  <span class="comment">//使用layui风格的数据格式</span></span><br><span class="line">			      response:&#123;message:<span class="string">&quot;msg&quot;</span>,statusCode:<span class="number">0</span>&#125;,  <span class="comment">//修改response中返回数据的定义</span></span><br><span class="line">		          dataFormat: <span class="string">&quot;list&quot;</span>,  <span class="comment">//配置data的风格为list</span></span><br><span class="line">		          url: <span class="string">&quot;$&#123;ctx&#125;/menu/loadMenuManagerLeftTreeJson.action?spread=1&quot;</span>,  <span class="comment">// 使用url加载（可与data加载同时存在）</span></span><br><span class="line">				  icon: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">				  accordion:<span class="keyword">true</span></span><br><span class="line">				&#125;);</span><br><span class="line">				$(<span class="string">&quot;#pid_div&quot;</span>).on(<span class="string">&quot;click&quot;</span>,function()&#123;</span><br><span class="line">				  $(<span class="keyword">this</span>).toggleClass(<span class="string">&quot;layui-form-selected&quot;</span>);</span><br><span class="line">				  $(<span class="string">&quot;#menuSelectDiv&quot;</span>).toggleClass(<span class="string">&quot;layui-show layui-anim layui-anim-upbit&quot;</span>);</span><br><span class="line">				&#125;);</span><br><span class="line">				dtree.on(<span class="string">&quot;node(menuTree)&quot;</span>, function(obj)&#123;</span><br><span class="line">				  $(<span class="string">&quot;#pid_str&quot;</span>).val(obj.param.context);</span><br><span class="line">				  $(<span class="string">&quot;#pid&quot;</span>).val(obj.param.nodeId);</span><br><span class="line">				  $(<span class="string">&quot;#pid_div&quot;</span>).toggleClass(<span class="string">&quot;layui-form-selected&quot;</span>);</span><br><span class="line">				  $(<span class="string">&quot;#menuSelectDiv&quot;</span>).toggleClass(<span class="string">&quot;layui-show layui-anim layui-anim-upbit&quot;</span>);</span><br><span class="line">				&#125;);</span><br><span class="line">			</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">		<span class="function">function <span class="title">reloadTable</span><span class="params">(id)</span></span>&#123;</span><br><span class="line">			tableIns.reload(&#123;</span><br><span class="line">				url:<span class="string">&quot;$&#123;ctx&#125;/menu/loadAllMenu.action?id=&quot;</span>+id</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h4 id="最终结果"><a href="#最终结果" class="headerlink" title="最终结果"></a>最终结果</h4><p><img src="https://s1.ax1x.com/2020/10/16/0bm8Zq.png" alt="0bm8Zq.png"></p>
<h3 id="添加功能"><a href="#添加功能" class="headerlink" title="添加功能"></a>添加功能</h3><h4 id="修改system-menu-menuRight-jsp"><a href="#修改system-menu-menuRight-jsp" class="headerlink" title="修改system/menu/menuRight.jsp"></a>修改system/menu/menuRight.jsp</h4><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;菜单管理&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;Access-Control-Allow-Origin&quot;</span> content=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/dtree.css&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/font/dtreefont.css&quot;</span>&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;style type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">		.select-test&#123;position: absolute;max-height: <span class="number">500</span>px;height: <span class="number">350</span>px;overflow: auto;width: <span class="number">100</span>%;z-index: <span class="number">123</span>;display: none;border:<span class="number">1</span>px solid silver;top: <span class="number">42</span>px;&#125;</span><br><span class="line">		.layui-show&#123;display: block!important;&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;childrenBody&quot;</span>&gt;</span><br><span class="line">	&lt;!-- 搜索条件开始 --&gt;</span><br><span class="line">	&lt;fieldset <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-elem-field layui-field-title&quot;</span> style=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span><br><span class="line">	  &lt;legend&gt;查询条件&lt;/legend&gt;</span><br><span class="line">	&lt;/fieldset&gt;</span><br><span class="line">	&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span> method=<span class="string">&quot;post&quot;</span> id=<span class="string">&quot;searchFrm&quot;</span>&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;菜单名称:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;title&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal  layui-icon layui-icon-search&quot; id=&quot;doSearch&quot;&gt;查询&lt;/button&gt;</span><br><span class="line">		      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm  layui-icon layui-icon-refresh&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		 &lt;/div&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 搜索条件结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 数据表格开始 --&gt;</span><br><span class="line">	&lt;table class=&quot;layui-hide&quot; id=&quot;menuTable&quot; lay-filter=&quot;menuTable&quot;&gt;&lt;/table&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;&quot;</span> id=<span class="string">&quot;menuToolBar&quot;</span>&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-sm&quot; lay-event=&quot;add&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-sm&quot; lay-event=&quot;batchDelete&quot;&gt;批量删除&lt;/button&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div  id=<span class="string">&quot;menuBar&quot;</span> style=<span class="string">&quot;display: none;&quot;</span>&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-xs&quot; lay-event=&quot;edit&quot;&gt;编辑&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-danger layui-btn-xs&quot; lay-event=&quot;del&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 数据表格结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 添加和修改的弹出层开始 --&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;padding: 20px&quot;</span> id=<span class="string">&quot;saveOrUpdateDiv&quot;</span> &gt;</span><br><span class="line">		&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span>  lay-filter=<span class="string">&quot;dataFrm&quot;</span> id=<span class="string">&quot;dataFrm&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				  &lt;label class=&quot;layui-form-label&quot;&gt;父给菜单：&lt;/label&gt;</span><br><span class="line">				   &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">				      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-unselect layui-form-select&quot;</span> id=<span class="string">&quot;pid_div&quot;</span>&gt;</span><br><span class="line">				        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-select-title&quot;</span>&gt;</span><br><span class="line">				          &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;pid&quot;</span> id=<span class="string">&quot;pid&quot;</span>&gt;</span><br><span class="line">				          &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;pid_str&quot;</span> id=<span class="string">&quot;pid_str&quot;</span> placeholder=<span class="string">&quot;请选择&quot;</span> readonly=<span class="string">&quot;&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input layui-unselect&quot;</span>&gt;</span><br><span class="line">				          &lt;i class=&quot;layui-edge&quot;&gt;&lt;/i&gt;</span><br><span class="line">				        &lt;/div&gt;</span><br><span class="line">				      &lt;/div&gt;</span><br><span class="line">				      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-card select-test&quot;</span> id=<span class="string">&quot;menuSelectDiv&quot;</span>&gt;</span><br><span class="line">				        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-card-body&quot;</span>&gt;</span><br><span class="line">				          &lt;div id=&quot;toolbarDiv&quot;&gt;&lt;ul id=&quot;menuTree&quot; class=&quot;dtree&quot; data-id=&quot;0&quot; style=&quot;width: 100%;&quot;&gt;&lt;/ul&gt;&lt;/div&gt;</span><br><span class="line">				        &lt;/div&gt;</span><br><span class="line">				      &lt;/div&gt;</span><br><span class="line">				  &lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;菜单名称:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;id&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;title&quot;</span>  placeholder=<span class="string">&quot;请输入菜单名称&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;菜单地址:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;href&quot;</span> placeholder=<span class="string">&quot;请输入菜单地址&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;菜单图标:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;icon&quot;</span>   placeholder=<span class="string">&quot;请输入菜单图标&quot;</span> lay-verify=<span class="string">&quot;required&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">							<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;TARGET:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;target&quot;</span>  placeholder=<span class="string">&quot;请输入TRAGET&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">							<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;是否展开:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;spread&quot;</span> value=<span class="string">&quot;1&quot;</span> title=<span class="string">&quot;展开&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;spread&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不展开&quot;</span>  checked=<span class="string">&quot;checked&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> checked=<span class="string">&quot;checked&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span> style=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span><br><span class="line">			    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">			      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal layui-btn-sm layui-icon layui-icon-release&quot; lay-filter=&quot;doSubmit&quot; lay-submit=&quot;&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">			      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm layui-btn-sm layui-icon layui-icon-refresh&quot; &gt;重置&lt;/button&gt;</span><br><span class="line">			    &lt;/div&gt;</span><br><span class="line">		  	&lt;/div&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 添加和修改的弹出层结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;script src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	    <span class="keyword">var</span> tableIns;</span><br><span class="line">	    layui.extend(&#123;</span><br><span class="line">			dtree:<span class="string">&#x27;$&#123;ctx&#125;/resources/layui_ext/dist/dtree&#x27;</span></span><br><span class="line">		&#125;).use([ <span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;form&#x27;</span>, <span class="string">&#x27;table&#x27;</span>,<span class="string">&#x27;dtree&#x27;</span>  ], function() &#123;</span><br><span class="line">			<span class="keyword">var</span> $ = layui.jquery;</span><br><span class="line">			<span class="keyword">var</span> layer = layui.layer;</span><br><span class="line">			<span class="keyword">var</span> form = layui.form;</span><br><span class="line">			<span class="keyword">var</span> table = layui.table;</span><br><span class="line">			<span class="keyword">var</span> dtree=layui.dtree;</span><br><span class="line">			<span class="comment">//渲染数据表格</span></span><br><span class="line">			 tableIns=table.render(&#123;</span><br><span class="line">				 elem: <span class="string">&#x27;#menuTable&#x27;</span>   <span class="comment">//渲染的目标对象</span></span><br><span class="line">			    ,url:<span class="string">&#x27;$&#123;ctx&#125;/menu/loadAllMenu.action&#x27;</span> <span class="comment">//数据接口</span></span><br><span class="line">			    ,title: <span class="string">&#x27;用户数据表&#x27;</span><span class="comment">//数据导出来的标题</span></span><br><span class="line">			    ,toolbar:<span class="string">&quot;#menuToolBar&quot;</span>   <span class="comment">//表格的工具条</span></span><br><span class="line">			    ,height:<span class="string">&#x27;full-150&#x27;</span></span><br><span class="line">			    ,cellMinWidth:<span class="number">100</span> <span class="comment">//设置列的最小默认宽度</span></span><br><span class="line">			    ,page: <span class="keyword">true</span>  <span class="comment">//是否启用分页</span></span><br><span class="line">			    ,cols: [[   <span class="comment">//列表数据</span></span><br><span class="line">			     &#123;type: <span class="string">&#x27;checkbox&#x27;</span>, fixed: <span class="string">&#x27;left&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;id&#x27;</span>, title:<span class="string">&#x27;ID&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;80&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;pid&#x27;</span>, title:<span class="string">&#x27;父节点ID&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;title&#x27;</span>, title:<span class="string">&#x27;菜单名称&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;120&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;href&#x27;</span>, title:<span class="string">&#x27;菜单地址&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;220&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;spread&#x27;</span>, title:<span class="string">&#x27;是否展开&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> d.spread==<span class="string">&#x27;1&#x27;</span>?<span class="string">&#x27;&lt;font color=blue&gt;展开&lt;/font&gt;&#x27;</span>:<span class="string">&#x27;&lt;font color=red&gt;不展开&lt;/font&gt;&#x27;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;target&#x27;</span>, title:<span class="string">&#x27;TARGET&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;icon&#x27;</span>, title:<span class="string">&#x27;菜单图标&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> <span class="string">&quot;&lt;div class=&#x27;layui-icon&#x27;&gt;&quot;</span>+d.icon+<span class="string">&quot;&lt;/div&gt;&quot;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;available&#x27;</span>, title:<span class="string">&#x27;是否可用&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> d.available==<span class="string">&#x27;1&#x27;</span>?<span class="string">&#x27;&lt;font color=blue&gt;可用&lt;/font&gt;&#x27;</span>:<span class="string">&#x27;&lt;font color=red&gt;不可用&lt;/font&gt;&#x27;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;fixed: <span class="string">&#x27;right&#x27;</span>, title:<span class="string">&#x27;操作&#x27;</span>, toolbar: <span class="string">&#x27;#menuBar&#x27;</span>, width:<span class="number">180</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			    ]]</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//模糊查询</span></span><br><span class="line">			$(<span class="string">&quot;#doSearch&quot;</span>).click(function()&#123;</span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#searchFrm&quot;</span>).serialize();</span><br><span class="line">				alert(params);</span><br><span class="line">				tableIns.reload(&#123;</span><br><span class="line">					url:<span class="string">&quot;$&#123;ctx&#125;/menu/loadAllMenu.action?&quot;</span>+params</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//监听头部工具栏事件</span></span><br><span class="line">			table.on(<span class="string">&quot;toolbar(menuTable)&quot;</span>,function(obj)&#123;</span><br><span class="line">				 <span class="keyword">switch</span>(obj.event)&#123;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">				      openAddMenu();</span><br><span class="line">				    <span class="keyword">break</span>;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;batchDelete&#x27;</span>:</span><br><span class="line">				      layer.msg(<span class="string">&#x27;批量删除&#x27;</span>);</span><br><span class="line">				    <span class="keyword">break</span>;</span><br><span class="line">				  &#125;;</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//监听行工具事件</span></span><br><span class="line">		   table.on(<span class="string">&#x27;tool(menuTable)&#x27;</span>, function(obj)&#123;</span><br><span class="line">			   <span class="keyword">var</span> data = obj.data; <span class="comment">//获得当前行数据</span></span><br><span class="line">			   <span class="keyword">var</span> layEvent = obj.event; <span class="comment">//获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）</span></span><br><span class="line">			  <span class="keyword">if</span>(layEvent === <span class="string">&#x27;del&#x27;</span>)&#123; <span class="comment">//删除</span></span><br><span class="line">				 layer.msg(<span class="string">&quot;删除&quot;</span>);</span><br><span class="line">			     layer.confirm(<span class="string">&#x27;真的删除行么&#x27;</span>, function(index)&#123;</span><br><span class="line">			       layer.close(index);</span><br><span class="line">			       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">			     &#125;);</span><br><span class="line">			   &#125; <span class="keyword">else</span> <span class="keyword">if</span>(layEvent === <span class="string">&#x27;edit&#x27;</span>)&#123; <span class="comment">//编辑</span></span><br><span class="line">			     <span class="comment">//do something</span></span><br><span class="line">				   layer.msg(<span class="string">&quot;修改&quot;</span>)</span><br><span class="line">			   &#125;</span><br><span class="line">			 &#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">var</span> url;</span><br><span class="line">			<span class="keyword">var</span> mainIndex;</span><br><span class="line">			<span class="comment">//打开添加页面</span></span><br><span class="line">			<span class="function">function <span class="title">openAddMenu</span><span class="params">()</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;添加菜单&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;450px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						<span class="comment">//清空表单数据       </span></span><br><span class="line">						$(<span class="string">&quot;#dataFrm&quot;</span>)[<span class="number">0</span>].reset();</span><br><span class="line">						$(<span class="string">&quot;#menuSelectDiv&quot;</span>).removeClass(<span class="string">&quot;layui-show&quot;</span>);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/menu/addMenu.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//打开修改页面</span></span><br><span class="line">			<span class="function">function <span class="title">openUpdateMenu</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;修改用户&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;450px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						form.val(<span class="string">&quot;dataFrm&quot;</span>,data);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/menu/updateMenu.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//保存</span></span><br><span class="line">			form.on(<span class="string">&quot;submit(doSubmit)&quot;</span>,function(obj)&#123;</span><br><span class="line">				<span class="comment">//序列化表单数据</span></span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#dataFrm&quot;</span>).serialize();</span><br><span class="line">				$.post(url,params,function(obj)&#123;</span><br><span class="line">					layer.msg(obj.msg);</span><br><span class="line">					<span class="comment">//关闭弹出层</span></span><br><span class="line">					layer.close(mainIndex)</span><br><span class="line">					<span class="comment">//刷新数据 表格</span></span><br><span class="line">					tableIns.reload();</span><br><span class="line">					<span class="comment">//刷新左边的树</span></span><br><span class="line">					<span class="comment">//window.parent.left.menuTree.reload();</span></span><br><span class="line">					<span class="comment">//刷新添加和修改的下拉树</span></span><br><span class="line">					menuTree.reload();</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			<span class="comment">//初始化添加和修改页面的下拉树</span></span><br><span class="line">			<span class="keyword">var</span> menuTree = dtree.render(&#123;</span><br><span class="line">				  elem: <span class="string">&quot;#menuTree&quot;</span>,</span><br><span class="line">				  dataStyle: <span class="string">&quot;layuiStyle&quot;</span>,  <span class="comment">//使用layui风格的数据格式</span></span><br><span class="line">			      response:&#123;message:<span class="string">&quot;msg&quot;</span>,statusCode:<span class="number">0</span>&#125;,  <span class="comment">//修改response中返回数据的定义</span></span><br><span class="line">		          dataFormat: <span class="string">&quot;list&quot;</span>,  <span class="comment">//配置data的风格为list</span></span><br><span class="line">		          url: <span class="string">&quot;$&#123;ctx&#125;/menu/loadMenuManagerLeftTreeJson.action?spread=1&quot;</span>,  <span class="comment">// 使用url加载（可与data加载同时存在）</span></span><br><span class="line">				  icon: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">				  accordion:<span class="keyword">true</span></span><br><span class="line">				&#125;);</span><br><span class="line">				$(<span class="string">&quot;#pid_div&quot;</span>).on(<span class="string">&quot;click&quot;</span>,function()&#123;</span><br><span class="line">				  $(<span class="keyword">this</span>).toggleClass(<span class="string">&quot;layui-form-selected&quot;</span>);</span><br><span class="line">				  $(<span class="string">&quot;#menuSelectDiv&quot;</span>).toggleClass(<span class="string">&quot;layui-show layui-anim layui-anim-upbit&quot;</span>);</span><br><span class="line">				&#125;);</span><br><span class="line">				dtree.on(<span class="string">&quot;node(menuTree)&quot;</span>, function(obj)&#123;</span><br><span class="line">				  $(<span class="string">&quot;#pid_str&quot;</span>).val(obj.param.context);</span><br><span class="line">				  $(<span class="string">&quot;#pid&quot;</span>).val(obj.param.nodeId);</span><br><span class="line">				  $(<span class="string">&quot;#pid_div&quot;</span>).toggleClass(<span class="string">&quot;layui-form-selected&quot;</span>);</span><br><span class="line">				  $(<span class="string">&quot;#menuSelectDiv&quot;</span>).toggleClass(<span class="string">&quot;layui-show layui-anim layui-anim-upbit&quot;</span>);</span><br><span class="line">				&#125;);</span><br><span class="line">			</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">		<span class="function">function <span class="title">reloadTable</span><span class="params">(id)</span></span>&#123;</span><br><span class="line">			tableIns.reload(&#123;</span><br><span class="line">				url:<span class="string">&quot;$&#123;ctx&#125;/menu/loadAllMenu.action?id=&quot;</span>+id</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="修改SysConstas类"><a href="#修改SysConstas类" class="headerlink" title="修改SysConstas类"></a>修改SysConstas类</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.constast;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 12, 2020 6:11:25 PM 类说明:常量接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SysConstast</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	String USER_LOGIN_ERROR_MSG = <span class="string">&quot;用户名或密码不正确&quot;</span>;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 可用状态</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Integer AVAILABLE_TRUE = <span class="number">1</span>;</span><br><span class="line">	Integer AVAILABLE_FALSE = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 用户类型</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Integer USER_TYPE_SUPER = <span class="number">1</span>;</span><br><span class="line">	Integer USER_TYPE_NORMAL = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 是否展开</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Integer SPREAD_TRUE = <span class="number">1</span>;</span><br><span class="line">	Integer SPREAD_FALSE = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 操作状态</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	String ADD_SUCCESS = <span class="string">&quot;添加成功&quot;</span>;</span><br><span class="line">	String ADD_ERROR = <span class="string">&quot;添加失败&quot;</span>;</span><br><span class="line"></span><br><span class="line">	String UPDATE_SUCCESS = <span class="string">&quot;更新成功&quot;</span>;</span><br><span class="line">	String UPDATE_ERROR = <span class="string">&quot;更新失败&quot;</span>;</span><br><span class="line"></span><br><span class="line">	String DELETE_SUCCESS = <span class="string">&quot;删除成功&quot;</span>;</span><br><span class="line">	String DELETE_ERROR = <span class="string">&quot;删除失败&quot;</span>;</span><br><span class="line"></span><br><span class="line">	String RESET_SUCCESS = <span class="string">&quot;重置成功&quot;</span>;</span><br><span class="line">	String RESET_ERROR = <span class="string">&quot;重置失败&quot;</span>;</span><br><span class="line"></span><br><span class="line">	String DISPATCH_SUCCESS = <span class="string">&quot;分配成功&quot;</span>;</span><br><span class="line">	String DISPATCH_ERROR = <span class="string">&quot;分配失败&quot;</span>;</span><br><span class="line"></span><br><span class="line">	Integer CODE_SUCCESS = <span class="number">0</span>; <span class="comment">// 操作成功</span></span><br><span class="line">	Integer CODE_ERROR = <span class="number">1</span>;<span class="comment">//操作失败</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="创建ResultObj-java类"><a href="#创建ResultObj-java类" class="headerlink" title="创建ResultObj.java类"></a>创建ResultObj.java类</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.constast.SysConstast;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 17, 2020 2:30:40 PM</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResultObj</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> Integer code=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">private</span> String msg;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 添加成功</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj ADD_SUCCESS=<span class="keyword">new</span> ResultObj(SysConstast.CODE_SUCCESS, SysConstast.ADD_SUCCESS); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 添加失败</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj ADD_ERROR=<span class="keyword">new</span> ResultObj(SysConstast.CODE_ERROR, SysConstast.ADD_ERROR); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 更新成功</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj UPDATE_SUCCESS=<span class="keyword">new</span> ResultObj(SysConstast.CODE_SUCCESS, SysConstast.UPDATE_SUCCESS); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 更新失败</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj UPDATE_ERROR=<span class="keyword">new</span> ResultObj(SysConstast.CODE_ERROR, SysConstast.UPDATE_ERROR); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 删除成功</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj DELETE_SUCCESS=<span class="keyword">new</span> ResultObj(SysConstast.CODE_SUCCESS, SysConstast.DELETE_SUCCESS); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 删除失败</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj DELETE_ERROR=<span class="keyword">new</span> ResultObj(SysConstast.CODE_ERROR, SysConstast.DELETE_ERROR); </span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 重置成功</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj RESET_SUCCESS=<span class="keyword">new</span> ResultObj(SysConstast.CODE_SUCCESS, SysConstast.RESET_SUCCESS); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 重置失败</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj RESET_ERROR=<span class="keyword">new</span> ResultObj(SysConstast.CODE_ERROR, SysConstast.RESET_ERROR); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 分配成功</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj DISPATCH_SUCCESS=<span class="keyword">new</span> ResultObj(SysConstast.CODE_SUCCESS, SysConstast.DISPATCH_SUCCESS); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 分配失败</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj DISPATCH_ERROR=<span class="keyword">new</span> ResultObj(SysConstast.CODE_ERROR, SysConstast.DISPATCH_ERROR); </span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">ResultObj</span><span class="params">(Integer code, String msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.code = code;</span><br><span class="line">		<span class="keyword">this</span>.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> code;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCode</span><span class="params">(Integer code)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.code = code;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> msg;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="修改MenuController"><a href="#修改MenuController" class="headerlink" title="修改MenuController"></a>修改MenuController</h4><p>新增方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 添加菜单</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;addMenu&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">addMenu</span><span class="params">(MenuVo menVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.menuService.addMenu(menVo);</span><br><span class="line">			<span class="keyword">return</span> ResultObj.ADD_SUCCESS;</span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> ResultObj.ADD_ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改MenuService"><a href="#修改MenuService" class="headerlink" title="修改MenuService"></a>修改MenuService</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 添加菜单</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> menVo</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addMenu</span><span class="params">(MenuVo menVo)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="修改MenuServiceImpl"><a href="#修改MenuServiceImpl" class="headerlink" title="修改MenuServiceImpl"></a>修改MenuServiceImpl</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addMenu</span><span class="params">(MenuVo menVo)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">this</span>.menuMapper.insertSelective(menVo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="修改功能"><a href="#修改功能" class="headerlink" title="修改功能"></a>修改功能</h3><h4 id="修改menuRight-jsp"><a href="#修改menuRight-jsp" class="headerlink" title="修改menuRight.jsp"></a>修改menuRight.jsp</h4><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//打开修改页面</span></span><br><span class="line">			<span class="function">function <span class="title">openUpdateMenu</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;修改用户&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;450px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						form.val(<span class="string">&quot;dataFrm&quot;</span>,data);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/menu/updateMenu.action&quot;</span>;</span><br><span class="line">						<span class="comment">//反选下拉树</span></span><br><span class="line">						<span class="keyword">var</span> pid=data.pid;</span><br><span class="line">					    <span class="keyword">var</span> params = dtree.dataInit(<span class="string">&quot;menuTree&quot;</span>, pid);</span><br><span class="line">					    <span class="comment">//移除打开的样式</span></span><br><span class="line">					    $(<span class="string">&quot;#menuSelectDiv&quot;</span>).removeClass(<span class="string">&quot;layui-show&quot;</span>);</span><br><span class="line">					    <span class="comment">//给下拉框的text框赋值</span></span><br><span class="line">					    $(<span class="string">&quot;#pid_str&quot;</span>).val(params.context);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//保存</span></span><br><span class="line">			form.on(<span class="string">&quot;submit(doSubmit)&quot;</span>,function(obj)&#123;</span><br><span class="line">				<span class="comment">//序列化表单数据</span></span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#dataFrm&quot;</span>).serialize();</span><br><span class="line">				$.post(url,params,function(obj)&#123;</span><br><span class="line">					layer.msg(obj.msg);</span><br><span class="line">					<span class="comment">//关闭弹出层</span></span><br><span class="line">					layer.close(mainIndex)</span><br><span class="line">					<span class="comment">//刷新数据 表格</span></span><br><span class="line">					tableIns.reload();</span><br><span class="line">					<span class="comment">//刷新左边的树</span></span><br><span class="line">					window.parent.left.menuTree.reload();</span><br><span class="line">					<span class="comment">//刷新添加和修改的下拉树</span></span><br><span class="line">					menuTree.reload();</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="为MenuControler新增方法"><a href="#为MenuControler新增方法" class="headerlink" title="为MenuControler新增方法"></a>为MenuControler新增方法</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 修改菜单</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;updateMenu&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">updateMenu</span><span class="params">(MenuVo menVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.menuService.updateMenu(menVo);</span><br><span class="line">			<span class="keyword">return</span> ResultObj.UPDATE_SUCCESS;</span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> ResultObj.UPDATE_ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h4 id="在MenuService接口中添加修改菜单的接口"><a href="#在MenuService接口中添加修改菜单的接口" class="headerlink" title="在MenuService接口中添加修改菜单的接口"></a>在MenuService接口中添加修改菜单的接口</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 修改菜单</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> menVo</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateMenu</span><span class="params">(MenuVo menVo)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="在MenuServiceImpl中实现该方法"><a href="#在MenuServiceImpl中实现该方法" class="headerlink" title="在MenuServiceImpl中实现该方法"></a>在MenuServiceImpl中实现该方法</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateMenu</span><span class="params">(MenuVo menVo)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">this</span>.menuMapper.updateByPrimaryKeySelective(menVo);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h3 id="删除功能"><a href="#删除功能" class="headerlink" title="删除功能"></a>删除功能</h3><h4 id="功能分析-1"><a href="#功能分析-1" class="headerlink" title="功能分析"></a>功能分析</h4><p>删除菜单时候需要先判断这个菜单有没有子菜单（前台传入一个id，后台拿到这个id首先去sys_role_menu中判断pid=id的数据是否大于0，如果大于0，说明有子菜单，不能删除，否则继续往下进行以下的步骤），没有子菜单需要删除sys_menu表中的节点，同时删除sys_role_menu表中pid=id的数据</p>
<h4 id="修改menuRight-jsp-1"><a href="#修改menuRight-jsp-1" class="headerlink" title="修改menuRight.jsp"></a>修改menuRight.jsp</h4><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//监听行工具事件</span></span><br><span class="line">		   table.on(<span class="string">&#x27;tool(menuTable)&#x27;</span>, function(obj)&#123;</span><br><span class="line">			   <span class="keyword">var</span> data = obj.data; <span class="comment">//获得当前行数据</span></span><br><span class="line">			   <span class="keyword">var</span> layEvent = obj.event; <span class="comment">//获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）</span></span><br><span class="line">			  <span class="keyword">if</span>(layEvent === <span class="string">&#x27;del&#x27;</span>)&#123; <span class="comment">//删除</span></span><br><span class="line">				  <span class="comment">//先判断当前菜单有没有子节点</span></span><br><span class="line">				  $.post(<span class="string">&quot;$&#123;ctx&#125;/menu/checkMenuHasChildren.action?id=&quot;</span>+data.id,function(obj)&#123;</span><br><span class="line">					  <span class="keyword">if</span>(obj.code&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">						  layer.msg(<span class="string">&quot;当前菜单有子节点同，请先删子节点&quot;</span>);</span><br><span class="line">					  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">						  layer.confirm(<span class="string">&#x27;真的删除【&#x27;</span>+data.title+<span class="string">&#x27;】这个菜单吗&#x27;</span>, function(index)&#123;</span><br><span class="line">						       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">						       $.post(<span class="string">&quot;$&#123;ctx&#125;/menu/deleteMenu.action&quot;</span>,&#123;id:data.id&#125;,function(res)&#123;</span><br><span class="line">						    	   layer.msg(res.msg);</span><br><span class="line">						    	    <span class="comment">//刷新数据 表格</span></span><br><span class="line">									tableIns.reload();</span><br><span class="line">									<span class="comment">//刷新左边的树</span></span><br><span class="line">									window.parent.left.menuTree.reload();</span><br><span class="line">									<span class="comment">//刷新添加和修改的下拉树</span></span><br><span class="line">									menuTree.reload();</span><br><span class="line">						       &#125;)</span><br><span class="line">						     &#125;); </span><br><span class="line">					  &#125;</span><br><span class="line">				  &#125;)</span><br><span class="line">				  </span><br><span class="line">			   </span><br><span class="line">			   &#125; <span class="keyword">else</span> <span class="keyword">if</span>(layEvent === <span class="string">&#x27;edit&#x27;</span>)&#123; <span class="comment">//编辑</span></span><br><span class="line">			     openUpdateMenu(data);</span><br><span class="line">			   &#125;</span><br><span class="line">			 &#125;);</span><br></pre></td></tr></table></figure>

<h4 id="修改MenuController-1"><a href="#修改MenuController-1" class="headerlink" title="修改MenuController"></a>修改MenuController</h4><p>新增两个方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据id判断当前菜单有没有子节点</span></span><br><span class="line"><span class="comment">	 * 有返回code&gt;=0</span></span><br><span class="line"><span class="comment">	 * 没有 返回code&lt;0</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;checkMenuHasChildren&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">checkMenuHasChildren</span><span class="params">(MenuVo menuVo)</span></span>&#123;</span><br><span class="line">		<span class="comment">//根据pid查询菜单数量</span></span><br><span class="line">		Integer count=<span class="keyword">this</span>.menuService.queryMenuByPid(menuVo.getId());</span><br><span class="line">		<span class="keyword">if</span>(count&gt;<span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> ResultObj.STATUS_TRUE;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> ResultObj.STATUS_FALSE;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 删除菜单</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;deleteMenu&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">deleteMenu</span><span class="params">(MenuVo menuVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.menuService.deleteMenu(menuVo);</span><br><span class="line">			<span class="keyword">return</span> ResultObj.DELETE_SUCCESS;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> ResultObj.DELETE_ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h4 id="在MenuService中新增方法"><a href="#在MenuService中新增方法" class="headerlink" title="在MenuService中新增方法"></a>在MenuService中新增方法</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据pid查询菜单数量</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> pid</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">queryMenuByPid</span><span class="params">(Integer pid)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 删除菜单</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> menuVo</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteMenu</span><span class="params">(MenuVo menuVo)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="在MenuServiceImpl中实现该方法-1"><a href="#在MenuServiceImpl中实现该方法-1" class="headerlink" title="在MenuServiceImpl中实现该方法"></a>在MenuServiceImpl中实现该方法</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">queryMenuByPid</span><span class="params">(Integer pid)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.menuMapper.queryMenuByPid(pid);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteMenu</span><span class="params">(MenuVo menuVo)</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//删除菜单表的数据</span></span><br><span class="line">	<span class="keyword">this</span>.menuMapper.deleteByPrimaryKey(menuVo.getId());</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//根据菜单id删除sys_role_menu里面的数据</span></span><br><span class="line">	<span class="keyword">this</span>.menuMapper.deleteRoleMenuByMid(menuVo.getId());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="MenuMapper接口中定义该方法"><a href="#MenuMapper接口中定义该方法" class="headerlink" title="MenuMapper接口中定义该方法"></a>MenuMapper接口中定义该方法</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 根据pid查询菜单数量 </span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> pid</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="function">Integer <span class="title">queryMenuByPid</span><span class="params">(<span class="meta">@Param(&quot;pid&quot;)</span>Integer pid)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据菜单id删除sys_role_menu里面的数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deleteRoleMenuByMid</span><span class="params">(<span class="meta">@Param(&quot;mid&quot;)</span>Integer mid)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="在MenuMapper-xml中新增方法"><a href="#在MenuMapper-xml中新增方法" class="headerlink" title="在MenuMapper.xml中新增方法"></a>在MenuMapper.xml中新增方法</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 根据pid查询菜单数量 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryMenuByPid&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">	select count(1) from</span><br><span class="line">	sys_menu where pid=#&#123;pid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 根据菜单id删除sys_role_menu里面的数据 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteRoleMenuByMid&quot;</span>&gt;</span></span><br><span class="line">	delete from sys_role_menu where mid=#&#123;mid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="角色管理-1"><a href="#角色管理-1" class="headerlink" title="角色管理"></a>角色管理</h1><h2 id="角色CRUD"><a href="#角色CRUD" class="headerlink" title="角色CRUD"></a>角色CRUD</h2><h3 id="在sys-role下创建roleManager-jsp"><a href="#在sys-role下创建roleManager-jsp" class="headerlink" title="在sys/role下创建roleManager.jsp"></a>在sys/role下创建roleManager.jsp</h3><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;角色管理&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;Access-Control-Allow-Origin&quot;</span> content=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/dtree.css&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/font/dtreefont.css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;childrenBody&quot;</span>&gt;</span><br><span class="line">	&lt;!-- 搜索条件开始 --&gt;</span><br><span class="line">	&lt;fieldset <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-elem-field layui-field-title&quot;</span> style=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span><br><span class="line">	  &lt;legend&gt;查询条件&lt;/legend&gt;</span><br><span class="line">	&lt;/fieldset&gt;</span><br><span class="line">	&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span> method=<span class="string">&quot;post&quot;</span> id=<span class="string">&quot;searchFrm&quot;</span>&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;角色名称:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;rolename&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;角色备注:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;roledesc&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		     &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		       		 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">					 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal  layui-icon layui-icon-search&quot; id=&quot;doSearch&quot;&gt;查询&lt;/button&gt;</span><br><span class="line">		      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm  layui-icon layui-icon-refresh&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		 &lt;/div&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 搜索条件结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 数据表格开始 --&gt;</span><br><span class="line">	&lt;table class=&quot;layui-hide&quot; id=&quot;roleTable&quot; lay-filter=&quot;roleTable&quot;&gt;&lt;/table&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;&quot;</span> id=<span class="string">&quot;roleToolBar&quot;</span>&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-sm&quot; lay-event=&quot;add&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-danger layui-btn-sm&quot; lay-event=&quot;deleteBatch&quot;&gt;批量删除&lt;/button&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div  id=<span class="string">&quot;roleBar&quot;</span> style=<span class="string">&quot;display: none;&quot;</span>&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-xs&quot; lay-event=&quot;edit&quot;&gt;编辑&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-warm layui-btn-xs&quot; lay-event=&quot;selectRoleMenu&quot;&gt;分配菜单&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-danger layui-btn-xs&quot; lay-event=&quot;del&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 数据表格结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 添加和修改的弹出层开始 --&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;padding: 20px&quot;</span> id=<span class="string">&quot;saveOrUpdateDiv&quot;</span> &gt;</span><br><span class="line">		&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span>  lay-filter=<span class="string">&quot;dataFrm&quot;</span> id=<span class="string">&quot;dataFrm&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;角色名称:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;roleid&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;rolename&quot;</span>  placeholder=<span class="string">&quot;请输入角色名称&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;角色备注:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;roledesc&quot;</span> placeholder=<span class="string">&quot;请输入角色备注&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> checked=<span class="string">&quot;checked&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可用&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span> style=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span><br><span class="line">			    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">			      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal layui-btn-sm layui-icon layui-icon-release&quot; lay-filter=&quot;doSubmit&quot; lay-submit=&quot;&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">			      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm layui-btn-sm layui-icon layui-icon-refresh&quot; &gt;重置&lt;/button&gt;</span><br><span class="line">			    &lt;/div&gt;</span><br><span class="line">		  	&lt;/div&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 添加和修改的弹出层结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;script src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	    <span class="keyword">var</span> tableIns;</span><br><span class="line">	    layui.extend(&#123;</span><br><span class="line">			dtree:<span class="string">&#x27;$&#123;ctx&#125;/resources/layui_ext/dist/dtree&#x27;</span></span><br><span class="line">		&#125;).use([ <span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;form&#x27;</span>, <span class="string">&#x27;table&#x27;</span>,<span class="string">&#x27;dtree&#x27;</span>  ], function() &#123;</span><br><span class="line">			<span class="keyword">var</span> $ = layui.jquery;</span><br><span class="line">			<span class="keyword">var</span> layer = layui.layer;</span><br><span class="line">			<span class="keyword">var</span> form = layui.form;</span><br><span class="line">			<span class="keyword">var</span> table = layui.table;</span><br><span class="line">			<span class="keyword">var</span> dtree=layui.dtree;</span><br><span class="line">			<span class="comment">//渲染数据表格</span></span><br><span class="line">			 tableIns=table.render(&#123;</span><br><span class="line">				 elem: <span class="string">&#x27;#roleTable&#x27;</span>   <span class="comment">//渲染的目标对象</span></span><br><span class="line">			    ,url:<span class="string">&#x27;$&#123;ctx&#125;/role/loadAllRole.action&#x27;</span> <span class="comment">//数据接口</span></span><br><span class="line">			    ,title: <span class="string">&#x27;用户数据表&#x27;</span><span class="comment">//数据导出来的标题</span></span><br><span class="line">			    ,toolbar:<span class="string">&quot;#roleToolBar&quot;</span>   <span class="comment">//表格的工具条</span></span><br><span class="line">			    ,height:<span class="string">&#x27;full-150&#x27;</span></span><br><span class="line">			    ,cellMinWidth:<span class="number">100</span> <span class="comment">//设置列的最小默认宽度</span></span><br><span class="line">			    ,page: <span class="keyword">true</span>  <span class="comment">//是否启用分页</span></span><br><span class="line">			    ,cols: [[   <span class="comment">//列表数据</span></span><br><span class="line">			     &#123;type: <span class="string">&#x27;checkbox&#x27;</span>, fixed: <span class="string">&#x27;left&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;roleid&#x27;</span>, title:<span class="string">&#x27;ID&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;rolename&#x27;</span>, title:<span class="string">&#x27;角色名称&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;roledesc&#x27;</span>, title:<span class="string">&#x27;角色备注&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;available&#x27;</span>, title:<span class="string">&#x27;是否可用&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> d.available==<span class="string">&#x27;1&#x27;</span>?<span class="string">&#x27;&lt;font color=blue&gt;可用&lt;/font&gt;&#x27;</span>:<span class="string">&#x27;&lt;font color=red&gt;不可用&lt;/font&gt;&#x27;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;fixed: <span class="string">&#x27;right&#x27;</span>, title:<span class="string">&#x27;操作&#x27;</span>, toolbar: <span class="string">&#x27;#roleBar&#x27;</span>, width:<span class="number">220</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			    ]]</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//模糊查询</span></span><br><span class="line">			$(<span class="string">&quot;#doSearch&quot;</span>).click(function()&#123;</span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#searchFrm&quot;</span>).serialize();</span><br><span class="line">				tableIns.reload(&#123;</span><br><span class="line">					url:<span class="string">&quot;$&#123;ctx&#125;/role/loadAllRole.action?&quot;</span>+params</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//监听头部工具栏事件</span></span><br><span class="line">			table.on(<span class="string">&quot;toolbar(roleTable)&quot;</span>,function(obj)&#123;</span><br><span class="line">				 <span class="keyword">switch</span>(obj.event)&#123;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">				      openAddRole();</span><br><span class="line">				    <span class="keyword">break</span>;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;deleteBatch&#x27;</span>:</span><br><span class="line">				    	deleteBatch();</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				  &#125;;</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//监听行工具事件</span></span><br><span class="line">		   table.on(<span class="string">&#x27;tool(roleTable)&#x27;</span>, function(obj)&#123;</span><br><span class="line">			   <span class="keyword">var</span> data = obj.data; <span class="comment">//获得当前行数据</span></span><br><span class="line">			   <span class="keyword">var</span> layEvent = obj.event; <span class="comment">//获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）</span></span><br><span class="line">			  <span class="keyword">if</span>(layEvent === <span class="string">&#x27;del&#x27;</span>)&#123; <span class="comment">//删除</span></span><br><span class="line">				  layer.confirm(<span class="string">&#x27;真的删除【&#x27;</span>+data.rolename+<span class="string">&#x27;】这个角色吗&#x27;</span>, function(index)&#123;</span><br><span class="line">				       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">				       $.post(<span class="string">&quot;$&#123;ctx&#125;/role/deleteRole.action&quot;</span>,&#123;roleid:data.roleid&#125;,function(res)&#123;</span><br><span class="line">				    	   layer.msg(res.msg);</span><br><span class="line">				    	    <span class="comment">//刷新数据 表格</span></span><br><span class="line">							tableIns.reload();</span><br><span class="line">				       &#125;)</span><br><span class="line">				     &#125;); </span><br><span class="line">			   &#125; <span class="keyword">else</span> <span class="keyword">if</span>(layEvent === <span class="string">&#x27;edit&#x27;</span>)&#123; <span class="comment">//编辑</span></span><br><span class="line">			     openUpdateRole(data);</span><br><span class="line">			   &#125;</span><br><span class="line">			 &#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">var</span> url;</span><br><span class="line">			<span class="keyword">var</span> mainIndex;</span><br><span class="line">			<span class="comment">//打开添加页面</span></span><br><span class="line">			<span class="function">function <span class="title">openAddRole</span><span class="params">()</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;添加角色&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;300px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						<span class="comment">//清空表单数据       </span></span><br><span class="line">						$(<span class="string">&quot;#dataFrm&quot;</span>)[<span class="number">0</span>].reset();</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/role/addRole.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//打开修改页面</span></span><br><span class="line">			<span class="function">function <span class="title">openUpdateRole</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;修改用户&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;300px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						form.val(<span class="string">&quot;dataFrm&quot;</span>,data);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/role/updateRole.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//保存</span></span><br><span class="line">			form.on(<span class="string">&quot;submit(doSubmit)&quot;</span>,function(obj)&#123;</span><br><span class="line">				<span class="comment">//序列化表单数据</span></span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#dataFrm&quot;</span>).serialize();</span><br><span class="line">				$.post(url,params,function(obj)&#123;</span><br><span class="line">					layer.msg(obj.msg);</span><br><span class="line">					<span class="comment">//关闭弹出层</span></span><br><span class="line">					layer.close(mainIndex)</span><br><span class="line">					<span class="comment">//刷新数据 表格</span></span><br><span class="line">					tableIns.reload();</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//批量删除</span></span><br><span class="line">			<span class="function">function <span class="title">deleteBatch</span><span class="params">()</span></span>&#123;</span><br><span class="line">				<span class="comment">//得到选中的数据行</span></span><br><span class="line">				<span class="keyword">var</span> checkStatus = table.checkStatus(<span class="string">&#x27;roleTable&#x27;</span>);</span><br><span class="line">			    <span class="keyword">var</span> data = checkStatus.data;</span><br><span class="line">			    <span class="keyword">var</span> params=<span class="string">&quot;&quot;</span>;</span><br><span class="line">			    $.each(data,function(i,item)&#123;</span><br><span class="line">			    	<span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</span><br><span class="line">			    		params+=<span class="string">&quot;ids=&quot;</span>+item.roleid;</span><br><span class="line">			    	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			    		params+=<span class="string">&quot;&amp;ids=&quot;</span>+item.roleid;</span><br><span class="line">			    	&#125;</span><br><span class="line">			    &#125;);</span><br><span class="line">			    layer.confirm(<span class="string">&#x27;真的删除选中的这些角色吗&#x27;</span>, function(index)&#123;</span><br><span class="line">				       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">				       $.post(<span class="string">&quot;$&#123;ctx&#125;/role/deleteBatchRole.action&quot;</span>,params,function(res)&#123;</span><br><span class="line">				    	   layer.msg(res.msg);</span><br><span class="line">				    	    <span class="comment">//刷新数据 表格</span></span><br><span class="line">							tableIns.reload();</span><br><span class="line">				       &#125;)</span><br><span class="line">				     &#125;); </span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="修改页面路径"><a href="#修改页面路径" class="headerlink" title="修改页面路径"></a>修改页面路径</h3><p><a href="https://imgchr.com/i/BSa9yT"><img src="https://s1.ax1x.com/2020/10/20/BSa9yT.png" alt="BSa9yT.png"></a></p>
<h3 id="创建role"><a href="#创建role" class="headerlink" title="创建role"></a>创建role</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.domain;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 20, 2020 11:03:10 AM</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Role</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Integer roleid;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String rolename;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String roledesc;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Integer available;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getRoleid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> roleid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRoleid</span><span class="params">(Integer roleid)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.roleid = roleid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getRolename</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> rolename;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRolename</span><span class="params">(String rolename)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.rolename = rolename == <span class="keyword">null</span> ? <span class="keyword">null</span> : rolename.trim();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getRoledesc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> roledesc;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRoledesc</span><span class="params">(String roledesc)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.roledesc = roledesc == <span class="keyword">null</span> ? <span class="keyword">null</span> : roledesc.trim();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getAvailable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> available;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAvailable</span><span class="params">(Integer available)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.available = available;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建RoleMapper"><a href="#创建RoleMapper" class="headerlink" title="创建RoleMapper"></a>创建RoleMapper</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Role;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 20, 2020 11:05:24 AM</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RoleMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">deleteByPrimaryKey</span><span class="params">(Integer roleid)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(Role record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">insertSelective</span><span class="params">(Role record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">Role <span class="title">selectByPrimaryKey</span><span class="params">(Integer roleid)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">updateByPrimaryKeySelective</span><span class="params">(Role record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">updateByPrimaryKey</span><span class="params">(Role record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询角色</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">List&lt;Role&gt; <span class="title">queryAllRole</span><span class="params">(Role role)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据角色id删除sys_role_menu里面的数据</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleid</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">deleteRoleMenuByRid</span><span class="params">(Integer roleid)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据角色id删除sys_role_user里面的数据</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleid</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">deleteRoleUserByRid</span><span class="params">(Integer roleid)</span></span>;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建RoleMapper-xml"><a href="#创建RoleMapper-xml" class="headerlink" title="创建RoleMapper.xml"></a>创建RoleMapper.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.study.sys.mapper.RoleMapper&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.study.sys.domain.Role&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;roleid&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;roleid&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;rolename&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">property</span>=<span class="string">&quot;rolename&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;roledesc&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">property</span>=<span class="string">&quot;roledesc&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;available&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">property</span>=<span class="string">&quot;available&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;Base_Column_List&quot;</span>&gt;</span></span><br><span class="line">		roleid, rolename, roledesc, available</span><br><span class="line">	<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByPrimaryKey&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">		select</span><br><span class="line">		<span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">		from sys_role</span><br><span class="line">		where roleid = #&#123;roleid,jdbcType=INTEGER&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByPrimaryKey&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">		delete from sys_role</span><br><span class="line">		where roleid = #&#123;roleid,jdbcType=INTEGER&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Role&quot;</span>&gt;</span></span><br><span class="line">		insert into sys_role (roleid, rolename, roledesc,</span><br><span class="line">		available)</span><br><span class="line">		values (#&#123;roleid,jdbcType=INTEGER&#125;, #&#123;rolename,jdbcType=VARCHAR&#125;,</span><br><span class="line">		#&#123;roledesc,jdbcType=VARCHAR&#125;,</span><br><span class="line">		#&#123;available,jdbcType=INTEGER&#125;)</span><br><span class="line">	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertSelective&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Role&quot;</span>&gt;</span></span><br><span class="line">		insert into sys_role</span><br><span class="line">		<span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;(&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;roleid != null&quot;</span>&gt;</span></span><br><span class="line">				roleid,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;rolename != null&quot;</span>&gt;</span></span><br><span class="line">				rolename,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;roledesc != null&quot;</span>&gt;</span></span><br><span class="line">				roledesc,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">				available,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;values (&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;roleid != null&quot;</span>&gt;</span></span><br><span class="line">				#&#123;roleid,jdbcType=INTEGER&#125;,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;rolename != null&quot;</span>&gt;</span></span><br><span class="line">				#&#123;rolename,jdbcType=VARCHAR&#125;,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;roledesc != null&quot;</span>&gt;</span></span><br><span class="line">				#&#123;roledesc,jdbcType=VARCHAR&#125;,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">				#&#123;available,jdbcType=INTEGER&#125;,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKeySelective&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Role&quot;</span>&gt;</span></span><br><span class="line">		update sys_role</span><br><span class="line">		<span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;rolename != null&quot;</span>&gt;</span></span><br><span class="line">				rolename = #&#123;rolename,jdbcType=VARCHAR&#125;,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;roledesc != null&quot;</span>&gt;</span></span><br><span class="line">				roledesc = #&#123;roledesc,jdbcType=VARCHAR&#125;,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">				available = #&#123;available,jdbcType=INTEGER&#125;,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">		where roleid = #&#123;roleid,jdbcType=INTEGER&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKey&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Role&quot;</span>&gt;</span></span><br><span class="line">		update sys_role</span><br><span class="line">		set rolename = #&#123;rolename,jdbcType=VARCHAR&#125;,</span><br><span class="line">		roledesc = #&#123;roledesc,jdbcType=VARCHAR&#125;,</span><br><span class="line">		available = #&#123;available,jdbcType=INTEGER&#125;</span><br><span class="line">		where roleid = #&#123;roleid,jdbcType=INTEGER&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 查询角色 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllRole&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">		select</span><br><span class="line">		<span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">		from sys_role</span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;rolename!=null and rolename!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">				and rolename like concat(&quot;%&quot;,#&#123;rolename&#125;,&quot;%&quot;)</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;roledesc!=null and roledesc!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">				and roledesc like concat(&quot;%&quot;,#&#123;roledesc&#125;,&quot;%&quot;)</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available!=null&quot;</span>&gt;</span></span><br><span class="line">				and available =#&#123;available&#125;</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 根据角色id删除sys_role_menu里面的数据 deleteRolMenuByRid --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteRoleMenuByRid&quot;</span>&gt;</span></span><br><span class="line">		delete from sys_role_menu where rid=#&#123;value&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 根据角色id删除sys_role_user里面的数据 deleteRoleUserByRid --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteRoleUserByRid&quot;</span>&gt;</span></span><br><span class="line">		delete from sys_role_user where rid=#&#123;value&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 保存角色和菜单之间的关系 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertRoleMenu&quot;</span>&gt;</span></span><br><span class="line">		insert into sys_role_menu(rid,mid) values(#&#123;rid&#125;,#&#123;mid&#125;)</span><br><span class="line">	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 根据用户id删除sys_role_user里面的数据  --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteRoleUserByUid&quot;</span>&gt;</span></span><br><span class="line">		delete from sys_role_user where uid=#&#123;value&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="创建RoleVo"><a href="#创建RoleVo" class="headerlink" title="创建RoleVo"></a>创建RoleVo</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Role;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 20, 2020 11:39:58 AM</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RoleVo</span> <span class="keyword">extends</span> <span class="title">Role</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 分页参数</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> Integer page;</span><br><span class="line">	<span class="keyword">private</span> Integer limit;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 接收多个角色id</span></span><br><span class="line">	<span class="keyword">private</span> Integer[] ids;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Integer[] getIds() &#123;</span><br><span class="line">		<span class="keyword">return</span> ids;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIds</span><span class="params">(Integer[] ids)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.ids = ids;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> page;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPage</span><span class="params">(Integer page)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.page = page;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getLimit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> limit;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLimit</span><span class="params">(Integer limit)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.limit = limit;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建RoleService"><a href="#创建RoleService" class="headerlink" title="创建RoleService"></a>创建RoleService</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Role;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.DataGridView;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.RoleVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 20, 2020 11:40:53 AM</span></span><br><span class="line"><span class="comment">* 角色管理的服务接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RoleService</span> </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询所有角色返回</span></span><br><span class="line"><span class="comment">	 * List&lt;Role&gt;</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Role&gt; <span class="title">queryAllRoleForList</span><span class="params">(RoleVo roleVo)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据用户id查询用户的可用角色</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Role&gt; <span class="title">queryRoleByUserIdForList</span><span class="params">(RoleVo roleVo,Integer userId)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询所有角色</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleVo</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataGridView <span class="title">queryAllRole</span><span class="params">(RoleVo roleVo)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 添加角色</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleVo</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addRole</span><span class="params">(RoleVo roleVo)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 修改角色</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleVo</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateRole</span><span class="params">(RoleVo roleVo)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据id删除角色</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleid</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteRole</span><span class="params">(Integer roleid)</span></span>;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 批量删除角色</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleVo</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteBatchRole</span><span class="params">(Integer [] ids)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建RoleServiceImpl"><a href="#创建RoleServiceImpl" class="headerlink" title="创建RoleServiceImpl"></a>创建RoleServiceImpl</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.Page;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Role;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.mapper.RoleMapper;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.service.RoleService;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.DataGridView;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.RoleVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 20, 2020 11:42:47 AM</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RoleServiceImpl</span> <span class="keyword">implements</span> <span class="title">RoleService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> RoleMapper roleMapper;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Role&gt; <span class="title">queryAllRoleForList</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> roleMapper.queryAllRole(roleVo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Role&gt; <span class="title">queryRoleByUserIdForList</span><span class="params">(RoleVo roleVo, Integer userId)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> roleMapper.queryAllRole(roleVo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataGridView <span class="title">queryAllRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		Page&lt;Object&gt; page = PageHelper.startPage(roleVo.getPage(), roleVo.getLimit());</span><br><span class="line">		List&lt;Role&gt; data = <span class="keyword">this</span>.roleMapper.queryAllRole(roleVo);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> DataGridView(page.getTotal(), data);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.roleMapper.insertSelective(roleVo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.roleMapper.updateByPrimaryKeySelective(roleVo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteRole</span><span class="params">(Integer roleid)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 删除角色表的数据</span></span><br><span class="line">		<span class="keyword">this</span>.roleMapper.deleteByPrimaryKey(roleid);</span><br><span class="line">		<span class="comment">// 根据角色id删除sys_role_meun里面的数据</span></span><br><span class="line">		<span class="keyword">this</span>.roleMapper.deleteRoleMenuByRid(roleid);</span><br><span class="line">		<span class="comment">// 根据角色id删除sys_role_user里面的数据</span></span><br><span class="line">		<span class="keyword">this</span>.roleMapper.deleteRoleUserByRid(roleid);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteBatchRole</span><span class="params">(Integer[] ids)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (Integer rid : ids) &#123;</span><br><span class="line">			deleteRole(rid);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建RoleController"><a href="#创建RoleController" class="headerlink" title="创建RoleController"></a>创建RoleController</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.service.RoleService;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.DataGridView;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.ResultObj;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.RoleVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 20, 2020 12:14:57 PM</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;role&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RoleController</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> RoleService roleService;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 加载角色列表返回DataGridView</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;loadAllRole&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataGridView <span class="title">loadAllRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.roleService.queryAllRole(roleVo);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 添加角色</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;addRole&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">addRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.roleService.addRole(roleVo);</span><br><span class="line">			<span class="keyword">return</span> ResultObj.ADD_SUCCESS;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> ResultObj.ADD_ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 修改角色</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;updateRole&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">updateRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.roleService.updateRole(roleVo);</span><br><span class="line">			<span class="keyword">return</span> ResultObj.UPDATE_SUCCESS;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> ResultObj.UPDATE_ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 删除角色</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;deleteRole&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">deleteRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.roleService.deleteRole(roleVo.getRoleid());</span><br><span class="line">			<span class="keyword">return</span> ResultObj.DELETE_SUCCESS;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> ResultObj.DELETE_ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 批量删除角色</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;deleteBatchRole&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">deleteBatchRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.roleService.deleteBatchRole(roleVo.getIds());</span><br><span class="line">			<span class="keyword">return</span> ResultObj.DELETE_SUCCESS;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> ResultObj.DELETE_ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="在SysController中新增路由"><a href="#在SysController中新增路由" class="headerlink" title="在SysController中新增路由"></a>在SysController中新增路由</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 跳转角色管理页面</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;toRoleManager&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toRoleManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;system/role/roleManager&quot;</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h3 id="功能完成效果"><a href="#功能完成效果" class="headerlink" title="功能完成效果"></a>功能完成效果</h3><p><a href="https://imgchr.com/i/BSaoN9"><img src="https://s1.ax1x.com/2020/10/20/BSaoN9.png" alt="BSaoN9.png"></a></p>
<h2 id="角色分配菜单"><a href="#角色分配菜单" class="headerlink" title="角色分配菜单"></a>角色分配菜单</h2><h3 id="修改system-role-roleManager-jsp"><a href="#修改system-role-roleManager-jsp" class="headerlink" title="修改system/role/roleManager.jsp"></a>修改system/role/roleManager.jsp</h3><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;角色管理&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;Access-Control-Allow-Origin&quot;</span> content=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/dtree.css&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/font/dtreefont.css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;childrenBody&quot;</span>&gt;</span><br><span class="line">	&lt;!-- 搜索条件开始 --&gt;</span><br><span class="line">	&lt;fieldset <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-elem-field layui-field-title&quot;</span> style=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span><br><span class="line">	  &lt;legend&gt;查询条件&lt;/legend&gt;</span><br><span class="line">	&lt;/fieldset&gt;</span><br><span class="line">	&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span> method=<span class="string">&quot;post&quot;</span> id=<span class="string">&quot;searchFrm&quot;</span>&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;角色名称:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;rolename&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;角色备注:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;roledesc&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		     &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		       		 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">					 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可用&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal  layui-icon layui-icon-search&quot; id=&quot;doSearch&quot;&gt;查询&lt;/button&gt;</span><br><span class="line">		      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm  layui-icon layui-icon-refresh&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		 &lt;/div&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 搜索条件结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 数据表格开始 --&gt;</span><br><span class="line">	&lt;table class=&quot;layui-hide&quot; id=&quot;roleTable&quot; lay-filter=&quot;roleTable&quot;&gt;&lt;/table&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;&quot;</span> id=<span class="string">&quot;roleToolBar&quot;</span>&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-sm&quot; lay-event=&quot;add&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-danger layui-btn-sm&quot; lay-event=&quot;deleteBatch&quot;&gt;批量删除&lt;/button&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div  id=<span class="string">&quot;roleBar&quot;</span> style=<span class="string">&quot;display: none;&quot;</span>&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-xs&quot; lay-event=&quot;edit&quot;&gt;编辑&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-warm layui-btn-xs&quot; lay-event=&quot;selectRoleMenu&quot;&gt;分配菜单&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-danger layui-btn-xs&quot; lay-event=&quot;del&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 数据表格结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 添加和修改的弹出层开始 --&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;padding: 20px&quot;</span> id=<span class="string">&quot;saveOrUpdateDiv&quot;</span> &gt;</span><br><span class="line">		&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span>  lay-filter=<span class="string">&quot;dataFrm&quot;</span> id=<span class="string">&quot;dataFrm&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;角色名称:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;roleid&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;rolename&quot;</span>  placeholder=<span class="string">&quot;请输入角色名称&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;角色备注:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;roledesc&quot;</span> placeholder=<span class="string">&quot;请输入角色备注&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> checked=<span class="string">&quot;checked&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可用&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span> style=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span><br><span class="line">			    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">			      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal layui-btn-sm layui-icon layui-icon-release&quot; lay-filter=&quot;doSubmit&quot; lay-submit=&quot;&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">			      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm layui-btn-sm layui-icon layui-icon-refresh&quot; &gt;重置&lt;/button&gt;</span><br><span class="line">			    &lt;/div&gt;</span><br><span class="line">		  	&lt;/div&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 添加和修改的弹出层结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 角色分配菜单的弹出层开始 --&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;&quot;</span> id=<span class="string">&quot;selectRoleMenu&quot;</span>&gt;</span><br><span class="line">		&lt;ul id=&quot;menuTree&quot; class=&quot;dtree&quot; data-id=&quot;0&quot;&gt;&lt;/ul&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 角色分配菜单的弹出层结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;script src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	    <span class="keyword">var</span> tableIns;</span><br><span class="line">	    layui.extend(&#123;</span><br><span class="line">			dtree:<span class="string">&#x27;$&#123;ctx&#125;/resources/layui_ext/dist/dtree&#x27;</span></span><br><span class="line">		&#125;).use([ <span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;form&#x27;</span>, <span class="string">&#x27;table&#x27;</span>,<span class="string">&#x27;dtree&#x27;</span>  ], function() &#123;</span><br><span class="line">			<span class="keyword">var</span> $ = layui.jquery;</span><br><span class="line">			<span class="keyword">var</span> layer = layui.layer;</span><br><span class="line">			<span class="keyword">var</span> form = layui.form;</span><br><span class="line">			<span class="keyword">var</span> table = layui.table;</span><br><span class="line">			<span class="keyword">var</span> dtree=layui.dtree;</span><br><span class="line">			<span class="comment">//渲染数据表格</span></span><br><span class="line">			 tableIns=table.render(&#123;</span><br><span class="line">				 elem: <span class="string">&#x27;#roleTable&#x27;</span>   <span class="comment">//渲染的目标对象</span></span><br><span class="line">			    ,url:<span class="string">&#x27;$&#123;ctx&#125;/role/loadAllRole.action&#x27;</span> <span class="comment">//数据接口</span></span><br><span class="line">			    ,title: <span class="string">&#x27;用户数据表&#x27;</span><span class="comment">//数据导出来的标题</span></span><br><span class="line">			    ,toolbar:<span class="string">&quot;#roleToolBar&quot;</span>   <span class="comment">//表格的工具条</span></span><br><span class="line">			    ,height:<span class="string">&#x27;full-150&#x27;</span></span><br><span class="line">			    ,cellMinWidth:<span class="number">100</span> <span class="comment">//设置列的最小默认宽度</span></span><br><span class="line">			    ,page: <span class="keyword">true</span>  <span class="comment">//是否启用分页</span></span><br><span class="line">			    ,cols: [[   <span class="comment">//列表数据</span></span><br><span class="line">			     &#123;type: <span class="string">&#x27;checkbox&#x27;</span>, fixed: <span class="string">&#x27;left&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;roleid&#x27;</span>, title:<span class="string">&#x27;ID&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;rolename&#x27;</span>, title:<span class="string">&#x27;角色名称&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;roledesc&#x27;</span>, title:<span class="string">&#x27;角色备注&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;available&#x27;</span>, title:<span class="string">&#x27;是否可用&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> d.available==<span class="string">&#x27;1&#x27;</span>?<span class="string">&#x27;&lt;font color=blue&gt;可用&lt;/font&gt;&#x27;</span>:<span class="string">&#x27;&lt;font color=red&gt;不可用&lt;/font&gt;&#x27;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;fixed: <span class="string">&#x27;right&#x27;</span>, title:<span class="string">&#x27;操作&#x27;</span>, toolbar: <span class="string">&#x27;#roleBar&#x27;</span>, width:<span class="number">220</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			    ]]</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//模糊查询</span></span><br><span class="line">			$(<span class="string">&quot;#doSearch&quot;</span>).click(function()&#123;</span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#searchFrm&quot;</span>).serialize();</span><br><span class="line">				tableIns.reload(&#123;</span><br><span class="line">					url:<span class="string">&quot;$&#123;ctx&#125;/role/loadAllRole.action?&quot;</span>+params</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//监听头部工具栏事件</span></span><br><span class="line">			table.on(<span class="string">&quot;toolbar(roleTable)&quot;</span>,function(obj)&#123;</span><br><span class="line">				 <span class="keyword">switch</span>(obj.event)&#123;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">				      openAddRole();</span><br><span class="line">				    <span class="keyword">break</span>;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;deleteBatch&#x27;</span>:</span><br><span class="line">				    	deleteBatch();</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				  &#125;;</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//监听行工具事件</span></span><br><span class="line">		   table.on(<span class="string">&#x27;tool(roleTable)&#x27;</span>, function(obj)&#123;</span><br><span class="line">			   <span class="keyword">var</span> data = obj.data; <span class="comment">//获得当前行数据</span></span><br><span class="line">			   <span class="keyword">var</span> layEvent = obj.event; <span class="comment">//获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）</span></span><br><span class="line">			  <span class="keyword">if</span>(layEvent === <span class="string">&#x27;del&#x27;</span>)&#123; <span class="comment">//删除</span></span><br><span class="line">				  layer.confirm(<span class="string">&#x27;真的删除【&#x27;</span>+data.rolename+<span class="string">&#x27;】这个角色吗&#x27;</span>, function(index)&#123;</span><br><span class="line">				       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">				       $.post(<span class="string">&quot;$&#123;ctx&#125;/role/deleteRole.action&quot;</span>,&#123;roleid:data.roleid&#125;,function(res)&#123;</span><br><span class="line">				    	   layer.msg(res.msg);</span><br><span class="line">				    	    <span class="comment">//刷新数据 表格</span></span><br><span class="line">							tableIns.reload();</span><br><span class="line">				       &#125;)</span><br><span class="line">				     &#125;); </span><br><span class="line">			   &#125; <span class="keyword">else</span> <span class="keyword">if</span>(layEvent === <span class="string">&#x27;edit&#x27;</span>)&#123; <span class="comment">//编辑</span></span><br><span class="line">			     openUpdateRole(data);</span><br><span class="line">			   &#125;<span class="keyword">else</span> <span class="keyword">if</span>(layEvent===<span class="string">&#x27;selectRoleMenu&#x27;</span>)&#123;</span><br><span class="line">				 openselectRoleMenu(data);</span><br><span class="line">			   &#125;</span><br><span class="line">			 &#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">var</span> url;</span><br><span class="line">			<span class="keyword">var</span> mainIndex;</span><br><span class="line">			<span class="comment">//打开添加页面</span></span><br><span class="line">			<span class="function">function <span class="title">openAddRole</span><span class="params">()</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;添加角色&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;300px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						<span class="comment">//清空表单数据       </span></span><br><span class="line">						$(<span class="string">&quot;#dataFrm&quot;</span>)[<span class="number">0</span>].reset();</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/role/addRole.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//打开修改页面</span></span><br><span class="line">			<span class="function">function <span class="title">openUpdateRole</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;修改用户&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;300px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						form.val(<span class="string">&quot;dataFrm&quot;</span>,data);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/role/updateRole.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//保存</span></span><br><span class="line">			form.on(<span class="string">&quot;submit(doSubmit)&quot;</span>,function(obj)&#123;</span><br><span class="line">				<span class="comment">//序列化表单数据</span></span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#dataFrm&quot;</span>).serialize();</span><br><span class="line">				$.post(url,params,function(obj)&#123;</span><br><span class="line">					layer.msg(obj.msg);</span><br><span class="line">					<span class="comment">//关闭弹出层</span></span><br><span class="line">					layer.close(mainIndex)</span><br><span class="line">					<span class="comment">//刷新数据 表格</span></span><br><span class="line">					tableIns.reload();</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//批量删除</span></span><br><span class="line">			<span class="function">function <span class="title">deleteBatch</span><span class="params">()</span></span>&#123;</span><br><span class="line">				<span class="comment">//得到选中的数据行</span></span><br><span class="line">				<span class="keyword">var</span> checkStatus = table.checkStatus(<span class="string">&#x27;roleTable&#x27;</span>);</span><br><span class="line">			    <span class="keyword">var</span> data = checkStatus.data;</span><br><span class="line">			    <span class="keyword">var</span> params=<span class="string">&quot;&quot;</span>;</span><br><span class="line">			    $.each(data,function(i,item)&#123;</span><br><span class="line">			    	<span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</span><br><span class="line">			    		params+=<span class="string">&quot;ids=&quot;</span>+item.roleid;</span><br><span class="line">			    	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			    		params+=<span class="string">&quot;&amp;ids=&quot;</span>+item.roleid;</span><br><span class="line">			    	&#125;</span><br><span class="line">			    &#125;);</span><br><span class="line">			    layer.confirm(<span class="string">&#x27;真的删除选中的这些角色吗&#x27;</span>, function(index)&#123;</span><br><span class="line">				       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">				       $.post(<span class="string">&quot;$&#123;ctx&#125;/role/deleteBatchRole.action&quot;</span>,params,function(res)&#123;</span><br><span class="line">				    	   layer.msg(res.msg);</span><br><span class="line">				    	    <span class="comment">//刷新数据 表格</span></span><br><span class="line">							tableIns.reload();</span><br><span class="line">				       &#125;)</span><br><span class="line">				     &#125;); </span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//打开分配菜单的弹出层</span></span><br><span class="line">			<span class="function">function <span class="title">openselectRoleMenu</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				<span class="keyword">var</span> menuTree;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;分配【&#x27;</span>+data.rolename+<span class="string">&#x27;】的角色&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#selectRoleMenu&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;400px&#x27;</span>,<span class="string">&#x27;500px&#x27;</span>],</span><br><span class="line">					btnAlign:<span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">					btn:[<span class="string">&#x27;&lt;div class=&quot;layui-icon layui-icon-release&quot;&gt;确认分配&lt;/div&gt;&#x27;</span>,<span class="string">&#x27;&lt;div class=&quot;layui-icon layui-icon-close&quot;&gt;取消分配&lt;/div&gt;&#x27;</span>],</span><br><span class="line">					yes:function(index, layero)&#123;</span><br><span class="line">						<span class="keyword">var</span> nodes = dtree.getCheckbarNodesParam(<span class="string">&quot;menuTree&quot;</span>);</span><br><span class="line">						<span class="keyword">var</span> roleid=data.roleid;</span><br><span class="line">						<span class="keyword">var</span> params=<span class="string">&quot;roleid=&quot;</span>+roleid;</span><br><span class="line">						</span><br><span class="line">						$.each(nodes,function(i,item)&#123;</span><br><span class="line">							params+=<span class="string">&quot;&amp;ids=&quot;</span>+item.nodeId;</span><br><span class="line">						&#125;)</span><br><span class="line">						<span class="comment">//保存角色和菜单的关系</span></span><br><span class="line">						$.post(<span class="string">&quot;$&#123;ctx&#125;/role/saveRoleMenu.action&quot;</span>,params,function(obj)&#123;</span><br><span class="line">							layer.msg(obj.msg);</span><br><span class="line">						&#125;)</span><br><span class="line">					&#125;,</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						<span class="comment">//初始化树</span></span><br><span class="line">					   menuTree = dtree.render(&#123;</span><br><span class="line">					      elem: <span class="string">&quot;#menuTree&quot;</span>,</span><br><span class="line">						  dataStyle: <span class="string">&quot;layuiStyle&quot;</span>,  <span class="comment">//使用layui风格的数据格式</span></span><br><span class="line">					      response:&#123;message:<span class="string">&quot;msg&quot;</span>,statusCode:<span class="number">0</span>&#125;,  <span class="comment">//修改response中返回数据的定义</span></span><br><span class="line">				          dataFormat: <span class="string">&quot;list&quot;</span>,  <span class="comment">//配置data的风格为list</span></span><br><span class="line">				          checkbar: <span class="keyword">true</span>,  </span><br><span class="line">			              checkbarType: <span class="string">&quot;all&quot;</span>, <span class="comment">// 默认就是all，其他的值为： no-all  p-casc   self  only\</span></span><br><span class="line">			              checkbarData: <span class="string">&quot;choose&quot;</span> ,</span><br><span class="line">				          url: <span class="string">&quot;$&#123;ctx&#125;/role/initRoleMenuTreeJson.action?roleid=&quot;</span>+data.roleid <span class="comment">// 使用url加载（可与data加载同时存在）</span></span><br><span class="line">					    &#125;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="为RoleController新增方法"><a href="#为RoleController新增方法" class="headerlink" title="为RoleController新增方法"></a>为RoleController新增方法</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 加载角色管理分配菜单的json</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> roleid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;initRoleMenuTreeJson&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> DataGridView <span class="title">initRoleMenuTreeJson</span><span class="params">(Integer roleid)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.roleService.initRoleMenuTreeJson(roleid);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 保存角色和菜单的关系</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;saveRoleMenu&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ResultObj <span class="title">saveRoleMenu</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">this</span>.roleService.saveRoleMenu(roleVo);</span><br><span class="line">		<span class="keyword">return</span> ResultObj.DISPATCH_SUCCESS;</span><br><span class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">return</span> ResultObj.DISPATCH_ERROR;</span><br><span class="line">				</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="为RoleService新增方法"><a href="#为RoleService新增方法" class="headerlink" title="为RoleService新增方法"></a>为RoleService新增方法</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 加载角色管理分配菜单的json</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleid</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataGridView <span class="title">initRoleMenuTreeJson</span><span class="params">(Integer roleid)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 保存角色和菜单的关系</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleVo</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">saveRoleMenu</span><span class="params">(RoleVo roleVo)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="在RoleServiceImpl中实现该方法"><a href="#在RoleServiceImpl中实现该方法" class="headerlink" title="在RoleServiceImpl中实现该方法"></a>在RoleServiceImpl中实现该方法</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataGridView <span class="title">initRoleMenuTreeJson</span><span class="params">(Integer roleid)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="comment">//查询所有可用的菜单</span></span><br><span class="line">		Menu menu = <span class="keyword">new</span> Menu();</span><br><span class="line">		menu.setAvailable(SysConstast.AVAILABLE_TRUE);</span><br><span class="line">		List&lt;Menu&gt; allMenu = menuMapper.queryAllMenu(menu);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//根据角色ID查询当前角色拥有的菜单</span></span><br><span class="line">		List&lt;Menu&gt; roleMenu = menuMapper.queryMenuByRoleId(SysConstast.AVAILABLE_TRUE,roleid);</span><br><span class="line">		List&lt;TreeNode&gt; data = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		<span class="keyword">for</span> (Menu m1 : allMenu) &#123;</span><br><span class="line">			String checkArr = SysConstast.CODE_ZERO+<span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">for</span> (Menu m2 : roleMenu) &#123;</span><br><span class="line">				<span class="keyword">if</span> (m1.getId() == m2.getId()) &#123;</span><br><span class="line">					checkArr = SysConstast.CODE_ONE+<span class="string">&quot;&quot;</span>;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			Integer id = m1.getId();</span><br><span class="line">			Integer pid = m1.getPid();</span><br><span class="line">			String title = m1.getTitle();</span><br><span class="line">			Boolean spread = m1.getSpread() == SysConstast.SPREAD_TRUE ? <span class="keyword">true</span> : <span class="keyword">false</span>;</span><br><span class="line">			data.add(<span class="keyword">new</span> TreeNode(id, pid, title, spread, checkArr));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> DataGridView(data);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveRoleMenu</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		Integer rid=roleVo.getRoleid();</span><br><span class="line">		Integer [] mids=roleVo.getIds();</span><br><span class="line">		<span class="comment">//根据rid删除sys_role_menu里面所有数据</span></span><br><span class="line">		<span class="keyword">this</span>.roleMapper.deleteRoleMenuByRid(rid);</span><br><span class="line">		<span class="comment">//保存角色和菜单的关系</span></span><br><span class="line">		<span class="keyword">for</span> (Integer mid : mids) &#123;</span><br><span class="line">			<span class="keyword">this</span>.roleMapper.insertRoleMenu(rid,mid);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="在TreeNode中新增属性"><a href="#在TreeNode中新增属性" class="headerlink" title="在TreeNode中新增属性"></a>在TreeNode中新增属性</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 复选树的必要属性</span></span><br><span class="line"><span class="keyword">private</span> String checkArr=<span class="string">&quot;0&quot;</span>;<span class="comment">//选中就是1</span></span><br></pre></td></tr></table></figure>

<h3 id="为MenuMapper新增方法"><a href="#为MenuMapper新增方法" class="headerlink" title="为MenuMapper新增方法"></a>为MenuMapper新增方法</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据角色ID查询菜单</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> availableTrue</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleid</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">List&lt;Menu&gt; <span class="title">queryMenuByRoleId</span><span class="params">(<span class="meta">@Param(&quot;available&quot;)</span>Integer available, <span class="meta">@Param(&quot;rid&quot;)</span>Integer rid)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="在MenuMapper-xml中实现方法"><a href="#在MenuMapper-xml中实现方法" class="headerlink" title="在MenuMapper.xml中实现方法"></a>在MenuMapper.xml中实现方法</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 根据角色ID查询菜单 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryMenuByRoleId&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">		select t1.* from</span><br><span class="line">		sys_menu t1 inner join sys_role_menu t2 on(t1.id=t2.mid) where</span><br><span class="line">		t2.rid=#&#123;rid&#125; and t1.available=#&#123;available&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="在RoleMapper中新增方法"><a href="#在RoleMapper中新增方法" class="headerlink" title="在RoleMapper中新增方法"></a>在RoleMapper中新增方法</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据用户id删除sys_role_user里面的数据</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> userid</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deleteRoleUserByUid</span><span class="params">(Integer userid)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="在RoleMapper-xml中实现方法"><a href="#在RoleMapper-xml中实现方法" class="headerlink" title="在RoleMapper.xml中实现方法"></a>在RoleMapper.xml中实现方法</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 根据用户id删除sys_role_user里面的数据  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteRoleUserByUid&quot;</span>&gt;</span></span><br><span class="line">	delete from sys_role_user where uid=#&#123;value&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="功能实现效果"><a href="#功能实现效果" class="headerlink" title="功能实现效果"></a>功能实现效果</h3><p><a href><img src="https://s1.ax1x.com/2020/10/21/BC9lhq.png" alt="BC9lhq.png"></a></p>
<h1 id="用户管理-1"><a href="#用户管理-1" class="headerlink" title="用户管理"></a>用户管理</h1><blockquote>
<p>实现功能，用户CRUD和重置密码</p>
</blockquote>
<h2 id="用户CRUD和重置密码"><a href="#用户CRUD和重置密码" class="headerlink" title="用户CRUD和重置密码"></a>用户CRUD和重置密码</h2><h3 id="在system-user目录下新建userManager-jsp"><a href="#在system-user目录下新建userManager-jsp" class="headerlink" title="在system/user目录下新建userManager.jsp"></a>在system/user目录下新建userManager.jsp</h3><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;角色管理&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;Access-Control-Allow-Origin&quot;</span> content=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/dtree.css&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/font/dtreefont.css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;childrenBody&quot;</span>&gt;</span><br><span class="line">	&lt;!-- 搜索条件开始 --&gt;</span><br><span class="line">	&lt;fieldset <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-elem-field layui-field-title&quot;</span> style=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span><br><span class="line">	  &lt;legend&gt;查询条件&lt;/legend&gt;</span><br><span class="line">	&lt;/fieldset&gt;</span><br><span class="line">	&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span> method=<span class="string">&quot;post&quot;</span> id=<span class="string">&quot;searchFrm&quot;</span>&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;角色名称:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;rolename&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;角色备注:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;roledesc&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		     &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		       		 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">					 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可用&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal  layui-icon layui-icon-search&quot; id=&quot;doSearch&quot;&gt;查询&lt;/button&gt;</span><br><span class="line">		      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm  layui-icon layui-icon-refresh&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		 &lt;/div&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 搜索条件结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 数据表格开始 --&gt;</span><br><span class="line">	&lt;table class=&quot;layui-hide&quot; id=&quot;roleTable&quot; lay-filter=&quot;roleTable&quot;&gt;&lt;/table&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;&quot;</span> id=<span class="string">&quot;roleToolBar&quot;</span>&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-sm&quot; lay-event=&quot;add&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-danger layui-btn-sm&quot; lay-event=&quot;deleteBatch&quot;&gt;批量删除&lt;/button&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div  id=<span class="string">&quot;roleBar&quot;</span> style=<span class="string">&quot;display: none;&quot;</span>&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-xs&quot; lay-event=&quot;edit&quot;&gt;编辑&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-warm layui-btn-xs&quot; lay-event=&quot;selectRoleMenu&quot;&gt;分配菜单&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-danger layui-btn-xs&quot; lay-event=&quot;del&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 数据表格结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 添加和修改的弹出层开始 --&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;padding: 20px&quot;</span> id=<span class="string">&quot;saveOrUpdateDiv&quot;</span> &gt;</span><br><span class="line">		&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span>  lay-filter=<span class="string">&quot;dataFrm&quot;</span> id=<span class="string">&quot;dataFrm&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;角色名称:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;roleid&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;rolename&quot;</span>  placeholder=<span class="string">&quot;请输入角色名称&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;角色备注:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;roledesc&quot;</span> placeholder=<span class="string">&quot;请输入角色备注&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> checked=<span class="string">&quot;checked&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可用&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span> style=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span><br><span class="line">			    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">			      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal layui-btn-sm layui-icon layui-icon-release&quot; lay-filter=&quot;doSubmit&quot; lay-submit=&quot;&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">			      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm layui-btn-sm layui-icon layui-icon-refresh&quot; &gt;重置&lt;/button&gt;</span><br><span class="line">			    &lt;/div&gt;</span><br><span class="line">		  	&lt;/div&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 添加和修改的弹出层结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 角色分配菜单的弹出层开始 --&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;&quot;</span> id=<span class="string">&quot;selectRoleMenu&quot;</span>&gt;</span><br><span class="line">		&lt;ul id=&quot;menuTree&quot; class=&quot;dtree&quot; data-id=&quot;0&quot;&gt;&lt;/ul&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 角色分配菜单的弹出层结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;script src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	    <span class="keyword">var</span> tableIns;</span><br><span class="line">	    layui.extend(&#123;</span><br><span class="line">			dtree:<span class="string">&#x27;$&#123;ctx&#125;/resources/layui_ext/dist/dtree&#x27;</span></span><br><span class="line">		&#125;).use([ <span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;form&#x27;</span>, <span class="string">&#x27;table&#x27;</span>,<span class="string">&#x27;dtree&#x27;</span>  ], function() &#123;</span><br><span class="line">			<span class="keyword">var</span> $ = layui.jquery;</span><br><span class="line">			<span class="keyword">var</span> layer = layui.layer;</span><br><span class="line">			<span class="keyword">var</span> form = layui.form;</span><br><span class="line">			<span class="keyword">var</span> table = layui.table;</span><br><span class="line">			<span class="keyword">var</span> dtree=layui.dtree;</span><br><span class="line">			<span class="comment">//渲染数据表格</span></span><br><span class="line">			 tableIns=table.render(&#123;</span><br><span class="line">				 elem: <span class="string">&#x27;#roleTable&#x27;</span>   <span class="comment">//渲染的目标对象</span></span><br><span class="line">			    ,url:<span class="string">&#x27;$&#123;ctx&#125;/role/loadAllRole.action&#x27;</span> <span class="comment">//数据接口</span></span><br><span class="line">			    ,title: <span class="string">&#x27;用户数据表&#x27;</span><span class="comment">//数据导出来的标题</span></span><br><span class="line">			    ,toolbar:<span class="string">&quot;#roleToolBar&quot;</span>   <span class="comment">//表格的工具条</span></span><br><span class="line">			    ,height:<span class="string">&#x27;full-150&#x27;</span></span><br><span class="line">			    ,cellMinWidth:<span class="number">100</span> <span class="comment">//设置列的最小默认宽度</span></span><br><span class="line">			    ,page: <span class="keyword">true</span>  <span class="comment">//是否启用分页</span></span><br><span class="line">			    ,cols: [[   <span class="comment">//列表数据</span></span><br><span class="line">			     &#123;type: <span class="string">&#x27;checkbox&#x27;</span>, fixed: <span class="string">&#x27;left&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;roleid&#x27;</span>, title:<span class="string">&#x27;ID&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;rolename&#x27;</span>, title:<span class="string">&#x27;角色名称&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;roledesc&#x27;</span>, title:<span class="string">&#x27;角色备注&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;available&#x27;</span>, title:<span class="string">&#x27;是否可用&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> d.available==<span class="string">&#x27;1&#x27;</span>?<span class="string">&#x27;&lt;font color=blue&gt;可用&lt;/font&gt;&#x27;</span>:<span class="string">&#x27;&lt;font color=red&gt;不可用&lt;/font&gt;&#x27;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;fixed: <span class="string">&#x27;right&#x27;</span>, title:<span class="string">&#x27;操作&#x27;</span>, toolbar: <span class="string">&#x27;#roleBar&#x27;</span>, width:<span class="number">220</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			    ]]</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//模糊查询</span></span><br><span class="line">			$(<span class="string">&quot;#doSearch&quot;</span>).click(function()&#123;</span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#searchFrm&quot;</span>).serialize();</span><br><span class="line">				tableIns.reload(&#123;</span><br><span class="line">					url:<span class="string">&quot;$&#123;ctx&#125;/role/loadAllRole.action?&quot;</span>+params</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//监听头部工具栏事件</span></span><br><span class="line">			table.on(<span class="string">&quot;toolbar(roleTable)&quot;</span>,function(obj)&#123;</span><br><span class="line">				 <span class="keyword">switch</span>(obj.event)&#123;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">				      openAddRole();</span><br><span class="line">				    <span class="keyword">break</span>;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;deleteBatch&#x27;</span>:</span><br><span class="line">				    	deleteBatch();</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				  &#125;;</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//监听行工具事件</span></span><br><span class="line">		   table.on(<span class="string">&#x27;tool(roleTable)&#x27;</span>, function(obj)&#123;</span><br><span class="line">			   <span class="keyword">var</span> data = obj.data; <span class="comment">//获得当前行数据</span></span><br><span class="line">			   <span class="keyword">var</span> layEvent = obj.event; <span class="comment">//获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）</span></span><br><span class="line">			  <span class="keyword">if</span>(layEvent === <span class="string">&#x27;del&#x27;</span>)&#123; <span class="comment">//删除</span></span><br><span class="line">				  layer.confirm(<span class="string">&#x27;真的删除【&#x27;</span>+data.rolename+<span class="string">&#x27;】这个角色吗&#x27;</span>, function(index)&#123;</span><br><span class="line">				       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">				       $.post(<span class="string">&quot;$&#123;ctx&#125;/role/deleteRole.action&quot;</span>,&#123;roleid:data.roleid&#125;,function(res)&#123;</span><br><span class="line">				    	   layer.msg(res.msg);</span><br><span class="line">				    	    <span class="comment">//刷新数据 表格</span></span><br><span class="line">							tableIns.reload();</span><br><span class="line">				       &#125;)</span><br><span class="line">				     &#125;); </span><br><span class="line">			   &#125; <span class="keyword">else</span> <span class="keyword">if</span>(layEvent === <span class="string">&#x27;edit&#x27;</span>)&#123; <span class="comment">//编辑</span></span><br><span class="line">			     openUpdateRole(data);</span><br><span class="line">			   &#125;<span class="keyword">else</span> <span class="keyword">if</span>(layEvent===<span class="string">&#x27;selectRoleMenu&#x27;</span>)&#123;</span><br><span class="line">				 openselectRoleMenu(data);</span><br><span class="line">			   &#125;</span><br><span class="line">			 &#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">var</span> url;</span><br><span class="line">			<span class="keyword">var</span> mainIndex;</span><br><span class="line">			<span class="comment">//打开添加页面</span></span><br><span class="line">			<span class="function">function <span class="title">openAddRole</span><span class="params">()</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;添加角色&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;300px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						<span class="comment">//清空表单数据       </span></span><br><span class="line">						$(<span class="string">&quot;#dataFrm&quot;</span>)[<span class="number">0</span>].reset();</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/role/addRole.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//打开修改页面</span></span><br><span class="line">			<span class="function">function <span class="title">openUpdateRole</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;修改用户&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;300px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						form.val(<span class="string">&quot;dataFrm&quot;</span>,data);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/role/updateRole.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//保存</span></span><br><span class="line">			form.on(<span class="string">&quot;submit(doSubmit)&quot;</span>,function(obj)&#123;</span><br><span class="line">				<span class="comment">//序列化表单数据</span></span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#dataFrm&quot;</span>).serialize();</span><br><span class="line">				$.post(url,params,function(obj)&#123;</span><br><span class="line">					layer.msg(obj.msg);</span><br><span class="line">					<span class="comment">//关闭弹出层</span></span><br><span class="line">					layer.close(mainIndex)</span><br><span class="line">					<span class="comment">//刷新数据 表格</span></span><br><span class="line">					tableIns.reload();</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//批量删除</span></span><br><span class="line">			<span class="function">function <span class="title">deleteBatch</span><span class="params">()</span></span>&#123;</span><br><span class="line">				<span class="comment">//得到选中的数据行</span></span><br><span class="line">				<span class="keyword">var</span> checkStatus = table.checkStatus(<span class="string">&#x27;roleTable&#x27;</span>);</span><br><span class="line">			    <span class="keyword">var</span> data = checkStatus.data;</span><br><span class="line">			    <span class="keyword">var</span> params=<span class="string">&quot;&quot;</span>;</span><br><span class="line">			    $.each(data,function(i,item)&#123;</span><br><span class="line">			    	<span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</span><br><span class="line">			    		params+=<span class="string">&quot;ids=&quot;</span>+item.roleid;</span><br><span class="line">			    	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			    		params+=<span class="string">&quot;&amp;ids=&quot;</span>+item.roleid;</span><br><span class="line">			    	&#125;</span><br><span class="line">			    &#125;);</span><br><span class="line">			    layer.confirm(<span class="string">&#x27;真的删除选中的这些角色吗&#x27;</span>, function(index)&#123;</span><br><span class="line">				       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">				       $.post(<span class="string">&quot;$&#123;ctx&#125;/role/deleteBatchRole.action&quot;</span>,params,function(res)&#123;</span><br><span class="line">				    	   layer.msg(res.msg);</span><br><span class="line">				    	    <span class="comment">//刷新数据 表格</span></span><br><span class="line">							tableIns.reload();</span><br><span class="line">				       &#125;)</span><br><span class="line">				     &#125;); </span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//打开分配菜单的弹出层</span></span><br><span class="line">			<span class="function">function <span class="title">openselectRoleMenu</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				<span class="keyword">var</span> menuTree;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;分配【&#x27;</span>+data.rolename+<span class="string">&#x27;】的角色&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#selectRoleMenu&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;400px&#x27;</span>,<span class="string">&#x27;500px&#x27;</span>],</span><br><span class="line">					btnAlign:<span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">					btn:[<span class="string">&#x27;&lt;div class=&quot;layui-icon layui-icon-release&quot;&gt;确认分配&lt;/div&gt;&#x27;</span>,<span class="string">&#x27;&lt;div class=&quot;layui-icon layui-icon-close&quot;&gt;取消分配&lt;/div&gt;&#x27;</span>],</span><br><span class="line">					yes:function(index, layero)&#123;</span><br><span class="line">						<span class="keyword">var</span> nodes = dtree.getCheckbarNodesParam(<span class="string">&quot;menuTree&quot;</span>);</span><br><span class="line">						<span class="keyword">var</span> roleid=data.roleid;</span><br><span class="line">						<span class="keyword">var</span> params=<span class="string">&quot;roleid=&quot;</span>+roleid;</span><br><span class="line">						</span><br><span class="line">						$.each(nodes,function(i,item)&#123;</span><br><span class="line">							params+=<span class="string">&quot;&amp;ids=&quot;</span>+item.nodeId;</span><br><span class="line">						&#125;)</span><br><span class="line">						<span class="comment">//保存角色和菜单的关系</span></span><br><span class="line">						$.post(<span class="string">&quot;$&#123;ctx&#125;/role/saveRoleMenu.action&quot;</span>,params,function(obj)&#123;</span><br><span class="line">							layer.msg(obj.msg);</span><br><span class="line">						&#125;)</span><br><span class="line">					&#125;,</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						<span class="comment">//初始化树</span></span><br><span class="line">					   menuTree = dtree.render(&#123;</span><br><span class="line">					      elem: <span class="string">&quot;#menuTree&quot;</span>,</span><br><span class="line">						  dataStyle: <span class="string">&quot;layuiStyle&quot;</span>,  <span class="comment">//使用layui风格的数据格式</span></span><br><span class="line">					      response:&#123;message:<span class="string">&quot;msg&quot;</span>,statusCode:<span class="number">0</span>&#125;,  <span class="comment">//修改response中返回数据的定义</span></span><br><span class="line">				          dataFormat: <span class="string">&quot;list&quot;</span>,  <span class="comment">//配置data的风格为list</span></span><br><span class="line">				          checkbar: <span class="keyword">true</span>,  </span><br><span class="line">			              checkbarType: <span class="string">&quot;all&quot;</span>, <span class="comment">// 默认就是all，其他的值为： no-all  p-casc   self  only\</span></span><br><span class="line">			              checkbarData: <span class="string">&quot;choose&quot;</span> ,</span><br><span class="line">				          url: <span class="string">&quot;$&#123;ctx&#125;/role/initRoleMenuTreeJson.action?roleid=&quot;</span>+data.roleid <span class="comment">// 使用url加载（可与data加载同时存在）</span></span><br><span class="line">					    &#125;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="新增路由在SysController中"><a href="#新增路由在SysController中" class="headerlink" title="新增路由在SysController中"></a>新增路由在SysController中</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 跳转用户管理页面</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;toUserManager&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toUserManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;system/user/userManager&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="在菜单中新增路由配置"><a href="#在菜单中新增路由配置" class="headerlink" title="在菜单中新增路由配置"></a>在菜单中新增路由配置</h3><p><a href="https://imgchr.com/i/BCsBnA"><img src="https://s1.ax1x.com/2020/10/21/BCsBnA.png" alt="BCsBnA.png"></a></p>
<h3 id="为UserMapper新增方法"><a href="#为UserMapper新增方法" class="headerlink" title="为UserMapper新增方法"></a>为UserMapper新增方法</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询用户</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">List&lt;User&gt; <span class="title">queryAllUser</span><span class="params">(User user)</span></span>;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>SSM项目实战</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>ssm框架</tag>
        <tag>项目实战</tag>
      </tags>
  </entry>
  <entry>
    <title>ajax复习</title>
    <url>/blog/2020/10/29/ajax%E5%A4%8D%E4%B9%A0/</url>
    <content><![CDATA[<p>AJAX是实现页面局部刷新的一种技术。</p>
<a id="more"></a>

<h1 id="AJAX和JQuery学习"><a href="#AJAX和JQuery学习" class="headerlink" title="AJAX和JQuery学习"></a>AJAX和JQuery学习</h1><h2 id="AJAX学习"><a href="#AJAX学习" class="headerlink" title="AJAX学习"></a>AJAX学习</h2><h3 id="异步请求对象"><a href="#异步请求对象" class="headerlink" title="异步请求对象"></a>异步请求对象</h3><p>在局部刷新，需要创建一个对象，代替浏览器发起请求的行为，这个对象存在内存中。<br> 代替浏览器发起请求并接收响应数据。这个对象叫做异步请求对象。 </p>
<p>全局刷新是同步行为， 局部刷新是异步行为[浏览器数据没有全部更新]  这个异步对象用于在后台与服务器交换数据。<code>XMLHttpRequest </code>就是我们说的异步对象</p>
<p><strong><code>XMLHttpRequest </code> 对象作用：</strong></p>
<ul>
<li>在不重新加载页面的情况下更新网页 </li>
<li>在页面已加载后向服务器请求数据 </li>
<li>在页面已加载后从服务器接收数据 </li>
</ul>
<p>AJAX 中的核心对象就是 XMLHttpRequest </p>
<h3 id="AJAX简介"><a href="#AJAX简介" class="headerlink" title="AJAX简介"></a>AJAX简介</h3><p><code>AJAX</code> = <code>Asynchronous JavaScript and XML</code>（异步的 <code>JavaScript </code>和 <code>XML</code>）。 </p>
<p><strong>AJAX是一种在无需重新加载整个网页的情况下，能够更新部分页面内容的新方法</strong> </p>
<p>AJAX 不是新的编程语言，而是使用现有技术混合使用的一种新方法。ajax 中使用的技术有 JavaScript, html , dom , xml ,css 等。主要是 JavaScript , XML. </p>
<p>JavaScript: 使用脚本对象 XMLHttpRequest 发送请求， 接收响应数据 XML:  发送和接收的数据格式，现在使用 json </p>
<p>AJAX 不单需要前端的技术，同时需要后端（服务器）的配合。服务器需要提供数据，数据 是 AJAX 请求的响应结果。 </p>
<h3 id="AJAX异步实现步骤"><a href="#AJAX异步实现步骤" class="headerlink" title="AJAX异步实现步骤"></a>AJAX异步实现步骤</h3><h4 id="在标签上边绑定onclick事件，doAjax"><a href="#在标签上边绑定onclick事件，doAjax" class="headerlink" title="在标签上边绑定onclick事件，doAjax"></a>在标签上边绑定onclick事件，doAjax</h4><h3 id="编写方法doAjax"><a href="#编写方法doAjax" class="headerlink" title="编写方法doAjax"></a>编写方法doAjax</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">doAjax</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    	Var proid = <span class="built_in">document</span>.getElementById(<span class="string">&quot;proid&quot;</span>).value;</span><br><span class="line">    	<span class="comment">//创建异步请求对象</span></span><br><span class="line">    	<span class="keyword">var</span> xmlHttp = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    	<span class="comment">//绑定事件</span></span><br><span class="line">    	xmlHttp.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(xmlHttp.readyState == <span class="number">4</span> $$ xmlHttp.status ==<span class="number">200</span>)&#123;</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">//初始化请求参数</span></span><br><span class="line">    xmlHttp.open(<span class="string">&quot;get&quot;</span>,<span class="string">&quot;searchProvinceJson?proid&quot;</span>+proid,<span class="literal">false</span>);<span class="comment">//true表示异步请求</span></span><br><span class="line">    <span class="comment">//发送请求</span></span><br><span class="line">    xmlHttp.send();</span><br><span class="line">	&#125;    </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="JQuery学习"><a href="#JQuery学习" class="headerlink" title="JQuery学习"></a>JQuery学习</h2><h3 id="JQuery介绍"><a href="#JQuery介绍" class="headerlink" title="JQuery介绍"></a>JQuery介绍</h3><blockquote>
<p>jQuery是一款跨主流浏览器的JavaScript库，封装了JavaScript 相关方法调用，简化<br>JavaScript对HTML DOM操作 </p>
</blockquote>
<p><a href="https://jquery.com/">官网</a></p>
<h3 id="JQuery优势"><a href="#JQuery优势" class="headerlink" title="JQuery优势"></a>JQuery优势</h3><h4 id="免费，开源且轻量级的-js-库，容量很小"><a href="#免费，开源且轻量级的-js-库，容量很小" class="headerlink" title="免费，开源且轻量级的 js 库，容量很小"></a>免费，开源且轻量级的 js 库，容量很小</h4><h4 id="兼容市面上主流浏览器，例如-IE，Firefox，Chrome"><a href="#兼容市面上主流浏览器，例如-IE，Firefox，Chrome" class="headerlink" title="兼容市面上主流浏览器，例如 IE，Firefox，Chrome"></a>兼容市面上主流浏览器，例如 IE，Firefox，Chrome</h4><h4 id="能够处理-HTML-JSP-XML、CSS、DOM、事件、实现动画效果，也能提供异步-AJAX-功能"><a href="#能够处理-HTML-JSP-XML、CSS、DOM、事件、实现动画效果，也能提供异步-AJAX-功能" class="headerlink" title="能够处理 HTML/JSP/XML、CSS、DOM、事件、实现动画效果，也能提供异步 AJAX 功能"></a>能够处理 HTML/JSP/XML、CSS、DOM、事件、实现动画效果，也能提供异步 AJAX 功能</h4><h4 id="成熟的插件可供选择，多种-js-组件，例如日历组件（点击按钮显示下来日期）"><a href="#成熟的插件可供选择，多种-js-组件，例如日历组件（点击按钮显示下来日期）" class="headerlink" title="成熟的插件可供选择，多种 js 组件，例如日历组件（点击按钮显示下来日期）"></a>成熟的插件可供选择，多种 js 组件，例如日历组件（点击按钮显示下来日期）</h4><h4 id="不用再在-html-里面通过-lt-script-gt-标签插入一大堆-js-来调用命令了"><a href="#不用再在-html-里面通过-lt-script-gt-标签插入一大堆-js-来调用命令了" class="headerlink" title="不用再在 html 里面通过&lt;script&gt;标签插入一大堆 js 来调用命令了"></a>不用再在 html 里面通过<code>&lt;script&gt;</code>标签插入一大堆 js 来调用命令了</h4><h3 id="使用-JavaScript-定位-DOM-对象常用的三种方式"><a href="#使用-JavaScript-定位-DOM-对象常用的三种方式" class="headerlink" title="使用 JavaScript 定位 DOM 对象常用的三种方式"></a>使用 JavaScript 定位 DOM 对象常用的三种方式</h3><h4 id="通过-ID-属性：document-getElementById"><a href="#通过-ID-属性：document-getElementById" class="headerlink" title="通过 ID 属性：document.getElementById()"></a>通过 ID 属性：document.getElementById()</h4><h4 id="通过-class-属性：getElementsByClassName"><a href="#通过-class-属性：getElementsByClassName" class="headerlink" title="通过 class 属性：getElementsByClassName()"></a>通过 class 属性：getElementsByClassName()</h4><h4 id="通过标签名：document-getElementsByTagName"><a href="#通过标签名：document-getElementsByTagName" class="headerlink" title="通过标签名：document.getElementsByTagName()"></a>通过标签名：document.getElementsByTagName()</h4><h4 id="简便写法：jQuery-分别使用-“-id”-“-class名”-“标签名”-封装了上面的-js-方法。"><a href="#简便写法：jQuery-分别使用-“-id”-“-class名”-“标签名”-封装了上面的-js-方法。" class="headerlink" title="简便写法：jQuery 分别使用$(“#id”) ,  $(“.class名”) ,  $(“标签名”) 封装了上面的 js 方法。"></a>简便写法：jQuery 分别使用$(“#id”) ,  $(“.class名”) ,  $(“标签名”) 封装了上面的 js 方法。</h4><h3 id="DOM-对象"><a href="#DOM-对象" class="headerlink" title="DOM 对象"></a>DOM 对象</h3><p>文档对象模型（Document Object Model，简称 DOM），是 W3C 组织推荐的处理可扩展 标志语言的标准编程接口。  </p>
<p>通过 DOM 对 HTML 页面的解析，可以将页面元素解析为元素节点、属性节点和文本节 点，这些解析出的节点对象，即 DOM 对象。DOM 对象可以使用 JavaScript 中的方法。</p>
<h3 id="JavaScript-对象和-jQuery-对象"><a href="#JavaScript-对象和-jQuery-对象" class="headerlink" title="JavaScript 对象和 jQuery 对象"></a>JavaScript 对象和 jQuery 对象</h3><p>用 JavaScript 语法创建的对象叫做 JavaScript 对象, JavaScript 对象只能调用 JavaScript 对 象的 API。 </p>
<p>用 JQuery 语法创建的对象叫做 JQuery 对象, jQuery 对象只能调用 jQuery 对象的 API。 jQuery 对象是一个数组。在数组中存放本次定位的 DOM 对象。 </p>
<p>JQuery 对象与 JavaScript 对象是可以互相转化的，一般地，由于 Jquery 用起来更加方便， 我们都是将 JavaScript 对象转化成 Jquery 对象</p>
<h3 id="获取-jQuery"><a href="#获取-jQuery" class="headerlink" title="获取 jQuery"></a>获取 jQuery</h3><p><a href="https://jquery.com/download/">官网</a></p>
<h3 id="DOM-对象和-jQuery-对象"><a href="#DOM-对象和-jQuery-对象" class="headerlink" title="DOM 对象和 jQuery 对象"></a>DOM 对象和 jQuery 对象</h3><p>DOM 对象是用 JavaScript 语法创建的对象，也看做是 js 对象。 </p>
<h4 id="DOM-对象转换-jQuery-对象"><a href="#DOM-对象转换-jQuery-对象" class="headerlink" title="DOM 对象转换 jQuery 对象"></a>DOM 对象转换 jQuery 对象</h4><p>使用<code>$(DOM 对象) </code>方式，可以 DOM 对象转换为 jQuery 对象， 转换为 jQuery 对象才可以 使用 jQuery 中的提供的方法，操作 DOM 对象。一般情况下，在命名 jQuery 对象时，为了 与 DOM 对象进行区分，习惯性的以$ 开头，这不是必须的。 </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;这是一个按钮&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;btnClick()&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">srcipt</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line">	//使用js方法获取DOM对象</span><br><span class="line">    var domBtn = document.getElementById(&quot;btn&quot;);</span><br><span class="line">    //使用JQuery函数 $() 把DOM对象转换成JQuery对象</span><br><span class="line">    var $btn = $(domBtn);</span><br><span class="line">    //调用Jquery方法val()</span><br><span class="line">    alert(&quot;2= &quot;+$btn.val());</span><br><span class="line"><span class="tag">&lt;/<span class="name">srcipt</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="jQuery对象转为DOM对象"><a href="#jQuery对象转为DOM对象" class="headerlink" title="jQuery对象转为DOM对象"></a>jQuery对象转为DOM对象</h3><p>jQuery 对象本身为数组对象，该数组中的第 0 个元素即为该 jQuery 对象对应的 DOM 对象。所以有两种方式可以获取到 DOM 对象：get(0) 方式与下标[0] </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;计算平方&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;btnClick()&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txt&quot;</span> <span class="attr">value</span>=<span class="string">&quot;输入整数&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">text</span>/<span class="attr">javascript</span>&gt;</span></span><br><span class="line"><span class="javascript">	<span class="function"><span class="keyword">function</span> <span class="title">btnClick</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//从Jquery对象数组中第0个元素为DOM对象</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">//var domObj = $(&quot;#txt&quot;).get(0);</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> domObj = $(<span class="string">&quot;#txt&quot;</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">        <span class="comment">//使用DOM对象的属性value</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> num = domObj.value;</span></span><br><span class="line">        domObj.value = num*num;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h3><blockquote>
<p>过滤器就是过滤条件，对已经定位到数组中 DOM 对象进行过滤筛选，过滤条件不能独立 出现在 jquery 函数，如果使用只能出现在选择器后方。 </p>
</blockquote>
<h4 id="基本过滤器"><a href="#基本过滤器" class="headerlink" title="基本过滤器"></a>基本过滤器</h4><h5 id="选择第一个-first-保留数组中第一个-DOM-对象"><a href="#选择第一个-first-保留数组中第一个-DOM-对象" class="headerlink" title="选择第一个 first, 保留数组中第一个 DOM 对象"></a>选择第一个 first, 保留数组中第一个 DOM 对象</h5><p>语法：$(“选择器:first”) </p>
<h5 id="选择最后个-last-保留数组中最后-DOM-对象"><a href="#选择最后个-last-保留数组中最后-DOM-对象" class="headerlink" title="选择最后个 last, 保留数组中最后 DOM 对象"></a>选择最后个 last, 保留数组中最后 DOM 对象</h5><p>语法：$(“选择器:last”) </p>
<h5 id="选择数组中指定对象"><a href="#选择数组中指定对象" class="headerlink" title="选择数组中指定对象"></a>选择数组中指定对象</h5><p>语法：$(“选择器:eq(数组索引)”) </p>
<h5 id="选择数组中小于指定索引的所有-DOM-对象"><a href="#选择数组中小于指定索引的所有-DOM-对象" class="headerlink" title="选择数组中小于指定索引的所有 DOM 对象"></a>选择数组中小于指定索引的所有 DOM 对象</h5><p>语法：$(“选择器:lt(数组索引)”) </p>
<h5 id="选择数组中大于指定索引的所有-DOM-对象"><a href="#选择数组中大于指定索引的所有-DOM-对象" class="headerlink" title="选择数组中大于指定索引的所有 DOM 对象"></a>选择数组中大于指定索引的所有 DOM 对象</h5><p>语法：$(“选择器:gt(数组索引)”) </p>
<h4 id="表单对象属性过滤器"><a href="#表单对象属性过滤器" class="headerlink" title="表单对象属性过滤器"></a>表单对象属性过滤器</h4><h5 id="选择可用的文本框"><a href="#选择可用的文本框" class="headerlink" title="选择可用的文本框"></a>选择可用的文本框</h5><p>$(“:text:enabled”) </p>
<h5 id="选择不可用的文本框"><a href="#选择不可用的文本框" class="headerlink" title="选择不可用的文本框"></a>选择不可用的文本框</h5><p>$(“:text:disabled”) </p>
<h5 id="复选框选中的元素"><a href="#复选框选中的元素" class="headerlink" title="复选框选中的元素"></a>复选框选中的元素</h5><p>$(“:checkbox:checked”) </p>
<h5 id="选择指定下拉列表的被选中元素"><a href="#选择指定下拉列表的被选中元素" class="headerlink" title="选择指定下拉列表的被选中元素"></a>选择指定下拉列表的被选中元素</h5><p>选择器&gt;option:selected </p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h4 id="val"><a href="#val" class="headerlink" title="val"></a>val</h4><p>操作数组中 DOM 对象的 value 属性. </p>
<p>$(选择器).val() ：无参数调用形式， 读取数组中第一个 DOM 对象的 value 属性值 </p>
<p>$(选择器).val(值)：有参形式调用;对数组中所有 DOM 对象的 value 属性值进行统一赋值 </p>
<h4 id="text"><a href="#text" class="headerlink" title="text"></a>text</h4><p>操作数组中所有 DOM 对象的【文字显示内容属性】 </p>
<p>$(选择器).text():无参数调用，读取数组中所有 DOM 对象的文字显示内容，将得到内容拼接 为一个字符串返回 </p>
<p>$(选择器).text(值):有参数方式，对数组中所有 DOM 对象的文字显示内容进行统一赋值 </p>
<h4 id="attr"><a href="#attr" class="headerlink" title="attr"></a>attr</h4><p>对 val, text 之外的其他属性操作 </p>
<p>$(选择器).attr(“属性名”): 获取 DOM 数组第一个对象的属性值</p>
<p> $(选择器).attr(“属性名”,“值”): 对数组中所有 DOM 对象的属性设为新值 </p>
<h4 id="hide"><a href="#hide" class="headerlink" title="hide"></a>hide</h4><p>$(选择器).hide() :将数组中所有 DOM 对象隐藏起来 </p>
<h4 id="show"><a href="#show" class="headerlink" title="show"></a>show</h4><p>$(选择器).show():将数组中所有 DOM 对象在浏览器中显示起来 </p>
<h4 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h4><p>$(选择器).remove() : 将数组中所有 DOM 对象及其子对象一并删除 </p>
<h4 id="empty"><a href="#empty" class="headerlink" title="empty"></a>empty</h4><p>$(选择器).empty()：将数组中所有 DOM 对象的子对象删除 </p>
<h4 id="append"><a href="#append" class="headerlink" title="append"></a>append</h4><p>为数组中所有 DOM 对象添加子对象 </p>
<p>$(选择器).append(“<div>我动态添加的 div</div>“) </p>
<h4 id="html"><a href="#html" class="headerlink" title="html"></a>html</h4><p>设置或返回被选元素的内容（innerHTML）。<br>$(选择器).html()：无参数调用方法，获取 DOM 数组第一个匹元素的内容。<br>$(选择器).html(值)：有参数调用，用于设置 DOM 数组中所有元素的内容。 </p>
<h4 id="each"><a href="#each" class="headerlink" title="each"></a>each</h4><p>each 是对数组，json 和 dom 数组等的遍历,对每个元素调用一次函数。</p>
<p>语法 1：$.each( 要遍历的对象, function(index,element) { 处理程序 } ) </p>
<p>语法 2：jQuery 对象.each( function( index, element ) { 处理程序 }  ) index: 数组的下标 element: 数组的对象 </p>
<h3 id="ajax"><a href="#ajax" class="headerlink" title="ajax"></a>ajax</h3><p>jQuery 提供多个与 AJAX 有关的方法。通过 jQuery AJAX 方法，您能够使用 HTTP Get 和 HTTP Post 从远程服务器上请求文本、HTML、XML 或 JSON 同时能够把接收的数据更新 到 DOM 对象。 </p>
<h4 id="ajax-1"><a href="#ajax-1" class="headerlink" title="$.ajax()"></a>$.ajax()</h4><p>$.ajax() 是 jQuery 中 AJAX 请求的核心方法，所有的其他方法都是在内部使用此方法。 </p>
<h5 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.ajax( &#123; <span class="attr">name</span>:value, <span class="attr">name</span>:value, ... &#125; ) </span><br></pre></td></tr></table></figure>

<p>说明：参数是 json 的数据，包含请求方式，数据，回调方法等</p>
<p> async ： 布尔值，表示请求是否异步处理。默认是 true </p>
<p>contentType ：发送数据到服务器时所使用的内容类型。默认是： “application/x-www-form-urlencoded”。</p>
<p> data：规定要发送到服务器的数据，可以是：string， 数组，多数是 json </p>
<p>dataType：期望从服务器响应的数据类型。jQuery 从 xml, json, text,, html 这些中测试最可能 的类型 “xml” - 一个 XML 文档 “html” - HTML 作为纯文本 “text” - 纯文本字符串 “json” - 以 JSON 运行响应，并以对象返回 </p>
<p>error(xhr,status,error)：如果请求失败要运行的函数, 其中 xhr, status, error 是自定义的形参名 success(result,status,xhr)：当请求成功时运行的函数，其中 result, status, xhr 是自定义的形参 名 type：规定请求的类型（GET 或 POST 等），默认是 GET， get，post 不用区分大小写 url：规定发送请求的 URL。 </p>
<p>以上是常用的参数。 error() , success()中的 xhr 是 XMLHttpRequest 对象</p>
<h4 id="get"><a href="#get" class="headerlink" title="$.get()"></a>$.get()</h4><p>$.get() 方法使用 HTTP GET 请求从服务器加载数据。 </p>
<h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.get(</span><br><span class="line">    url,</span><br><span class="line">    data,</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">data,status,xhr</span>),</span></span><br><span class="line"><span class="function">    <span class="title">dataType</span></span></span><br><span class="line"><span class="function">) </span></span><br></pre></td></tr></table></figure>

<p>url 必需。规定您需要请求的 URL。 </p>
<p>data 可选。规定连同请求发送到服务器的数据。 </p>
<p>function(data,status,xhr)可选。当请求成功时运行的函数。</p>
<p>data,status,xhr 是自定义形参名。 </p>
<p>参数说明： data - 包含来自请求的结果数据 </p>
<p>status - 包含请求的状态（”success”、”notmodified”、”error”、”timeout”、”parsererror”） </p>
<p>xhr - 包含 XMLHttpRequest 对象 </p>
<p>dataType 可选。规定预期的服务器响应的数据类型。默认地，jQuery 会智能判断。</p>
<p>可能的 类型： </p>
<p>“xml” - 一个 XML 文档 </p>
<p>“html” - HTML 作为纯文本 </p>
<p>“text” - 纯文本字符串</p>
<p>“json” - 以 JSON 运行响应，并以对象返回 </p>
<h4 id="post"><a href="#post" class="headerlink" title="$.post()"></a>$.post()</h4><p>$.post() 方法使用 HTTP POST 请求从服务器加载数据。 语法：$.post(URL,data,function(data,status,xhr),dataType) 参数同$get() </p>
]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>前端</tag>
        <tag>ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis学习笔记</title>
    <url>/blog/2020/11/02/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p><a href="https://www.bilibili.com/video/BV1mW411M737">视频链接</a></p>
<a id="more"></a>

<h1 id="MyBatis学习笔记"><a href="#MyBatis学习笔记" class="headerlink" title="MyBatis学习笔记"></a>MyBatis学习笔记</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h3 id="MyBatis是什么"><a href="#MyBatis是什么" class="headerlink" title="MyBatis是什么"></a>MyBatis是什么</h3><ul>
<li>MyBatis 是支持定制化 SQL、存储过程以及高级映射的优秀的<strong>持久层框架</strong>。</li>
<li>MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。</li>
<li>MyBatis 可以使用简单的XML或注解用于配置和原始映射，将接口和Java的POJO（ Plain Old Java Objects，普通的Java对象）映射成数据库中的记录</li>
</ul>
<h3 id="MyBatis历史"><a href="#MyBatis历史" class="headerlink" title="MyBatis历史"></a>MyBatis历史</h3><ul>
<li>原是Apache的一个开源项目iBatis, 2010年6月这个项目由Apache Software Foundation 迁移到了Google Code，随着开发团队转投Google Code旗下， iBatis3.x正式更名为MyBatis ，代码于2013年11月迁移到Github（下载地址见后）。</li>
<li>iBatis一词来源于“internet”和“abatis”的组合，是一个基于Java的持久层框架。 iBatis提供的持久层框架包括SQL Maps和Data Access Objects（DAO）</li>
</ul>
<h3 id="使用MyBatis的好处"><a href="#使用MyBatis的好处" class="headerlink" title="使用MyBatis的好处"></a>使用MyBatis的好处</h3><ul>
<li>JDBC<ul>
<li>SQL夹在Java代码块里，耦合度高导致硬编码内伤</li>
<li>维护不易且实际开发中SQL是有变化，频繁修改情况多见</li>
</ul>
</li>
</ul>
<p><a href="https://imgchr.com/i/BBGWVS"><img src="https://s1.ax1x.com/2020/11/02/BBGWVS.png" alt="BBGWVS.png"></a></p>
<ul>
<li>Hibernate<ul>
<li>Hibernate和JPA – 长难复杂SQL，对于Hibernate而言处理也不容易 – 内部自动生产的SQL，不容易做特殊优化。</li>
<li>基于全映射的全自动过程框架，大量字段的POJO进行部分映射时比较困难，导致数据库性能下降</li>
</ul>
</li>
</ul>
<p><a href="https://imgchr.com/i/BBJmRA"><img src="https://s1.ax1x.com/2020/11/02/BBJmRA.png" alt="BBJmRA.png"></a></p>
<ul>
<li>MyBatis是一个半自动化的持久层框架<ul>
<li>对开发人员而言，核心SQL还是需要自己优化</li>
<li>SQL和JAVA编码分开，功能边界清晰，一个专注业务，一个专注数据</li>
</ul>
</li>
</ul>
<p><a href="https://imgchr.com/i/BBJroF"><img src="https://s1.ax1x.com/2020/11/02/BBJroF.png" alt="BBJroF.png"></a></p>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><h3 id="MyBatis下载"><a href="#MyBatis下载" class="headerlink" title="MyBatis下载"></a><a href="https://github.com/mybatis/mybatis-3/releases">MyBatis下载</a></h3><h3 id="MyBatis官网"><a href="#MyBatis官网" class="headerlink" title="MyBatis官网"></a><a href="https://mybatis.org/mybatis-3/index.html">MyBatis官网</a></h3><h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><h3 id="在MySQl数据库中创建mybatis数据库，然后为其创建一张表"><a href="#在MySQl数据库中创建mybatis数据库，然后为其创建一张表" class="headerlink" title="在MySQl数据库中创建mybatis数据库，然后为其创建一张表"></a>在MySQl数据库中创建mybatis数据库，然后为其创建一张表</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> myemployees(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">11</span>) PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">	<span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">	gender <span class="built_in">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">	email <span class="built_in">VARCHAR</span>(<span class="number">255</span>)</span><br><span class="line">	</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="插入测试数据"><a href="#插入测试数据" class="headerlink" title="插入测试数据"></a>插入测试数据</h3><h3 id="创建Maven工程，添加MaBatis相关依赖"><a href="#创建Maven工程，添加MaBatis相关依赖" class="headerlink" title="创建Maven工程，添加MaBatis相关依赖"></a>创建Maven工程，添加MaBatis相关依赖</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="创建javaBean"><a href="#创建javaBean" class="headerlink" title="创建javaBean"></a>创建javaBean</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Getter;</span><br><span class="line"><span class="keyword">import</span> lombok.Setter;</span><br><span class="line"><span class="keyword">import</span> lombok.ToString;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="创建mybatis配置文件，sql映射文件"><a href="#创建mybatis配置文件，sql映射文件" class="headerlink" title="创建mybatis配置文件，sql映射文件"></a>创建mybatis配置文件，sql映射文件</h3><ul>
<li>MyBatis 的全局配置文件包含了影响 MyBatis 行为甚深的设置（ settings）和属性（ properties）信息、如数据库连接池信息等。指导着MyBatis进行工作。我们可以参照官方文件的配置示例。</li>
<li>映射文件的作用就相当于是定义Dao接口的实现类如何工作。这也是<strong>我们使用MyBatis时编写的最多的文件</strong>。</li>
</ul>
]]></content>
      <categories>
        <category>MyBatis</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>数据库框架</tag>
      </tags>
  </entry>
  <entry>
    <title>SSM环境搭建</title>
    <url>/blog/2020/11/03/SSM%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<p>ssm整合springMVC+mybatis</p>
<a id="more"></a>

<h1 id="SSM环境搭建"><a href="#SSM环境搭建" class="headerlink" title="SSM环境搭建"></a>SSM环境搭建</h1><h2 id="总体目标"><a href="#总体目标" class="headerlink" title="总体目标"></a>总体目标</h2><p><a href="https://imgchr.com/i/Byg1DP"><img src="https://s1.ax1x.com/2020/11/03/Byg1DP.png" alt="Byg1DP.png"></a></p>
<h2 id="创建工程"><a href="#创建工程" class="headerlink" title="创建工程"></a>创建工程</h2><h3 id="项目架构图"><a href="#项目架构图" class="headerlink" title="项目架构图"></a>项目架构图</h3><p><a href="https://imgchr.com/i/ByHhM8"><img src="https://s1.ax1x.com/2020/11/03/ByHhM8.png" alt="ByHhM8.png"></a></p>
<p>图中箭头表示<strong>依赖</strong>关系，其中工程分别代表：</p>
<ul>
<li>parent<strong>父工程</strong>：用于依赖管理，模块聚合，对jar包进行统一管理；</li>
<li>webui子工程：用于向管理员展示<strong>前端页面</strong>；</li>
<li>component子工程：包含<strong>后端业务逻辑</strong>，处理前端发送的请求；</li>
<li>entity子工程：包含所有的<strong>实体类</strong>；</li>
<li>util工程：包含系统中所有的<strong>通用工具类</strong>；</li>
<li>reverse工程：通过MyBatis的<strong>逆向工程</strong>快速生成与数据库表对应的相关文件。</li>
</ul>
<h3 id="工程创建计划"><a href="#工程创建计划" class="headerlink" title="工程创建计划"></a>工程创建计划</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">demo01-admin-parent</span><br><span class="line">	groupld:com.study.demo</span><br><span class="line">	artifactid:demo01-admin-parent</span><br><span class="line">	packaging:pom</span><br><span class="line">demo02-admin-webui</span><br><span class="line">	groupld:com.study.demo</span><br><span class="line">	artifactid:demo02-admin-webui</span><br><span class="line">	packaging:war</span><br><span class="line">demo03-admin-component</span><br><span class="line">	groupld:com.study.demo</span><br><span class="line">	artifactid:demo03-admin-component</span><br><span class="line">	packaging:jar</span><br><span class="line">demo04-admin-entity</span><br><span class="line">	groupld:com.study.demo</span><br><span class="line">	artifactid:demo04-admin-entity</span><br><span class="line">	packaging:jar</span><br><span class="line">demo05-common-util</span><br><span class="line">	groupld:com.study.demo</span><br><span class="line">	artifactid:demo05-common-util</span><br><span class="line">	packaging:jar</span><br><span class="line">demo06-common-reverse</span><br><span class="line">	groupld:com.study.demo</span><br><span class="line">	artifactid:demo06-common-reverse</span><br><span class="line">	packaging:jar</span><br></pre></td></tr></table></figure>

<p><strong>继承</strong>：对所有子工程得jar包进行统一得管理</p>
<p><strong>聚合</strong>：将各个模块聚合到一起，可以使用maven命令进行一键安装</p>
<p>webui：在tomcat上边跑得工程</p>
<p>component：放各个组件，service，mapper，handler，异常处理器等</p>
<p>entity：实体类</p>
<p>util：工具类，区别前后端，都可以调用util工程</p>
<p>reverse：用来使用mybatis逆向工程生成资源</p>
<p><strong>注意：</strong></p>
<p>父工程得打包方式为pom，webui打包为war其余为jar</p>
<h2 id="Maven工程和Maven模块"><a href="#Maven工程和Maven模块" class="headerlink" title="Maven工程和Maven模块"></a>Maven工程和Maven模块</h2><h3 id="创建父工程：demo01-admin-parent"><a href="#创建父工程：demo01-admin-parent" class="headerlink" title="创建父工程：demo01-admin-parent"></a>创建父工程：demo01-admin-parent</h3><p><a href="https://imgchr.com/i/ByR61J"><img src="https://s1.ax1x.com/2020/11/03/ByR61J.png" alt="ByR61J.png"></a></p>
<p><a href="https://imgchr.com/i/ByRz4S"><img src="https://s1.ax1x.com/2020/11/03/ByRz4S.png" alt="ByRz4S.png"></a></p>
<p>之后直接finish结束</p>
<h3 id="创建父工程下得三个子工程"><a href="#创建父工程下得三个子工程" class="headerlink" title="创建父工程下得三个子工程"></a>创建父工程下得三个子工程</h3><p>使用maven module方式创建</p>
<h4 id="创建demo02-admin-webui"><a href="#创建demo02-admin-webui" class="headerlink" title="创建demo02-admin-webui"></a>创建demo02-admin-webui</h4><p><a href="https://imgchr.com/i/ByWoV0"><img src="https://s1.ax1x.com/2020/11/03/ByWoV0.png" alt="ByWoV0.png"></a></p>
<p><a href="https://imgchr.com/i/ByWoV0"><img src="https://s1.ax1x.com/2020/11/03/ByWoV0.png" alt="ByWoV0.png"></a></p>
<p><a href="https://imgchr.com/i/ByWjM9"><img src="https://s1.ax1x.com/2020/11/03/ByWjM9.png" alt="ByWjM9.png"></a></p>
<p>此时创建完毕eclipse会报错，原因是因为找不到web.xml文件，可以使用eclipse自动生成</p>
<p><a href="https://imgchr.com/i/ByfMi8"><img src="https://s1.ax1x.com/2020/11/03/ByfMi8.png" alt="ByfMi8.png"></a></p>
<h4 id="创建demo03-admin-component"><a href="#创建demo03-admin-component" class="headerlink" title="创建demo03-admin-component"></a>创建demo03-admin-component</h4><p><a href="https://imgchr.com/i/ByfNd0"><img src="https://s1.ax1x.com/2020/11/03/ByfNd0.md.png" alt="ByfNd0.md.png"></a></p>
<h4 id="创建demo04-admin-entity"><a href="#创建demo04-admin-entity" class="headerlink" title="创建demo04-admin-entity"></a>创建demo04-admin-entity</h4><p><a href="https://imgchr.com/i/Byf0WF"><img src="https://s1.ax1x.com/2020/11/03/Byf0WF.png" alt="Byf0WF.png"></a></p>
<h3 id="创建demo05-common-util新的project"><a href="#创建demo05-common-util新的project" class="headerlink" title="创建demo05-common-util新的project"></a>创建demo05-common-util新的project</h3><p><a href="https://imgchr.com/i/Byf5Se"><img src="https://s1.ax1x.com/2020/11/03/Byf5Se.png" alt="Byf5Se.png"></a></p>
<h3 id="创建demo06-common-reverse"><a href="#创建demo06-common-reverse" class="headerlink" title="创建demo06-common-reverse"></a>创建demo06-common-reverse</h3><p><a href="https://imgchr.com/i/ByfHeI"><img src="https://s1.ax1x.com/2020/11/03/ByfHeI.png" alt="ByfHeI.png"></a></p>
<p>此时查看父工程和相关三个moudle得pom文件，可以看的所有继承关系已经继承好</p>
<h2 id="建立工程之间的依赖关系"><a href="#建立工程之间的依赖关系" class="headerlink" title="建立工程之间的依赖关系"></a>建立工程之间的依赖关系</h2><h3 id="webui依赖component"><a href="#webui依赖component" class="headerlink" title="webui依赖component"></a>webui依赖component</h3><p><a href="https://imgchr.com/i/Byhw7t"><img src="https://s1.ax1x.com/2020/11/03/Byhw7t.png" alt="Byhw7t.png"></a></p>
<p>也可以直接修改pom文件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo03-admin-component<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="component依赖entity"><a href="#component依赖entity" class="headerlink" title="component依赖entity"></a>component依赖entity</h3><p><a href="https://imgchr.com/i/Byhf7q"><img src="https://s1.ax1x.com/2020/11/03/Byhf7q.png" alt="Byhf7q.png"></a></p>
<p>也可以直接修改pom文件</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">  	&lt;dependency&gt;</span><br><span class="line">  		&lt;groupId&gt;com.study&lt;/groupId&gt;</span><br><span class="line">  		&lt;artifactId&gt;demo04-admin-entity&lt;/artifactId&gt;</span><br><span class="line">  		&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line">  	&lt;/dependency&gt;</span><br><span class="line">  &lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>

<h3 id="component依赖util"><a href="#component依赖util" class="headerlink" title="component依赖util"></a>component依赖util</h3><p><a href="https://imgchr.com/i/ByhXH1"><img src="https://s1.ax1x.com/2020/11/03/ByhXH1.png" alt="ByhXH1.png"></a></p>
<p>也可以直接修改pom文件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo05-common-util<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="添加相关依赖"><a href="#添加相关依赖" class="headerlink" title="添加相关依赖"></a>添加相关依赖</h2><h3 id="admin-parent父工程依赖"><a href="#admin-parent父工程依赖" class="headerlink" title="admin-parent父工程依赖"></a>admin-parent父工程依赖</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.study.crowfunding<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>crowdfunding-admin-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">module</span>&gt;</span>crowdfunding-admin-webui<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">module</span>&gt;</span>atcrowdfunding03-admin-component<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">module</span>&gt;</span>crowdfunding-admin-component<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">module</span>&gt;</span>crowdfunding-admin-entity<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">module</span>&gt;</span>crowdfunding-common-util<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 声明属性，对Spring的版本进行统一管理 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">study.spring.version</span>&gt;</span>4.3.20.RELEASE<span class="tag">&lt;/<span class="name">study.spring.version</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">		<span class="comment">&lt;!-- 对SpringSecuity的版本进行统一管理 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">study.spring.version</span>&gt;</span>4.3.20.RELEASE<span class="tag">&lt;/<span class="name">study.spring.version</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">	<span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- Spring依赖 --&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-orm --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-orm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;study.spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;study.spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;study.spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- https://mvnrepository.com/artifact/cglib/cglib --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- 数据库依赖 --&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- MySQL驱动 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- 数据源 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- MyBatis --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- MyBatis与Spring整合 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- MyBatis分页插件 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- 日志 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- 其他日志框架的中间转换包 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jcl-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jul-to-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- Spring进行JSON数据转换依赖 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- JSTL标签库 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- junit测试 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- 引入Servlet容器中相关依赖 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- JSP页面使用的依赖 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.3-b06<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="SSM整合"><a href="#SSM整合" class="headerlink" title="SSM整合"></a>SSM整合</h2><h3 id="spring-mybatis整合"><a href="#spring-mybatis整合" class="headerlink" title="spring+mybatis整合"></a>spring+mybatis整合</h3><h4 id="创建数据库和表"><a href="#创建数据库和表" class="headerlink" title="创建数据库和表"></a>创建数据库和表</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="string">`project_crowd`</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8;</span><br></pre></td></tr></table></figure>



<h4 id="使用mybatis逆向工程"><a href="#使用mybatis逆向工程" class="headerlink" title="使用mybatis逆向工程"></a>使用mybatis逆向工程</h4><h5 id="引入相关依赖包"><a href="#引入相关依赖包" class="headerlink" title="引入相关依赖包"></a>引入相关依赖包</h5><p>在reverse工程下引入</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.study.crowdfunding<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>crowdfunding-common-reverse<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 依赖MyBatis核心包 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 控制Maven在构建过程中的相关配置 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- 构建过程中用到的插件 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.genrator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-genrator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">				<span class="comment">&lt;!-- 插件的依赖 --&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">					<span class="comment">&lt;!-- 逆向工程的核心依赖 --&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.genrator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-genrator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">					<span class="comment">&lt;!-- 数据库连接池 --&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">					<span class="comment">&lt;!-- MySQl驱动 --&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">				<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="在resver工程的resource下新建generatorConfig-xml"><a href="#在resver工程的resource下新建generatorConfig-xml" class="headerlink" title="在resver工程的resource下新建generatorConfig.xml"></a>在resver工程的resource下新建generatorConfig.xml</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">generatorConfiguration</span></span></span><br><span class="line"><span class="meta">			  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">			  <span class="meta-string">&quot;http://mybatis.org/dtd/mycdbatis-generator-config_1_0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- mybatis-generator:generate --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;studyTables&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 是否去除自动生成的注释 true:是;false:否 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressAllComments&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!--数据库连接的信息：驱动类、连接地址、用户名、密码 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">jdbcConnection</span> </span></span><br><span class="line"><span class="tag">			<span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/project_crowd?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true&quot;</span> </span></span><br><span class="line"><span class="tag">			<span class="attr">userId</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">password</span>=<span class="string">&quot;123456&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- 默认false，把JDBC DECIMAL 和 NUMERIC 类型解析为 Integer，为 true时把JDBC DECIMAL </span></span><br><span class="line"><span class="comment">			和 NUMERIC 类型解析为java.math.BigDecimal --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;forceBigDecimals&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- targetProject:生成Entity类的路径 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\java&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">targetPackage</span>=<span class="string">&quot;com.study.crowd.entity&quot;</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 从数据库返回的值被清理前后的空格 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- targetProject:XxxMapper.xml映射文件生成的路径 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\java&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">targetPackage</span>=<span class="string">&quot;com.study.crowd.mapper&quot;</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- targetPackage：Mapper接口生成的位置 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\java&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">targetPackage</span>=<span class="string">&quot;com.study.crowd.mapper&quot;</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- 数据库表名字和我们的entity类对应的映射指定 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;t_admin&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Admin&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="使用maven命令mybatis-generator-generate生成文件"><a href="#使用maven命令mybatis-generator-generate生成文件" class="headerlink" title="使用maven命令mybatis-generator:generate生成文件"></a>使用maven命令mybatis-generator:generate生成文件</h5><p><a href="https://imgchr.com/i/ByXKnf"><img src="https://s1.ax1x.com/2020/11/03/ByXKnf.png" alt="ByXKnf.png"></a></p>
<p>其中adminExample实体类是关于mybatis的qbc查询</p>
<h5 id="将生成的实体类归位"><a href="#将生成的实体类归位" class="headerlink" title="将生成的实体类归位"></a>将生成的实体类归位</h5><p><a href="https://imgchr.com/i/Byj0Mt"><img src="https://s1.ax1x.com/2020/11/03/Byj0Mt.png" alt="Byj0Mt.png"></a></p>
<p>然后在component模块pom文件中加入mybaits核心</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Spring整合MyBatis"><a href="#Spring整合MyBatis" class="headerlink" title="Spring整合MyBatis"></a>Spring整合MyBatis</h4><h5 id="操作清单"><a href="#操作清单" class="headerlink" title="操作清单"></a>操作清单</h5><ul>
<li>在子工程中加入搭建环境所需要的具体依赖 </li>
<li>准备 jdbc.properties </li>
<li>创建 Spring 配置文件专门配置 Spring 和 MyBatis 整合相关</li>
<li>在 Spring 的配置文件中加载 jdbc.properties 属性文件 </li>
<li>配置数据源 </li>
<li>测试从数据源中获取数据库连接 </li>
<li>配置 SqlSessionFactoryBean <ul>
<li>装配数据源 </li>
<li>指定 XxxMapper.xml 配置文件的位置 </li>
<li>指定 MyBatis 全局配置文件的位置（可选） </li>
</ul>
</li>
<li>配置 MapperScannerConfigurer </li>
<li>测试是否可以装配 XxxMapper 接口并通过这个接口操作数据库</li>
</ul>
<h5 id="具体操作"><a href="#具体操作" class="headerlink" title="具体操作"></a>具体操作</h5><h3 id="spring-springmvc整合"><a href="#spring-springmvc整合" class="headerlink" title="spring+springmvc整合"></a>spring+springmvc整合</h3>]]></content>
      <categories>
        <category>SSM环境搭建</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>ssm框架</tag>
      </tags>
  </entry>
  <entry>
    <title>算法学习</title>
    <url>/blog/2020/11/12/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84+%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<p>算法和数据结构</p>
<a id="more"></a>

<h1 id="算法和数据结构学习"><a href="#算法和数据结构学习" class="headerlink" title="算法和数据结构学习"></a>算法和数据结构学习</h1><h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><h3 id="线性结构"><a href="#线性结构" class="headerlink" title="线性结构"></a>线性结构</h3><ol>
<li><p>线性结构作为最常用的数据结构，其特点是数据元素之间存在一对一的线性关系 </p>
</li>
<li><p>线性结构有两种不同的存储结构，即顺序存储结构(数组)和链式存储结构(链表)。顺序存储的线性表称为顺序<br>表，顺序表中的存储元素是连续的 </p>
</li>
<li><p>链式存储的线性表称为链表，链表中的存储元素不一定是连续的，元素节点中存放数据元素以及相邻元素的地址信息 </p>
</li>
<li><p>线性结构常见的有：<strong>数组</strong>、<strong>队列</strong>、<strong>链表</strong>和<strong>栈</strong></p>
</li>
</ol>
<h3 id="非线性结构"><a href="#非线性结构" class="headerlink" title="非线性结构"></a>非线性结构</h3><p>非线性结构包括：二维数组，多维数组，广义表，<strong>树结构</strong>，<strong>图结构</strong></p>
<h2 id="稀疏数组和队列"><a href="#稀疏数组和队列" class="headerlink" title="稀疏数组和队列"></a>稀疏数组和队列</h2><h3 id="稀疏数组"><a href="#稀疏数组" class="headerlink" title="稀疏数组"></a>稀疏数组</h3><p><a href="https://imgchr.com/i/BxjcLD"><img src="https://s3.ax1x.com/2020/11/12/BxjcLD.png" alt="BxjcLD.png"></a></p>
<ul>
<li>分析问题</li>
</ul>
<p>因为该二维数组的很多值是默认值 0, 因此记录了<strong>很多没有意义的数据</strong>.-&gt;<strong>稀疏数组</strong>。 </p>
<h4 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h4><p>当一个数组中大部分元素为０，或者为同一个值的数组时，可以使用稀疏数组来保存该数组。</p>
<p>稀疏数组的处理方法是: </p>
<ol>
<li><p>记录数组一共有几行几列，有多少个不同的值 </p>
</li>
<li><p>把具有不同值的元素的行列及值记录在一个小规模的数组中，从而缩小程序的规模</p>
</li>
</ol>
<ul>
<li>稀疏数组举例说明</li>
</ul>
<p><a href="https://imgchr.com/i/BxvkTJ"><img src="https://s3.ax1x.com/2020/11/12/BxvkTJ.png" alt="BxvkTJ.png"></a></p>
<ul>
<li>应用实例 </li>
</ul>
<ol>
<li><p>使用稀疏数组，来保留类似前面的二维数组(棋盘、地图等等) </p>
</li>
<li><p>把稀疏数组存盘，并且可以从新恢复原来的二维数组数 </p>
</li>
<li><p>整体思路分析</p>
</li>
</ol>
<p><a href="https://imgchr.com/i/Bxxd81"><img src="https://s3.ax1x.com/2020/11/12/Bxxd81.png" alt="Bxxd81.png"></a></p>
<h4 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.Desktop;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Nov 12, 2020 3:51:40 PM</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpareArray</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="keyword">int</span>[][] chessArray = createArray();</span><br><span class="line">		<span class="keyword">int</span> sum = initSum(chessArray);</span><br><span class="line">		<span class="keyword">int</span>[][] spareArray = createSpareArray(sum, chessArray);</span><br><span class="line">		System.out.println(<span class="string">&quot;--------------棋盘&quot;</span>);</span><br><span class="line">		printArray(chessArray);</span><br><span class="line">		System.out.println(<span class="string">&quot;--------------稀疏数组&quot;</span>);</span><br><span class="line">		printArray(spareArray);</span><br><span class="line">		System.out.println(<span class="string">&quot;--------------将稀疏数组写入磁盘...&quot;</span>);</span><br><span class="line">		writerData(spareArray);</span><br><span class="line">		System.out.println(<span class="string">&quot;--------------读取磁盘中的数据...&quot;</span>);</span><br><span class="line">		<span class="keyword">int</span>[][] resultSpareArray = readData();</span><br><span class="line">		System.out.println(<span class="string">&quot;--------------文件中读出的稀疏数组...&quot;</span>);</span><br><span class="line">		printArray(resultSpareArray);</span><br><span class="line">		System.out.println(<span class="string">&quot;--------------稀疏矩阵转换为原始棋盘...&quot;</span>);</span><br><span class="line">		<span class="keyword">int</span>[][] result = initArray(resultSpareArray);</span><br><span class="line">		printArray(result);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 稀疏矩阵转换为原始矩阵</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> resultSpareArray</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[][] initArray(<span class="keyword">int</span>[][] resultSpareArray) &#123;</span><br><span class="line">		<span class="keyword">int</span>[][] result = <span class="keyword">new</span> <span class="keyword">int</span>[resultSpareArray[<span class="number">0</span>][<span class="number">0</span>]][resultSpareArray[<span class="number">0</span>][<span class="number">1</span>]];</span><br><span class="line">		<span class="keyword">int</span> sum2 = resultSpareArray[<span class="number">0</span>][<span class="number">2</span>];<span class="comment">// 原始棋盘中的数字个数</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= sum2; i++) &#123;</span><br><span class="line">			result[resultSpareArray[i][<span class="number">0</span>]][resultSpareArray[i][<span class="number">1</span>]] = resultSpareArray[i][<span class="number">2</span>];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 读取磁盘中的数据</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[][] readData() <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">&quot;E:&quot;</span> + File.separator + <span class="string">&quot;study&quot;</span> + File.separator + <span class="string">&quot;map.data&quot;</span>);</span><br><span class="line">		FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">		InputStreamReader reader = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">int</span>[][] resultSpareArray = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;打开文件中...&quot;</span>);</span><br><span class="line">			<span class="comment">// 打开本地磁盘中的文件</span></span><br><span class="line">			Desktop.getDesktop().open(file);</span><br><span class="line">			fis = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">			reader = <span class="keyword">new</span> InputStreamReader(fis, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">			StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">			<span class="keyword">while</span> (reader.ready()) &#123;</span><br><span class="line">				sb.append((<span class="keyword">char</span>) reader.read());</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(<span class="string">&quot;文件中的内容...&quot;</span>);</span><br><span class="line">			System.out.println(sb);</span><br><span class="line">			String str = sb.toString();</span><br><span class="line">			String[] strReg = str.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">			<span class="comment">// 11 11 2 1 2 1 2 3 2</span></span><br><span class="line">			resultSpareArray = <span class="keyword">new</span> <span class="keyword">int</span>[strReg.length / <span class="number">3</span>][<span class="number">3</span>];</span><br><span class="line">			<span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">for</span> (String str2 : strReg) &#123;</span><br><span class="line">				resultSpareArray[(index - (index % <span class="number">3</span>)) / <span class="number">3</span>][index % <span class="number">3</span>] = Integer.parseInt(str2);</span><br><span class="line">				index++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (reader != <span class="keyword">null</span>)</span><br><span class="line">				reader.close();</span><br><span class="line">			<span class="keyword">if</span> (fis != <span class="keyword">null</span>)</span><br><span class="line">				fis.close();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> resultSpareArray;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 将稀疏数组写入磁盘</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> spareArray</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">writerData</span><span class="params">(<span class="keyword">int</span>[][] spareArray)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">&quot;E:&quot;</span> + File.separator + <span class="string">&quot;study&quot;</span> + File.separator + <span class="string">&quot;map.data&quot;</span>);</span><br><span class="line">		FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">		OutputStreamWriter write = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			fos = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">			write = <span class="keyword">new</span> OutputStreamWriter(fos, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; spareArray.length; i++) &#123;</span><br><span class="line">				write.append(spareArray[i][<span class="number">0</span>] + <span class="string">&quot;,&quot;</span> + spareArray[i][<span class="number">1</span>] + <span class="string">&quot;,&quot;</span> + spareArray[i][<span class="number">2</span>] + <span class="string">&quot;,&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"></span><br><span class="line">			System.out.println(<span class="string">&quot;写入文件成功！&quot;</span>);</span><br><span class="line">			<span class="keyword">if</span> (write != <span class="keyword">null</span>) &#123;</span><br><span class="line">				write.close();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (fos != <span class="keyword">null</span>) &#123;</span><br><span class="line">				fos.close();</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 打印二维数组</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> chessArray</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printArray</span><span class="params">(<span class="keyword">int</span>[][] Array)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span>[] arr : Array) &#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> a : arr) &#123;</span><br><span class="line">				System.out.print(a + <span class="string">&quot; &quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 初始化稀疏数组</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> sum</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> chessArray棋盘</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[][] createSpareArray(<span class="keyword">int</span> sum, <span class="keyword">int</span>[][] chessArray) &#123;</span><br><span class="line">		<span class="keyword">int</span>[][] spareArray = <span class="keyword">new</span> <span class="keyword">int</span>[sum + <span class="number">1</span>][<span class="number">3</span>];</span><br><span class="line">		<span class="keyword">int</span> row = chessArray.length; <span class="comment">// 稀疏数组的row</span></span><br><span class="line">		<span class="keyword">int</span> col = chessArray[<span class="number">0</span>].length; <span class="comment">// 稀疏数组的col</span></span><br><span class="line">		spareArray[<span class="number">0</span>][<span class="number">0</span>] = row;</span><br><span class="line">		spareArray[<span class="number">0</span>][<span class="number">1</span>] = col;</span><br><span class="line">		spareArray[<span class="number">0</span>][<span class="number">2</span>] = sum;</span><br><span class="line">		<span class="keyword">int</span> k = <span class="number">1</span>;<span class="comment">// 记录稀疏数组的行数</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; j++) &#123;</span><br><span class="line">				<span class="keyword">if</span> (sum &lt; k) &#123;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> (chessArray[i][j] != <span class="number">0</span>) &#123;</span><br><span class="line">					spareArray[k][<span class="number">0</span>] = i;</span><br><span class="line">					spareArray[k][<span class="number">1</span>] = j;</span><br><span class="line">					spareArray[k][<span class="number">2</span>] = chessArray[i][j];</span><br><span class="line">					k++;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> spareArray;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 遍历棋盘</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> chessArray 棋盘</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> 棋盘中共有多少个数</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">initSum</span><span class="params">(<span class="keyword">int</span>[][] chessArray)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span>[] arr : chessArray) &#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> a : arr) &#123;</span><br><span class="line">				<span class="keyword">if</span> (a != <span class="number">0</span>)</span><br><span class="line">					sum++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> sum;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 创建棋盘</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> 返回的棋盘的二维数组</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[][] createArray() &#123;</span><br><span class="line">		<span class="keyword">int</span>[][] chessArray = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">11</span>][<span class="number">11</span>];</span><br><span class="line">		chessArray[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">		chessArray[<span class="number">2</span>][<span class="number">3</span>] = <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">return</span> chessArray;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h3><h4 id="队列介绍"><a href="#队列介绍" class="headerlink" title="队列介绍"></a>队列介绍</h4><ol>
<li><p>队列是一个有序列表，可以用<strong>数组</strong>或是<strong>链表</strong>来实现。 </p>
</li>
<li><p>遵循先入先出的原则。即：<strong>先存入队列的数据，要先取出。后存入的要后取出</strong> </p>
</li>
<li><p>示意图：(使用数组模拟队列示意图)</p>
</li>
</ol>
<p><a href="https://imgchr.com/i/D98C1H"><img src="https://s3.ax1x.com/2020/11/13/D98C1H.png" alt="D98C1H.png"></a></p>
<h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><ul>
<li>front变量的指向队列的第一个元素，初始值为0；</li>
<li>rear变量指向队列的最后一个元素的后一个位置，因此每个队列都需要空出一个位置用来做约定</li>
<li>当队满的时候:(rear + 1) %maxSize == front;</li>
<li>当队空的时候，rear == front;</li>
<li>判断队中的元素个数:(rear + maxSize - front) % maxSize;</li>
</ul>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Nov 13, 2020 9:19:13 PM</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CircleArrayQueue</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">		System.out.print(<span class="string">&quot;输入队列的长度：&quot;</span>);</span><br><span class="line">		<span class="keyword">int</span> maxSize = input.nextInt();</span><br><span class="line"></span><br><span class="line">		CircleArray circleArray = <span class="keyword">new</span> CircleArray(maxSize + <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">		<span class="keyword">int</span> tem;</span><br><span class="line">		<span class="keyword">while</span> (flag) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;输入要操作的编号：&quot;</span>);</span><br><span class="line">			System.out.println(<span class="string">&quot;1、打印队列&quot;</span>);</span><br><span class="line">			System.out.println(<span class="string">&quot;2、数据添加&quot;</span>);</span><br><span class="line">			System.out.println(<span class="string">&quot;3、数据删除&quot;</span>);</span><br><span class="line">			System.out.println(<span class="string">&quot;4、查看第一个数字&quot;</span>);</span><br><span class="line">			System.out.println(<span class="string">&quot;5、退出程序&quot;</span>);</span><br><span class="line">			tem = input.nextInt();</span><br><span class="line">			<span class="keyword">switch</span> (tem) &#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">				circleArray.printQueue();</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">				System.out.println(<span class="string">&quot;输入要添加的数字&quot;</span>);</span><br><span class="line">				<span class="keyword">int</span> n = input.nextInt();</span><br><span class="line">				circleArray.addQueue(n);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">				circleArray.putQueue();</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">				<span class="keyword">int</span> peek = circleArray.peek();</span><br><span class="line">				System.out.println(peek);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">				flag = <span class="keyword">false</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">&quot;程序退出成功&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CircleArray</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> maxSize; <span class="comment">// 表示数组的最大容量</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> front; <span class="comment">// 变量的含义做一个调整，初始值0，指向当前队列</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> rear; <span class="comment">// 指向队列最后一个元素的下一个</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span>[] arr;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">CircleArray</span><span class="params">(<span class="keyword">int</span> maxSize)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.maxSize = maxSize;</span><br><span class="line">		arr = <span class="keyword">new</span> <span class="keyword">int</span>[maxSize];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 判断队列是否为空</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> front == rear;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 判断是否满</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFull</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (rear + <span class="number">1</span>) % maxSize == front;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 添加数据到队列</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addQueue</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 判断队列是否为满</span></span><br><span class="line">		<span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;队列满，不能加入数据~&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 直接加入数据</span></span><br><span class="line">		arr[rear] = n;</span><br><span class="line">		<span class="comment">// rear数据后移</span></span><br><span class="line">		rear = (rear + <span class="number">1</span>) % maxSize;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 出队列</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">putQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 判断队列是否为空</span></span><br><span class="line">		<span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;队列空&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">int</span> value = arr[front];</span><br><span class="line">		front = (front + <span class="number">1</span>) % maxSize;</span><br><span class="line">		<span class="keyword">return</span> value;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 输出所有队列中数据</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 判断是否为空</span></span><br><span class="line">		<span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;队列空&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = front; i &lt; front + size(); i++) &#123;</span><br><span class="line">			System.out.printf(<span class="string">&quot;arr[%d] = %d\n&quot;</span>, i % maxSize, arr[i % maxSize]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 队列中 的有效数据</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (rear + maxSize - front) % maxSize;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 查看队列第一个元素</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;队列空&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> arr[front];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h3>]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>数据结构</tag>
      </tags>
  </entry>
  <entry>
    <title>SOA设计理念</title>
    <url>/blog/2020/11/24/SOA%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5/</url>
    <content><![CDATA[<p>SOA是Service Oriented Architecture的简称，中文译为“面向服务的体系架构”。与传统技术相比，SOA从业务着眼，基于标准化的技术手段，以“服务”为基本元素来构建或整合适合于各行业应用需求的信息系统，提高信息系统的开发效率、充分整合和复用IT资源、并使信息系统能灵活快速的响应业务变化需求。</p>
<a id="more"></a>

<h1 id="SOA设计理念"><a href="#SOA设计理念" class="headerlink" title="SOA设计理念"></a>SOA设计理念</h1><p>SOA是Service Oriented Architecture的简称，中文译为“面向服务的体系架构”。与传统技术相比，SOA从业务着眼，基于标准化的技术手段，以“服务”为基本元素来构建或整合适合于各行业应用需求的信息系统，提高信息系统的开发效率、充分整合和复用IT资源、并使信息系统能灵活快速的响应业务变化需求。</p>
<p>从技术的角度来看，SOA对软件开发的影响是深远的一方面SOA在继承传统的面向对象和组件化（构件化）编程思想的同时，更加强调了软件作为商业资产的可复用、可集成能力，其中软件（组件）的开放性和标准化是SOA的基石，它消除了软件（组件）之间交流和衔接的障碍，是软件实现“积木式”灵活装配的基础，同时，SOA强调了服务的治理，其实是为软件（组件）制定了一个价值衡量标准（或服务分割标准），用以界定软件（组件）的服务价值，这是软件（组件）可复用、按需组装的价值基础；</p>
<p>另一方面，SOA强调了支撑“积木式”编程的统一基础设施环境，包括设计时的服务组装、运行时的服务调度（比如：工作流引擎）、统一的服务通信总线（ESB），这些基础设施提供了随需应变的服务组装能力和可伸缩、低耦合、可靠高效、分布式的服务运行环境，这是对组件化（构件化）编程模式的最新发展和完善。SOA是第一个真正完整、系统的阐述和实现组件化（构件化）编程思想的软件架构，是当前软件系统架构的集大成者。</p>
]]></content>
      <categories>
        <category>工作日志</category>
      </categories>
      <tags>
        <tag>工作日志</tag>
        <tag>随笔</tag>
      </tags>
  </entry>
  <entry>
    <title>lombok学习笔记</title>
    <url>/blog/2020/11/25/lombok%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>Lombok是一个可以通过简单的注解形式来帮助我们简化消除一些必须有但显得很臃肿的Java代码的工具，通过使用对应的注解，可以在编译源码的时候生成对应的方法。</p>
<a id="more"></a>

<h1 id="Lombok学习"><a href="#Lombok学习" class="headerlink" title="Lombok学习"></a>Lombok学习</h1><h2 id="注解介绍"><a href="#注解介绍" class="headerlink" title="注解介绍"></a>注解介绍</h2><p><a href="https://projectlombok.org/features/all">官网</a></p>
<h2 id="注解使用"><a href="#注解使用" class="headerlink" title="注解使用"></a>注解使用</h2><h3 id="val（值）"><a href="#val（值）" class="headerlink" title="val（值）"></a>val（值）</h3><blockquote>
<p>类似于js中的val属性，<strong>val</strong> 是某种类型，从初始化程序程序表达式中推断类型；此功能仅适用于局部变量和foreach循环，不适用于字段。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.val;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ：zhangshuai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> ：Created in 2020/11/25 15:26</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ValExample ex = <span class="keyword">new</span> ValExample();</span><br><span class="line">        System.out.println(<span class="string">&quot;测试list集合：&quot;</span>+ex.example());</span><br><span class="line">        System.out.println(<span class="string">&quot;测试map集合：&quot;</span>);</span><br><span class="line">        ex.example2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ValExample</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">example</span><span class="params">()</span></span>&#123;</span><br><span class="line">        val temp = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        temp.add(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        val foo  =temp.toString().toLowerCase();</span><br><span class="line">        <span class="keyword">return</span> foo;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">example2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        val map = <span class="keyword">new</span> HashMap&lt;Integer, String&gt;();</span><br><span class="line">        map.put(<span class="number">1</span>,<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        map.put(<span class="number">2</span>,<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">        <span class="comment">// 遍历一</span></span><br><span class="line">        <span class="keyword">for</span> (val entry :map.entrySet()) &#123;</span><br><span class="line">            System.out.println(entry.getKey()+<span class="string">&quot;=&quot;</span>+entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;遍历二-------&quot;</span>);</span><br><span class="line">        <span class="comment">// 遍历二</span></span><br><span class="line">        map.forEach((k,v) -&gt;&#123;</span><br><span class="line">            System.out.println(k+<span class="string">&quot;=&quot;</span>+v);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="NonNull注解"><a href="#NonNull注解" class="headerlink" title="@NonNull注解"></a>@NonNull注解</h3><blockquote>
<p>可以在方法或者构造函数的参数上使用，进行非空判断。如果为null，抛出空指针异常。对于构造函数，将在任何显式<code>this()</code>或<code>super()</code>调用之后立即插入空检查。</p>
</blockquote>
<p><code>lombok.nonNull.exceptionType</code>= [ <code>NullPointerException</code>| <code>IllegalArgumentException</code>| <code>JDK</code>| <code>Guava</code>| <code>Assertion</code>]（默认值：）<code>NullPointerException</code>。</p>
<p>当lombok生成空检查<code>if</code>语句时，默认情况下，<code>java.lang.NullPointerException</code>将抛出带有“<em>字段名称</em>标记为非空但为空”的a作为异常消息。但是，您可以<code>IllegalArgumentException</code>在此配置密钥中使用lombok与此消息一起引发该异常。通过使用<code>Assertion</code>，<code>assert</code>将生成带有相同消息的语句。键<code>JDK</code>或<code>Guava</code>导致分别调用这两个框架的标准nullcheck方法：<code>java.util.Objects.requireNonNull([field name here], &quot;[field name here] is marked non-null but is null&quot;);</code>或<code>com.google.common.base.Preconditions.checkNotNull([field name here], &quot;[field name here] is marked non-null but is null&quot;);</code>。</p>
<p><code>lombok.nonNull.flagUsage</code>= [ <code>warning</code>| <code>error</code>]（默认值：未设置）</p>
<p><code>@NonNull</code>如果已配置， Lombok会将使用标记为警告或错误。</p>
<h3 id="clean注解"><a href="#clean注解" class="headerlink" title="@clean注解"></a>@clean注解</h3><blockquote>
<p>类似于finally块中的关闭资源操作</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CleanUpExample</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">example</span><span class="params">(String[] files)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="meta">@Cleanup</span> InputStream in = <span class="keyword">new</span> FileInputStream(files[<span class="number">0</span>]);</span><br><span class="line">        <span class="meta">@Cleanup</span> OutputStream out = <span class="keyword">new</span> FileOutputStream(files[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">10000</span>];</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> r = in.read(b);</span><br><span class="line">            <span class="keyword">if</span> (r == -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            out.write(b, <span class="number">0</span>, r);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Getter-Setter注解"><a href="#Getter-Setter注解" class="headerlink" title="@Getter/@Setter注解"></a>@Getter/@Setter注解</h3><blockquote>
<p>自动生成默认的getter/setter方法，可以注解到单独属性上或者一个类上。默认生成的方法是public的，如果要修改方法的修饰符可以设置<strong>AccessLevel</strong> 的值，例如：**@Getter(access = AccessLevel.PROTECTED)**</p>
</blockquote>
<ul>
<li>生成全部</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetterAndSetterException</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>某一个属性</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetterAndSetterException</span></span>&#123;</span><br><span class="line">    <span class="meta">@Getter(AccessLevel.PROTECTED)</span> <span class="meta">@Setter</span> <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@Setter</span> <span class="meta">@Getter</span> <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Setter</span> <span class="meta">@Getter</span> <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ToString注解"><a href="#ToString注解" class="headerlink" title="@ToString注解"></a>@ToString注解</h3><blockquote>
<p>生成<strong>toString()*<em>方法，默认情况下，它会按顺序（以逗号分隔）打印你的类名称以及每个字段。可以这样设置不包含哪些字段**</em>@ToString(exclude = “id”)*</strong>  <strong>@ToString(exclude = {“id”,”name”})</strong><br> 如果继承的有父类的话，可以设置<strong>callSuper</strong> 让其调用父类的toString()方法，例如：**@ToString(callSuper = true)**</p>
</blockquote>
<h3 id="EqualsAndHashCode注解"><a href="#EqualsAndHashCode注解" class="headerlink" title="@EqualsAndHashCode注解"></a>@EqualsAndHashCode注解</h3><blockquote>
<p>生成hashCode()和equals()方法，默认情况下，它将使用所有非静态，非transient字段。但可以通过在可选的exclude参数中来排除更多字段。或者，通过在parameter参数中命名它们来准确指定希望使用哪些字段。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EqualsAndHashCode(exclude=&#123;&quot;id&quot;, &quot;tags&quot;&#125;)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EqualsAndHashCodeExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">int</span> transientVar = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> score;</span><br><span class="line">    <span class="keyword">private</span> String[] tags;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@EqualsAndHashCode(callSuper=true)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> width, height;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Square</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.width = width;</span><br><span class="line">            <span class="keyword">this</span>.height = height;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="NoArgsConstructor注解"><a href="#NoArgsConstructor注解" class="headerlink" title="@NoArgsConstructor注解"></a>@NoArgsConstructor注解</h3><blockquote>
<p>@NoArgsConstructor生成一个无参构造方法。当类中有final字段没有被初始化时，编译器会报错，此时可用@NoArgsConstructor(force = true)，然后就会为没有初始化的final字段设置默认值 0 / false / null。对于具有约束的字段（例如@NonNull字段），不会生成检查或分配，因此请注意，正确初始化这些字段之前，这些约束无效。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@NoArgsConstructor(force = true)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@NonNull</span> <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String phone ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="RequiredArgsConstructor-注解"><a href="#RequiredArgsConstructor-注解" class="headerlink" title="@RequiredArgsConstructor 注解"></a>@RequiredArgsConstructor 注解</h3><blockquote>
<p><strong>@RequiredArgsConstructor</strong>会生成构造方法（可能带参数也可能不带参数），如果带参数，这参数只能是以final修饰的未经初始化的字段，或者是以**@NonNull**注解的未经初始化的字段<br> **@RequiredArgsConstructor(staticName = “of”)**会生成一个of()的静态方法，并把构造方法设置为私有的</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequiredArgsConstructor(staticName = &quot;of&quot;)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@NonNull</span> <span class="keyword">private</span> Integer id ;</span><br><span class="line">    <span class="meta">@NonNull</span> <span class="keyword">private</span> String name =<span class="string">&quot;bbb&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String phone;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Data注解"><a href="#Data注解" class="headerlink" title="@ Data注解"></a>@ Data注解</h3><blockquote>
<p><strong>@Data</strong> 包含了 <strong>@ToString</strong>、**@EqualsAndHashCode<strong>、</strong>@Getter** / <strong>@Setter</strong>和**@RequiredArgsConstructor**的功能</p>
</blockquote>
<h3 id="Accessors注解"><a href="#Accessors注解" class="headerlink" title="@Accessors注解"></a>@Accessors注解</h3><blockquote>
<p>@Accessors 主要用于控制生成的getter和setter<br> <strong>主要参数介绍</strong></p>
<ul>
<li>fluent boolean值，默认为false。此字段主要为控制生成的getter和setter方法前面是否带get/set</li>
<li>chain boolean值，默认false。如果设置为true，setter返回的是此对象，方便链式调用方法</li>
<li>prefix 设置前缀 例如：@Accessors(prefix = “abc”) private String abcAge  当生成get/set方法时，会把此前缀去掉</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Accessors(fluent = true,chain = true,prefix = &quot;anc&quot;)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id ;</span><br><span class="line">    <span class="keyword">private</span> String name ;</span><br><span class="line">    <span class="keyword">private</span>  String phone;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Synchronized注解"><a href="#Synchronized注解" class="headerlink" title="@Synchronized注解"></a>@Synchronized注解</h3><blockquote>
<p>给方法加上同步锁</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Synchronized;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedExample</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> Object readLock = <span class="keyword">new</span> Object();</span><br><span class="line">   </span><br><span class="line">  <span class="meta">@Synchronized</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">   </span><br><span class="line">  <span class="meta">@Synchronized</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">answerToLife</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">42</span>;</span><br><span class="line"> &#125;</span><br><span class="line">  <span class="meta">@Synchronized(&quot;readLock&quot;)</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;bar&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//等效代码</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedExample</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object $LOCK = <span class="keyword">new</span> Object[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Object $lock = <span class="keyword">new</span> Object[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Object readLock = <span class="keyword">new</span> Object();</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">synchronized</span>($LOCK) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">answerToLife</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">synchronized</span>($lock) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">42</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">synchronized</span>(readLock) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;bar&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Wither注解"><a href="#Wither注解" class="headerlink" title="@Wither注解"></a>@Wither注解</h3><blockquote>
<p>提供了给final字段赋值的一种方法</p>
</blockquote>
<h3 id="Builder注解"><a href="#Builder注解" class="headerlink" title="@Builder注解"></a>@Builder注解</h3><blockquote>
<p>@Builder注释为你的类生成复杂的构造器API。</p>
</blockquote>
<p>链式调用</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//使用lombok注解的</span></span><br><span class="line"><span class="keyword">import</span> lombok.Builder;</span><br><span class="line"><span class="keyword">import</span> lombok.Singular;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BuilderExample</span> </span>&#123;</span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"> <span class="meta">@Singular</span> <span class="keyword">private</span> Set&lt;String&gt; occupations;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> @Singular注解的集合属性必须是<code>occupations</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//等效代码</span></span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuilderExample</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">  <span class="keyword">private</span> Set&lt;String&gt; occupations;</span><br><span class="line"></span><br><span class="line">  BuilderExample(String name, <span class="keyword">int</span> age, Set&lt;String&gt; occupations) &#123;</span><br><span class="line">      <span class="keyword">this</span>.name = name;</span><br><span class="line">      <span class="keyword">this</span>.age = age;</span><br><span class="line">      <span class="keyword">this</span>.occupations = occupations;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> BuilderExampleBuilder <span class="title">builder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> BuilderExampleBuilder();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">BuilderExampleBuilder</span> </span>&#123;</span><br><span class="line">      <span class="keyword">private</span> String name;</span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">      <span class="keyword">private</span> java.util.ArrayList&lt;String&gt; occupations;</span><br><span class="line"></span><br><span class="line">      BuilderExampleBuilder() &#123;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">public</span> BuilderExampleBuilder <span class="title">name</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">          <span class="keyword">this</span>.name = name;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">public</span> BuilderExampleBuilder <span class="title">age</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">          <span class="keyword">this</span>.age = age;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">public</span> BuilderExampleBuilder <span class="title">occupation</span><span class="params">(String occupation)</span> </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.occupations == <span class="keyword">null</span>) &#123;</span><br><span class="line">              <span class="keyword">this</span>.occupations = <span class="keyword">new</span> java.util.ArrayList&lt;String&gt;();</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">this</span>.occupations.add(occupation);</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">public</span> BuilderExampleBuilder <span class="title">occupations</span><span class="params">(Collection&lt;? extends String&gt; occupations)</span> </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.occupations == <span class="keyword">null</span>) &#123;</span><br><span class="line">              <span class="keyword">this</span>.occupations = <span class="keyword">new</span> java.util.ArrayList&lt;String&gt;();</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">this</span>.occupations.addAll(occupations);</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">public</span> BuilderExampleBuilder <span class="title">clearOccupations</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.occupations != <span class="keyword">null</span>) &#123;</span><br><span class="line">              <span class="keyword">this</span>.occupations.clear();</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">public</span> BuilderExample <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          <span class="comment">// complicated switch statement to produce a compact properly sized immutable set omitted.</span></span><br><span class="line">          <span class="comment">// go to https://projectlombok.org/features/Singular-snippet.html to see it.</span></span><br><span class="line">          Set&lt;String&gt; occupations = ...;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> BuilderExample(name, age, occupations);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="meta">@java</span>.lang.Override</span><br><span class="line">      <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&quot;BuilderExample.BuilderExampleBuilder(name = &quot;</span> + <span class="keyword">this</span>.name + <span class="string">&quot;, age = &quot;</span> + <span class="keyword">this</span>.age + <span class="string">&quot;, occupations = &quot;</span> + <span class="keyword">this</span>.occupations + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Log注解"><a href="#Log注解" class="headerlink" title="@Log注解"></a>@Log注解</h3><blockquote>
<p>将@Log放到类上（适用于任何一种日志系统）</p>
</blockquote>
<p><strong>例如：</strong></p>
<ul>
<li><strong>@CommonsLog</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">private static final org.apache.commons.logging.Log log &#x3D; org.apache.commons.logging.LogFactory.getLog(LogExample.class);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>@Flogger</strong></li>
</ul>
<p>创造 <code>private static final com.google.common.flogger.FluentLogger log = com.google.common.flogger.FluentLogger.forEnclosingClass();</code></p>
<ul>
<li><strong>@JBossLog</strong></li>
</ul>
<p>创造 <code>private static final org.jboss.logging.Logger log = org.jboss.logging.Logger.getLogger(LogExample.class);</code></p>
<ul>
<li><strong>@Log</strong></li>
</ul>
<p>创造 <code>private static final java.util.logging.Logger log = java.util.logging.Logger.getLogger(LogExample.class.getName());</code></p>
<ul>
<li><strong>@Log4j</strong></li>
</ul>
<p>创造 <code>private static final org.apache.log4j.Logger log = org.apache.log4j.Logger.getLogger(LogExample.class);</code></p>
<ul>
<li><strong>@Log4j2</strong></li>
</ul>
<p>创造 <code>private static final org.apache.logging.log4j.Logger log = org.apache.logging.log4j.LogManager.getLogger(LogExample.class);</code></p>
<ul>
<li><strong>@Slf4j</strong></li>
</ul>
<p>创造 <code>private static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(LogExample.class);</code></p>
<ul>
<li><strong>@XSlf4j</strong></li>
</ul>
<p>创造 <code>private static final org.slf4j.ext.XLogger log = org.slf4j.ext.XLoggerFactory.getXLogger(LogExample.class);</code></p>
<ul>
<li><strong>@CustomLog</strong></li>
</ul>
<p>创造 <code>private static final *com.foo.your.Logger* log = *com.foo.your.LoggerFactory.createYourLogger*(LogExample.class);</code></p>
<p>此选项<em>要求</em>您将配置添加到<code>lombok.config</code>文件中以指定<code>@CustomLog</code>应执行的操作。</p>
]]></content>
      <categories>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>工作日志</tag>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>什么是DO / DTO / BO / VO /AO ?</title>
    <url>/blog/2020/11/24/%E4%BB%80%E4%B9%88%E6%98%AFDODTO/</url>
    <content><![CDATA[<p>工作日志….</p>
<a id="more"></a>

<h1 id="什么是DO-DTO-BO-VO-AO"><a href="#什么是DO-DTO-BO-VO-AO" class="headerlink" title="什么是DO / DTO / BO / VO /AO ?"></a>什么是DO / DTO / BO / VO /AO ?</h1><ul>
<li><strong>POJO</strong> 是 DO / DTO / BO / VO 的统称.</li>
<li><strong>DO(Data Object)</strong> :此对象与数据库表结构一一对应,通过 DAO 层向上传输数据源对象。</li>
<li><strong>DTO(Data Transfer Object)</strong> :数据传输对象, Service 或 Manager 向外传输的对象。</li>
<li><strong>BO(Business Object)</strong> :业务对象,由 Service 层输出的封装业务逻辑的对象。</li>
<li><strong>AO (Application Object)</strong> :应用对象,在 Web 层与 Service 层之间抽象的复用对象模型,极为贴近展示层,复用度不高。</li>
<li><strong>VO(View Object)</strong> :显示层对象,通常是 Web 向模板渲染引擎层传输的对象。</li>
</ul>
]]></content>
      <categories>
        <category>工作日志</category>
      </categories>
      <tags>
        <tag>工作日志</tag>
      </tags>
  </entry>
  <entry>
    <title>集合遍历骚操作</title>
    <url>/blog/2020/11/25/%E9%9B%86%E5%90%88%E9%81%8D%E5%8E%86%E9%AA%9A%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<p>集合遍历骚操作</p>
<a id="more"></a>

<h1 id="List集合"><a href="#List集合" class="headerlink" title="List集合"></a>List集合</h1><h2 id="集合中添加元素"><a href="#集合中添加元素" class="headerlink" title="集合中添加元素"></a>集合中添加元素</h2><p>添加元素：1，2，3，4，5</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list =<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">     list.add(String.valueOf(i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h2><p>迭代器遍历</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Iterator&lt;String&gt; iterator = list.iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext())&#123;</span><br><span class="line">    String s = iterator.next();</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;       </span><br></pre></td></tr></table></figure>

<p>jdk1.8之后引入：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">forEach</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; action)</span> </span>&#123;</span><br><span class="line">    Objects.requireNonNull(action);</span><br><span class="line">    <span class="keyword">for</span> (T t : <span class="keyword">this</span>) &#123;</span><br><span class="line">        action.accept(t);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用forEach进行遍历</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">list.forEach((num) -&gt; System.out.println(num));</span><br></pre></td></tr></table></figure>

<p>继续优化</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">list.forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<h2 id="遍历并删除某个元素"><a href="#遍历并删除某个元素" class="headerlink" title="遍历并删除某个元素"></a>遍历并删除某个元素</h2><p>迭代器遍历删除元素<strong>1</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Iterator&lt;String&gt; iterator = list.iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext())&#123;</span><br><span class="line">    String s = iterator.next();</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;1&quot;</span>.equals(s))&#123;</span><br><span class="line">       iterator.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;        </span><br></pre></td></tr></table></figure>

<p>jdk1.8之后引入<strong>removeIf</strong>方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">boolean</span> <span class="title">removeIf</span><span class="params">(Predicate&lt;? <span class="keyword">super</span> E&gt; filter)</span> </span>&#123;</span><br><span class="line">    Objects.requireNonNull(filter);</span><br><span class="line">    <span class="keyword">boolean</span> removed = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">final</span> Iterator&lt;E&gt; each = iterator();</span><br><span class="line">    <span class="keyword">while</span> (each.hasNext()) &#123;</span><br><span class="line">       <span class="keyword">if</span> (filter.test(each.next())) &#123;</span><br><span class="line">            each.remove();</span><br><span class="line">            removed = <span class="keyword">true</span>;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> removed;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中<strong>Obejcts.requireNoNull</strong>方法:一个判断这个数据是不是空数据的方法，出自<strong>jdk1.7</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">requireNonNull</span><span class="params">(T obj)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (obj == <span class="keyword">null</span>)</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>jdk1.8</strong>之后使用<strong>Lombda</strong>表达式优化</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">list.removeIf(s -&gt; (<span class="string">&quot;1&quot;</span>.equals(s)));</span><br></pre></td></tr></table></figure>

<p>继续优化</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">list.removeIf(<span class="string">&quot;1&quot;</span>::equals);</span><br></pre></td></tr></table></figure>

<h1 id="Map集合"><a href="#Map集合" class="headerlink" title="Map集合"></a>Map集合</h1><ul>
<li>（1）编码规范：</li>
</ul>
<p>【推荐】集合初始化时，指定集合初始值大小。<br>说明：HashMap 使用 HashMap(int initialCapacity) 初始化。<br>正例：initialCapacity = (需要存储的元素个数 / 负载因子) + 1。注意负载因子（即 loader factor）默认<br>为 0.75，如果暂时无法确定初始值大小，请设置为 16（即默认值）。<br>反例：HashMap 需要放置 1024 个元素，由于没有设置容量初始大小，随着元素不断增加，容量 7 次被<br>迫扩大，resize 需要重建 hash 表，严重影响性能。</p>
<ul>
<li>（2）编码规范</li>
</ul>
<p>【推荐】使用 entrySet 遍历 Map 类集合 KV，而不是 keySet 方式进行遍历。<br>说明：keySet 其实是遍历了 2 次，一次是转为 Iterator 对象，另一次是从 hashMap 中取出 key 所对应<br>的 value。而 entrySet 只是遍历了一次就把 key 和 value 都放到了 entry 中，效率更高。如果是 JDK8，<br>使用 Map.forEach 方法。</p>
<p>正例：values()返回的是 V 值集合，是一个 list 集合对象；keySet()返回的是 K 值集合，是一个 Set 集合<br>对象；entrySet()返回的是 K-V 值组合集合。</p>
<h2 id="添加元素"><a href="#添加元素" class="headerlink" title="添加元素"></a>添加元素</h2><p>初始化map集合的大小</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Map&lt;String,String&gt; hashMap = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">16</span>);</span><br><span class="line">hashMap.put(<span class="string">&quot;1&quot;</span>,<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">hashMap.put(<span class="string">&quot;2&quot;</span>,<span class="string">&quot;李四&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="遍历-1"><a href="#遍历-1" class="headerlink" title="遍历"></a>遍历</h2><p>使用<strong>entrySet</strong>遍历</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Set&lt;Map.Entry&lt;String, String&gt;&gt; entries = hashMap.entrySet();</span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;String, String&gt; entry : entries) &#123;</span><br><span class="line">    System.out.println(entry);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用forEach进行遍历</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">hashMap.forEach((k,v) -&gt;&#123;</span><br><span class="line">    System.out.println(k+<span class="string">&quot;:&quot;</span>+v);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>工作日志</category>
      </categories>
      <tags>
        <tag>工作日志</tag>
      </tags>
  </entry>
  <entry>
    <title>springboot使用</title>
    <url>/blog/2020/11/26/springboot/</url>
    <content><![CDATA[<p>springboot使用</p>
<a id="more"></a>

<h1 id="SpringBoot中关于Beanutils-copyProperties的使用"><a href="#SpringBoot中关于Beanutils-copyProperties的使用" class="headerlink" title="SpringBoot中关于Beanutils.copyProperties的使用"></a>SpringBoot中关于Beanutils.copyProperties的使用</h1><h2 id="首先创建User实体类"><a href="#首先创建User实体类" class="headerlink" title="首先创建User实体类"></a>首先创建User实体类</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ：zhangshuai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> ：Created in 2020/11/26 11:33</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.BeanUtils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ：zhangshuai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> ：Created in 2020/11/26 11:35</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestUser</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="number">1L</span>,<span class="string">&quot;张三&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        User user1 = <span class="keyword">new</span> User();</span><br><span class="line">        System.out.println(user1);</span><br><span class="line">        BeanUtils.copyProperties(user,user1);</span><br><span class="line">        System.out.println(user1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>User(id=1, name=张三, password=123456)<br>User(id=null, name=null, password=null)<br>User(id=1, name=张三, password=123456)</p>
]]></content>
      <categories>
        <category>工作日志</category>
      </categories>
      <tags>
        <tag>工作日志</tag>
        <tag>随笔</tag>
      </tags>
  </entry>
  <entry>
    <title>PageHelper插件使用</title>
    <url>/blog/2020/11/26/PageHelper%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>随笔……</p>
<a id="more"></a>

<h1 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h1><h2 id="导包"><a href="#导包" class="headerlink" title="导包"></a>导包</h2><h2 id="曾经的查询"><a href="#曾经的查询" class="headerlink" title="曾经的查询"></a>曾经的查询</h2><p>在实际项目运用中，PageHelper的使用非常便利快捷，仅通过<code>PageInfo</code> + <code>PageHelper</code>两个类，就足以完成分页功能，然而往往这种最简单的集成使用方式，却在很多实际应用场景中，没有得到充分的开发利用</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> PageInfo&lt;AccountUserInfo&gt; <span class="title">testGet</span><span class="params">(AccountUserReq req)</span></span>&#123;</span><br><span class="line">    PageHelper.startPage(req.getPageNum(),req.getPageSize());</span><br><span class="line">    List&lt;AccountUserInfo&gt; list = accountUserExtMapper.getAccountUsers(req);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> PageInfo&lt;&gt;(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在某种程度上而言，上述写法的确是符合PageHelper的使用规范 </p>
<blockquote>
<p>在集合查询前使用<code>PageHelper.startPage(pageNum,pageSize)</code>,并且<em>中间不能穿插执行其他SQL</em></p>
</blockquote>
<h2 id="合理且规范的使用"><a href="#合理且规范的使用" class="headerlink" title="合理且规范的使用"></a>合理且规范的使用</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> PageInfo&lt;AccountUserInfo&gt; <span class="title">testGet2</span><span class="params">(AccountUserReq req)</span></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> PageHelper.startPage(req.getPageNum(),req.getPageSize())</span><br><span class="line">           .doSelectPageInfo(() -&gt; accountUserExtMapper.getAccountUsers(req));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="在此基础上可以添加查询条件"><a href="#在此基础上可以添加查询条件" class="headerlink" title="在此基础上可以添加查询条件"></a>在此基础上可以添加查询条件</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> PageInfo&lt;AccountUserInfo&gt; <span class="title">getAccountUserList</span><span class="params">(AccountUserReq req)</span> </span>&#123;</span><br><span class="line">    Page&lt;AccountUserInfo&gt; userInfoPage = PageHelper.startPage(req.getPageNum(), req.getPageSize())</span><br><span class="line">           .doSelectPage(() -&gt; accountUserExtMapper.getAccountUsers(req));</span><br><span class="line"></span><br><span class="line">    List&lt;AccountUserInfo&gt; userList = userInfoPage.getResult();</span><br><span class="line">    <span class="keyword">if</span> (CollectionUtils.isNotEmpty(userList)) &#123;</span><br><span class="line">        assembleUserInfo(userList);</span><br><span class="line">    &#125;</span><br><span class="line">    PageInfo&lt;AccountUserInfo&gt; pageInfo = <span class="keyword">new</span> PageInfo&lt;&gt;(userInfoPage);</span><br><span class="line">    pageInfo.setList(userList);</span><br><span class="line">    <span class="keyword">return</span> pageInfo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="还可以这么写"><a href="#还可以这么写" class="headerlink" title="还可以这么写"></a>还可以这么写</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> PageInfo&lt;ResponseEntityDto&gt; <span class="title">page</span><span class="params">(RequestParamDto param)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> PageHelper.startPage(param.getPageNum(), param.getPageSize())</span><br><span class="line">     .doSelectPageInfo(() -&gt; list(param))</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;ResponseEntityDto&gt; <span class="title">list</span><span class="params">(RequestParamDto param)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> mapper.selectManySelective(param);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="理解"><a href="#理解" class="headerlink" title="理解"></a>理解</h2><h3 id="为什么要重新声明一个list函数"><a href="#为什么要重新声明一个list函数" class="headerlink" title="为什么要重新声明一个list函数"></a>为什么要重新声明一个list函数</h3><blockquote>
<p>答: 往往在很多实际业务应用场景中, 分页查询是基于大数据量的表格展示需求来进行的. 然而很多时候,譬如: 内部服务的互相调用,<code>OpenAPI</code>的提供. 甚至在某些前后端分离联调的业务场景中,是同样需要一个非分页集合查询接口来提供服务的. 另外,暂时以上因素抛开不谈,我们可以根据上述写法来定义和规范某些东西譬如: 分页和集合查询的分离和解耦(解耦详情请看进阶使用), 分页请求的请求和响应与实际业务参数的分离(详情请看进阶使用)等等…</p>
</blockquote>
<h3 id="doSelectPageInfo是什么"><a href="#doSelectPageInfo是什么" class="headerlink" title="doSelectPageInfo是什么?"></a><code>doSelectPageInfo</code>是什么?</h3><blockquote>
<p>答: <code>doSelectPageInfo</code>是<code>PageHelper.startPage()</code>函数返回的默认<code>Page</code>实例内置的函数,该函数可以用以<code>Lambda</code>的形式通过额外的<code>Function</code>来进行查询而不需要再进行多余的<code>PageInfo</code>与<code>List</code>转换,而<code>doSelectPageInfo</code>的参数则是<code>PageHelper</code>内置的<code>Function(ISelect)</code>接口用以达到转换<code>PageInfo</code>的目的</p>
</blockquote>
]]></content>
      <categories>
        <category>随笔</category>
      </categories>
      <tags>
        <tag>随笔</tag>
        <tag>MyBatis插件</tag>
      </tags>
  </entry>
  <entry>
    <title>随笔</title>
    <url>/blog/2020/11/25/%E9%9A%8F%E7%AC%94/</url>
    <content><![CDATA[<p>随笔……</p>
<a id="more"></a>

<h1 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h1><h2 id="JsonProperty"><a href="#JsonProperty" class="headerlink" title="@JsonProperty"></a>@JsonProperty</h2><blockquote>
<p><code>@JsonProperty</code> 此注解用于属性上，作用是把该属性的名称序列化为另外一个名称，如把trueName属性序列化为name</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@JsonProperty(&quot;name&quot;)</span> </span><br><span class="line"><span class="keyword">private</span> String trueName; </span><br></pre></td></tr></table></figure>

<h2 id="FeignClient注解"><a href="#FeignClient注解" class="headerlink" title="@FeignClient注解"></a>@FeignClient注解</h2><p>FeignClient注解被@Target(ElementType.TYPE)修饰，表示FeignClient注解的作用目标在<strong>接口上</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FeignClient(name = ``&quot;github-client&quot;``, url = ``&quot;https://api.github.com&quot;``, configuration = GitHubExampleConfig.``class``)</span></span><br><span class="line"><span class="keyword">public</span>` `<span class="class"><span class="keyword">interface</span>` `<span class="title">GitHubClient</span> </span>&#123;</span><br><span class="line">  ``<span class="meta">@RequestMapping(value = ``&quot;/search/repositories&quot;``, method = RequestMethod.GET)</span></span><br><span class="line">  ``<span class="function">String <span class="title">searchRepo</span><span class="params">(<span class="meta">@RequestParam(``&quot;q&quot;``)</span> String queryStr)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>声明接口之后，在代码中通过@Resource注入之后即可使用。@FeignClient标签的常用属性如下：</p>
<ul>
<li>name：指定FeignClient的名称，如果项目使用了Ribbon，name属性会作为微服务的名称，用于服务发现</li>
<li>url: url一般用于调试，可以手动指定@FeignClient调用的地址</li>
<li>decode404:当发生http 404错误时，如果该字段位true，会调用decoder进行解码，否则抛出FeignException</li>
<li>configuration: Feign配置类，可以自定义Feign的Encoder、Decoder、LogLevel、Contract</li>
<li>fallback: 定义容错的处理类，当调用远程接口失败或超时时，会调用对应接口的容错逻辑，fallback指定的类必须实现@FeignClient标记的接口</li>
<li>fallbackFactory: 工厂类，用于生成fallback类示例，通过这个属性我们可以实现每个接口通用的容错逻辑，减少重复的代码</li>
<li>path: 定义当前FeignClient的统一前缀</li>
</ul>
<h2 id="Valid注解"><a href="#Valid注解" class="headerlink" title="@Valid注解"></a>@Valid注解</h2><blockquote>
<p>用于验证注解是否符合要求，直接加在变量user之前，在变量中添加验证信息的要求，当不符合要求时就会在方法中返回message 的错误提示信息。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">create</span> <span class="params">(<span class="meta">@Valid</span> <span class="meta">@RequestBody</span> User user)</span> </span>&#123;</span><br><span class="line">        System.out.println(user.getId());</span><br><span class="line">        System.out.println(user.getUsername());</span><br><span class="line">        System.out.println(user.getPassword());</span><br><span class="line">        user.setId(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure>

<p>然后在 User 类中添加验证信息的要求</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;  </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;密码不能为空&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@NotBlank 注解所指的 password 字段，表示验证密码不能为空，如果为空的话，上面 Controller 中的 create 方法会将message 中的”密码不能为空”返回。</p>
<p><strong>更多信息要求</strong></p>
<table>
<thead>
<tr>
<th>@Null</th>
<th>限制只能为null</th>
</tr>
</thead>
<tbody><tr>
<td>@NotNull</td>
<td>限制必须不为null</td>
</tr>
<tr>
<td>@AssertFalse</td>
<td>限制必须为false</td>
</tr>
<tr>
<td>@AssertTrue</td>
<td>限制必须为true</td>
</tr>
<tr>
<td>@DecimalMax(value)</td>
<td>限制必须为一个不大于指定值的数字</td>
</tr>
<tr>
<td>@DecimalMin(value)</td>
<td>限制必须为一个不小于指定值的数字</td>
</tr>
<tr>
<td>@Digits(integer,fraction)</td>
<td>限制必须为一个小数，且整数部分的位数不能超过integer，小数部分的位数不能超过fraction</td>
</tr>
<tr>
<td>@Future</td>
<td>限制必须是一个将来的日期</td>
</tr>
<tr>
<td>@Max(value)</td>
<td>限制必须为一个不大于指定值的数字</td>
</tr>
<tr>
<td>@Min(value)</td>
<td>限制必须为一个不小于指定值的数字</td>
</tr>
<tr>
<td>@Past</td>
<td>限制必须是一个过去的日期</td>
</tr>
<tr>
<td>@Pattern(value)</td>
<td>限制必须符合指定的正则表达式</td>
</tr>
<tr>
<td>@Size(max,min)</td>
<td>限制字符长度必须在min到max之间</td>
</tr>
<tr>
<td>@Past</td>
<td>验证注解的元素值（日期类型）比当前时间早</td>
</tr>
<tr>
<td>@NotEmpty</td>
<td>验证注解的元素值不为null且不为空（字符串长度不为0、集合大小不为0）</td>
</tr>
<tr>
<td>@NotBlank</td>
<td>验证注解的元素值不为空（不为null、去除首位空格后长度为0），不同于@NotEmpty，@NotBlank只应用于字符串且在比较时会去除字符串的空格</td>
</tr>
<tr>
<td>@Email</td>
<td>验证注解的元素值是Email，也可以通过正则表达式和flag指定自定义的email格式</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>随笔</category>
      </categories>
      <tags>
        <tag>随笔</tag>
        <tag>注解</tag>
      </tags>
  </entry>
  <entry>
    <title>设计模式学习笔记</title>
    <url>/blog/2020/11/26/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p>设计模式学习笔记</p>
<a id="more"></a>

<h1 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h1><p><a href="http://c.biancheng.net/view/1317.html">原文链接</a></p>
<h2 id="设计模式概述"><a href="#设计模式概述" class="headerlink" title="设计模式概述"></a>设计模式概述</h2><h3 id="概念和意义"><a href="#概念和意义" class="headerlink" title="概念和意义"></a>概念和意义</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><blockquote>
<p><strong>软件设计模式</strong>（Software Design Pattern），又称<strong>设计模式</strong>，<strong>是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结</strong>。它<strong>描述了在软件设计过程中的一些不断重复发生的问题，以及该问题的解决方案</strong>。也就是说，它<strong>是解决特定问题的一系列套路</strong>，是前辈们的代码设计经验的总结，<strong>具有一定的普遍性，可以反复使用</strong>。其<strong>目的是为了提高代码的可重用性、代码的可读性和代码的可靠性</strong>。</p>
</blockquote>
<h4 id="意义"><a href="#意义" class="headerlink" title="意义"></a>意义</h4><p><strong>设计模式的本质是面向对象设计原则的实际运用，是对类的封装性、继承性和多态性以及类的关联关系和组合关系的充分理解</strong>。正确使用设计模式具有以下优点。</p>
<ul>
<li>可以提高程序员的思维能力、编程能力和设计能力。</li>
<li>使程序设计更加标准化、代码编制更加工程化，使软件开发效率大大提高，从而缩短软件的开发周期。</li>
<li>使设计的代码可重用性高、可读性强、可靠性高、灵活性好、可维护性强。</li>
</ul>
<p>当然，软件设计模式只是一个引导。在具体的软件幵发中，必须根据设计的应用系统的特点和要求来恰当选择。对于简单的程序开发，可能写一个简单的算法要比引入某种设计模式更加容易。但对大项目的开发或者框架设计，用设计模式来组织代码显然更好。</p>
<h3 id="基本要素"><a href="#基本要素" class="headerlink" title="基本要素"></a>基本要素</h3><p>设计模式使人们可以更加简单方便地复用成功的设计和体系结构，它<strong>通常包含以下几个基本要素</strong>：<strong>模式名称、别名、动机、问题、解决方案、效果、结构、模式角色、合作关系、实现方法、适用性、已知应用、例程、模式扩展和相关模式等</strong>，其中最关键的元素包括以下 4 个主要部分。</p>
<h4 id="模式名称"><a href="#模式名称" class="headerlink" title="模式名称"></a>模式名称</h4><p>每一个模式都有自己的名字，通常用一两个词来描述，可以根据模式的问题、特点、解决方案、功能和效果来命名。模式名称（PatternName）有助于我们理解和记忆该模式，也方便我们来讨论自己的设计。</p>
<h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><p>问题（Problem）描述了该模式的应用环境，即何时使用该模式。它解释了设计问题和问题存在的前因后果，以及必须满足的一系列先决条件。</p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>模式问题的解决方案（Solution）包括设计的组成成分、它们之间的相互关系及各自的职责和协作方式。因为模式就像一个模板，可应用于多种不同场合，所以解决方案并不描述一个特定而具体的设计或实现，而是提供设计问题的抽象描述和怎样用一个具有一般意义的元素组合（类或对象的 组合）来解决这个问题。</p>
<h4 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h4><p>描述了模式的应用效果以及使用该模式应该权衡的问题，即模式的优缺点。主要是对时间和空间的衡量，以及该模式对系统的灵活性、扩充性、可移植性的影响，也考虑其实现问题。显式地列出这些效果（Consequence）对理解和评价这些模式有很大的帮助。</p>
<h2 id="GoF-的-23-种设计模式的分类和功能"><a href="#GoF-的-23-种设计模式的分类和功能" class="headerlink" title="GoF 的 23 种设计模式的分类和功能"></a>GoF 的 23 种设计模式的分类和功能</h2><blockquote>
<p>设计模式有<strong>两种分类</strong>方法，即<strong>根据模式的目的来分</strong>和<strong>根据模式的作用的范围来分</strong>。</p>
</blockquote>
<h3 id="根据目的来分"><a href="#根据目的来分" class="headerlink" title="根据目的来分"></a>根据目的来分</h3><h4 id="创建型模式"><a href="#创建型模式" class="headerlink" title="创建型模式"></a>创建型模式</h4><p>用于描述<code>怎样创建对象</code>，它的主要特点是<code>将对象的创建与使用分离</code>。GoF 中提供了<strong>单例</strong>、<strong>原型</strong>、<strong>工厂方法</strong>、<strong>抽象工厂</strong>、<strong>建造者</strong>等 5 种创建型模式。</p>
<h4 id="结构型模式"><a href="#结构型模式" class="headerlink" title="结构型模式"></a>结构型模式</h4><p>用于描述如何将类或对象按某种布局组成更大的结构，GoF 中提供了<strong>代理、适配器、桥接、装饰、外观、享元、组合等 7 种结构型模式</strong>。</p>
<h4 id="行为型模式"><a href="#行为型模式" class="headerlink" title="行为型模式"></a>行为型模式</h4><p>用于描述类或对象之间怎样相互协作共同完成单个对象都无法单独完成的任务，以及怎样分配职责。GoF 中提供了<strong>模板方法、策略、命令、职责链、状态、观察者、中介者、迭代器、访问者、备忘录、解释器等 11 种行为型模式</strong>。</p>
<h3 id="根据作用范围来分"><a href="#根据作用范围来分" class="headerlink" title="根据作用范围来分"></a>根据作用范围来分</h3><p>根据模式是主要用于类上还是主要用于对象上来分，这种方式可分为<strong>类模式</strong>和<strong>对象模式</strong>两种。</p>
<h4 id="类模式"><a href="#类模式" class="headerlink" title="类模式"></a>类模式</h4><p>用于处理类与子类之间的关系，这些关系通过继承来建立，是静态的，在编译时刻便确定下来了。GoF中的<strong>工厂方法</strong>、<strong>（类）适配器</strong>、<strong>模板方法</strong>、<strong>解释器</strong>属于该模式。</p>
<h4 id="对象模式"><a href="#对象模式" class="headerlink" title="对象模式"></a>对象模式</h4><p>用于处理对象之间的关系，这些关系可以通过组合或聚合来实现，在运行时刻是可以变化的，更具动态性。GoF 中除了以上 4 种，其他的都是对象模式。</p>
<h3 id="设计模式-1"><a href="#设计模式-1" class="headerlink" title="设计模式"></a>设计模式</h3><h4 id="单例设计模式"><a href="#单例设计模式" class="headerlink" title="单例设计模式"></a>单例设计模式</h4><blockquote>
<p>在有些系统中，为了节省内存资源、保证数据内容的一致性，对某些类要求只能创建一个实例，这就是所谓的单例模式。</p>
</blockquote>
<h5 id="定义与特点"><a href="#定义与特点" class="headerlink" title="定义与特点"></a>定义与特点</h5><p><strong>单例（Singleton）模式</strong>的定义：指一个类只有一个实例，且该类能自行创建这个实例的一种模式。例如，Windows 中只能打开一个任务管理器，这样可以避免因打开多个任务管理器窗口而造成内存资源的浪费，或出现各个窗口显示内容的不一致等错误。</p>
<p>在计算机系统中，还有 Windows 的回收站、操作系统中的文件系统、多线程中的线程池、显卡的驱动程序对象、打印机的后台处理服务、应用程序的日志对象、数据库的连接池、网站的计数器、Web 应用的配置对象、应用程序中的对话框、系统中的缓存等常常被设计成单例。</p>
<p><strong>单例模式</strong>在现实生活中的应用也非常广泛，例如公司 CEO、部门经理等都属于单例模型。J2EE 标准中的 <a href="http://c.biancheng.net/servlet/">Servlet</a>Context 和 ServletContextConfig、<a href="http://c.biancheng.net/spring/">Spring</a> 框架应用中的 ApplicationContext、数据库中的连接池等也都是单例模式。</p>
<p><strong>特点：</strong></p>
<ol>
<li>单例类只有一个实例对象；</li>
<li>该单例对象必须由单例类自行创建；</li>
<li>单例类对外提供一个访问该单例的全局访问点。</li>
</ol>
<h5 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h5><p>单例模式的优点：</p>
<ul>
<li>单例模式可以保证内存里只有一个实例，减少了内存的开销。</li>
<li>可以避免对资源的多重占用。</li>
<li>单例模式设置全局访问点，可以优化和共享资源的访问。</li>
</ul>
<p>单例模式的缺点：</p>
<ul>
<li>单例模式一般没有接口，扩展困难。如果要扩展，则除了修改原来的代码，没有第二种途径，违背开闭原则。</li>
<li>在并发测试中，单例模式不利于代码调试。在调试过程中，如果单例中的代码没有执行完，也不能模拟生成一个新的对象。</li>
<li>单例模式的功能代码通常写在一个类中，如果功能设计不合理，则很容易违背单一职责原则。</li>
</ul>
<h5 id="两种实现"><a href="#两种实现" class="headerlink" title="两种实现"></a>两种实现</h5><h6 id="懒汉式"><a href="#懒汉式" class="headerlink" title="懒汉式"></a>懒汉式</h6><p>该模式的特点是类加载时没有生成单例，只有当第一次调用 getlnstance 方法时才去创建这个单例。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LazySingleton</span></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保证instance在所有线程中同步</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> LazySingleton instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * private 避免类在外部被实例化</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LazySingleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// getInstance 方法前加同步</span></span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">            instance = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>如果编写的是多线程程序，则不要删除上例代码中的关键字 <strong>volatile</strong> 和 <strong>synchronized</strong>，否则将存在线程非安全的问题。如果不删除这两个关键字就能保证线程安全，但是每次访问时都要同步，会影响性能，且消耗更多的资源，这是懒汉式单例的缺点。</p>
<h6 id="饿汉式"><a href="#饿汉式" class="headerlink" title="饿汉式"></a>饿汉式</h6><p>该模式的特点是类一旦加载就创建一个单例，保证在调用 getInstance 方法之前单例已经存在了。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * java允许我们在一个类里面定义静态类。比如内部类（nested class）。</span></span><br><span class="line"><span class="comment"> * 把nested class封闭起来的类叫外部类。</span></span><br><span class="line"><span class="comment"> * 在java中，我们不能用static修饰顶级类（top level class）。</span></span><br><span class="line"><span class="comment"> * 只有内部类可以为static。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HungerSingleton</span></span>&#123;</span><br><span class="line">    <span class="comment">// 在自己内部定义自己的一个实例，只供内部调用</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> HungerSingleton instance = <span class="keyword">new</span> HungerSingleton();</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">HungerSingleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HungerSingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>饿汉式单例在类创建的同时就已经创建好一个静态的对象供系统使用，以后不再改变，所以是线程安全的，可以直接用于多线程而不会出现问题。</p>
<h6 id="双重锁的形式"><a href="#双重锁的形式" class="headerlink" title="双重锁的形式"></a>双重锁的形式</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 双重锁校验的单例</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoubleLock</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * volatile防止指令重排序，内存可见(缓存中的变化及时刷到主存，并且其他的内存失效，必须从主存获取)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">volatile</span> DoubleLock doubleLock = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">DoubleLock</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//构造器必须私有  不然直接new就可以创建</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DoubleLock <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//第一次判断，假设会有好多线程，如果doubleLock没有被实例化，那么就会到下一步获取锁，只有一个能获取到，</span></span><br><span class="line">        <span class="comment">//如果已经实例化，那么直接返回了，减少除了初始化时之外的所有锁获取等待过程</span></span><br><span class="line">        <span class="keyword">if</span>(doubleLock == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (DoubleLock.class)&#123;</span><br><span class="line">                <span class="comment">//第二次判断是因为假设有两个线程A、B,两个同时通过了第一个if，然后A获取了锁，进入然后判断doubleLock是null，他就实例化了doubleLock，然后他出了锁，</span></span><br><span class="line">                <span class="comment">//这时候线程B经过等待A释放的锁，B获取锁了，如果没有第二个判断，那么他还是会去new DoubleLock()，再创建一个实例，所以为了防止这种情况，需要第二次判断</span></span><br><span class="line">                <span class="keyword">if</span>(doubleLock == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="comment">//下面这句代码其实分为三步：</span></span><br><span class="line">                    <span class="comment">//1.开辟内存分配给这个对象</span></span><br><span class="line">                    <span class="comment">//2.初始化对象</span></span><br><span class="line">                    <span class="comment">//3.将内存地址赋给虚拟机栈内存中的doubleLock变量</span></span><br><span class="line">                    <span class="comment">//注意上面这三步，第2步和第3步的顺序是随机的，这是计算机指令重排序的问题</span></span><br><span class="line">                    <span class="comment">//假设有两个线程，其中一个线程执行下面这行代码，如果第三步先执行了，就会把没有初始化的内存赋值给doubleLock</span></span><br><span class="line">                    <span class="comment">//然后恰好这时候有另一个线程执行了第一个判断if(doubleLock == null)，然后就会发现doubleLock指向了一个内存地址</span></span><br><span class="line">                    <span class="comment">//这另一个线程就直接返回了这个没有初始化的内存，所以要防止第2步和第3步重排序</span></span><br><span class="line">                    doubleLock = <span class="keyword">new</span> DoubleLock();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> doubleLock;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="懒汉式应用案例"><a href="#懒汉式应用案例" class="headerlink" title="懒汉式应用案例"></a>懒汉式应用案例</h6><p>用懒汉式产生美国当今总统对象.</p>
<p>分析：在每一届任期内，总统只能有一个人。</p>
<p><a href="https://imgchr.com/i/D0769s"><img src="https://s3.ax1x.com/2020/11/26/D0769s.png" alt="D0769s.png"></a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">President</span></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  保证instance在所有线程中同步</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> President instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  private 避免类在外部被实例化</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">President</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;产生一个总统！！！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> President <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// getInstance 方法前加同步</span></span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">            instance = <span class="keyword">new</span> President();</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;已有一个总统！！！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getPresidentName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我是美国总统：特朗普！！！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="饿汉式应用案例"><a href="#饿汉式应用案例" class="headerlink" title="饿汉式应用案例"></a>饿汉式应用案例</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">President</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> President instance = <span class="keyword">new</span> President();</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">President</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;产生一个总统！！！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> President <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getPresidentName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我是美国总统：特朗普！！！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="测试主类和结果"><a href="#测试主类和结果" class="headerlink" title="测试主类和结果"></a>测试主类和结果</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSingleton</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        President president = President.getInstance();</span><br><span class="line">        president.getPresidentName();</span><br><span class="line">        President president1 = President.getInstance();</span><br><span class="line">        president1.getPresidentName();</span><br><span class="line">        <span class="keyword">if</span> (president == president1)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;他们是同一个人！！！&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;他们不是同一个人！！！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">产生一个总统！！！</span><br><span class="line">我是美国总统：特朗普！！！</span><br><span class="line">我是美国总统：特朗普！！！</span><br><span class="line">他们是同一个人！！！</span><br></pre></td></tr></table></figure>

<h6 id="单例模式的扩展"><a href="#单例模式的扩展" class="headerlink" title="单例模式的扩展"></a>单例模式的扩展</h6><p>单例模式可扩展为有限的多例（Multitcm）模式，这种模式可生成有限个实例并保存在 ArrayList 中，客户需要时可随机获取。</p>
<p><a href="https://imgchr.com/i/D0zRJK"><img src="https://s3.ax1x.com/2020/11/26/D0zRJK.png" alt="D0zRJK.png"></a></p>
]]></content>
      <categories>
        <category>设计模式</category>
      </categories>
      <tags>
        <tag>设计模式</tag>
      </tags>
  </entry>
  <entry>
    <title>工作中常用命令</title>
    <url>/blog/2020/12/01/shell%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>shell常用命令</p>
<a id="more"></a>

<h1 id="常用shell命令"><a href="#常用shell命令" class="headerlink" title="常用shell命令"></a>常用shell命令</h1><h2 id="ls命令查看文件"><a href="#ls命令查看文件" class="headerlink" title="ls命令查看文件"></a>ls命令查看文件</h2><h3 id="ls-a"><a href="#ls-a" class="headerlink" title="ls - a"></a>ls - a</h3><blockquote>
<p>Linux上的文件以.开头的文件被系统认为隐藏文件仅用ls命令是看不到他们的，而用ls -a除了显示一般文件名外，连隐藏文件也会显示出来。</p>
</blockquote>
<h3 id="ls-L"><a href="#ls-L" class="headerlink" title="ls -L"></a>ls -L</h3><blockquote>
<p>该参数显示更详细的文件信息</p>
</blockquote>
<h3 id="ls-F：基本上等同于ls"><a href="#ls-F：基本上等同于ls" class="headerlink" title="ls -F：基本上等同于ls"></a>ls -F：基本上等同于ls</h3><blockquote>
<p>使用这个参数表示在文件的后面多添加表示文件类型的符号，例如*表示可执行，/表示目录，@表示连结文件，这都是因为使用了-F这个参数。但是现在基本上所有的Linux发行版本的ls都已经内建了-F参数，也就是说，不用输入这个参数，我们也能看到各种分辨符号。</p>
</blockquote>
<h2 id="cd命令切换目录"><a href="#cd命令切换目录" class="headerlink" title="cd命令切换目录"></a>cd命令切换目录</h2><h3 id="cd-aaa"><a href="#cd-aaa" class="headerlink" title="cd aaa"></a>cd aaa</h3><h3 id="cd-命令后不指定目录，会切换到当前用户的home-目录"><a href="#cd-命令后不指定目录，会切换到当前用户的home-目录" class="headerlink" title="cd 命令后不指定目录，会切换到当前用户的home 目录"></a>cd 命令后不指定目录，会切换到当前用户的home 目录</h3><h3 id="cd-作用同cd后不指定目录，切换到当前用户的home-目录"><a href="#cd-作用同cd后不指定目录，切换到当前用户的home-目录" class="headerlink" title="cd ~ 作用同cd后不指定目录，切换到当前用户的home 目录"></a>cd ~ 作用同cd后不指定目录，切换到当前用户的home 目录</h3><h3 id="cd-命令后跟一个减号，则会退回到切换前的目录"><a href="#cd-命令后跟一个减号，则会退回到切换前的目录" class="headerlink" title="cd - 命令后跟一个减号，则会退回到切换前的目录"></a>cd - 命令后跟一个减号，则会退回到切换前的目录</h3><h3 id="cd-返回到当前目录下的上一级目录"><a href="#cd-返回到当前目录下的上一级目录" class="headerlink" title="cd .. 返回到当前目录下的上一级目录"></a>cd .. 返回到当前目录下的上一级目录</h3><h2 id="pwd：用于显示用户当前工作目录"><a href="#pwd：用于显示用户当前工作目录" class="headerlink" title="pwd：用于显示用户当前工作目录"></a>pwd：用于显示用户当前工作目录</h2><h2 id="mkdir-和-rmdir"><a href="#mkdir-和-rmdir" class="headerlink" title="mkdir 和 rmdir"></a>mkdir 和 rmdir</h2><blockquote>
<p>midir:创建目录 rmdir:删除目录</p>
<p>两个命令都支持-p参数，对于mkdir命令若指定路径的父目录不存在则一并创建，对于rmdir命令则删除指定路径的所有层次目录，如果文件夹里有内容，则不能用rmdir命令</p>
</blockquote>
<h2 id="cp命令"><a href="#cp命令" class="headerlink" title="cp命令"></a>cp命令</h2><p>复制一个文件到另一目录：cp 1.txt ../test2</p>
<p>复制一个文件到本目录并改名：cp 1.txt 2.txt</p>
<p>复制一个文件夹a并改名为b：cp -r a b</p>
<h2 id="rm命令"><a href="#rm命令" class="headerlink" title="rm命令"></a>rm命令</h2><p>rm命令用于删除文件，与dos下的del/erase命令相似，rm命令常用的参数有三个：-i，-r，-f。</p>
<p>–i ：系统在删除文件之前会先询问确认，用户回车之后，文件才会真的被删除。需要注意，linux下删除的文件是不能恢复的，删除之前一定要谨慎确认。</p>
<p>–r：该参数支持目录删除，功能和rmdir命令相似。</p>
<p>–f：和-i参数相反，-f表示强制删除</p>
<h2 id="常用的查看日志的命令"><a href="#常用的查看日志的命令" class="headerlink" title="常用的查看日志的命令"></a>常用的查看日志的命令</h2><h3 id="tail命令"><a href="#tail命令" class="headerlink" title="tail命令"></a>tail命令</h3><h4 id="tail-100f-test-log-实时监控100行日志"><a href="#tail-100f-test-log-实时监控100行日志" class="headerlink" title="tail -100f test.log    实时监控100行日志"></a>tail -100f test.log    实时监控100行日志</h4><h4 id="tail-n-10-test-log-查询日志尾部最后10行的日志"><a href="#tail-n-10-test-log-查询日志尾部最后10行的日志" class="headerlink" title="tail -n 10 test.log  查询日志尾部最后10行的日志;"></a>tail -n 10 test.log  查询日志尾部最后10行的日志;</h4><h4 id="tail-n-10-test-log-查询10行之后的所有日志"><a href="#tail-n-10-test-log-查询10行之后的所有日志" class="headerlink" title="tail -n +10 test.log  查询10行之后的所有日志;"></a>tail -n +10 test.log  查询10行之后的所有日志;</h4><h3 id="head命令"><a href="#head命令" class="headerlink" title="head命令"></a>head命令</h3><p>跟tail是相反的，tail是看后多少行日志；例子如下：</p>
<p>​      head -n 10 test.log  查询日志文件中的头10行日志;</p>
<p>​      head -n -10 test.log  查询日志文件除了最后10行的其他所有日志;</p>
<h3 id="cat命令"><a href="#cat命令" class="headerlink" title="cat命令"></a>cat命令</h3><p>tac是倒序查看，是cat单词反写；例子如下：</p>
<p>​      <strong>cat -n test.log |grep “debug”  查询关键字的日志</strong></p>
<h3 id="日志使用场景"><a href="#日志使用场景" class="headerlink" title="日志使用场景"></a>日志使用场景</h3><h4 id="应用场景一：按行号查看—过滤出关键字附近的日志"><a href="#应用场景一：按行号查看—过滤出关键字附近的日志" class="headerlink" title="应用场景一：按行号查看—过滤出关键字附近的日志"></a>应用场景一：按行号查看—过滤出关键字附近的日志</h4><ul>
<li><p>cat -n test.log |grep “debug” 得到关键日志的行号</p>
</li>
<li><p>cat -n test.log |tail -n +92|head -n 20  选择关键字所在的中间一行. 然后查看这个关键字前10行和后10行的日志:</p>
</li>
</ul>
<p>​      tail -n +92表示查询92行之后的日志</p>
<p>​      head -n 20 则表示在前面的查询结果里再查前20条记录</p>
<h4 id="应用场景二：根据日期查询日志"><a href="#应用场景二：根据日期查询日志" class="headerlink" title="应用场景二：根据日期查询日志"></a>应用场景二：根据日期查询日志</h4><p> sed -n ‘/2014-12-17 16:17:20/,/2014-12-17 16:17:36/p’ test.log</p>
<p>   特别说明:上面的两个日期必须是日志中打印出来的日志,否则无效；</p>
<p>​           先 grep ‘2014-12-17 16:17:20’ test.log 来确定日志中是否有该 时间点</p>
<h4 id="应用场景三：日志内容特别多，打印在屏幕上不方便查看"><a href="#应用场景三：日志内容特别多，打印在屏幕上不方便查看" class="headerlink" title="应用场景三：日志内容特别多，打印在屏幕上不方便查看"></a>应用场景三：日志内容特别多，打印在屏幕上不方便查看</h4><p> (1)使用more和less命令,</p>
<p>​      如： cat -n test.log |grep “debug” |more   这样就分页打印了,通过点击空格键翻页</p>
<p>  (2)使用 &gt;xxx.txt 将其保存到文件中,到时可以拉下这个文件分析</p>
<p>​      如：cat -n test.log |grep “debug” &gt;debug.txt</p>
<h4 id="查询具体到某个时间段的日志"><a href="#查询具体到某个时间段的日志" class="headerlink" title="查询具体到某个时间段的日志"></a>查询具体到某个时间段的日志</h4><p>grep ‘2020-12-01 14:3[4-8]’ test.log</p>
<hr>
<p>grep ‘async quote orderId:Order20122220132768210736’ ins-trade.2020-12-22.log</p>
<p>grep ‘a62262fc43c29db5,5b171184b055d2fc’ ins-trade.2020-12-22.log -C 10 |grep yj-quote-executor-thread-7 -C 10</p>
<hr>
<p>select * from ins_vehicle_order<br> where ins_order_id = ‘Order20122220132768210736’;</p>
<p> select * from ins_order_file where business_order_id = ‘Order20122220132768210736’;<br> select * from ins_file where id in (269104,269105) ;</p>
]]></content>
      <categories>
        <category>命令</category>
      </categories>
      <tags>
        <tag>脚本</tag>
        <tag>shell命令</tag>
        <tag>git命令</tag>
      </tags>
  </entry>
  <entry>
    <title>java8新特性</title>
    <url>/blog/2021/01/11/Java8%E6%96%B0%E7%89%B9%E6%80%A7/</url>
    <content><![CDATA[<p>Lambda表达式（也叫做闭包）是Java 8中最大的也是期待已久的变化。它允许我们将一个函数当作方法的参数（传递函数），或者说把代码当作数据，这是每个函数式编程者熟悉的概念。很多基于JVM平台的语言一开始就支持Lambda表达式，但是Java程序员没有选择，只能使用匿名内部类来替代Lambda表达式。</p>
<a id="more"></a>

<h1 id="forEach循环"><a href="#forEach循环" class="headerlink" title="forEach循环"></a>forEach循环</h1><h2 id="第一种，最简单的一种"><a href="#第一种，最简单的一种" class="headerlink" title="第一种，最简单的一种"></a>第一种，最简单的一种</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Arrays.asList(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>).forEach(System.out::println);</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br></pre></td></tr></table></figure>

<h2 id="第二种结果与第一种相同"><a href="#第二种结果与第一种相同" class="headerlink" title="第二种结果与第一种相同"></a>第二种结果与第一种相同</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Arrays.asList(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>).forEach((String e) -&gt; System.out.println(e));</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br></pre></td></tr></table></figure>

<h2 id="可以增加参数打印"><a href="#可以增加参数打印" class="headerlink" title="可以增加参数打印"></a>可以增加参数打印</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String separator = <span class="string">&quot;,&quot;</span>;</span><br><span class="line">Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>).forEach((String e) -&gt; System.out.println(e + separator));</span><br><span class="line">a,</span><br><span class="line">b,</span><br><span class="line">c,</span><br></pre></td></tr></table></figure>

<h2 id="排序打印"><a href="#排序打印" class="headerlink" title="排序打印"></a>排序打印</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; asList = Arrays.asList(<span class="string">&quot;b&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line">asList.sort((o1, o2) -&gt; o1.compareTo(o2));</span><br><span class="line">asList.forEach(System.out::println);</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br></pre></td></tr></table></figure>

<p>等同于：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; asList = Arrays.asList(<span class="string">&quot;b&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line">asList.sort(String::compareTo);</span><br><span class="line">asList.forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<p>等同于</p>
]]></content>
      <categories>
        <category>java8</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>随笔</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis-Plus学习</title>
    <url>/blog/2021/01/17/MyBatis-plus/</url>
    <content><![CDATA[<p><a href="https://github.com/baomidou/mybatis-plus">MyBatis-Plus</a>（简称 MP）是一个 <a href="http://www.mybatis.org/mybatis-3/">MyBatis</a> 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。</p>
<a id="more"></a>

<h1 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h1><h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul>
<li><strong>无侵入</strong>：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑</li>
<li><strong>损耗小</strong>：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作</li>
<li><strong>强大的 CRUD 操作</strong>：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求</li>
<li><strong>支持 Lambda 形式调用</strong>：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li>
<li><strong>支持多种数据库</strong>：支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、SQLServer2005、SQLServer 等多种数据库</li>
<li><strong>支持主键自动生成</strong>：支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解决主键问题</li>
<li><strong>支持 XML 热加载</strong>：Mapper 对应的 XML 支持热加载，对于简单的 CRUD 操作，甚至可以无 XML 启动</li>
<li><strong>支持 ActiveRecord 模式</strong>：支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操作</li>
<li><strong>支持自定义全局通用操作</strong>：支持全局通用方法注入（ Write once, use anywhere ）</li>
<li><strong>支持关键词自动转义</strong>：支持数据库关键词（order、key……）自动转义，还可自定义关键词</li>
<li><strong>内置代码生成器</strong>：采用代码或者 Maven 插件可快速生成 Mapper 、 Model 、 Service 、 Controller 层代码，支持模板引擎，更有超多自定义配置等您来使用</li>
<li><strong>内置分页插件</strong>：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询</li>
<li><strong>内置性能分析插件</strong>：可输出 Sql 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</li>
<li><strong>内置全局拦截插件</strong>：提供全表 delete 、 update 操作智能分析阻断，也可自定义拦截规则，预防误操作</li>
<li><strong>内置 Sql 注入剥离器</strong>：支持 Sql 注入剥离，有效预防 Sql 注入攻击</li>
</ul>
<h2 id="构建工程"><a href="#构建工程" class="headerlink" title="构建工程"></a>构建工程</h2><p>新建springBoot工程，并且添加相关依赖：</p>
<p><code>spring-boot-starter</code>、<code>spring-boot-starter-test</code>、<code>mybatis-plus-boot-starter</code>、<code>MySQL</code>、<code>lombok</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--mybatis-plus--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在yml文件中配置</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus?serverTimezone=GMT%2B8</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">zS123.</span></span><br><span class="line"><span class="comment"># 日志配置</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure>

<h2 id="开始使用"><a href="#开始使用" class="headerlink" title="开始使用"></a>开始使用</h2><h3 id="主类"><a href="#主类" class="headerlink" title="主类"></a>主类</h3><p>在springBoot启动类上添加@MapperScan注解</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@MapperScan(&quot;com.mybaitis_plus.demo.Mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实体"><a href="#实体" class="headerlink" title="实体"></a>实体</h3><p>创建entity包编写实体类User.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="创建Mapper接口"><a href="#创建Mapper接口" class="headerlink" title="创建Mapper接口"></a>创建Mapper接口</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mybaitis_plus.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mybaitis_plus.demo.Mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.mybaitis_plus.demo.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Assertions;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;User&gt; users = userMapper.selectList(<span class="keyword">null</span>);</span><br><span class="line">        users.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ==&gt;  Preparing: SELECT id,name,age,email,create_time,update_time,version FROM user </span><br><span class="line">==&gt; Parameters: </span><br><span class="line">&lt;==    Columns: id, name, age, email, create_time, update_time, version</span><br><span class="line">&lt;==        Row: <span class="number">1</span>, Jone, <span class="number">18</span>, test1<span class="meta">@baomidou</span>.com, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span></span><br><span class="line">&lt;==        Row: <span class="number">2</span>, Jack, <span class="number">120</span>, test2<span class="meta">@baomidou</span>.com, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span></span><br><span class="line">&lt;==        Row: <span class="number">3</span>, Tom, <span class="number">28</span>, test3<span class="meta">@baomidou</span>.com, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span></span><br><span class="line">&lt;==        Row: <span class="number">4</span>, Sandy, <span class="number">21</span>, test4<span class="meta">@baomidou</span>.com, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span></span><br><span class="line">&lt;==        Row: <span class="number">5</span>, Billie, <span class="number">24</span>, test5<span class="meta">@baomidou</span>.com, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span></span><br><span class="line">&lt;==        Row: <span class="number">123</span>, Tom, <span class="number">13</span>, <span class="number">163</span><span class="meta">@qq</span>.com, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span></span><br><span class="line">&lt;==        Row: <span class="number">1350690530678820866</span>, Tom, <span class="number">13</span>, <span class="number">163</span><span class="meta">@qq</span>.com, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span></span><br><span class="line">&lt;==        Row: <span class="number">1350695049487712257</span>, Tom, <span class="number">13</span>, <span class="number">163</span><span class="meta">@qq</span>.com, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span></span><br><span class="line">&lt;==        Row: <span class="number">1350695559137624066</span>, Tom, <span class="number">13</span>, <span class="number">163</span><span class="meta">@qq</span>.com, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span></span><br><span class="line">&lt;==        Row: <span class="number">1350695968782802945</span>, Tom, <span class="number">13</span>, <span class="number">163</span><span class="meta">@qq</span>.com, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span></span><br><span class="line">&lt;==        Row: <span class="number">1350701498381185025</span>, Tom, <span class="number">13</span>, <span class="number">163</span><span class="meta">@qq</span>.com, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span></span><br><span class="line">&lt;==        Row: <span class="number">1350719491010035714</span>, Tom, <span class="number">120</span>, <span class="number">163</span><span class="meta">@qq</span>.com, <span class="number">2021</span>-<span class="number">01</span>-<span class="number">17</span> <span class="number">16</span>:<span class="number">19</span>:<span class="number">56</span>, <span class="number">2021</span>-<span class="number">01</span>-<span class="number">17</span> <span class="number">16</span>:<span class="number">22</span>:<span class="number">13</span>, <span class="keyword">null</span></span><br><span class="line">&lt;==        Row: <span class="number">1356574076241006594</span>, Tom, <span class="number">13</span>, <span class="number">163</span><span class="meta">@qq</span>.com, <span class="number">2021</span>-<span class="number">02</span>-<span class="number">02</span> <span class="number">20</span>:<span class="number">03</span>:<span class="number">58</span>, <span class="number">2021</span>-<span class="number">02</span>-<span class="number">02</span> <span class="number">20</span>:<span class="number">03</span>:<span class="number">58</span>, <span class="keyword">null</span></span><br><span class="line">&lt;==      Total: <span class="number">13</span></span><br><span class="line">Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@<span class="number">6</span>a638c79]</span><br><span class="line">User(id=<span class="number">1</span>, name=Jone, age=<span class="number">18</span>, email=test1<span class="meta">@baomidou</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">2</span>, name=Jack, age=<span class="number">120</span>, email=test2<span class="meta">@baomidou</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">3</span>, name=Tom, age=<span class="number">28</span>, email=test3<span class="meta">@baomidou</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">4</span>, name=Sandy, age=<span class="number">21</span>, email=test4<span class="meta">@baomidou</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">5</span>, name=Billie, age=<span class="number">24</span>, email=test5<span class="meta">@baomidou</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">123</span>, name=Tom, age=<span class="number">13</span>, email=<span class="number">163</span><span class="meta">@qq</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">1350690530678820866</span>, name=Tom, age=<span class="number">13</span>, email=<span class="number">163</span><span class="meta">@qq</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">1350695049487712257</span>, name=Tom, age=<span class="number">13</span>, email=<span class="number">163</span><span class="meta">@qq</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">1350695559137624066</span>, name=Tom, age=<span class="number">13</span>, email=<span class="number">163</span><span class="meta">@qq</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">1350695968782802945</span>, name=Tom, age=<span class="number">13</span>, email=<span class="number">163</span><span class="meta">@qq</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">1350701498381185025</span>, name=Tom, age=<span class="number">13</span>, email=<span class="number">163</span><span class="meta">@qq</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">1350719491010035714</span>, name=Tom, age=<span class="number">120</span>, email=<span class="number">163</span><span class="meta">@qq</span>.com, createTime=Sun Jan <span class="number">17</span> <span class="number">16</span>:<span class="number">19</span>:<span class="number">56</span> CST <span class="number">2021</span>, updateTime=Sun Jan <span class="number">17</span> <span class="number">16</span>:<span class="number">22</span>:<span class="number">13</span> CST <span class="number">2021</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">1356574076241006594</span>, name=Tom, age=<span class="number">13</span>, email=<span class="number">163</span><span class="meta">@qq</span>.com, createTime=Tue Feb <span class="number">02</span> <span class="number">20</span>:<span class="number">03</span>:<span class="number">58</span> CST <span class="number">2021</span>, updateTime=Tue Feb <span class="number">02</span> <span class="number">20</span>:<span class="number">03</span>:<span class="number">58</span> CST <span class="number">2021</span>, version=<span class="keyword">null</span>)</span><br><span class="line"><span class="number">2021</span>-<span class="number">02</span>-<span class="number">02</span> <span class="number">20</span>:<span class="number">32</span>:<span class="number">11.232</span>  INFO <span class="number">12704</span> --- [extShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-<span class="number">1</span> - Shutdown initiated...</span><br><span class="line"><span class="number">2021</span>-<span class="number">02</span>-<span class="number">02</span> <span class="number">20</span>:<span class="number">32</span>:<span class="number">11.239</span>  INFO <span class="number">12704</span> --- [extShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-<span class="number">1</span> - Shutdown completed.</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="MyBatis-puls之CRUD"><a href="#MyBatis-puls之CRUD" class="headerlink" title="MyBatis-puls之CRUD"></a>MyBatis-puls之CRUD</h2><h3 id="插入操作-Insert"><a href="#插入操作-Insert" class="headerlink" title="插入操作(Insert)"></a>插入操作(Insert)</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = User.builder()</span><br><span class="line">            .age(<span class="number">13</span>)</span><br><span class="line">            .name(<span class="string">&quot;Tom&quot;</span>)</span><br><span class="line">            .email(<span class="string">&quot;163@qq.com&quot;</span>)</span><br><span class="line">            .build();</span><br><span class="line">    <span class="keyword">int</span> insert = userMapper.insert(user); <span class="comment">// 影响的行数</span></span><br><span class="line">    Assertions.assertEquals(insert,<span class="number">1</span>); <span class="comment">// id自动回填</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong> ：数据库插入id值默认为全局唯一id</p>
<h3 id="主键策略"><a href="#主键策略" class="headerlink" title="主键策略"></a>主键策略</h3><ul>
<li>ID_WORKER</li>
</ul>
<blockquote>
<p>MyBatis-Plus默认的主键策略是：ID_WORKER  <em>全局唯一ID</em></p>
</blockquote>
<p><strong>参考资料：分布式系统唯一ID生成方案汇总：</strong><a href="https://www.cnblogs.com/haoxinyue/p/5208136.html">https://www.cnblogs.com/haoxinyue/p/5208136.html</a></p>
<ul>
<li><p>自增策略</p>
<ul>
<li><p>需要在创建数据表的时候设置主键自增</p>
</li>
<li><p>实体字段中配置 @TableId(type = IdType.AUTO)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line"><span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>想要影响所有实体的配置，可以设置全局主键配置</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#全局设置主键生成策略</span></span><br><span class="line"><span class="string">mybatis-plus.global-config.db-config.id-type=auto</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>其他主键策略，分析IdType源码可知</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">IdType</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据库ID自增</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    AUTO(<span class="number">0</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 该类型为未设置主键类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    NONE(<span class="number">1</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户输入ID</span></span><br><span class="line"><span class="comment">     * 该类型可以通过自己注册自动填充插件进行填充</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    INPUT(<span class="number">2</span>),</span><br><span class="line">    <span class="comment">/* 以下3种类型、只有当插入对象ID 为空，才自动填充。 */</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 全局唯一ID (idWorker)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ID_WORKER(<span class="number">3</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 全局唯一ID (UUID)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    UUID(<span class="number">4</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 字符串全局唯一ID (idWorker 的字符串表示)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ID_WORKER_STR(<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> key;</span><br><span class="line">    IdType(<span class="keyword">int</span> key) &#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="更新操作-update"><a href="#更新操作-update" class="headerlink" title="更新操作(update)"></a>更新操作(update)</h3><h4 id="根据ID更新操作"><a href="#根据ID更新操作" class="headerlink" title="根据ID更新操作"></a>根据ID更新操作</h4><p><strong>注意：</strong>update时生成的sql自动是动态sql：UPDATE user SET age=? WHERE id=? </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = User.builder()</span><br><span class="line">            .id(<span class="number">1350719491010035714L</span>)</span><br><span class="line">            .age(<span class="number">120</span>)</span><br><span class="line">            .build();</span><br><span class="line">    <span class="keyword">int</span> row = userMapper.updateById(user); <span class="comment">// 受影响的行数</span></span><br><span class="line">    System.out.println(row);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="自动填充"><a href="#自动填充" class="headerlink" title="自动填充"></a>自动填充</h4><blockquote>
<p>项目中经常会遇到一些数据，每次都使用相同的方式填充，例如记录的<strong>创建时间</strong>，<strong>更新时间</strong>等。</p>
<p>我们可以使用MyBatis Plus的自动填充功能，完成这些字段的赋值工作：</p>
</blockquote>
<h5 id="数据库表中的自动填充"><a href="#数据库表中的自动填充" class="headerlink" title="数据库表中的自动填充"></a>数据库表中的自动填充</h5><blockquote>
<p>在User表中添加datetime类型的新的字段 <strong>create_time</strong>、<strong>update_time</strong></p>
</blockquote>
<h5 id="实体类上添加注解"><a href="#实体类上添加注解" class="headerlink" title="实体类上添加注解"></a>实体类上添加注解</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> Date updateTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="实现源对象的接口"><a href="#实现源对象的接口" class="headerlink" title="实现源对象的接口"></a>实现源对象的接口</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyHandler</span> <span class="keyword">implements</span> <span class="title">MetaObjectHandler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;start insert fill...&quot;</span>);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;createTime&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;start update fill...&quot;</span>);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="乐观锁"><a href="#乐观锁" class="headerlink" title="乐观锁"></a>乐观锁</h4><blockquote>
<p><strong>主要适用场景：</strong>当要更新一条记录的时候，希望这条记录没有被别人更新，也就是说实现线程安全的数据更新</p>
</blockquote>
<p><strong>乐观锁实现方式：</strong></p>
<ul>
<li>取出记录时，获取当前version</li>
<li>更新时，带上这个version</li>
<li>执行更新时， set version = newVersion where version = oldVersion</li>
<li>如果version不对，就更新失败</li>
</ul>
<h5 id="数据库中添加version字段"><a href="#数据库中添加version字段" class="headerlink" title="数据库中添加version字段"></a>数据库中添加version字段</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`user`</span> <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> <span class="string">`version`</span> <span class="built_in">INT</span></span><br></pre></td></tr></table></figure>

<h5 id="实体类添加version字段"><a href="#实体类添加version字段" class="headerlink" title="实体类添加version字段"></a>实体类添加version字段</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Version</span></span><br><span class="line"><span class="keyword">private</span> Integer version;</span><br></pre></td></tr></table></figure>

<h5 id="设置源对象初始值"><a href="#设置源对象初始值" class="headerlink" title="设置源对象初始值"></a>设置源对象初始值</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;start insert fill...&quot;</span>);</span><br><span class="line">    <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;createTime&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">    <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">    <span class="comment">// 设置version初始值</span></span><br><span class="line">    <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;version&quot;</span>, <span class="number">1</span>, metaObject);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ul>
<li>支持的数据类型只有 int,Integer,long,Long,Date,Timestamp,LocalDateTime</li>
<li>整数类型下 <code>newVersion = oldVersion + 1</code></li>
<li><code>newVersion</code> 会回写到 <code>entity</code> 中</li>
<li>仅支持 <code>updateById(id)</code> 与 <code>update(entity, wrapper)</code> 方法</li>
<li>在 <code>update(entity, wrapper)</code> 方法下, <code>wrapper</code> 不能复用!!!</li>
</ul>
<h5 id="创建配置类"><a href="#创建配置类" class="headerlink" title="创建配置类"></a>创建配置类</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.OptimisticLockerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.EnableTransactionManagement;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.mybaitis_plus.demo.Mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 乐观锁插件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> OptimisticLockerInterceptor <span class="title">optimisticLockerInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> OptimisticLockerInterceptor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="测试乐观锁可以修改成功"><a href="#测试乐观锁可以修改成功" class="headerlink" title="测试乐观锁可以修改成功"></a>测试乐观锁可以修改成功</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">versionTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 查询</span></span><br><span class="line">    User user = userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    <span class="comment">// 修改数据</span></span><br><span class="line">    user.setAge(<span class="number">600</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;222@qq.com&quot;</span>);</span><br><span class="line">    <span class="comment">// 执行更新</span></span><br><span class="line">    userMapper.updateById(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="测试乐观锁修改失败"><a href="#测试乐观锁修改失败" class="headerlink" title="测试乐观锁修改失败"></a>测试乐观锁修改失败</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">versionTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 查询</span></span><br><span class="line">    User user = userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    <span class="comment">// 修改数据</span></span><br><span class="line">    user.setAge(<span class="number">60</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;333@qq.com&quot;</span>);</span><br><span class="line">    <span class="comment">// 模拟取出数据后，数据库中version实际数据比取出的值大，即已被其它线程修改并更新了version</span></span><br><span class="line">    user.setVersion(user.getVersion() - <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// 执行更新</span></span><br><span class="line">    userMapper.updateById(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="查询操作-select"><a href="#查询操作-select" class="headerlink" title="查询操作(select)"></a>查询操作(select)</h3><h4 id="根据id查询"><a href="#根据id查询" class="headerlink" title="根据id查询"></a>根据id查询</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br><span class="line">User(id=<span class="number">1</span>, name=Jone, age=<span class="number">600</span>, email=<span class="number">222</span><span class="meta">@qq</span>.com, createTime=<span class="keyword">null</span>, updateTime=Tue Feb <span class="number">02</span> <span class="number">21</span>:<span class="number">04</span>:<span class="number">07</span> CST <span class="number">2021</span>, version=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<h4 id="批量查询"><a href="#批量查询" class="headerlink" title="批量查询"></a>批量查询</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectBatchTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectBatchIds(Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line">User(id=<span class="number">1</span>, name=Jone, age=<span class="number">600</span>, email=<span class="number">222</span><span class="meta">@qq</span>.com, createTime=<span class="keyword">null</span>, updateTime=Tue Feb <span class="number">02</span> <span class="number">21</span>:<span class="number">04</span>:<span class="number">07</span> CST <span class="number">2021</span>, version=<span class="number">2</span>)</span><br><span class="line">User(id=<span class="number">2</span>, name=Jack, age=<span class="number">120</span>, email=test2<span class="meta">@baomidou</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">3</span>, name=Tom, age=<span class="number">28</span>, email=test3<span class="meta">@baomidou</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br></pre></td></tr></table></figure>

<h4 id="简单条件查询"><a href="#简单条件查询" class="headerlink" title="简单条件查询"></a>简单条件查询</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectByMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;() &#123;&#123;</span><br><span class="line">        put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">        put(<span class="string">&quot;age&quot;</span>, <span class="number">28</span>);</span><br><span class="line">    &#125;&#125;;</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectByMap(map);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line">User(id=<span class="number">3</span>, name=Tom, age=<span class="number">28</span>, email=test3<span class="meta">@baomidou</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br></pre></td></tr></table></figure>

<h3 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h3><p>MyBatis Plus自带分页插件，只要简单的配置即可实现分页功能</p>
<h4 id="创建配置类-1"><a href="#创建配置类-1" class="headerlink" title="创建配置类"></a>创建配置类</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分页插件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> PaginationInterceptor <span class="title">paginationInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> PaginationInterceptor();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="测试分页查询"><a href="#测试分页查询" class="headerlink" title="测试分页查询"></a>测试分页查询</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Page&lt;User&gt; page = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line">    userMapper.selectPage(page, <span class="keyword">null</span>);</span><br><span class="line">    page.getRecords().forEach(System.out::println);</span><br><span class="line">    System.out.println(page.getCurrent()); <span class="comment">// 1</span></span><br><span class="line">    System.out.println(page.getPages()); <span class="comment">// 3</span></span><br><span class="line">    System.out.println(page.getSize()); <span class="comment">// 5</span></span><br><span class="line">    System.out.println(page.getTotal()); <span class="comment">// 13</span></span><br><span class="line">    System.out.println(page.hasNext()); <span class="comment">// true</span></span><br><span class="line">    System.out.println(page.hasPrevious()); <span class="comment">// false</span></span><br><span class="line">&#125;</span><br><span class="line">SELECT id,name,age,email,create_time,update_time,version FROM user LIMIT <span class="number">0</span>,<span class="number">5</span></span><br><span class="line">    </span><br><span class="line">User(id=<span class="number">1</span>, name=Jone, age=<span class="number">600</span>, email=<span class="number">222</span><span class="meta">@qq</span>.com, createTime=<span class="keyword">null</span>, updateTime=Tue Feb <span class="number">02</span> <span class="number">21</span>:<span class="number">04</span>:<span class="number">07</span> CST <span class="number">2021</span>, version=<span class="number">2</span>)</span><br><span class="line">User(id=<span class="number">2</span>, name=Jack, age=<span class="number">120</span>, email=test2<span class="meta">@baomidou</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">3</span>, name=Tom, age=<span class="number">28</span>, email=test3<span class="meta">@baomidou</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">4</span>, name=Sandy, age=<span class="number">21</span>, email=test4<span class="meta">@baomidou</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br><span class="line">User(id=<span class="number">5</span>, name=Billie, age=<span class="number">24</span>, email=test5<span class="meta">@baomidou</span>.com, createTime=<span class="keyword">null</span>, updateTime=<span class="keyword">null</span>, version=<span class="keyword">null</span>)</span><br></pre></td></tr></table></figure>

<h4 id="测试selectMapsPage分页：结果集是map"><a href="#测试selectMapsPage分页：结果集是map" class="headerlink" title="测试selectMapsPage分页：结果集是map"></a>测试selectMapsPage分页：结果集是map</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectPageMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Page&lt;User&gt; page = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">1</span>, <span class="number">5</span>);</span><br><span class="line">    IPage&lt;Map&lt;String, Object&gt;&gt; mapIPage = userMapper.selectMapsPage(page, <span class="keyword">null</span>);</span><br><span class="line">    mapIPage.getRecords().forEach(System.out::println);</span><br><span class="line">    System.out.println(page.getCurrent());</span><br><span class="line">    System.out.println(page.getPages());</span><br><span class="line">    System.out.println(page.getSize());</span><br><span class="line">    System.out.println(page.getTotal());</span><br><span class="line">    System.out.println(page.hasNext());</span><br><span class="line">    System.out.println(page.hasPrevious());</span><br><span class="line">&#125;</span><br><span class="line">&#123;update_time=<span class="number">2021</span>-<span class="number">02</span>-<span class="number">02</span> <span class="number">21</span>:<span class="number">04</span>:<span class="number">07</span>.<span class="number">0</span>, name=Jone, id=<span class="number">1</span>, version=<span class="number">2</span>, age=<span class="number">600</span>, email=<span class="number">222</span><span class="meta">@qq</span>.com&#125;</span><br><span class="line">&#123;name=Jack, id=<span class="number">2</span>, age=<span class="number">120</span>, email=test2<span class="meta">@baomidou</span>.com&#125;</span><br><span class="line">&#123;name=Tom, id=<span class="number">3</span>, age=<span class="number">28</span>, email=test3<span class="meta">@baomidou</span>.com&#125;</span><br><span class="line">&#123;name=Sandy, id=<span class="number">4</span>, age=<span class="number">21</span>, email=test4<span class="meta">@baomidou</span>.com&#125;</span><br><span class="line">&#123;name=Billie, id=<span class="number">5</span>, age=<span class="number">24</span>, email=test5<span class="meta">@baomidou</span>.com&#125;</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">13</span></span><br><span class="line"><span class="keyword">true</span></span><br><span class="line"><span class="keyword">false</span></span><br></pre></td></tr></table></figure>

<h3 id="删除操作-delete"><a href="#删除操作-delete" class="headerlink" title="删除操作(delete)"></a>删除操作(delete)</h3><h4 id="根据id删除"><a href="#根据id删除" class="headerlink" title="根据id删除"></a>根据id删除</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delegateByIdTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(userMapper.deleteById(<span class="number">2L</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<h4 id="批量删除"><a href="#批量删除" class="headerlink" title="批量删除"></a>批量删除</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delegateBatchIds</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(userMapper.deleteBatchIds(Arrays.asList(<span class="number">1</span>, <span class="number">2</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="简单的条件查询删除"><a href="#简单的条件查询删除" class="headerlink" title="简单的条件查询删除"></a>简单的条件查询删除</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeleteByMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Helen&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;age&quot;</span>, <span class="number">18</span>);</span><br><span class="line">    <span class="keyword">int</span> result = userMapper.deleteByMap(map);</span><br><span class="line">    System.out.println(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="逻辑删除"><a href="#逻辑删除" class="headerlink" title="逻辑删除"></a>逻辑删除</h4><ul>
<li>物理删除：真实删除，将对应数据从数据库中删除，之后查询不到此条被删除数据</li>
<li>逻辑删除：假删除，将对应数据中代表是否被删除字段状态修改为“被删除状态”，之后在数据库中仍旧能看到此条数据记录</li>
</ul>
<h5 id="数据库中新增deleted字段"><a href="#数据库中新增deleted字段" class="headerlink" title="数据库中新增deleted字段"></a>数据库中新增deleted字段</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`user`</span> <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> <span class="string">`deleted`</span> <span class="built_in">boolean</span></span><br></pre></td></tr></table></figure>

<h5 id="实体类添加deleted字段"><a href="#实体类添加deleted字段" class="headerlink" title="实体类添加deleted字段"></a>实体类添加deleted字段</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@TableLogic</span> <span class="comment">// 逻辑删除</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> Integer deleted;</span><br></pre></td></tr></table></figure>

<h5 id="application-yml文件中加入配置"><a href="#application-yml文件中加入配置" class="headerlink" title="application.yml文件中加入配置"></a>application.yml文件中加入配置</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>

<h5 id="在mybatisPlusConfig中注册Bean"><a href="#在mybatisPlusConfig中注册Bean" class="headerlink" title="在mybatisPlusConfig中注册Bean"></a>在mybatisPlusConfig中注册Bean</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 逻辑删除</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ISqlInjector <span class="title">sqlInjector</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LogicSqlInjector();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong> ：数据库中deleted必须有值</p>
<h2 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h2><p><a href="https://imgchr.com/i/ywHcm8"><img src="https://s3.ax1x.com/2021/02/10/ywHcm8.png" alt="ywHcm8.png"></a></p>
<ul>
<li>Wrapper ： 条件构造抽象类，最顶端父类</li>
<li>AbstractWrapper ： 用于查询条件封装，生成 sql 的 where 条件</li>
<li>QueryWrapper ： Entity 对象封装操作类，不是用lambda语法</li>
<li>UpdateWrapper ： Update 条件封装，用于Entity对象更新操作</li>
<li>AbstractLambdaWrapper ： Lambda 语法使用 Wrapper统一处理解析 lambda 获取 column。</li>
<li>LambdaQueryWrapper ：用于Lambda语法使用的查询Wrapper</li>
<li>LambdaUpdateWrapper ： Lambda 更新封装Wrapper</li>
</ul>
<table>
<thead>
<tr>
<th>查询方式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>setSqlSelect</td>
<td>设置 SELECT 查询字段</td>
</tr>
<tr>
<td>where</td>
<td>WHERE 语句，拼接 + <code>WHERE 条件</code></td>
</tr>
<tr>
<td>and</td>
<td>AND 语句，拼接 + <code>AND 字段=值</code></td>
</tr>
<tr>
<td>andNew</td>
<td>AND 语句，拼接 + <code>AND (字段=值)</code></td>
</tr>
<tr>
<td>or</td>
<td>OR 语句，拼接 + <code>OR 字段=值</code></td>
</tr>
<tr>
<td>orNew</td>
<td>OR 语句，拼接 + <code>OR (字段=值)</code></td>
</tr>
<tr>
<td>eq</td>
<td>等于=</td>
</tr>
<tr>
<td>allEq</td>
<td>基于 map 内容等于=</td>
</tr>
<tr>
<td>ne</td>
<td>不等于&lt;&gt;</td>
</tr>
<tr>
<td>gt</td>
<td>大于&gt;</td>
</tr>
<tr>
<td>ge</td>
<td>大于等于&gt;=</td>
</tr>
<tr>
<td>lt</td>
<td>小于&lt;</td>
</tr>
<tr>
<td>le</td>
<td>小于等于&lt;=</td>
</tr>
<tr>
<td>like</td>
<td>模糊查询 LIKE</td>
</tr>
<tr>
<td>notLike</td>
<td>模糊查询 NOT LIKE</td>
</tr>
<tr>
<td>in</td>
<td>IN 查询</td>
</tr>
<tr>
<td>notIn</td>
<td>NOT IN 查询</td>
</tr>
<tr>
<td>isNull</td>
<td>NULL 值查询</td>
</tr>
<tr>
<td>isNotNull</td>
<td>IS NOT NULL</td>
</tr>
<tr>
<td>groupBy</td>
<td>分组 GROUP BY</td>
</tr>
<tr>
<td>having</td>
<td>HAVING 关键词</td>
</tr>
<tr>
<td>orderBy</td>
<td>排序 ORDER BY</td>
</tr>
<tr>
<td>orderAsc</td>
<td>ASC 排序 ORDER BY</td>
</tr>
<tr>
<td>orderDesc</td>
<td>DESC 排序 ORDER BY</td>
</tr>
<tr>
<td>exists</td>
<td>EXISTS 条件语句</td>
</tr>
<tr>
<td>notExists</td>
<td>NOT EXISTS 条件语句</td>
</tr>
<tr>
<td>between</td>
<td>BETWEEN 条件语句</td>
</tr>
<tr>
<td>notBetween</td>
<td>NOT BETWEEN 条件语句</td>
</tr>
<tr>
<td>addFilter</td>
<td>自由拼接 SQL</td>
</tr>
<tr>
<td>last</td>
<td>拼接在最后，例如：last(“LIMIT 1”)</td>
</tr>
<tr>
<td><code>addFilterIfNeed</code></td>
<td>其中可以写sql:如,<code>.addFilterIfNeed(StringUtils.equals(userId,&quot;1&quot;),&quot;date_format(FOLLOW_TIME,&#39;%Y-%m-%d&#39;)=date_format(NOW(),&#39;%Y-%m-%d&#39;)&quot;)</code></td>
</tr>
</tbody></table>
<h3 id="ge、gt、le、lt、isNull、isNotNull"><a href="#ge、gt、le、lt、isNull、isNotNull" class="headerlink" title="ge、gt、le、lt、isNull、isNotNull"></a>ge、gt、le、lt、isNull、isNotNull</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 逻辑删除这个范围的数据</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.isNull(<span class="string">&quot;create_time&quot;</span>)</span><br><span class="line">            .isNotNull(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">            .ge(<span class="string">&quot;age&quot;</span>,<span class="number">12</span>);</span><br><span class="line">    System.out.println(userMapper.delete(queryWrapper));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sql：</span><br><span class="line">UPDATE user SET deleted=<span class="number">1</span> WHERE deleted=<span class="number">0</span> AND create_time IS NULL AND name IS NOT NULL AND age &gt;= ? </span><br></pre></td></tr></table></figure>

<h3 id="eq、ne"><a href="#eq、ne" class="headerlink" title="eq、ne"></a>eq、ne</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 输出单个对象</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectOneTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Sandy&quot;</span>);</span><br><span class="line">    User user = userMapper.selectOne(queryWrapper);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sql：</span><br><span class="line">SELECT id,name,age,email,create_time,update_time,version,deleted FROM user WHERE deleted=<span class="number">0</span> AND name = ? </span><br></pre></td></tr></table></figure>

<p>需要注意的是：<code>selectOne</code>当查询到1条以上的数据时候，会抛错</p>
<h3 id="between、notBetween"><a href="#between、notBetween" class="headerlink" title="between、notBetween"></a>between、notBetween</h3><blockquote>
<p>包含大小边界</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 输出数量</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectCountTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.between(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>, <span class="number">30</span>);</span><br><span class="line">    System.out.println(userMapper.selectCount(queryWrapper));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sql:</span><br><span class="line"><span class="function">SELECT <span class="title">COUNT</span><span class="params">(<span class="number">1</span>)</span> FROM user WHERE deleted</span>=<span class="number">0</span> AND age BETWEEN ? AND ? </span><br></pre></td></tr></table></figure>

<h3 id="allEq"><a href="#allEq" class="headerlink" title="allEq"></a>allEq</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 查询list</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectListTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;() &#123;&#123;</span><br><span class="line">        put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Sandy&quot;</span>);</span><br><span class="line">        put(<span class="string">&quot;age&quot;</span>, <span class="number">21</span>);</span><br><span class="line">    &#125;&#125;;</span><br><span class="line">    queryWrapper.allEq(map);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sql：</span><br><span class="line">SELECT id,name,age,email,create_time,update_time,version,deleted FROM user WHERE deleted=<span class="number">0</span> AND name = ? AND age = ? </span><br></pre></td></tr></table></figure>

<h3 id="like、notLike、likeLeft、likeRight"><a href="#like、notLike、likeLeft、likeRight" class="headerlink" title="like、notLike、likeLeft、likeRight"></a>like、notLike、likeLeft、likeRight</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 查询map</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectMapTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.notLike(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;T&quot;</span>)</span><br><span class="line">            .likeRight(<span class="string">&quot;email&quot;</span>, <span class="string">&quot;qq&quot;</span>);</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(queryWrapper);</span><br><span class="line">    maps.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line">Preparing: SELECT id,name,age,email,create_time,update_time,version,deleted FROM user WHERE deleted=<span class="number">0</span> AND name NOT LIKE ? AND email LIKE ? </span><br><span class="line">Parameters: %T%(String), qq%(String)</span><br></pre></td></tr></table></figure>

<h3 id="in、notIn、inSql、notinSql、exists、notExists"><a href="#in、notIn、inSql、notinSql、exists、notExists" class="headerlink" title="in、notIn、inSql、notinSql、exists、notExists"></a>in、notIn、inSql、notinSql、exists、notExists</h3><h4 id="in、notIn"><a href="#in、notIn" class="headerlink" title="in、notIn"></a>in、notIn</h4><ul>
<li><p><code>notIn(&quot;age&quot;,&#123;1,2,3&#125;)</code>—&gt;<code>age not in (1,2,3)</code></p>
</li>
<li><p><code>notIn(&quot;age&quot;, 1, 2, 3)</code>—&gt;<code>age not in (1,2,3)</code></p>
</li>
</ul>
<h4 id="inSql、notinSql：可以实现子查询"><a href="#inSql、notinSql：可以实现子查询" class="headerlink" title="inSql、notinSql：可以实现子查询"></a>inSql、notinSql：可以实现子查询</h4><ul>
<li><p><code>inSql(&quot;age&quot;, &quot;1,2,3,4,5,6&quot;)</code>—&gt;<code>age in (1,2,3,4,5,6)</code></p>
</li>
<li><p><code>inSql(&quot;id&quot;, &quot;select id from table where id &lt; 3&quot;)</code>—&gt;<code>id in (select id from table where id &lt; 3)</code></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectObjs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    <span class="comment">//queryWrapper.in(&quot;id&quot;, 1, 2, 3);</span></span><br><span class="line">    queryWrapper.inSql(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;select id from user where id &lt; 3&quot;</span>);</span><br><span class="line">    List&lt;Object&gt; objects = userMapper.selectObjs(queryWrapper);<span class="comment">//返回值是Object列表</span></span><br><span class="line">    objects.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SELECT id,name,age,email,create_time,update_time,deleted,version FROM user WHERE deleted=<span class="number">0</span> <span class="function">AND id <span class="title">IN</span> <span class="params">(select id from user where id &lt; <span class="number">3</span>)</span> </span></span><br></pre></td></tr></table></figure>

<h3 id="or、and"><a href="#or、and" class="headerlink" title="or、and"></a>or、and</h3><blockquote>
<p>不调用<code>or</code>则默认为使用 <code>and </code>连</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//修改值</span></span><br><span class="line">    User user = User.builder()</span><br><span class="line">            .age(<span class="number">99</span>)</span><br><span class="line">            .name(<span class="string">&quot;Andy&quot;</span>)</span><br><span class="line">            .build();</span><br><span class="line">    <span class="comment">//修改条件</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; userUpdateWrapper = <span class="keyword">new</span> UpdateWrapper&lt;&gt;();</span><br><span class="line">    userUpdateWrapper</span><br><span class="line">        .like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;h&quot;</span>)</span><br><span class="line">        .or()</span><br><span class="line">        .between(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>, <span class="number">30</span>);</span><br><span class="line">    <span class="keyword">int</span> result = userMapper.update(user, userUpdateWrapper);</span><br><span class="line">    System.out.println(result);</span><br><span class="line">&#125;</span><br><span class="line">UPDATE user SET name=?, age=?, update_time=? WHERE deleted=<span class="number">0</span> AND name LIKE ? OR age BETWEEN ? AND ?</span><br></pre></td></tr></table></figure>

<h3 id="嵌套or、嵌套and"><a href="#嵌套or、嵌套and" class="headerlink" title="嵌套or、嵌套and"></a>嵌套or、嵌套and</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//修改值</span></span><br><span class="line">    User user = User.builder()</span><br><span class="line">            .age(<span class="number">99</span>)</span><br><span class="line">            .name(<span class="string">&quot;Andy&quot;</span>)</span><br><span class="line">            .build();</span><br><span class="line">    <span class="comment">//修改条件</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; userUpdateWrapper = <span class="keyword">new</span> UpdateWrapper&lt;&gt;();</span><br><span class="line">    userUpdateWrapper</span><br><span class="line">            .like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;h&quot;</span>)</span><br><span class="line">            .or(i -&gt; i.eq(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;李白&quot;</span>).ne(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>));</span><br><span class="line">    <span class="keyword">int</span> result = userMapper.update(user, userUpdateWrapper);</span><br><span class="line">    System.out.println(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">UPDATE user SET name=?, age=?, update_time=? </span><br><span class="line">WHERE deleted=<span class="number">0</span> AND name LIKE ? </span><br><span class="line">OR ( name = ? AND age &lt;&gt; ? ) </span><br></pre></td></tr></table></figure>

<h3 id="orderBy、orderByDesc、orderByAsc"><a href="#orderBy、orderByDesc、orderByAsc" class="headerlink" title="orderBy、orderByDesc、orderByAsc"></a>orderBy、orderByDesc、orderByAsc</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectListOrderBy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SELECT id,name,age,email,create_time,update_time,deleted,version </span><br><span class="line">FROM user WHERE deleted=<span class="number">0</span> ORDER BY id DESC </span><br></pre></td></tr></table></figure>

<h3 id="last"><a href="#last" class="headerlink" title="last"></a>last</h3><p>直接拼接到 sql 的最后</p>
<p><strong>注意：</strong>只能调用一次,多次调用以最后一次为准 有sql注入的风险,请谨慎使用</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectListLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.last(<span class="string">&quot;limit 1&quot;</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SELECT id,name,age,email,create_time,update_time,deleted,version </span><br><span class="line">FROM user WHERE deleted=<span class="number">0</span> limit <span class="number">1</span> </span><br></pre></td></tr></table></figure>

<h3 id="指定要查询的列"><a href="#指定要查询的列" class="headerlink" title="指定要查询的列"></a>指定要查询的列</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectListColumn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.select(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SELECT id,name,age FROM user WHERE deleted=<span class="number">0</span> </span><br></pre></td></tr></table></figure>

<h3 id="set、setSql"><a href="#set、setSql" class="headerlink" title="set、setSql"></a>set、setSql</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdateSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//修改值</span></span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setAge(<span class="number">99</span>);</span><br><span class="line">    <span class="comment">//修改条件</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; userUpdateWrapper = <span class="keyword">new</span> UpdateWrapper&lt;&gt;();</span><br><span class="line">    userUpdateWrapper</span><br><span class="line">        .like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;h&quot;</span>)</span><br><span class="line">        .set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;老李头&quot;</span>)<span class="comment">//除了可以查询还可以使用set设置修改的字段</span></span><br><span class="line">        .setSql(<span class="string">&quot; email = &#x27;123@qq.com&#x27;&quot;</span>);<span class="comment">//可以有子查询</span></span><br><span class="line">    <span class="keyword">int</span> result = userMapper.update(user, userUpdateWrapper);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">UPDATE user SET age=?, update_time=?, name=?, email = <span class="string">&#x27;123@qq.com&#x27;</span> WHERE deleted=<span class="number">0</span> AND name LIKE ? </span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>随笔</tag>
        <tag>MyBatis-Plus</tag>
      </tags>
  </entry>
</search>
