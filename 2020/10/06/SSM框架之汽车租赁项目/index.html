<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">
  <link rel="manifest" href="/blog/images/manifest.json">
  <meta name="msapplication-config" content="/blog/images/browserconfig.xml">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"gitee.com","root":"/blog/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="涉及技术：前端：layui 后端框架：spring + springMVC +Mybatis+ maven RBAC权限管理，Echarts图形展示 项目github地址">
<meta property="og:type" content="article">
<meta property="og:title" content="SSM框架之汽车租赁系统">
<meta property="og:url" content="https://gitee.com/SHUAI_code/blog.git/2020/10/06/SSM%E6%A1%86%E6%9E%B6%E4%B9%8B%E6%B1%BD%E8%BD%A6%E7%A7%9F%E8%B5%81%E9%A1%B9%E7%9B%AE/index.html">
<meta property="og:site_name" content="哼着我的小调调">
<meta property="og:description" content="涉及技术：前端：layui 后端框架：spring + springMVC +Mybatis+ maven RBAC权限管理，Echarts图形展示 项目github地址">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/10/07/7qehoXM3zfvEVFb.png">
<meta property="og:image" content="https://i.loli.net/2020/10/07/wqvUj5zZdroxuHC.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/13/0hKJx0.jpg">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/13/0hYjTP.jpg">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/13/0ht8Tx.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/13/0htwXd.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/13/0htL3F.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/13/0hDidJ.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/13/0hDmQK.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/13/0hDMee.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/14/05HHjf.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/15/0oQp9g.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/15/0oQCcj.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/15/0TXLGD.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/16/0bm8Zq.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/20/BSa9yT.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/20/BSaoN9.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/21/BC9lhq.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/21/BCsBnA.png">
<meta property="article:published_time" content="2020-10-06T10:40:55.894Z">
<meta property="article:modified_time" content="2020-10-21T08:52:03.890Z">
<meta property="article:author" content="白小纯">
<meta property="article:tag" content="java">
<meta property="article:tag" content="ssm框架">
<meta property="article:tag" content="项目实战">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/10/07/7qehoXM3zfvEVFb.png">

<link rel="canonical" href="https://gitee.com/SHUAI_code/blog.git/2020/10/06/SSM%E6%A1%86%E6%9E%B6%E4%B9%8B%E6%B1%BD%E8%BD%A6%E7%A7%9F%E8%B5%81%E9%A1%B9%E7%9B%AE/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>SSM框架之汽车租赁系统 | 哼着我的小调调</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">哼着我的小调调</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">个人学习与分享</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gitee.com/SHUAI_code/blog.git/2020/10/06/SSM%E6%A1%86%E6%9E%B6%E4%B9%8B%E6%B1%BD%E8%BD%A6%E7%A7%9F%E8%B5%81%E9%A1%B9%E7%9B%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
      <meta itemprop="name" content="白小纯">
      <meta itemprop="description" content="不忘初心，方得始终">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="哼着我的小调调">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SSM框架之汽车租赁系统
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-06 18:40:55" itemprop="dateCreated datePublished" datetime="2020-10-06T18:40:55+08:00">2020-10-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-21 16:52:03" itemprop="dateModified" datetime="2020-10-21T16:52:03+08:00">2020-10-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/SSM%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">SSM项目实战</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>171k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2:36</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>涉及技术：前端：layui</p>
<p>后端框架：spring + springMVC +Mybatis+ maven</p>
<p>RBAC权限管理，Echarts图形展示</p>
<p><a href="https://gitee.com/SHUAI_code/Car.git">项目github地址</a></p>
<a id="more"></a>

<h1 id="功能分析"><a href="#功能分析" class="headerlink" title="功能分析"></a>功能分析</h1><p><img src="https://i.loli.net/2020/10/07/7qehoXM3zfvEVFb.png" alt="汽车出租管理系统.png"></p>
<h2 id="业务功能"><a href="#业务功能" class="headerlink" title="业务功能"></a>业务功能</h2><h3 id="客户管理"><a href="#客户管理" class="headerlink" title="客户管理"></a>客户管理</h3><ul>
<li>客户列表</li>
<li>客户分页和模糊查询</li>
<li>客户添加</li>
<li>客户修改</li>
<li>客户删除</li>
<li>导出客户数据</li>
</ul>
<h3 id="车辆管理"><a href="#车辆管理" class="headerlink" title="车辆管理"></a>车辆管理</h3><ul>
<li>车辆列表</li>
<li>车辆分页和模糊查询</li>
<li>车辆添加</li>
<li>车辆修改</li>
<li>车辆删除</li>
</ul>
<h3 id="汽车出租"><a href="#汽车出租" class="headerlink" title="汽车出租"></a>汽车出租</h3><ul>
<li>根据客户身份证查询所有未出租的车辆信息</li>
<li>汽车出租</li>
</ul>
<h3 id="出租单位管理"><a href="#出租单位管理" class="headerlink" title="出租单位管理"></a>出租单位管理</h3><ul>
<li>多条件模糊查询和分页</li>
<li>出租单修改</li>
<li>出租单删除</li>
<li>导出出租单</li>
</ul>
<h3 id="汽车入库"><a href="#汽车入库" class="headerlink" title="汽车入库"></a>汽车入库</h3><ul>
<li>根据出租单号查询出租单的信息并显示</li>
</ul>
<h3 id="检查单管理"><a href="#检查单管理" class="headerlink" title="检查单管理"></a>检查单管理</h3><ul>
<li>多条件模糊查询和分页</li>
<li>检查单修改</li>
<li>导出检查单</li>
</ul>
<h2 id="统计分析"><a href="#统计分析" class="headerlink" title="统计分析"></a>统计分析</h2><ul>
<li>客户地区图</li>
<li>公式年度月份销售额曲线图</li>
<li>业务员年度销售额柱子图</li>
</ul>
<h2 id="系统功能"><a href="#系统功能" class="headerlink" title="系统功能"></a>系统功能</h2><h3 id="用户登录"><a href="#用户登录" class="headerlink" title="用户登录"></a>用户登录</h3><ul>
<li>校验用户名和密码</li>
<li>登录成功之后写入登录日志</li>
<li>未登录拦截</li>
</ul>
<h3 id="菜单管理"><a href="#菜单管理" class="headerlink" title="菜单管理"></a>菜单管理</h3><ul>
<li>全查询菜单和根据左边的树查询菜单</li>
<li>添加菜单</li>
<li>修改菜单</li>
<li>删除菜单</li>
</ul>
<h3 id="角色管理"><a href="#角色管理" class="headerlink" title="角色管理"></a>角色管理</h3><ul>
<li>全查询加模糊查询</li>
<li>添加角色</li>
<li>修改角色</li>
<li>删除角色</li>
<li>分配菜单</li>
</ul>
<h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><ul>
<li>全查询加模糊查询</li>
<li>添加用户</li>
<li>修改用户</li>
<li>删除用户</li>
<li>分配角色</li>
<li>密码复位</li>
</ul>
<h3 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h3><ul>
<li>修改当前用户的密码</li>
</ul>
<h3 id="日志管理"><a href="#日志管理" class="headerlink" title="日志管理"></a>日志管理</h3><ul>
<li>查询</li>
<li>删除</li>
</ul>
<h3 id="系统公告管理"><a href="#系统公告管理" class="headerlink" title="系统公告管理"></a>系统公告管理</h3><ul>
<li>查询</li>
<li>添加</li>
<li>修改</li>
<li>删除</li>
<li>工作台的系统公告</li>
</ul>
<h1 id="数据库表"><a href="#数据库表" class="headerlink" title="数据库表"></a>数据库表</h1><blockquote>
<p>涉及到11张表</p>
</blockquote>
<h2 id="业务表"><a href="#业务表" class="headerlink" title="业务表"></a>业务表</h2><ul>
<li>客户表（bus_customers）</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>identity</td>
<td>身份证</td>
<td>varhcar</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>custname</td>
<td>姓名</td>
<td>Varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>sex</td>
<td>性别</td>
<td>Int</td>
<td></td>
<td></td>
</tr>
<tr>
<td>address</td>
<td>地址</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>phone</td>
<td>电话</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>career</td>
<td>职位</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>createtime</td>
<td>录入时间</td>
<td>datetime</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>车辆表(bus_cars)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>carnumber</td>
<td>车牌号</td>
<td>varhcar</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>cartype</td>
<td>类型</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>color</td>
<td>颜色</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>price</td>
<td>购买价格</td>
<td>double</td>
<td></td>
<td></td>
</tr>
<tr>
<td>rentprice</td>
<td>出租价格</td>
<td>double</td>
<td></td>
<td></td>
</tr>
<tr>
<td>deposit</td>
<td>押金</td>
<td>double</td>
<td></td>
<td></td>
</tr>
<tr>
<td>isrenting</td>
<td>是否出租</td>
<td>int</td>
<td></td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>描述</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>carimg</td>
<td>车辆图片</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>createtime</td>
<td>录入时间</td>
<td>datetime</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>出租表(bus_rent)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>rentid</td>
<td>出租单号</td>
<td>varhcar</td>
<td>是</td>
<td>后台使用时间生成</td>
</tr>
<tr>
<td>price</td>
<td>出租实际价格</td>
<td>double</td>
<td></td>
<td></td>
</tr>
<tr>
<td>begindate</td>
<td>开始时间</td>
<td>Datetime</td>
<td></td>
<td></td>
</tr>
<tr>
<td>returndate</td>
<td>还车时间</td>
<td>Datetime</td>
<td></td>
<td></td>
</tr>
<tr>
<td>rentflag</td>
<td>出租状态</td>
<td>int</td>
<td></td>
<td>0未归还1已归还</td>
</tr>
<tr>
<td>identity</td>
<td>客户身份证</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>carnumber</td>
<td>车牌号</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>opername</td>
<td>操作员</td>
<td>varchar</td>
<td></td>
<td>当前登陆人</td>
</tr>
<tr>
<td>createtime</td>
<td>录入时间</td>
<td>datetime</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>还车表(bus_checks)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th align="left"><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>checkid</td>
<td align="left">检查单号</td>
<td>varhcar</td>
<td>是</td>
<td>后台使用时间生成</td>
</tr>
<tr>
<td>checkdate</td>
<td align="left">检查时间</td>
<td>datetime</td>
<td></td>
<td></td>
</tr>
<tr>
<td>checkdesc</td>
<td align="left">描述</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>problem</td>
<td align="left">存在问题</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>paymoney</td>
<td align="left">赔付金额</td>
<td>double</td>
<td></td>
<td></td>
</tr>
<tr>
<td>opername</td>
<td align="left">操作员</td>
<td>varchar</td>
<td></td>
<td>当前登陆人</td>
</tr>
<tr>
<td>rentid</td>
<td align="left">出租单号</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>createtime</td>
<td align="left">录入时间</td>
<td>datetime</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="系统表（RBAC权限管理）"><a href="#系统表（RBAC权限管理）" class="headerlink" title="系统表（RBAC权限管理）"></a>系统表（RBAC权限管理）</h2><ul>
<li>菜单表(sys_menus)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>ID</td>
<td>Int</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>pid</td>
<td>父节点id</td>
<td>Int</td>
<td></td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>菜单名称</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>href</td>
<td>跳转地址</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>open</td>
<td>是否打开</td>
<td>Int</td>
<td></td>
<td>0不打1打开</td>
</tr>
<tr>
<td>parent</td>
<td>是否父节点</td>
<td>Int</td>
<td></td>
<td>0非父节点1父节点</td>
</tr>
<tr>
<td>target</td>
<td>打开方式</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>icon</td>
<td>节点图标</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>tabicon</td>
<td>Tab图标</td>
<td>varchar</td>
<td></td>
<td><img src="https://i.loli.net/2020/10/07/wqvUj5zZdroxuHC.png" alt="image.png"></td>
</tr>
<tr>
<td>available</td>
<td>是否可用</td>
<td>Int</td>
<td></td>
<td>0不可用1可用</td>
</tr>
</tbody></table>
<ul>
<li>用户表(sys_users)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>userid</td>
<td>用户编号</td>
<td>Int</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>loginname</td>
<td>登陆名</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>identity</td>
<td>身份证号</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>realname</td>
<td>真实名称</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>sex</td>
<td>性别</td>
<td>Int</td>
<td></td>
<td>0女1男</td>
</tr>
<tr>
<td>address</td>
<td>地址</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>phone</td>
<td>电话</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>pwd</td>
<td>密码</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>position</td>
<td>职位</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>用户类型</td>
<td>Int</td>
<td></td>
<td>1，超级管理员  2，系统用户  Where  type&lt;&gt;1</td>
</tr>
</tbody></table>
<ul>
<li>角色表1.   (sys_roles)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>roleid</td>
<td>角色编号</td>
<td>Int</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>rolename</td>
<td>角色名称</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>roledesc</td>
<td>角色备注</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>角色和菜单关系表 (sys_role_menu)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>rid</td>
<td>角色编号</td>
<td>Int</td>
<td>是</td>
<td>角色表的roleid外键</td>
</tr>
<tr>
<td>mid</td>
<td>菜单编号</td>
<td>Int</td>
<td>是</td>
<td>菜单表的id外键</td>
</tr>
</tbody></table>
<ul>
<li>用户和角色和关系表(sys_role_user)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>uid</td>
<td>用户编号</td>
<td>Int</td>
<td>是</td>
<td>用户表的userid外键</td>
</tr>
<tr>
<td>rid</td>
<td>角色编号</td>
<td>Int</td>
<td>是</td>
<td>角色表的roleid外键</td>
</tr>
</tbody></table>
<h2 id="系统表（其他）"><a href="#系统表（其他）" class="headerlink" title="系统表（其他）"></a>系统表（其他）</h2><ul>
<li>登录日志表(sys_log_login)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>日志ID</td>
<td>Int</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>loginname</td>
<td>登陆名+真实姓名</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>loginip</td>
<td>登陆IP</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>logintime</td>
<td>登陆时间</td>
<td>datetime</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>系统公告表(sys_news)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段说明</strong></th>
<th><strong>类型</strong></th>
<th><strong>是否主键</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>编号</td>
<td>Int</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>title</td>
<td>标题</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Content</td>
<td>内容</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>createtime</td>
<td>发布时间</td>
<td>datetime</td>
<td></td>
<td></td>
</tr>
<tr>
<td>opername</td>
<td>发布人</td>
<td>varchar</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id="搭建环境（eclipse）"><a href="#搭建环境（eclipse）" class="headerlink" title="搭建环境（eclipse）"></a>搭建环境（eclipse）</h1><h2 id="配置maven仓库"><a href="#配置maven仓库" class="headerlink" title="配置maven仓库"></a>配置maven仓库</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>rentalCar<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>rentalCar Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/aspectj/aspectjweaver --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-logging/commons-logging --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.github.jsqlparser/jsqlparser --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.jsqlparser<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsqlparser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/jstl --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.15<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.30<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- springMVC配置 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aop --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aspects --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.14.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context-support --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-support<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-expression --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-web --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-stdlib --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jetbrains.kotlin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>kotlin-stdlib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.72<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-orm --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-orm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-oxm --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-oxm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">finalName</span>&gt;</span>rentalCar<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="jar包说明"><a href="#jar包说明" class="headerlink" title="jar包说明"></a>jar包说明</h2><h3 id="commons包"><a href="#commons包" class="headerlink" title="commons包"></a>commons包</h3><blockquote>
<p>商品包,即产品. commons项目是作为JDK的补充拓展及优化的一系列方案,由apache公司编写. 包名org.apache.commons,由反转的域名org.apache和包名commons组成. 如: </p>
</blockquote>
<ul>
<li><p>org.apache.commons.logging包,是用来记录日期. </p>
</li>
<li><p>org.apache.commons.lang包,用来包装部份数据类型.</p>
</li>
<li><p>org.apache.collections包,Apache Commons包中的一个，包含了一些Apache开发的集合类，功能比java.util.*更为强大。 </p>
</li>
<li><p>StringUtil,字符串工具类</p>
</li>
<li><p>BeanUtil,揭供对象属性复制. </p>
</li>
<li><p>Commons-log,日志记录工具, </p>
</li>
<li><p>…. </p>
<p>由于commons包的强大与灵活性，它已被各种framework推荐采纳使用，像struts、hibernate、spring中都有部分jar文件是来自于commons包中的，在tomcat安装目录的bin目录下也包含了commons-logging.jar. </p>
</li>
</ul>
<h3 id="spring之aspects包、aop包和aspectj包的简单梳理"><a href="#spring之aspects包、aop包和aspectj包的简单梳理" class="headerlink" title="spring之aspects包、aop包和aspectj包的简单梳理"></a>spring之aspects包、aop包和aspectj包的简单梳理</h3><ol>
<li>aop包本身具有完整的AOP实现，但是只会使用Cglib或者JDK动态代理，在类加载时通过动态代理织入（补充一句：spring容器会在创建被代理bean时会自动创建代理bean），其使用了aspectj的部分功能</li>
<li>aspectj提供了非常完善的AOP能力，可以编译时织入、编译后织入、加载时织入，几乎能在java class的任何时刻使用织入功能；</li>
</ol>
<p><strong>因此可以说aspectj包是对aop包的aop功能进行支持；</strong></p>
<p>spring3.0以前实现aop需要3个包：</p>
<ul>
<li>aopalliance-1.0.0.jar</li>
<li>aspectj.weaver-xx.RELEASE.jar</li>
<li>spring-aop-xx.jar<br> spring4.0以后aopalliance并入spring-aop包，实现aop只需要2个包：</li>
<li>aspectj.weaver-xx.RELEASE.jar</li>
<li>spring-aop-xx.jar</li>
</ul>
<p>SpingAOP具有一定面向切面具体实现，但在功能上弱于AspectJ，AspectJ结合aop包，则可以在IOC中使用完整的AOP功能（仅仅AspectJ是没有IOC的功能的），而Spring也提供了对AspectJ的扩展Spring-aspects.jar和 Spring-instrument.jar</p>
<h3 id="jackson包"><a href="#jackson包" class="headerlink" title="jackson包"></a>jackson包</h3><p>Jackson处理Json，依赖jackjson的三个核心类库</p>
<p>jackson-core-2.5.3.jar<br>jackson-annotations-2.5.3.jar<br>jackson-databind-2.5.3.jar</p>
<h3 id="jsqlparser包"><a href="#jsqlparser包" class="headerlink" title="jsqlparser包"></a>jsqlparser包</h3><p>sql解析工具</p>
<h3 id="pagehelper包"><a href="#pagehelper包" class="headerlink" title="pagehelper包"></a>pagehelper包</h3><p>分页</p>
<h3 id="slf4j包"><a href="#slf4j包" class="headerlink" title="slf4j包"></a>slf4j包</h3><p>日志门面</p>
<h3 id="kotlin包"><a href="#kotlin包" class="headerlink" title="kotlin包"></a>kotlin包</h3><p>通讯处理</p>
<h2 id="配置文件处理"><a href="#配置文件处理" class="headerlink" title="配置文件处理"></a>配置文件处理</h2><h3 id="创建db-properties"><a href="#创建db-properties" class="headerlink" title="创建db.properties"></a>创建db.properties</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/rental?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line"><span class="attr">user</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>

<h3 id="创建log4j-properties"><a href="#创建log4j-properties" class="headerlink" title="创建log4j.properties"></a>创建log4j.properties</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Global logging configuration</span></span><br><span class="line"><span class="meta">log4j.rootLogger</span>=<span class="string">DEBUG, stdout</span></span><br><span class="line"><span class="comment"># MyBatis logging configuration...</span></span><br><span class="line"><span class="meta">log4j.logger.org.mybatis.example.BlogMapper</span>=<span class="string">TRACE</span></span><br><span class="line"><span class="comment"># Console output...</span></span><br><span class="line"><span class="meta">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout.ConversionPattern</span>=<span class="string">%5p [%t] - %m%n</span></span><br></pre></td></tr></table></figure>

<h3 id="创建application-dao-xml"><a href="#创建application-dao-xml" class="headerlink" title="创建application-dao.xml"></a>创建application-dao.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 引入db.properties --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:property-placeholder</span></span></span><br><span class="line"><span class="tag">		<span class="attr">location</span>=<span class="string">&quot;classpath:db.properties&quot;</span> <span class="attr">system-properties-mode</span>=<span class="string">&quot;FALLBACK&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 声明dataSource --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;user&#125;&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 声明sessionFactory 并注入mybatis.cfg.xml --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 注入数据源 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 注入mapper.xml --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:mapper/*/*Mapper.xml<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 插件 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;plugins&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 扫描mapper接口 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 注入mapper接口所在的包 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span></span><br><span class="line">				com.study.sys.mapper</span><br><span class="line">				com.study.bus.mapper</span><br><span class="line">			<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 注入sqlSessionFactory --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="创建application-service-xml"><a href="#创建application-service-xml" class="headerlink" title="创建application-service.xml"></a>创建application-service.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.3.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.study.sys.service.impl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.study.bus.service.impl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 1.声明事务管理器 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">		 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span>	</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 启动注解事务 --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &lt;tx:annotation-driven/&gt; --&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 2.声明事务的传播性（发送通知） --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;advise&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 以add开头的方法需要事务 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;add*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;save*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;update*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;delete*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;change*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;reset*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">			</span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;get*&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;load*&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 3.进行AOP织入 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 声明切面 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.sxt.sys.service.impl.*.*(..))&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pc1&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.sxt.bus.service.impl.*.*(..))&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pc2&quot;</span>/&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 织入 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;advise&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pc1&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;advise&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pc2&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="创建applicationContext-xml"><a href="#创建applicationContext-xml" class="headerlink" title="创建applicationContext.xml"></a>创建applicationContext.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;classpath:application-dao.xml&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;classpath:application-service.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="创建springmvc-xml"><a href="#创建springmvc-xml" class="headerlink" title="创建springmvc.xml"></a>创建springmvc.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 扫描controller --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span></span></span><br><span class="line"><span class="tag">		<span class="attr">base-package</span>=<span class="string">&quot;com.study.sys.conreoller&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span></span></span><br><span class="line"><span class="tag">		<span class="attr">base-package</span>=<span class="string">&quot;com.study.bus.controller&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 配置映射器和适配器 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 配置前视图解析器 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span></span></span><br><span class="line"><span class="tag">		<span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 注入前后缀 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/view/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 配置springmvc对文件上传的支持 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 设置文件名的编码 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 配置最上传文件的支持 20M --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20971520&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 设置文件上传的临时目录 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;uploadTempDir&quot;</span> <span class="attr">value</span>=<span class="string">&quot;upload/temp&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 配置静态文件放行 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="修改web-xml"><a href="#修改web-xml" class="headerlink" title="修改web.xml"></a>修改web.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">id</span>=<span class="string">&quot;WebApp_ID&quot;</span> <span class="attr">version</span>=<span class="string">&quot;3.1&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">display-name</span>&gt;</span>0328carrent<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 编码过滤器开始 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>EncodeingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>EncodeingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 编码过滤器结束 --&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 监听器开始 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 监听器结束 --&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 前端控制器开始 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.action<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 前端控制器结束 --&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建file-properties"><a href="#创建file-properties" class="headerlink" title="创建file.properties"></a>创建file.properties</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># file upload path config</span></span><br><span class="line"><span class="attr">path</span>=<span class="string">E:/work/upload</span></span><br></pre></td></tr></table></figure>

<h3 id="创建AppLister"><a href="#创建AppLister" class="headerlink" title="创建AppLister"></a>创建AppLister</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebListener;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppListener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent arg0)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent arg0)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//取到ServletContext</span></span><br><span class="line">		ServletContext context=arg0.getServletContext();</span><br><span class="line">		context.setAttribute(<span class="string">&quot;ctx&quot;</span>, context.getContextPath());</span><br><span class="line">		System.err.println(<span class="string">&quot;---------Servlet容器创建成功 ctx被放到ServletContext作用域-------&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="AppFileUtils"><a href="#AppFileUtils" class="headerlink" title="AppFileUtils"></a>AppFileUtils</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpHeaders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppFileUtils</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 得到文件上传的路径</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> String PATH=<span class="string">&quot;E:/upload/&quot;</span>;</span><br><span class="line">	<span class="keyword">static</span> &#123;</span><br><span class="line">		InputStream stream = AppFileUtils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;file.properties&quot;</span>);</span><br><span class="line">		Properties properties=<span class="keyword">new</span> Properties();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			properties.load(stream);</span><br><span class="line">			PATH=properties.getProperty(<span class="string">&quot;path&quot;</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 文件下载</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> path</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> oldName</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span>  ResponseEntity&lt;Object&gt; <span class="title">downloadFile</span><span class="params">(HttpServletResponse response, String path, String oldName)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//4,使用绝对路径+相对路径去找到文件对象</span></span><br><span class="line">		File file=<span class="keyword">new</span> File(AppFileUtils.PATH,path);</span><br><span class="line">		<span class="comment">//5,判断文件是否存在</span></span><br><span class="line">		<span class="keyword">if</span>(file.exists()) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					<span class="comment">//如果名字有中文 要处理编码</span></span><br><span class="line">					oldName=URLEncoder.encode(oldName, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">//把file转成一个bytes</span></span><br><span class="line">				<span class="keyword">byte</span> [] bytes=FileUtils.readFileToByteArray(file);</span><br><span class="line">				HttpHeaders header=<span class="keyword">new</span> HttpHeaders();</span><br><span class="line">				<span class="comment">//封装响应内容类型(APPLICATION_OCTET_STREAM 响应的内容不限定)</span></span><br><span class="line">				header.setContentType(MediaType.APPLICATION_OCTET_STREAM);</span><br><span class="line">				<span class="comment">//设置下载的文件的名称</span></span><br><span class="line">				header.setContentDispositionFormData(<span class="string">&quot;attachment&quot;</span>, oldName);</span><br><span class="line">				<span class="comment">//创建ResponseEntity对象</span></span><br><span class="line">				ResponseEntity&lt;Object&gt; entity=</span><br><span class="line">						<span class="keyword">new</span> ResponseEntity&lt;Object&gt;(bytes, header, HttpStatus.CREATED);</span><br><span class="line">				<span class="keyword">return</span> entity;</span><br><span class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			PrintWriter out;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				out = response.getWriter();</span><br><span class="line">				out.write(<span class="string">&quot;文件不存在&quot;</span>);</span><br><span class="line">				out.flush();</span><br><span class="line">				out.close();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据相对路径删除硬盘上文件</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> path2</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">deleteFileUsePath</span><span class="params">(String path)</span> </span>&#123;</span><br><span class="line">		String realPath=PATH+path;</span><br><span class="line">		<span class="comment">//根据文件</span></span><br><span class="line">		File file=<span class="keyword">new</span> File(realPath);</span><br><span class="line">		<span class="keyword">if</span>(file.exists()) &#123;</span><br><span class="line">			file.delete();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="创建RandomUtils"><a href="#创建RandomUtils" class="headerlink" title="创建RandomUtils"></a>创建RandomUtils</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 随机工具类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomUtils</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> SimpleDateFormat sdf1=<span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> SimpleDateFormat sdf2=<span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyyMMddHHmmssSSS&quot;</span>);</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Random random=<span class="keyword">new</span> Random();</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 得到当前日期</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getCurrentDateForString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> sdf1.format(<span class="keyword">new</span> Date());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 生成文件名使用时间+4位随机数</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> suffix 文件名称</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createFileNameUseTime</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">		String fileSuffix=fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>),fileName.length());</span><br><span class="line">		String time=sdf2.format(<span class="keyword">new</span> Date());</span><br><span class="line">		Integer num=random.nextInt(<span class="number">9000</span>)+<span class="number">1000</span>;</span><br><span class="line">		<span class="keyword">return</span> time+num+fileSuffix;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 生成文件名使用UUID</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> suffix 文件名称</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createFileNameUseUUID</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">		String fileSuffix=fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>),fileName.length());</span><br><span class="line">		<span class="keyword">return</span> UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>).toUpperCase()+fileSuffix;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="创建WebUtils"><a href="#创建WebUtils" class="headerlink" title="创建WebUtils"></a>创建WebUtils</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.RequestContextHolder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.ServletRequestAttributes;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * web的工具类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebUtils</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ServletRequestAttributes <span class="title">getServletRequestAttributes</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 得到当前线程的请求对象</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HttpServletRequest <span class="title">getHttpServletRequest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> getServletRequestAttributes().getRequest();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 得到当前线程的响应对象</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HttpServletResponse <span class="title">getHttpServletResponse</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> getServletRequestAttributes().getResponse();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 得到session对象</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HttpSession <span class="title">getHttpSession</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> getHttpServletRequest().getSession();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 得到servletContext对象</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ServletContext <span class="title">getServletContext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> getHttpServletRequest().getServletContext();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="引入layuicms的模板"><a href="#引入layuicms的模板" class="headerlink" title="引入layuicms的模板"></a>引入layuicms的模板</h3><p><img src="https://s1.ax1x.com/2020/10/13/0hKJx0.jpg" alt="0hKJx0.jpg"></p>
<h1 id="用户登录功能实现"><a href="#用户登录功能实现" class="headerlink" title="用户登录功能实现"></a>用户登录功能实现</h1><h2 id="使用mybatisplus生成器生成User"><a href="#使用mybatisplus生成器生成User" class="headerlink" title="使用mybatisplus生成器生成User"></a>使用mybatisplus生成器生成User</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer userid;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String loginname;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String identity;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String realname;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer sex;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String position;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer type;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer available;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getUserid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserid</span><span class="params">(Integer userid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userid = userid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLoginname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> loginname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLoginname</span><span class="params">(String loginname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.loginname = loginname == <span class="keyword">null</span> ? <span class="keyword">null</span> : loginname.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getIdentity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> identity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIdentity</span><span class="params">(String identity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.identity = identity == <span class="keyword">null</span> ? <span class="keyword">null</span> : identity.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getRealname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> realname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRealname</span><span class="params">(String realname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.realname = realname == <span class="keyword">null</span> ? <span class="keyword">null</span> : realname.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(Integer sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.address = address == <span class="keyword">null</span> ? <span class="keyword">null</span> : address.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPhone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPhone</span><span class="params">(String phone)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.phone = phone == <span class="keyword">null</span> ? <span class="keyword">null</span> : phone.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPwd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPwd</span><span class="params">(String pwd)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pwd = pwd == <span class="keyword">null</span> ? <span class="keyword">null</span> : pwd.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPosition</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPosition</span><span class="params">(String position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.position = position == <span class="keyword">null</span> ? <span class="keyword">null</span> : position.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setType</span><span class="params">(Integer type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAvailable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> available;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAvailable</span><span class="params">(Integer available)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.available = available;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="生成UserMapper"><a href="#生成UserMapper" class="headerlink" title="生成UserMapper"></a>生成UserMapper</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 12, 2020 6:09:30 PM 类说明</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">deleteByPrimaryKey</span><span class="params">(Integer userid)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(User record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">insertSelective</span><span class="params">(User record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">User <span class="title">selectByPrimaryKey</span><span class="params">(Integer userid)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">updateByPrimaryKeySelective</span><span class="params">(User record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">updateByPrimaryKey</span><span class="params">(User record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 登录</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">User <span class="title">login</span><span class="params">(User user)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="生成UserMapper-xml"><a href="#生成UserMapper-xml" class="headerlink" title="生成UserMapper.xml"></a>生成UserMapper.xml</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.study.sys.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.study.sys.domain.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;userid&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;userid&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;loginname&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;loginname&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;identity&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;identity&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;realname&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;realname&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;address&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;address&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;phone&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;pwd&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;position&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;position&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;type&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;type&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;available&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;available&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;Base_Column_List&quot;</span>&gt;</span></span><br><span class="line">    userid, loginname, identity, realname, sex, address, phone, pwd, position, type, </span><br><span class="line">    available</span><br><span class="line">  <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select </span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from sys_user</span><br><span class="line">    where userid = #&#123;userid,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">    delete from sys_user</span><br><span class="line">    where userid = #&#123;userid,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.User&quot;</span>&gt;</span></span><br><span class="line">    insert into sys_user (userid, loginname, identity, </span><br><span class="line">      realname, sex, address, </span><br><span class="line">      phone, pwd, position, </span><br><span class="line">      type, available)</span><br><span class="line">    values (#&#123;userid,jdbcType=INTEGER&#125;, #&#123;loginname,jdbcType=VARCHAR&#125;, #&#123;identity,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;realname,jdbcType=VARCHAR&#125;, #&#123;sex,jdbcType=INTEGER&#125;, #&#123;address,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;phone,jdbcType=VARCHAR&#125;, #&#123;pwd,jdbcType=VARCHAR&#125;, #&#123;position,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;type,jdbcType=INTEGER&#125;, #&#123;available,jdbcType=INTEGER&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertSelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.User&quot;</span>&gt;</span></span><br><span class="line">    insert into sys_user</span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;(&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userid != null&quot;</span>&gt;</span></span><br><span class="line">        userid,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;loginname != null&quot;</span>&gt;</span></span><br><span class="line">        loginname,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;identity != null&quot;</span>&gt;</span></span><br><span class="line">        identity,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;realname != null&quot;</span>&gt;</span></span><br><span class="line">        realname,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != null&quot;</span>&gt;</span></span><br><span class="line">        sex,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;address != null&quot;</span>&gt;</span></span><br><span class="line">        address,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null&quot;</span>&gt;</span></span><br><span class="line">        phone,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pwd != null&quot;</span>&gt;</span></span><br><span class="line">        pwd,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;position != null&quot;</span>&gt;</span></span><br><span class="line">        position,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;type != null&quot;</span>&gt;</span></span><br><span class="line">        type,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">        available,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;values (&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userid != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;userid,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;loginname != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;loginname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;identity != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;identity,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;realname != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;realname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;sex,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;address != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;address,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;phone,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pwd != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;pwd,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;position != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;position,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;type != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;type,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;available,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKeySelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.User&quot;</span>&gt;</span></span><br><span class="line">    update sys_user</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;loginname != null&quot;</span>&gt;</span></span><br><span class="line">        loginname = #&#123;loginname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;identity != null&quot;</span>&gt;</span></span><br><span class="line">        identity = #&#123;identity,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;realname != null&quot;</span>&gt;</span></span><br><span class="line">        realname = #&#123;realname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != null&quot;</span>&gt;</span></span><br><span class="line">        sex = #&#123;sex,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;address != null&quot;</span>&gt;</span></span><br><span class="line">        address = #&#123;address,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null&quot;</span>&gt;</span></span><br><span class="line">        phone = #&#123;phone,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pwd != null&quot;</span>&gt;</span></span><br><span class="line">        pwd = #&#123;pwd,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;position != null&quot;</span>&gt;</span></span><br><span class="line">        position = #&#123;position,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;type != null&quot;</span>&gt;</span></span><br><span class="line">        type = #&#123;type,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">        available = #&#123;available,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    where userid = #&#123;userid,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.User&quot;</span>&gt;</span></span><br><span class="line">    update sys_user</span><br><span class="line">    set loginname = #&#123;loginname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      identity = #&#123;identity,jdbcType=VARCHAR&#125;,</span><br><span class="line">      realname = #&#123;realname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      sex = #&#123;sex,jdbcType=INTEGER&#125;,</span><br><span class="line">      address = #&#123;address,jdbcType=VARCHAR&#125;,</span><br><span class="line">      phone = #&#123;phone,jdbcType=VARCHAR&#125;,</span><br><span class="line">      pwd = #&#123;pwd,jdbcType=VARCHAR&#125;,</span><br><span class="line">      position = #&#123;position,jdbcType=VARCHAR&#125;,</span><br><span class="line">      type = #&#123;type,jdbcType=INTEGER&#125;,</span><br><span class="line">      available = #&#123;available,jdbcType=INTEGER&#125;</span><br><span class="line">    where userid = #&#123;userid,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- 用户登陆 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;login&quot;</span>  <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select </span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from sys_user</span><br><span class="line">    where loginname=#&#123;loginname&#125; and pwd=#&#123;pwd&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="创建UserVo"><a href="#创建UserVo" class="headerlink" title="创建UserVo"></a>创建UserVo</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 12, 2020 6:08:13 PM</span></span><br><span class="line"><span class="comment">* 类说明</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserVo</span> <span class="keyword">extends</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="创建UserService"><a href="#创建UserService" class="headerlink" title="创建UserService"></a>创建UserService</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.UserVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 12, 2020 6:07:14 PM</span></span><br><span class="line"><span class="comment">* 类说明：用户服务接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 用户登录</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> userVo</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">User <span class="title">login</span><span class="params">(UserVo userVo)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="创建UserService实现类"><a href="#创建UserService实现类" class="headerlink" title="创建UserService实现类"></a>创建UserService实现类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.DigestUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.UserVo;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">login</span><span class="params">(UserVo userVo)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//明文123456</span></span><br><span class="line">		<span class="comment">//生成密文</span></span><br><span class="line">		String pwd = DigestUtils.md5DigestAsHex(userVo.getPwd().getBytes());</span><br><span class="line">		userVo.setPwd(pwd);</span><br><span class="line">		<span class="keyword">return</span> userMapper.login(userVo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="创建常量接口（SysConstast）"><a href="#创建常量接口（SysConstast）" class="headerlink" title="创建常量接口（SysConstast）"></a>创建常量接口（SysConstast）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.constast;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 12, 2020 6:11:25 PM </span></span><br><span class="line"><span class="comment"> * 类说明:常量接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SysConstast</span> </span>&#123;</span><br><span class="line">	String USER_LOGIN_ERROR_MSG = <span class="string">&quot;用户名或密码不正确&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="创建LoginController"><a href="#创建LoginController" class="headerlink" title="创建LoginController"></a>创建LoginController</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.constast.SysConstast;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.WebUtils;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.UserVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 12, 2020 6:26:27 PM</span></span><br><span class="line"><span class="comment">* 类说明:用户操作控制器</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginController</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> UserService userService;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 跳转到登陆页面</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;toLogin&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toLogin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;system/main/login&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 登陆方法</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;login&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(UserVo userVo,Model model)</span> </span>&#123;</span><br><span class="line">		User user=<span class="keyword">this</span>.userService.login(userVo);</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">null</span>!=user) &#123;</span><br><span class="line">			<span class="comment">//放到session</span></span><br><span class="line">			WebUtils.getHttpSession().setAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">			<span class="comment">//记录登陆日志 向sys_login_log里面插入数据</span></span><br><span class="line">			<span class="keyword">return</span> <span class="string">&quot;system/main/index&quot;</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			model.addAttribute(<span class="string">&quot;error&quot;</span>,SysConstast.USER_LOGIN_ERROR_MSG);</span><br><span class="line">			<span class="keyword">return</span> <span class="string">&quot;system/main/login&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="创建index-jsp"><a href="#创建index-jsp" class="headerlink" title="创建index.jsp"></a>创建index.jsp</h2><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;登陆&lt;/title&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">	&lt;jsp:forward page=&quot;login/toLogin.action&quot;&gt;&lt;/jsp:forward&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="创建login-jsp"><a href="#创建login-jsp" class="headerlink" title="创建login.jsp"></a>创建login.jsp</h2><p><img src="https://s1.ax1x.com/2020/10/13/0hYjTP.jpg" alt="0hYjTP.jpg"></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;loginHtml&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;登录-汽车出租系统&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;$&#123;ctx&#125;/resources/favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx&#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx&#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;loginBody&quot;</span>&gt;</span><br><span class="line">	&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span> id=<span class="string">&quot;loginFrm&quot;</span> method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;$&#123;ctx &#125;/login/login.action&quot;</span>&gt;</span><br><span class="line">		&lt;div class=&quot;login_face&quot;&gt;&lt;img src=&quot;$&#123;ctx&#125;/resources/images/face.jpg&quot; class=&quot;userAvatar&quot;&gt;&lt;/div&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item input-item&quot;</span>&gt;</span><br><span class="line">			&lt;label for=&quot;userName&quot;&gt;用户名&lt;/label&gt;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;请输入用户名&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span> name=<span class="string">&quot;loginname&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span> lay-verify=<span class="string">&quot;required&quot;</span>&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item input-item&quot;</span>&gt;</span><br><span class="line">			&lt;label for=&quot;password&quot;&gt;密码&lt;/label&gt;</span><br><span class="line">			&lt;input type=<span class="string">&quot;password&quot;</span> placeholder=<span class="string">&quot;请输入密码&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span> name=<span class="string">&quot;pwd&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span> lay-verify=<span class="string">&quot;required&quot;</span>&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item input-item&quot;</span> id=<span class="string">&quot;imgCode&quot;</span>&gt;</span><br><span class="line">			&lt;label for=&quot;code&quot;&gt;验证码&lt;/label&gt;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;请输入验证码&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span> id=<span class="string">&quot;code&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">			&lt;img src=<span class="string">&quot;$&#123;ctx&#125;/resources/images/code.jpg&quot;</span>&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">			&lt;button class=&quot;layui-btn layui-block&quot; lay-filter=&quot;login&quot; lay-submit&gt;登录&lt;/button&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item layui-row&quot;</span> style=<span class="string">&quot;text-align: center;color: red;&quot;</span>&gt;</span><br><span class="line">			$&#123;error &#125;</span><br><span class="line">		&lt;!-- 	&lt;a href=&quot;javascript:;&quot; class=&quot;seraph icon-qq layui-col-xs4 layui-col-sm4 layui-col-md4 layui-col-lg4&quot;&gt;&lt;/a&gt;</span><br><span class="line">			&lt;a href=&quot;javascript:;&quot; class=&quot;seraph icon-wechat layui-col-xs4 layui-col-sm4 layui-col-md4 layui-col-lg4&quot;&gt;&lt;/a&gt;</span><br><span class="line">			&lt;a href=&quot;javascript:;&quot; class=&quot;seraph icon-sina layui-col-xs4 layui-col-sm4 layui-col-md4 layui-col-lg4&quot;&gt;&lt;/a&gt; --&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;ctx&#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;ctx&#125;/resources/js/cache.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	layui.use([<span class="string">&#x27;form&#x27;</span>,<span class="string">&#x27;layer&#x27;</span>,<span class="string">&#x27;jquery&#x27;</span>],function()&#123;</span><br><span class="line">	    <span class="keyword">var</span> form = layui.form,</span><br><span class="line">	        layer = parent.layer === undefined ? layui.layer : top.layer</span><br><span class="line">	        $ = layui.jquery;</span><br><span class="line">	    <span class="comment">//登录按钮</span></span><br><span class="line">	    form.on(<span class="string">&quot;submit(login)&quot;</span>,function(data)&#123;</span><br><span class="line">	        $(<span class="keyword">this</span>).text(<span class="string">&quot;登录中...&quot;</span>).attr(<span class="string">&quot;disabled&quot;</span>,<span class="string">&quot;disabled&quot;</span>).addClass(<span class="string">&quot;layui-disabled&quot;</span>);</span><br><span class="line">	        setTimeout(function()&#123;</span><br><span class="line">	           $(<span class="string">&quot;#loginFrm&quot;</span>).submit();</span><br><span class="line">	        &#125;,<span class="number">1000</span>);</span><br><span class="line">	        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	    &#125;)</span><br><span class="line"></span><br><span class="line">	    <span class="comment">//表单输入效果</span></span><br><span class="line">	    $(<span class="string">&quot;.loginBody .input-item&quot;</span>).click(function(e)&#123;</span><br><span class="line">	        e.stopPropagation();</span><br><span class="line">	        $(<span class="keyword">this</span>).addClass(<span class="string">&quot;layui-input-focus&quot;</span>).find(<span class="string">&quot;.layui-input&quot;</span>).focus();</span><br><span class="line">	    &#125;)</span><br><span class="line">	    $(<span class="string">&quot;.loginBody .layui-form-item .layui-input&quot;</span>).focus(function()&#123;</span><br><span class="line">	        $(<span class="keyword">this</span>).parent().addClass(<span class="string">&quot;layui-input-focus&quot;</span>);</span><br><span class="line">	    &#125;)</span><br><span class="line">	    $(<span class="string">&quot;.loginBody .layui-form-item .layui-input&quot;</span>).blur(function()&#123;</span><br><span class="line">	        $(<span class="keyword">this</span>).parent().removeClass(<span class="string">&quot;layui-input-focus&quot;</span>);</span><br><span class="line">	        <span class="keyword">if</span>($(<span class="keyword">this</span>).val() != <span class="string">&#x27;&#x27;</span>)&#123;</span><br><span class="line">	            $(<span class="keyword">this</span>).parent().addClass(<span class="string">&quot;layui-input-active&quot;</span>);</span><br><span class="line">	        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	            $(<span class="keyword">this</span>).parent().removeClass(<span class="string">&quot;layui-input-active&quot;</span>);</span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="创建index-jsp-1"><a href="#创建index-jsp-1" class="headerlink" title="创建index.jsp"></a>创建index.jsp</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;首页-汽车出租系统&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;Access-Control-Allow-Origin&quot;</span> content=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/index.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;main_body&quot;</span>&gt;</span><br><span class="line">	&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-layout layui-layout-admin&quot;</span>&gt;</span><br><span class="line">		&lt;!-- 顶部 --&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-header header&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-main mag0&quot;</span>&gt;</span><br><span class="line">				&lt;a href=&quot;#&quot; class=&quot;logo&quot;&gt;汽车出租&lt;/a&gt;</span><br><span class="line">				&lt;!-- 显示/隐藏菜单 --&gt;</span><br><span class="line">				&lt;a href=&quot;javascript:;&quot; class=&quot;seraph hideMenu icon-caidan&quot;&gt;&lt;/a&gt;</span><br><span class="line">			    &lt;!-- 顶部右侧菜单 --&gt;</span><br><span class="line">			    &lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav top_menu&quot;</span>&gt;</span><br><span class="line">					&lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav-item&quot;</span> pc&gt;</span><br><span class="line">						&lt;a href=&quot;javascript:;&quot; class=&quot;clearCache&quot;&gt;&lt;i class=&quot;layui-icon&quot; data-icon=&quot;&amp;#xe640;&quot;&gt;&amp;#xe640;&lt;/i&gt;&lt;cite&gt;清除缓存&lt;/cite&gt;&lt;span class=&quot;layui-badge-dot&quot;&gt;&lt;/span&gt;&lt;/a&gt;</span><br><span class="line">					&lt;/li&gt;</span><br><span class="line">					&lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav-item lockcms&quot;</span> pc&gt;</span><br><span class="line">						&lt;a href=&quot;javascript:;&quot;&gt;&lt;i class=&quot;seraph icon-lock&quot;&gt;&lt;/i&gt;&lt;cite&gt;锁屏&lt;/cite&gt;&lt;/a&gt;</span><br><span class="line">					&lt;/li&gt;</span><br><span class="line">					&lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav-item&quot;</span> id=<span class="string">&quot;userInfo&quot;</span>&gt;</span><br><span class="line">						&lt;a href=&quot;javascript:;&quot;&gt;&lt;img src=&quot;$&#123;ctx &#125;/resources/images/face.jpg&quot; class=&quot;layui-nav-img userAvatar&quot; width=&quot;35&quot; height=&quot;35&quot;&gt;&lt;cite class=&quot;adminName&quot;&gt;$&#123;user.realname &#125;&lt;/cite&gt;&lt;/a&gt;</span><br><span class="line">						&lt;dl <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav-child&quot;</span>&gt;</span><br><span class="line">							&lt;dd&gt;&lt;a href=&quot;javascript:;&quot; data-url=&quot;$&#123;ctx &#125;/resources/page/user/userInfo.html&quot;&gt;&lt;i class=&quot;seraph icon-ziliao&quot; data-icon=&quot;icon-ziliao&quot;&gt;&lt;/i&gt;&lt;cite&gt;个人资料&lt;/cite&gt;&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">							&lt;dd&gt;&lt;a href=&quot;javascript:;&quot; data-url=&quot;$&#123;ctx &#125;/resources/page/user/changePwd.html&quot;&gt;&lt;i class=&quot;seraph icon-xiugai&quot; data-icon=&quot;icon-xiugai&quot;&gt;&lt;/i&gt;&lt;cite&gt;修改密码&lt;/cite&gt;&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">							&lt;dd&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;showNotice&quot;&gt;&lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe645;&lt;/i&gt;&lt;cite&gt;系统公告&lt;/cite&gt;&lt;span class=&quot;layui-badge-dot&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">							&lt;dd pc&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;functionSetting&quot;&gt;&lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe620;&lt;/i&gt;&lt;cite&gt;功能设定&lt;/cite&gt;&lt;span class=&quot;layui-badge-dot&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">							&lt;dd pc&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;changeSkin&quot;&gt;&lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe61b;&lt;/i&gt;&lt;cite&gt;更换皮肤&lt;/cite&gt;&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">							&lt;dd&gt;&lt;a href=&quot;page/login/login.html&quot; class=&quot;signOut&quot;&gt;&lt;i class=&quot;seraph icon-tuichu&quot;&gt;&lt;/i&gt;&lt;cite&gt;退出&lt;/cite&gt;&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">						&lt;/dl&gt;</span><br><span class="line">					&lt;/li&gt;</span><br><span class="line">				&lt;/ul&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;!-- 左侧导航 --&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-side layui-bg-black&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;user-photo&quot;</span>&gt;</span><br><span class="line">				&lt;a class=&quot;img&quot; title=&quot;我的头像&quot; &gt;&lt;img src=&quot;$&#123;ctx &#125;/resources/images/face.jpg&quot; class=&quot;userAvatar&quot;&gt;&lt;/a&gt;</span><br><span class="line">				&lt;p&gt;你好！&lt;span class=&quot;userName&quot;&gt;$&#123;user.realname &#125;&lt;/span&gt;, 欢迎登录&lt;/p&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;!-- 搜索 --&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form component&quot;</span>&gt;</span><br><span class="line">				&lt;select name=<span class="string">&quot;search&quot;</span> id=<span class="string">&quot;search&quot;</span> lay-search lay-filter=<span class="string">&quot;searchPage&quot;</span>&gt;</span><br><span class="line">					&lt;option value=&quot;&quot;&gt;搜索页面或功能&lt;/option&gt;</span><br><span class="line">					&lt;option value=&quot;1&quot;&gt;layer&lt;/option&gt;</span><br><span class="line">					&lt;option value=&quot;2&quot;&gt;form&lt;/option&gt;</span><br><span class="line">				&lt;/select&gt;</span><br><span class="line">				&lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe615;&lt;/i&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;navBar layui-side-scroll&quot;</span> id=<span class="string">&quot;navBar&quot;</span>&gt;</span><br><span class="line">				&lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav layui-nav-tree&quot;</span>&gt;</span><br><span class="line">					&lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav-item layui-this&quot;</span>&gt;</span><br><span class="line">						&lt;a href=&quot;javascript:;&quot; data-url=&quot;$&#123;ctx &#125;/resources/page/main.html&quot;&gt;&lt;i class=&quot;layui-icon&quot; data-icon=&quot;&quot;&gt;&lt;/i&gt;&lt;cite&gt;后台首页&lt;/cite&gt;&lt;/a&gt;</span><br><span class="line">					&lt;/li&gt;</span><br><span class="line">				&lt;/ul&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;!-- 右侧内容 --&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-body layui-form&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-tab mag0&quot;</span> lay-filter=<span class="string">&quot;bodyTab&quot;</span> id=<span class="string">&quot;top_tabs_box&quot;</span>&gt;</span><br><span class="line">				&lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-tab-title top_tab&quot;</span> id=<span class="string">&quot;top_tabs&quot;</span>&gt;</span><br><span class="line">					&lt;li class=&quot;layui-this&quot; lay-id=&quot;&quot;&gt;&lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe68e;&lt;/i&gt; &lt;cite&gt;后台首页&lt;/cite&gt;&lt;/li&gt;</span><br><span class="line">				&lt;/ul&gt;</span><br><span class="line">				&lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav closeBox&quot;</span>&gt;</span><br><span class="line">				  &lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav-item&quot;</span>&gt;</span><br><span class="line">				    &lt;a href=&quot;javascript:;&quot;&gt;&lt;i class=&quot;layui-icon caozuo&quot;&gt;&amp;#xe643;&lt;/i&gt; 页面操作&lt;/a&gt;</span><br><span class="line">				    &lt;dl <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-nav-child&quot;</span>&gt;</span><br><span class="line">					  &lt;dd&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;refresh refreshThis&quot;&gt;&lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe669;&lt;/i&gt; 刷新当前&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">				      &lt;dd&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;closePageOther&quot;&gt;&lt;i class=&quot;seraph icon-prohibit&quot;&gt;&lt;/i&gt; 关闭其他&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">				      &lt;dd&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;closePageAll&quot;&gt;&lt;i class=&quot;seraph icon-guanbi&quot;&gt;&lt;/i&gt; 关闭全部&lt;/a&gt;&lt;/dd&gt;</span><br><span class="line">				    &lt;/dl&gt;</span><br><span class="line">				  &lt;/li&gt;</span><br><span class="line">				&lt;/ul&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-tab-content clildFrame&quot;</span>&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-tab-item layui-show&quot;</span>&gt;</span><br><span class="line">						&lt;iframe src=&quot;$&#123;ctx &#125;/resources/page/main.html&quot;&gt;&lt;/iframe&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;!-- 底部 --&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-footer footer&quot;</span>&gt;</span><br><span class="line">			&lt;p&gt;&lt;span&gt;copyright @2019 老雷&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 移动导航 --&gt;</span><br><span class="line">	&lt;div class=&quot;site-tree-mobile&quot;&gt;&lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe602;&lt;/i&gt;&lt;/div&gt;</span><br><span class="line">	&lt;div class=&quot;site-mobile-shade&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;ctx &#125;/resources/js/cache.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	<span class="keyword">var</span> $,tab,dataStr,layer;</span><br><span class="line">	layui.config(&#123;</span><br><span class="line">		base : <span class="string">&quot;$&#123;ctx &#125;/resources/js/&quot;</span></span><br><span class="line">	&#125;).extend(&#123;</span><br><span class="line">		<span class="string">&quot;bodyTab&quot;</span> : <span class="string">&quot;bodyTab&quot;</span></span><br><span class="line">	&#125;)</span><br><span class="line">	layui.use([<span class="string">&#x27;bodyTab&#x27;</span>,<span class="string">&#x27;form&#x27;</span>,<span class="string">&#x27;element&#x27;</span>,<span class="string">&#x27;layer&#x27;</span>,<span class="string">&#x27;jquery&#x27;</span>],function()&#123;</span><br><span class="line">		<span class="keyword">var</span> form = layui.form,</span><br><span class="line">			element = layui.element;</span><br><span class="line">			$ = layui.$;</span><br><span class="line">	    	layer = parent.layer === undefined ? layui.layer : top.layer;</span><br><span class="line">			tab = layui.bodyTab(&#123;</span><br><span class="line">				openTabNum : <span class="string">&quot;50&quot;</span>,  <span class="comment">//最大可打开窗口数量</span></span><br><span class="line">				url : <span class="string">&quot;$&#123;ctx &#125;/resources/json/navs.json&quot;</span> <span class="comment">//获取菜单json地址</span></span><br><span class="line">			&#125;);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//通过顶部菜单获取左侧二三级菜单   注：此处只做演示之用，实际开发中通过接口传参的方式获取导航数据</span></span><br><span class="line">		<span class="function">function <span class="title">getData</span><span class="params">(json)</span></span>&#123;</span><br><span class="line">			$.getJSON(tab.tabConfig.url,function(data)&#123;</span><br><span class="line">	                dataStr = data;</span><br><span class="line">	                <span class="comment">//重新渲染左侧菜单</span></span><br><span class="line">	                tab.render();</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//页面加载时判断左侧菜单是否显示</span></span><br><span class="line">		<span class="comment">//通过顶部菜单获取左侧菜单</span></span><br><span class="line">		$(<span class="string">&quot;.topLevelMenus li,.mobileTopLevelMenus dd&quot;</span>).click(function()&#123;</span><br><span class="line">			<span class="keyword">if</span>($(<span class="keyword">this</span>).parents(<span class="string">&quot;.mobileTopLevelMenus&quot;</span>).length != <span class="string">&quot;0&quot;</span>)&#123;</span><br><span class="line">				$(<span class="string">&quot;.topLevelMenus li&quot;</span>).eq($(<span class="keyword">this</span>).index()).addClass(<span class="string">&quot;layui-this&quot;</span>).siblings().removeClass(<span class="string">&quot;layui-this&quot;</span>);</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				$(<span class="string">&quot;.mobileTopLevelMenus dd&quot;</span>).eq($(<span class="keyword">this</span>).index()).addClass(<span class="string">&quot;layui-this&quot;</span>).siblings().removeClass(<span class="string">&quot;layui-this&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			$(<span class="string">&quot;.layui-layout-admin&quot;</span>).removeClass(<span class="string">&quot;showMenu&quot;</span>);</span><br><span class="line">			$(<span class="string">&quot;body&quot;</span>).addClass(<span class="string">&quot;site-mobile&quot;</span>);</span><br><span class="line">			getData($(<span class="keyword">this</span>).data(<span class="string">&quot;menu&quot;</span>));</span><br><span class="line">			<span class="comment">//渲染顶部窗口</span></span><br><span class="line">			tab.tabMove();</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		<span class="comment">//隐藏左侧导航</span></span><br><span class="line">		$(<span class="string">&quot;.hideMenu&quot;</span>).click(function()&#123;</span><br><span class="line">			<span class="keyword">if</span>($(<span class="string">&quot;.topLevelMenus li.layui-this a&quot;</span>).data(<span class="string">&quot;url&quot;</span>))&#123;</span><br><span class="line">				layer.msg(<span class="string">&quot;此栏目状态下左侧菜单不可展开&quot;</span>);  <span class="comment">//主要为了避免左侧显示的内容与顶部菜单不匹配</span></span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			$(<span class="string">&quot;.layui-layout-admin&quot;</span>).toggleClass(<span class="string">&quot;showMenu&quot;</span>);</span><br><span class="line">			<span class="comment">//渲染顶部窗口</span></span><br><span class="line">			tab.tabMove();</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		<span class="comment">//通过顶部菜单获取左侧二三级菜单   注：此处只做演示之用，实际开发中通过接口传参的方式获取导航数据</span></span><br><span class="line">		getData(<span class="string">&quot;contentManagement&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//手机设备的简单适配</span></span><br><span class="line">	    $(<span class="string">&#x27;.site-tree-mobile&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, function()&#123;</span><br><span class="line">			$(<span class="string">&#x27;body&#x27;</span>).addClass(<span class="string">&#x27;site-mobile&#x27;</span>);</span><br><span class="line">		&#125;);</span><br><span class="line">	    $(<span class="string">&#x27;.site-mobile-shade&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, function()&#123;</span><br><span class="line">			$(<span class="string">&#x27;body&#x27;</span>).removeClass(<span class="string">&#x27;site-mobile&#x27;</span>);</span><br><span class="line">		&#125;);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 添加新窗口</span></span><br><span class="line">		$(<span class="string">&quot;body&quot;</span>).on(<span class="string">&quot;click&quot;</span>,<span class="string">&quot;.layui-nav .layui-nav-item a:not(&#x27;.mobileTopLevelMenus .layui-nav-item a&#x27;)&quot;</span>,function()&#123;</span><br><span class="line">			<span class="comment">//如果不存在子级</span></span><br><span class="line">			<span class="keyword">if</span>($(<span class="keyword">this</span>).siblings().length == <span class="number">0</span>)&#123;</span><br><span class="line">				addTab($(<span class="keyword">this</span>));</span><br><span class="line">				$(<span class="string">&#x27;body&#x27;</span>).removeClass(<span class="string">&#x27;site-mobile&#x27;</span>);  <span class="comment">//移动端点击菜单关闭菜单层</span></span><br><span class="line">			&#125;</span><br><span class="line">			$(<span class="keyword">this</span>).parent(<span class="string">&quot;li&quot;</span>).siblings().removeClass(<span class="string">&quot;layui-nav-itemed&quot;</span>);</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		<span class="comment">//清除缓存</span></span><br><span class="line">		$(<span class="string">&quot;.clearCache&quot;</span>).click(function()&#123;</span><br><span class="line">			window.sessionStorage.clear();</span><br><span class="line">	        window.localStorage.clear();</span><br><span class="line">	        <span class="keyword">var</span> index = layer.msg(<span class="string">&#x27;清除缓存中，请稍候&#x27;</span>,&#123;icon: <span class="number">16</span>,time:<span class="keyword">false</span>,shade:<span class="number">0.8</span>&#125;);</span><br><span class="line">	        setTimeout(function()&#123;</span><br><span class="line">	            layer.close(index);</span><br><span class="line">	            layer.msg(<span class="string">&quot;缓存清除成功！&quot;</span>);</span><br><span class="line">	        &#125;,<span class="number">1000</span>);</span><br><span class="line">	    &#125;)</span><br><span class="line"></span><br><span class="line">		<span class="comment">//刷新后还原打开的窗口</span></span><br><span class="line">	    <span class="keyword">if</span>(cacheStr == <span class="string">&quot;true&quot;</span>) &#123;</span><br><span class="line">	        <span class="keyword">if</span> (window.sessionStorage.getItem(<span class="string">&quot;menu&quot;</span>) != <span class="keyword">null</span>) &#123;</span><br><span class="line">	            menu = JSON.parse(window.sessionStorage.getItem(<span class="string">&quot;menu&quot;</span>));</span><br><span class="line">	            curmenu = window.sessionStorage.getItem(<span class="string">&quot;curmenu&quot;</span>);</span><br><span class="line">	            <span class="keyword">var</span> openTitle = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">	            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; menu.length; i++) &#123;</span><br><span class="line">	                openTitle = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">	                <span class="keyword">if</span> (menu[i].icon) &#123;</span><br><span class="line">	                    <span class="keyword">if</span> (menu[i].icon.split(<span class="string">&quot;-&quot;</span>)[<span class="number">0</span>] == <span class="string">&#x27;icon&#x27;</span>) &#123;</span><br><span class="line">	                        openTitle += <span class="string">&#x27;&lt;i class=&quot;seraph &#x27;</span> + menu[i].icon + <span class="string">&#x27;&quot;&gt;&lt;/i&gt;&#x27;</span>;</span><br><span class="line">	                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                        openTitle += <span class="string">&#x27;&lt;i class=&quot;layui-icon&quot;&gt;&#x27;</span> + menu[i].icon + <span class="string">&#x27;&lt;/i&gt;&#x27;</span>;</span><br><span class="line">	                    &#125;</span><br><span class="line">	                &#125;</span><br><span class="line">	                openTitle += <span class="string">&#x27;&lt;cite&gt;&#x27;</span> + menu[i].title + <span class="string">&#x27;&lt;/cite&gt;&#x27;</span>;</span><br><span class="line">	                openTitle += <span class="string">&#x27;&lt;i class=&quot;layui-icon layui-unselect layui-tab-close&quot; data-id=&quot;&#x27;</span> + menu[i].layId + <span class="string">&#x27;&quot;&gt;&amp;#x1006;&lt;/i&gt;&#x27;</span>;</span><br><span class="line">	                element.tabAdd(<span class="string">&quot;bodyTab&quot;</span>, &#123;</span><br><span class="line">	                    title: openTitle,</span><br><span class="line">	                    content: <span class="string">&quot;&lt;iframe src=&#x27;&quot;</span> + menu[i].href + <span class="string">&quot;&#x27; data-id=&#x27;&quot;</span> + menu[i].layId + <span class="string">&quot;&#x27;&gt;&lt;/frame&gt;&quot;</span>,</span><br><span class="line">	                    id: menu[i].layId</span><br><span class="line">	                &#125;)</span><br><span class="line">	                <span class="comment">//定位到刷新前的窗口</span></span><br><span class="line">	                <span class="keyword">if</span> (curmenu != <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">	                    <span class="keyword">if</span> (curmenu == <span class="string">&#x27;&#x27;</span> || curmenu == <span class="string">&quot;null&quot;</span>) &#123;  <span class="comment">//定位到后台首页</span></span><br><span class="line">	                        element.tabChange(<span class="string">&quot;bodyTab&quot;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">	                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (JSON.parse(curmenu).title == menu[i].title) &#123;  <span class="comment">//定位到刷新前的页面</span></span><br><span class="line">	                        element.tabChange(<span class="string">&quot;bodyTab&quot;</span>, menu[i].layId);</span><br><span class="line">	                    &#125;</span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    element.tabChange(<span class="string">&quot;bodyTab&quot;</span>, menu[menu.length - <span class="number">1</span>].layId);</span><br><span class="line">	                &#125;</span><br><span class="line">	            &#125;</span><br><span class="line">	            <span class="comment">//渲染顶部窗口</span></span><br><span class="line">	            tab.tabMove();</span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			window.sessionStorage.removeItem(<span class="string">&quot;menu&quot;</span>);</span><br><span class="line">			window.sessionStorage.removeItem(<span class="string">&quot;curmenu&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//打开新窗口</span></span><br><span class="line">	<span class="function">function <span class="title">addTab</span><span class="params">(_this)</span></span>&#123;</span><br><span class="line">		tab.tabAdd(_this);</span><br><span class="line">	&#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="测试登录效果"><a href="#测试登录效果" class="headerlink" title="测试登录效果"></a>测试登录效果</h2><h3 id="账号密码不正确"><a href="#账号密码不正确" class="headerlink" title="账号密码不正确"></a>账号密码不正确</h3><p><img src="https://s1.ax1x.com/2020/10/13/0ht8Tx.png" alt="0ht8Tx.png"></p>
<h3 id="账号密码匹配，登录成功进入index-jsp"><a href="#账号密码匹配，登录成功进入index-jsp" class="headerlink" title="账号密码匹配，登录成功进入index.jsp"></a>账号密码匹配，登录成功进入index.jsp</h3><p><a target="_blank" rel="noopener" href="https://imgchr.com/i/0htwXd"><img src="https://s1.ax1x.com/2020/10/13/0htwXd.png" alt="0htwXd.png"></a></p>
<h3 id="前端页面锁定功能"><a href="#前端页面锁定功能" class="headerlink" title="前端页面锁定功能"></a>前端页面锁定功能</h3><p><img src="https://s1.ax1x.com/2020/10/13/0htL3F.png" alt="0htL3F.png"></p>
<h1 id="工作台简单实现"><a href="#工作台简单实现" class="headerlink" title="工作台简单实现"></a>工作台简单实现</h1><h2 id="创建DeskController"><a href="#创建DeskController" class="headerlink" title="创建DeskController"></a>创建DeskController</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 13, 2020 6:17:06 PM</span></span><br><span class="line"><span class="comment">* 类说明:工作台控制器</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;desk&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeskController</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 跳转到工作台的页面</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;toDeskManager&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toDeskManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;system/main/deskManager&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="创建deskManager-jsp"><a href="#创建deskManager-jsp" class="headerlink" title="创建deskManager.jsp"></a>创建deskManager.jsp</h2><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;工作台&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;childrenBody&quot;</span>&gt;</span><br><span class="line">	&lt;blockquote <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-elem-quote layui-bg-green&quot;</span>&gt;</span><br><span class="line">		&lt;div id=&quot;nowTime&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;/blockquote&gt;</span><br><span class="line">	&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-row layui-col-space10&quot;</span>&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-col-lg6 layui-col-md6&quot;</span>&gt;</span><br><span class="line">			&lt;blockquote class=&quot;layui-elem-quote title&quot;&gt;最新文章 &lt;i class=&quot;layui-icon layui-red&quot;&gt;&amp;#xe756;&lt;/i&gt;&lt;/blockquote&gt;</span><br><span class="line">			&lt;table <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-table mag0&quot;</span> lay-skin=<span class="string">&quot;line&quot;</span>&gt;</span><br><span class="line">				&lt;colgroup&gt;</span><br><span class="line">					&lt;col&gt;</span><br><span class="line">					&lt;col width=<span class="string">&quot;110&quot;</span>&gt;</span><br><span class="line">				&lt;/colgroup&gt;</span><br><span class="line">				&lt;tbody class=&quot;hot_news&quot;&gt;&lt;/tbody&gt;</span><br><span class="line">			&lt;/table&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//获取系统时间</span></span><br><span class="line">	<span class="keyword">var</span> newDate = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">	getLangDate();</span><br><span class="line">	<span class="comment">//值小于10时，在前面补0</span></span><br><span class="line">	<span class="function">function <span class="title">dateFilter</span><span class="params">(date)</span></span>&#123;</span><br><span class="line">	    <span class="keyword">if</span>(date &lt; <span class="number">10</span>)&#123;<span class="keyword">return</span> <span class="string">&quot;0&quot;</span>+date;&#125;</span><br><span class="line">	    <span class="keyword">return</span> date;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">function <span class="title">getLangDate</span><span class="params">()</span></span>&#123;</span><br><span class="line">	    <span class="keyword">var</span> dateObj = <span class="keyword">new</span> Date(); <span class="comment">//表示当前系统时间的Date对象</span></span><br><span class="line">	    <span class="keyword">var</span> year = dateObj.getFullYear(); <span class="comment">//当前系统时间的完整年份值</span></span><br><span class="line">	    <span class="keyword">var</span> month = dateObj.getMonth()+<span class="number">1</span>; <span class="comment">//当前系统时间的月份值</span></span><br><span class="line">	    <span class="keyword">var</span> date = dateObj.getDate(); <span class="comment">//当前系统时间的月份中的日</span></span><br><span class="line">	    <span class="keyword">var</span> day = dateObj.getDay(); <span class="comment">//当前系统时间中的星期值</span></span><br><span class="line">	    <span class="keyword">var</span> weeks = [<span class="string">&quot;星期日&quot;</span>,<span class="string">&quot;星期一&quot;</span>,<span class="string">&quot;星期二&quot;</span>,<span class="string">&quot;星期三&quot;</span>,<span class="string">&quot;星期四&quot;</span>,<span class="string">&quot;星期五&quot;</span>,<span class="string">&quot;星期六&quot;</span>];</span><br><span class="line">	    <span class="keyword">var</span> week = weeks[day]; <span class="comment">//根据星期值，从数组中获取对应的星期字符串</span></span><br><span class="line">	    <span class="keyword">var</span> hour = dateObj.getHours(); <span class="comment">//当前系统时间的小时值</span></span><br><span class="line">	    <span class="keyword">var</span> minute = dateObj.getMinutes(); <span class="comment">//当前系统时间的分钟值</span></span><br><span class="line">	    <span class="keyword">var</span> second = dateObj.getSeconds(); <span class="comment">//当前系统时间的秒钟值</span></span><br><span class="line">	    <span class="keyword">var</span> timeValue = <span class="string">&quot;&quot;</span> +((hour &gt;= <span class="number">12</span>) ? (hour &gt;= <span class="number">18</span>) ? <span class="string">&quot;晚上&quot;</span> : <span class="string">&quot;下午&quot;</span> : <span class="string">&quot;上午&quot;</span> ); <span class="comment">//当前时间属于上午、晚上还是下午</span></span><br><span class="line">	    newDate = dateFilter(year)+<span class="string">&quot;年&quot;</span>+dateFilter(month)+<span class="string">&quot;月&quot;</span>+dateFilter(date)+<span class="string">&quot;日 &quot;</span>+<span class="string">&quot; &quot;</span>+dateFilter(hour)+<span class="string">&quot;:&quot;</span>+dateFilter(minute)+<span class="string">&quot;:&quot;</span>+dateFilter(second);</span><br><span class="line">	    document.getElementById(<span class="string">&quot;nowTime&quot;</span>).innerHTML = <span class="string">&quot;亲爱的$&#123;user.realname&#125;，&quot;</span>+timeValue+<span class="string">&quot;好！ 欢迎使用汽车出租系统。当前时间为： &quot;</span>+newDate+<span class="string">&quot;　&quot;</span>+week;</span><br><span class="line">	    setTimeout(<span class="string">&quot;getLangDate()&quot;</span>,<span class="number">1000</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	layui.use([<span class="string">&#x27;form&#x27;</span>,<span class="string">&#x27;element&#x27;</span>,<span class="string">&#x27;layer&#x27;</span>,<span class="string">&#x27;jquery&#x27;</span>],function()&#123;</span><br><span class="line">	    <span class="keyword">var</span> form = layui.form,</span><br><span class="line">	        layer = parent.layer === undefined ? layui.layer : top.layer,</span><br><span class="line">	        element = layui.element;</span><br><span class="line">	        $ = layui.jquery;</span><br><span class="line">	    <span class="comment">//上次登录时间【此处应该从接口获取，实际使用中请自行更换】</span></span><br><span class="line">	    $(<span class="string">&quot;.loginTime&quot;</span>).html(newDate.split(<span class="string">&quot;日&quot;</span>)[<span class="number">0</span>]+<span class="string">&quot;日&lt;/br&gt;&quot;</span>+newDate.split(<span class="string">&quot;日&quot;</span>)[<span class="number">1</span>]);</span><br><span class="line">	    <span class="comment">//icon动画</span></span><br><span class="line">	    $(<span class="string">&quot;.panel a&quot;</span>).hover(function()&#123;</span><br><span class="line">	        $(<span class="keyword">this</span>).find(<span class="string">&quot;.layui-anim&quot;</span>).addClass(<span class="string">&quot;layui-anim-scaleSpring&quot;</span>);</span><br><span class="line">	    &#125;,function()&#123;</span><br><span class="line">	        $(<span class="keyword">this</span>).find(<span class="string">&quot;.layui-anim&quot;</span>).removeClass(<span class="string">&quot;layui-anim-scaleSpring&quot;</span>);</span><br><span class="line">	    &#125;)</span><br><span class="line">	    $(<span class="string">&quot;.panel a&quot;</span>).click(function()&#123;</span><br><span class="line">	        parent.addTab($(<span class="keyword">this</span>));</span><br><span class="line">	    &#125;)</span><br><span class="line">	    <span class="comment">//最新文章列表</span></span><br><span class="line">	    $.get(<span class="string">&quot;$&#123;ctx&#125;/resources/json/newsList.json&quot;</span>,function(data)&#123;</span><br><span class="line">	        <span class="keyword">var</span> hotNewsHtml = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">	        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">	            hotNewsHtml += <span class="string">&#x27;&lt;tr&gt;&#x27;</span></span><br><span class="line">	                +<span class="string">&#x27;&lt;td align=&quot;left&quot;&gt;&lt;a href=&quot;javascript:;&quot;&gt; &#x27;</span>+data.data[i].newsName+<span class="string">&#x27;&lt;/a&gt;&lt;/td&gt;&#x27;</span></span><br><span class="line">	                +<span class="string">&#x27;&lt;td&gt;&#x27;</span>+data.data[i].newsTime.substring(<span class="number">0</span>,<span class="number">10</span>)+<span class="string">&#x27;&lt;/td&gt;&#x27;</span></span><br><span class="line">	                +<span class="string">&#x27;&lt;/tr&gt;&#x27;</span>;</span><br><span class="line">	        &#125;</span><br><span class="line">	        $(<span class="string">&quot;.hot_news&quot;</span>).html(hotNewsHtml);</span><br><span class="line">	        $(<span class="string">&quot;.userAll span&quot;</span>).text(data.length);</span><br><span class="line">	    &#125;)</span><br><span class="line"></span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="修改index-jsp"><a href="#修改index-jsp" class="headerlink" title="修改index.jsp"></a>修改index.jsp</h2><p><img src="https://s1.ax1x.com/2020/10/13/0hDidJ.png" alt="0hDidJ.png"></p>
<p><img src="https://s1.ax1x.com/2020/10/13/0hDmQK.png" alt="0hDmQK.png"></p>
<h2 id="工作台功能完成效果"><a href="#工作台功能完成效果" class="headerlink" title="工作台功能完成效果"></a>工作台功能完成效果</h2><p><img src="https://s1.ax1x.com/2020/10/13/0hDMee.png" alt="0hDMee.png"></p>
<h1 id="菜单管理-1"><a href="#菜单管理-1" class="headerlink" title="菜单管理"></a>菜单管理</h1><h2 id="菜单初始化"><a href="#菜单初始化" class="headerlink" title="菜单初始化"></a>菜单初始化</h2><h3 id="创建Menu类"><a href="#创建Menu类" class="headerlink" title="创建Menu类"></a>创建Menu类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.domain;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 14, 2020 11:41:38 AM</span></span><br><span class="line"><span class="comment">* 类说明</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Menu</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Integer pid;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String href;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Integer spread;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String target;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String icon;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Integer available;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Menu</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Menu</span><span class="params">(Integer id, Integer pid, String title, String href, Integer spread, String target, String icon,</span></span></span><br><span class="line"><span class="function"><span class="params">			Integer available)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.pid = pid;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">		<span class="keyword">this</span>.href = href;</span><br><span class="line">		<span class="keyword">this</span>.spread = spread;</span><br><span class="line">		<span class="keyword">this</span>.target = target;</span><br><span class="line">		<span class="keyword">this</span>.icon = icon;</span><br><span class="line">		<span class="keyword">this</span>.available = available;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getPid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> pid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPid</span><span class="params">(Integer pid)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.pid = pid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> title;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getHref</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> href;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHref</span><span class="params">(String href)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.href = href;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getSpread</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> spread;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSpread</span><span class="params">(Integer spread)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.spread = spread;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getTarget</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> target;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTarget</span><span class="params">(String target)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.target = target;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getIcon</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> icon;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIcon</span><span class="params">(String icon)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.icon = icon;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getAvailable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> available;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAvailable</span><span class="params">(Integer available)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.available = available;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="编写初始化工具类-InitMenuDataUtil-java"><a href="#编写初始化工具类-InitMenuDataUtil-java" class="headerlink" title="编写初始化工具类:InitMenuDataUtil.java"></a>编写初始化工具类:InitMenuDataUtil.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Menu;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.mapper.MenuMapper;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 14, 2020 1:59:28 PM 类说明:初始化菜单</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InitMenuDataUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> ApplicationContext context;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;classpath:applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">		MenuMapper menuMapper = context.getBean(MenuMapper.class);</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">1</span>, <span class="number">0</span>, <span class="string">&quot;汽车出租系统&quot;</span>, <span class="keyword">null</span>, <span class="number">1</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe68e;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">2</span>, <span class="number">1</span>, <span class="string">&quot;基础管理&quot;</span>, <span class="keyword">null</span>, <span class="number">1</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe653;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">3</span>, <span class="number">1</span>, <span class="string">&quot;业务管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe663;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">4</span>, <span class="number">1</span>, <span class="string">&quot;系统管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe716;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">5</span>, <span class="number">1</span>, <span class="string">&quot;统计分析&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe629;&quot;</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">6</span>, <span class="number">2</span>, <span class="string">&quot;客户管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe770;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">7</span>, <span class="number">2</span>, <span class="string">&quot;车辆管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe657;&quot;</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">8</span>, <span class="number">3</span>, <span class="string">&quot;汽车出租&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe65b;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">9</span>, <span class="number">3</span>, <span class="string">&quot;出租单管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe6b2;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">10</span>, <span class="number">3</span>, <span class="string">&quot;汽车入库&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe65a;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">11</span>, <span class="number">3</span>, <span class="string">&quot;检查单管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe705;&quot;</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">12</span>, <span class="number">4</span>, <span class="string">&quot;菜单管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe60f;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">13</span>, <span class="number">4</span>, <span class="string">&quot;角色管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe66f;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">14</span>, <span class="number">4</span>, <span class="string">&quot;用户管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe770;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">15</span>, <span class="number">4</span>, <span class="string">&quot;日志管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe655;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">16</span>, <span class="number">4</span>, <span class="string">&quot;公告管理&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe645;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">17</span>, <span class="number">4</span>, <span class="string">&quot;数据源监控&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe857;&quot;</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">18</span>, <span class="number">5</span>, <span class="string">&quot;客户地区统计&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe63c;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">19</span>, <span class="number">5</span>, <span class="string">&quot;公司年度月份销售额&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe62c;&quot;</span>, <span class="number">1</span>));</span><br><span class="line">		menuMapper.insert(<span class="keyword">new</span> Menu(<span class="number">20</span>, <span class="number">5</span>, <span class="string">&quot;业务员年度销售额&quot;</span>, <span class="keyword">null</span>, <span class="number">0</span>, <span class="keyword">null</span>, <span class="string">&quot;&amp;#xe62d;&quot;</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">&quot;初始化完成&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="清空sys-menu数据库表"><a href="#清空sys-menu数据库表" class="headerlink" title="清空sys_menu数据库表"></a>清空sys_menu数据库表</h3><p><img src="https://s1.ax1x.com/2020/10/14/05HHjf.png" alt="05HHjf.png"></p>
<h2 id="加载菜单"><a href="#加载菜单" class="headerlink" title="加载菜单"></a>加载菜单</h2><h3 id="创建MenuMapper接口"><a href="#创建MenuMapper接口" class="headerlink" title="创建MenuMapper接口"></a>创建MenuMapper接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Menu;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 14, 2020 1:41:37 PM 类说明</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MenuMapper</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">deleteByPrimaryKey</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(Menu record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">insertSelective</span><span class="params">(Menu record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">Menu <span class="title">selectByPrimaryKey</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">updateByPrimaryKeySelective</span><span class="params">(Menu record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">updateByPrimaryKey</span><span class="params">(Menu record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询所有菜单</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">List&lt;Menu&gt; <span class="title">queryAllMenu</span><span class="params">(Menu menu)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="编写MenuMapper-xml"><a href="#编写MenuMapper-xml" class="headerlink" title="编写MenuMapper.xml"></a>编写MenuMapper.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.study.sys.mapper.MenuMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.study.sys.domain.Menu&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;pid&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;pid&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;title&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;title&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;href&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;href&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;spread&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;spread&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;target&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;target&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;icon&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;available&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;available&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;Base_Column_List&quot;</span>&gt;</span></span><br><span class="line">    id, pid, title, href, spread, target, icon, available</span><br><span class="line">  <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select </span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from sys_menu</span><br><span class="line">    where id = #&#123;id,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">    delete from sys_menu</span><br><span class="line">    where id = #&#123;id,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Menu&quot;</span>&gt;</span></span><br><span class="line">    insert into sys_menu (id, pid, title, </span><br><span class="line">      href, spread, target, </span><br><span class="line">      icon, available)</span><br><span class="line">    values (#&#123;id,jdbcType=INTEGER&#125;, #&#123;pid,jdbcType=INTEGER&#125;, #&#123;title,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;href,jdbcType=VARCHAR&#125;, #&#123;spread,jdbcType=INTEGER&#125;, #&#123;target,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;icon,jdbcType=VARCHAR&#125;, #&#123;available,jdbcType=INTEGER&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertSelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Menu&quot;</span>&gt;</span></span><br><span class="line">    insert into sys_menu</span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;(&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="line">        id,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pid != null&quot;</span>&gt;</span></span><br><span class="line">        pid,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">        title,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;href != null&quot;</span>&gt;</span></span><br><span class="line">        href,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;spread != null&quot;</span>&gt;</span></span><br><span class="line">        spread,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;target != null&quot;</span>&gt;</span></span><br><span class="line">        target,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;icon != null&quot;</span>&gt;</span></span><br><span class="line">        icon,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">        available,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;values (&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pid != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;pid,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;title,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;href != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;href,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;spread != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;spread,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;target != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;target,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;icon != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;icon,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;available,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKeySelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Menu&quot;</span>&gt;</span></span><br><span class="line">    update sys_menu</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pid != null&quot;</span>&gt;</span></span><br><span class="line">        pid = #&#123;pid,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">        title = #&#123;title,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;href != null&quot;</span>&gt;</span></span><br><span class="line">        href = #&#123;href,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;spread != null&quot;</span>&gt;</span></span><br><span class="line">        spread = #&#123;spread,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;target != null&quot;</span>&gt;</span></span><br><span class="line">        target = #&#123;target,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;icon != null&quot;</span>&gt;</span></span><br><span class="line">        icon = #&#123;icon,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">        available = #&#123;available,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    where id = #&#123;id,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Menu&quot;</span>&gt;</span></span><br><span class="line">    update sys_menu</span><br><span class="line">    set pid = #&#123;pid,jdbcType=INTEGER&#125;,</span><br><span class="line">      title = #&#123;title,jdbcType=VARCHAR&#125;,</span><br><span class="line">      href = #&#123;href,jdbcType=VARCHAR&#125;,</span><br><span class="line">      spread = #&#123;spread,jdbcType=INTEGER&#125;,</span><br><span class="line">      target = #&#123;target,jdbcType=VARCHAR&#125;,</span><br><span class="line">      icon = #&#123;icon,jdbcType=VARCHAR&#125;,</span><br><span class="line">      available = #&#123;available,jdbcType=INTEGER&#125;</span><br><span class="line">    where id = #&#123;id,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- 查询所有菜单 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllMenu&quot;</span>  <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select </span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from sys_menu</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title!=null and title!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">    		and title like concat(&quot;%&quot;,#&#123;title&#125;,&quot;%&quot;)</span><br><span class="line">    	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available!=null&quot;</span>&gt;</span></span><br><span class="line">    		and available=#&#123;available&#125;</span><br><span class="line">    	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id!=null&quot;</span>&gt;</span></span><br><span class="line">    		and (id=#&#123;id&#125; or pid=#&#123;id&#125;)</span><br><span class="line">    	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h3 id="创建MenuVo"><a href="#创建MenuVo" class="headerlink" title="创建MenuVo"></a>创建MenuVo</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Menu;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 14, 2020 11:39:05 AM</span></span><br><span class="line"><span class="comment">* 类说明</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuVo</span> <span class="keyword">extends</span> <span class="title">Menu</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建MenuService接口"><a href="#创建MenuService接口" class="headerlink" title="创建MenuService接口"></a>创建MenuService接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Menu;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.MenuVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 14, 2020 4:47:57 PM</span></span><br><span class="line"><span class="comment">* 菜单管理接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MenuService</span> </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询所有菜单</span></span><br><span class="line"><span class="comment">	 * List&lt;Menu&gt;</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Menu&gt; <span class="title">queryAllMenuForList</span><span class="params">(MenuVo menuVo)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据用户id查询用户可用的菜单</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> menuVo</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> userId</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> </span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Menu&gt; <span class="title">queryMenuByUserIdForList</span><span class="params">(MenuVo menuVo,Integer userId)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建接口实现类MenuServiceImpl"><a href="#创建接口实现类MenuServiceImpl" class="headerlink" title="创建接口实现类MenuServiceImpl"></a>创建接口实现类MenuServiceImpl</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Menu;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.mapper.MenuMapper;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.service.MenuService;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.MenuVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 14, 2020 4:52:28 PM</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuServiceImpl</span> <span class="keyword">implements</span> <span class="title">MenuService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> MenuMapper menuMapper;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Menu&gt; <span class="title">queryAllMenuForList</span><span class="params">(MenuVo menuVo)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> menuMapper.queryAllMenu(menuVo);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 初步完成：权限系统完成之后继续修改</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Menu&gt; <span class="title">queryMenuByUserIdForList</span><span class="params">(MenuVo menuVo, Integer userId)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> menuMapper.queryAllMenu(menuVo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="修改SysConstast"><a href="#修改SysConstast" class="headerlink" title="修改SysConstast"></a>修改SysConstast</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.constast;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 12, 2020 6:11:25 PM </span></span><br><span class="line"><span class="comment"> * 类说明:常量接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SysConstast</span> </span>&#123;</span><br><span class="line">	String USER_LOGIN_ERROR_MSG = <span class="string">&quot;用户名或密码不正确&quot;</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 可用状态</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Integer AVAILABLE_TRUE = <span class="number">1</span>;</span><br><span class="line">	Integer AVAILABLE_FALSE = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 用户类型</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Integer USER_TYPE_SUPER = <span class="number">1</span>;</span><br><span class="line">	Integer USER_TYPE_NORMAL = <span class="number">2</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 是否展开</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Integer SPREAD_TRUE = <span class="number">1</span>;</span><br><span class="line">	Integer SPREAD_FALSE = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建TreeNode"><a href="#创建TreeNode" class="headerlink" title="创建TreeNode"></a>创建TreeNode</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonProperty;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 将parentId序列化成pid</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@JsonProperty(&quot;parentId&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Integer pid;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="keyword">private</span> String icon;</span><br><span class="line">	<span class="keyword">private</span> String href;</span><br><span class="line">	<span class="keyword">private</span> Boolean spread;</span><br><span class="line">	<span class="keyword">private</span> String target;</span><br><span class="line">	<span class="keyword">private</span> List&lt;TreeNode&gt; children = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 首页左边导航树的构造器</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> pid</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> title</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> icon</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> href</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> spread</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> target</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">TreeNode</span><span class="params">(Integer id, Integer pid, String title, String icon, String href, Boolean spread, String target)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.pid = pid;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">		<span class="keyword">this</span>.icon = icon;</span><br><span class="line">		<span class="keyword">this</span>.href = href;</span><br><span class="line">		<span class="keyword">this</span>.spread = spread;</span><br><span class="line">		<span class="keyword">this</span>.target = target;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getPid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> pid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPid</span><span class="params">(Integer pid)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.pid = pid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> title;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getIcon</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> icon;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIcon</span><span class="params">(String icon)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.icon = icon;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getHref</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> href;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHref</span><span class="params">(String href)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.href = href;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Boolean <span class="title">getSpread</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> spread;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSpread</span><span class="params">(Boolean spread)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.spread = spread;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getTarget</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> target;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTarget</span><span class="params">(String target)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.target = target;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;TreeNode&gt; <span class="title">getChildren</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> children;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setChildren</span><span class="params">(List&lt;TreeNode&gt; children)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.children = children;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建TreeNodeBuilder工具类"><a href="#创建TreeNodeBuilder工具类" class="headerlink" title="创建TreeNodeBuilder工具类"></a>创建TreeNodeBuilder工具类</h3><p>作用：将数据库中的列表转换成具有层级关系的目录</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNodeBuilder</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 把简单的集合转成有层级关系的集合</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> nodes</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> topPid</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;TreeNode&gt; <span class="title">builder</span><span class="params">(List&lt;TreeNode&gt; nodes, Integer topPid)</span> </span>&#123;</span><br><span class="line">		List&lt;TreeNode&gt; treeNodes = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		<span class="keyword">for</span> (TreeNode n1 : nodes) &#123;</span><br><span class="line">			<span class="keyword">if</span> (n1.getPid() == topPid) &#123;</span><br><span class="line">				treeNodes.add(n1);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span> (TreeNode n2 : nodes) &#123;</span><br><span class="line">				<span class="keyword">if</span> (n2.getPid() == n1.getId()) &#123;</span><br><span class="line">					n1.getChildren().add(n2);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> treeNodes;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="创建MenuController"><a href="#创建MenuController" class="headerlink" title="创建MenuController"></a>创建MenuController</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.constast.SysConstast;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Menu;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.service.MenuService;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.TreeNode;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.TreeNodeBuilder;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.WebUtils;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.MenuVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 14, 2020 4:56:01 PM 菜单控制器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;menu&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuController</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> MenuService menuService;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;loadIndexLeftMenuJson&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;TreeNode&gt; <span class="title">loadIndexLeftMenuJson</span><span class="params">(MenuVo menuVo)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 得到当前登陆的用户对象</span></span><br><span class="line">		User user = (User) WebUtils.getHttpSession().getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">		List&lt;Menu&gt; list = <span class="keyword">null</span>;</span><br><span class="line">		menuVo.setAvailable(SysConstast.AVAILABLE_TRUE);<span class="comment">// 只查询可用的</span></span><br><span class="line">		<span class="keyword">if</span> (user.getType() == SysConstast.USER_TYPE_SUPER) &#123;</span><br><span class="line">			list = <span class="keyword">this</span>.menuService.queryAllMenuForList(menuVo);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			list = <span class="keyword">this</span>.menuService.queryMenuByUserIdForList(menuVo, user.getUserid());</span><br><span class="line">		&#125;</span><br><span class="line">		List&lt;TreeNode&gt; nodes = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		<span class="comment">// 把list里面的数据放到nodes</span></span><br><span class="line">		<span class="keyword">for</span> (Menu menu : list) &#123;</span><br><span class="line">			Integer id = menu.getId();</span><br><span class="line">			Integer pid = menu.getPid();</span><br><span class="line">			String title = menu.getTitle();</span><br><span class="line">			String icon = menu.getIcon();</span><br><span class="line">			String href = menu.getHref();</span><br><span class="line">			Boolean spread = menu.getSpread() == SysConstast.SPREAD_TRUE ? <span class="keyword">true</span> : <span class="keyword">false</span>;</span><br><span class="line">			String target = menu.getTarget();</span><br><span class="line">			nodes.add(<span class="keyword">new</span> TreeNode(id, pid, title, icon, href, spread, target));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> TreeNodeBuilder.builder(nodes, <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="修改system-main-index-jsp"><a href="#修改system-main-index-jsp" class="headerlink" title="修改system/main/index.jsp"></a>修改system/main/index.jsp</h3><p><img src="https://s1.ax1x.com/2020/10/15/0oQp9g.png" alt="0oQp9g.png"></p>
<h3 id="启动测试"><a href="#启动测试" class="headerlink" title="启动测试"></a>启动测试</h3><p><strong>查询出超级管理员所有的菜单</strong></p>
<p><img src="https://s1.ax1x.com/2020/10/15/0oQCcj.png" alt="0oQCcj.png"></p>
<h2 id="对菜单进行权限管理分配"><a href="#对菜单进行权限管理分配" class="headerlink" title="对菜单进行权限管理分配"></a>对菜单进行权限管理分配</h2><blockquote>
<p>角色权限管理(Role-Based Access Control)</p>
</blockquote>
<h3 id="权限和角色和用户说明"><a href="#权限和角色和用户说明" class="headerlink" title="权限和角色和用户说明"></a>权限和角色和用户说明</h3><ul>
<li><p><strong>权限包括：</strong> 菜单、URL、按钮的权限；这次主要是对菜单权限进行设置  </p>
</li>
<li><p><strong>角色：</strong> 主要是对权限的打包</p>
<ul>
<li>超级管理员 ：可以操作所有菜单、所有URL、所有按钮权限</li>
<li>业务管理员：可以操作所有业务的菜单、所有业务的URL、所有业务的按钮</li>
<li>统计管理员：可以操作所有统计的菜单、所有统计的URL、所有统计的按钮</li>
</ul>
</li>
<li><p><strong>用户</strong></p>
</li>
</ul>
<p><strong>说明：</strong> 一个角色可以对应多个权限，一个权限可以被多个角色使用，所以角色和权限是多对多的关系，采用第三张表实现逻辑关系；一个用户对应多个角色，一个角色对应多个用户，所以用户和角色也是多对多关系。</p>
<h3 id="加深理解"><a href="#加深理解" class="headerlink" title="加深理解"></a>加深理解</h3><p><strong>分析菜单表与角色表与用户表的关系</strong></p>
<h4 id="菜单表"><a href="#菜单表" class="headerlink" title="菜单表"></a>菜单表</h4><table>
<thead>
<tr>
<th>菜单表(sys_menu)</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th align="center"></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>pid</td>
<td>name</td>
<td>href</td>
<td>open</td>
<td>parent</td>
<td>icon</td>
<td align="center">tabicon</td>
<td>available</td>
</tr>
<tr>
<td></td>
<td>(父节点id)</td>
<td></td>
<td>(地址)</td>
<td>(是否展开)</td>
<td>(是否父节点)</td>
<td></td>
<td align="center"></td>
<td>(是否可用)</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>汽车出租系统</td>
<td></td>
<td></td>
<td></td>
<td>/resouce/1.png</td>
<td align="center">icon-add</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>基础管理</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>客户管理</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>车辆管理</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>业务管理</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>6</td>
<td>5</td>
<td>汽车出租</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>7</td>
<td>5</td>
<td>出租单管理</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center"></td>
<td></td>
</tr>
</tbody></table>
<h4 id="角色表"><a href="#角色表" class="headerlink" title="角色表"></a>角色表</h4><table>
<thead>
<tr>
<th>角色表sys_role</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>name</td>
<td>remark</td>
</tr>
<tr>
<td>1</td>
<td>CEO</td>
<td>CEO</td>
</tr>
<tr>
<td>2</td>
<td>部门经理</td>
<td>经理</td>
</tr>
<tr>
<td>3</td>
<td>BA</td>
<td>保安</td>
</tr>
</tbody></table>
<h4 id="角色和菜单表的中间表"><a href="#角色和菜单表的中间表" class="headerlink" title="角色和菜单表的中间表"></a>角色和菜单表的中间表</h4><table>
<thead>
<tr>
<th>角色和菜单关系表（sys_role_menu）</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>rid(角色编号)</td>
<td>mid(菜单编号)</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td>1</td>
<td>7</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
</tr>
</tbody></table>
<h4 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h4><p>已知角色id=4 查询当前角色所拥有的菜单</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方式一：</span></span><br><span class="line"><span class="keyword">SELECT</span> t2.* </span><br><span class="line"><span class="keyword">FROM</span> sys_role_menu t1,sys_menu t2</span><br><span class="line"><span class="keyword">WHERE</span> t1.<span class="string">`rid`</span>=<span class="number">4</span> <span class="keyword">AND</span> t1.<span class="string">`mid`</span>=t2.<span class="string">`id`</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式二：</span></span><br><span class="line"><span class="keyword">SELECT</span> t2.*</span><br><span class="line"><span class="keyword">FROM</span> sys_role_menu t1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> sys_menu t2 <span class="keyword">ON</span>(t2.<span class="string">`id`</span> = t1.<span class="string">`mid`</span>)</span><br><span class="line"><span class="keyword">WHERE</span> t1.<span class="string">`rid`</span> = <span class="number">4</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="用户表"><a href="#用户表" class="headerlink" title="用户表"></a>用户表</h4><table>
<thead>
<tr>
<th>用户表(sys_user)</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>loginame</td>
<td>identity</td>
<td>realname</td>
<td>sex</td>
<td>address</td>
<td>phone</td>
<td>pwd</td>
<td>position</td>
</tr>
<tr>
<td>1</td>
<td>admin</td>
<td>12312</td>
<td>小明</td>
<td>1</td>
<td>武汉</td>
<td>134131313</td>
<td>123456</td>
<td>CEO</td>
</tr>
<tr>
<td>2</td>
<td>zs</td>
<td>12312312</td>
<td>张三</td>
<td>0</td>
<td>深圳</td>
<td>12313131</td>
<td>12345678</td>
<td>BA</td>
</tr>
</tbody></table>
<h4 id="用户和角色关系表"><a href="#用户和角色关系表" class="headerlink" title="用户和角色关系表"></a>用户和角色关系表</h4><table>
<thead>
<tr>
<th>用户和角色关系表（sys_role_user）</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>uid(用户编号）</td>
<td>rid(角色编号)</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
</tr>
</tbody></table>
<h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><ul>
<li>已知用户id=userid  查询当前用户拥有的所有角色</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方式一</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">t1.*</span><br><span class="line"><span class="keyword">FROM</span> sys_user t1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> sys_role_user t2 <span class="keyword">ON</span>(t1.<span class="string">`userid`</span> = t2.<span class="string">`uid`</span>)</span><br><span class="line"><span class="keyword">WHERE</span> t2.uid=t1.<span class="string">`userid`</span>;</span><br><span class="line"></span><br><span class="line">方式二</span><br><span class="line"><span class="keyword">SELECT</span> t1.* <span class="keyword">FROM</span> sys_user t1 ,sys_role_user t2 </span><br><span class="line"><span class="keyword">WHERE</span> t1.<span class="string">`userid`</span> = t2.<span class="string">`uid`</span> </span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li>已知用户id=userid 查询当前用户拥有的所有权限{菜单}</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span></span><br><span class="line">t1.<span class="string">`userid`</span>,t1.<span class="string">`loginname`</span>,t2.*,t3.*,t4.id,t4.pid,t4.title <span class="string">&quot;菜单&quot;</span></span><br><span class="line"><span class="keyword">FROM</span> sys_user t1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> sys_role_user t2 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> sys_role_menu t3 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> sys_menu t4</span><br><span class="line"><span class="keyword">ON</span>(t1.<span class="string">`userid`</span>=t2.<span class="string">`uid`</span> <span class="keyword">AND</span> t2.<span class="string">`rid`</span>=t3.rid <span class="keyword">AND</span> t3.mid=t4.id) </span><br></pre></td></tr></table></figure>



<h2 id="功能实现"><a href="#功能实现" class="headerlink" title="功能实现"></a>功能实现</h2><h3 id="查询功能"><a href="#查询功能" class="headerlink" title="查询功能"></a>查询功能</h3><h4 id="新增SysController（用来定向路径）"><a href="#新增SysController（用来定向路径）" class="headerlink" title="新增SysController（用来定向路径）"></a>新增SysController（用来定向路径）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 15, 2020 9:37:32 AM</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;sys&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 跳转到菜单管理</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;toMenuManager&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toMenuManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;system/menu/menuManager&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 跳转左边的菜单树页面</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;toMenuLeft&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toMenuLeft</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;system/menu/menuLeft&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 跳转菜单管理右边的菜单列表</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;toMenuRight&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toMenuRight</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;system/menu/menuRight&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="为MenuController新增方法"><a href="#为MenuController新增方法" class="headerlink" title="为MenuController新增方法"></a>为MenuController新增方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;loadMenuManagerLeftTreeJson&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> DataGridView <span class="title">loadMenuManagerLeftTreeJson</span><span class="params">(MenuVo menuVo)</span> </span>&#123;</span><br><span class="line">	menuVo.setAvailable(SysConstast.AVAILABLE_TRUE);<span class="comment">// 只查询可用的</span></span><br><span class="line">	List&lt;Menu&gt; list = <span class="keyword">this</span>.menuService.queryAllMenuForList(menuVo);</span><br><span class="line"></span><br><span class="line">	List&lt;TreeNode&gt; nodes = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	<span class="comment">// 把list里面的数据放到nodes</span></span><br><span class="line">	<span class="keyword">for</span> (Menu menu : list) &#123;</span><br><span class="line">		Integer id = menu.getId();</span><br><span class="line">		Integer pid = menu.getPid();</span><br><span class="line">		String title = menu.getTitle();</span><br><span class="line">		String icon = menu.getIcon();</span><br><span class="line">		String href = menu.getHref();</span><br><span class="line">		Boolean spread = menu.getSpread() == SysConstast.SPREAD_TRUE ? <span class="keyword">true</span> : <span class="keyword">false</span>;</span><br><span class="line">		String target = menu.getTarget();</span><br><span class="line">		nodes.add(<span class="keyword">new</span> TreeNode(id, pid, title, icon, href, spread, target));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> DataGridView(nodes);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 加载菜单列表返回DataGridView</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;loadAllMenu&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> DataGridView <span class="title">loadAllMenu</span><span class="params">(MenuVo menuVo)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.menuService.queryAllMenu(menuVo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建DataGridView"><a href="#创建DataGridView" class="headerlink" title="创建DataGridView"></a>创建DataGridView</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.utils;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 15, 2020 5:45:25 PM</span></span><br><span class="line"><span class="comment">* 封装layui数据表格的数据对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataGridView</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> Integer code=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">private</span> String msg=<span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="keyword">private</span> Long count;</span><br><span class="line">	<span class="keyword">private</span> Object data;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">DataGridView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">DataGridView</span><span class="params">(Object data)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.data = data;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> code;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCode</span><span class="params">(Integer code)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.code = code;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> msg;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Long <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> count;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCount</span><span class="params">(Long count)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.count = count;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">getData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> data;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setData</span><span class="params">(Object data)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.data = data;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="修改MenuVo"><a href="#修改MenuVo" class="headerlink" title="修改MenuVo"></a>修改MenuVo</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Menu;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 14, 2020 11:39:05 AM 类说明</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuVo</span> <span class="keyword">extends</span> <span class="title">Menu</span> </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 分页参数</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> Integer page;</span><br><span class="line">	<span class="keyword">private</span> Integer limit;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> page;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPage</span><span class="params">(Integer page)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.page = page;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getLimit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> limit;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLimit</span><span class="params">(Integer limit)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.limit = limit;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="为MenuService接口添加方法"><a href="#为MenuService接口添加方法" class="headerlink" title="为MenuService接口添加方法"></a>为MenuService接口添加方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询所有菜单</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> menuVo</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataGridView <span class="title">queryAllMenu</span><span class="params">(MenuVo menuVo)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="添加MenuServiceImpl实现添加的方法"><a href="#添加MenuServiceImpl实现添加的方法" class="headerlink" title="添加MenuServiceImpl实现添加的方法"></a>添加MenuServiceImpl实现添加的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataGridView <span class="title">queryAllMenu</span><span class="params">(MenuVo menuVo)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		</span><br><span class="line">		Page&lt;Object&gt; page = PageHelper.startPage(menuVo.getPage(),menuVo.getLimit());</span><br><span class="line">		List&lt;Menu&gt; data = <span class="keyword">this</span>.menuMapper.queryAllMenu(menuVo);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> DataGridView(page.getTotal(),data);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h4 id="为MenuMapper-xml添加查询方法"><a href="#为MenuMapper-xml添加查询方法" class="headerlink" title="为MenuMapper.xml添加查询方法"></a>为MenuMapper.xml添加查询方法</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 查询所有菜单 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllMenu&quot;</span>  <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select </span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from sys_menu</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title!=null and title!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">    		and title like concat(&quot;%&quot;,#&#123;title&#125;,&quot;%&quot;)</span><br><span class="line">    	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available!=null&quot;</span>&gt;</span></span><br><span class="line">    		and available=#&#123;available&#125;</span><br><span class="line">    	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id!=null&quot;</span>&gt;</span></span><br><span class="line">    		and (id=#&#123;id&#125; or pid=#&#123;id&#125;)</span><br><span class="line">    	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="修改数据库的菜单地址"><a href="#修改数据库的菜单地址" class="headerlink" title="修改数据库的菜单地址"></a>修改数据库的菜单地址</h4><p><img src="https://s1.ax1x.com/2020/10/15/0TXLGD.png" alt="0TXLGD.png"></p>
<h4 id="创建system-menu-menuManager-jsp"><a href="#创建system-menu-menuManager-jsp" class="headerlink" title="创建system/menu/menuManager.jsp"></a>创建system/menu/menuManager.jsp</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">	pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;菜单管理&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;!-- 如果使用frameset 的包含页面  主页面不能有 body--&gt;</span><br><span class="line">&lt;frameset cols=<span class="string">&quot;250,*&quot;</span> border=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">	&lt;frame src=<span class="string">&quot;$&#123;ctx &#125;/sys/toMenuLeft.action&quot;</span> name=<span class="string">&quot;left&quot;</span>&gt;</span><br><span class="line">	&lt;frame src=<span class="string">&quot;$&#123;ctx &#125;/sys/toMenuRight.action&quot;</span> name=<span class="string">&quot;right&quot;</span>&gt;</span><br><span class="line">&lt;/frameset&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h4 id="创建system-menu-menuLeft-jsp"><a href="#创建system-menu-menuLeft-jsp" class="headerlink" title="创建system/menu/menuLeft.jsp"></a>创建system/menu/menuLeft.jsp</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;菜单管理&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;Access-Control-Allow-Origin&quot;</span> content=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/dtree.css&quot;</span>&gt;</span><br><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/font/dtreefont.css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	 &lt;ul id=&quot;menuTree&quot; class=&quot;dtree&quot; data-id=&quot;0&quot;&gt;&lt;/ul&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	<span class="keyword">var</span> menuTree;</span><br><span class="line">	layui.extend(&#123;</span><br><span class="line">		dtree:<span class="string">&#x27;$&#123;ctx&#125;/resources/layui_ext/dist/dtree&#x27;</span></span><br><span class="line">	&#125;).use([ <span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;form&#x27;</span>,<span class="string">&#x27;dtree&#x27;</span> ], function() &#123;</span><br><span class="line">		<span class="keyword">var</span> $ = layui.jquery;</span><br><span class="line">		<span class="keyword">var</span> layer = layui.layer;</span><br><span class="line">		<span class="keyword">var</span> form = layui.form;</span><br><span class="line">		<span class="keyword">var</span> dtree=layui.dtree;</span><br><span class="line"></span><br><span class="line">		 <span class="comment">// 初始化树</span></span><br><span class="line">	    menuTree = dtree.render(&#123;</span><br><span class="line">	      elem: <span class="string">&quot;#menuTree&quot;</span>,</span><br><span class="line">		  dataStyle: <span class="string">&quot;layuiStyle&quot;</span>,  <span class="comment">//使用layui风格的数据格式</span></span><br><span class="line">	      response:&#123;message:<span class="string">&quot;msg&quot;</span>,statusCode:<span class="number">0</span>&#125;,  <span class="comment">//修改response中返回数据的定义</span></span><br><span class="line">          dataFormat: <span class="string">&quot;list&quot;</span>,  <span class="comment">//配置data的风格为list</span></span><br><span class="line">          url: <span class="string">&quot;$&#123;ctx&#125;/menu/loadMenuManagerLeftTreeJson.action&quot;</span> <span class="comment">// 使用url加载（可与data加载同时存在）</span></span><br><span class="line">	    &#125;);</span><br><span class="line">		 </span><br><span class="line">		 <span class="comment">//监听树的节点点击 事件</span></span><br><span class="line">	    dtree.on(<span class="string">&quot;node(&#x27;menuTree&#x27;)&quot;</span> ,function(obj)&#123;</span><br><span class="line">	    	<span class="keyword">var</span> id=obj.param.nodeId;</span><br><span class="line">	    	 window.parent.right.reloadTable(id);</span><br><span class="line">	    &#125;);</span><br><span class="line">	&#125;);</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h4 id="创建system-menu-menuRight-jsp"><a href="#创建system-menu-menuRight-jsp" class="headerlink" title="创建system/menu/menuRight.jsp"></a>创建system/menu/menuRight.jsp</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;菜单管理&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;Access-Control-Allow-Origin&quot;</span> content=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/dtree.css&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/font/dtreefont.css&quot;</span>&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;style type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">		.select-test&#123;position: absolute;max-height: <span class="number">500</span>px;height: <span class="number">350</span>px;overflow: auto;width: <span class="number">100</span>%;z-index: <span class="number">123</span>;display: none;border:<span class="number">1</span>px solid silver;top: <span class="number">42</span>px;&#125;</span><br><span class="line">		.layui-show&#123;display: block!important;&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;childrenBody&quot;</span>&gt;</span><br><span class="line">	&lt;!-- 搜索条件开始 --&gt;</span><br><span class="line">	&lt;fieldset <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-elem-field layui-field-title&quot;</span> style=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span><br><span class="line">	  &lt;legend&gt;查询条件&lt;/legend&gt;</span><br><span class="line">	&lt;/fieldset&gt;</span><br><span class="line">	&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span> method=<span class="string">&quot;post&quot;</span> id=<span class="string">&quot;searchFrm&quot;</span>&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;菜单名称:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;title&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal  layui-icon layui-icon-search&quot; id=&quot;doSearch&quot;&gt;查询&lt;/button&gt;</span><br><span class="line">		      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm  layui-icon layui-icon-refresh&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		 &lt;/div&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 搜索条件结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 数据表格开始 --&gt;</span><br><span class="line">	&lt;table class=&quot;layui-hide&quot; id=&quot;menuTable&quot; lay-filter=&quot;menuTable&quot;&gt;&lt;/table&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;&quot;</span> id=<span class="string">&quot;menuToolBar&quot;</span>&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-sm&quot; lay-event=&quot;add&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-sm&quot; lay-event=&quot;batchDelete&quot;&gt;批量删除&lt;/button&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div  id=<span class="string">&quot;menuBar&quot;</span> style=<span class="string">&quot;display: none;&quot;</span>&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-xs&quot; lay-event=&quot;edit&quot;&gt;编辑&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-danger layui-btn-xs&quot; lay-event=&quot;del&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 数据表格结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 添加和修改的弹出层开始 --&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;padding: 20px&quot;</span> id=<span class="string">&quot;saveOrUpdateDiv&quot;</span> &gt;</span><br><span class="line">		&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span>  lay-filter=<span class="string">&quot;dataFrm&quot;</span> id=<span class="string">&quot;dataFrm&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				  &lt;label class=&quot;layui-form-label&quot;&gt;父给菜单：&lt;/label&gt;</span><br><span class="line">				   &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">				      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-unselect layui-form-select&quot;</span> id=<span class="string">&quot;pid_div&quot;</span>&gt;</span><br><span class="line">				        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-select-title&quot;</span>&gt;</span><br><span class="line">				          &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;pid&quot;</span> id=<span class="string">&quot;pid&quot;</span>&gt;</span><br><span class="line">				          &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;pid_str&quot;</span> id=<span class="string">&quot;pid_str&quot;</span> placeholder=<span class="string">&quot;请选择&quot;</span> readonly=<span class="string">&quot;&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input layui-unselect&quot;</span>&gt;</span><br><span class="line">				          &lt;i class=&quot;layui-edge&quot;&gt;&lt;/i&gt;</span><br><span class="line">				        &lt;/div&gt;</span><br><span class="line">				      &lt;/div&gt;</span><br><span class="line">				      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-card select-test&quot;</span> id=<span class="string">&quot;menuSelectDiv&quot;</span>&gt;</span><br><span class="line">				        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-card-body&quot;</span>&gt;</span><br><span class="line">				          &lt;div id=&quot;toolbarDiv&quot;&gt;&lt;ul id=&quot;menuTree&quot; class=&quot;dtree&quot; data-id=&quot;0&quot; style=&quot;width: 100%;&quot;&gt;&lt;/ul&gt;&lt;/div&gt;</span><br><span class="line">				        &lt;/div&gt;</span><br><span class="line">				      &lt;/div&gt;</span><br><span class="line">				  &lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;菜单名称:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;id&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;title&quot;</span>  placeholder=<span class="string">&quot;请输入菜单名称&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;菜单地址:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;href&quot;</span> placeholder=<span class="string">&quot;请输入菜单地址&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;菜单图标:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;icon&quot;</span>   placeholder=<span class="string">&quot;请输入菜单图标&quot;</span> lay-verify=<span class="string">&quot;required&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">							<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;TARGET:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;target&quot;</span>  placeholder=<span class="string">&quot;请输入TRAGET&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">							<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;是否展开:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;spread&quot;</span> value=<span class="string">&quot;1&quot;</span> title=<span class="string">&quot;展开&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;spread&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不展开&quot;</span>  checked=<span class="string">&quot;checked&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> checked=<span class="string">&quot;checked&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span> style=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span><br><span class="line">			    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">			      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal layui-btn-sm layui-icon layui-icon-release&quot; lay-filter=&quot;doSubmit&quot; lay-submit=&quot;&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">			      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm layui-btn-sm layui-icon layui-icon-refresh&quot; &gt;重置&lt;/button&gt;</span><br><span class="line">			    &lt;/div&gt;</span><br><span class="line">		  	&lt;/div&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 添加和修改的弹出层结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;script src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	    <span class="keyword">var</span> tableIns;</span><br><span class="line">	    layui.extend(&#123;</span><br><span class="line">			dtree:<span class="string">&#x27;$&#123;ctx&#125;/resources/layui_ext/dist/dtree&#x27;</span></span><br><span class="line">		&#125;).use([ <span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;form&#x27;</span>, <span class="string">&#x27;table&#x27;</span>,<span class="string">&#x27;dtree&#x27;</span>  ], function() &#123;</span><br><span class="line">			<span class="keyword">var</span> $ = layui.jquery;</span><br><span class="line">			<span class="keyword">var</span> layer = layui.layer;</span><br><span class="line">			<span class="keyword">var</span> form = layui.form;</span><br><span class="line">			<span class="keyword">var</span> table = layui.table;</span><br><span class="line">			<span class="keyword">var</span> dtree=layui.dtree;</span><br><span class="line">			<span class="comment">//渲染数据表格</span></span><br><span class="line">			 tableIns=table.render(&#123;</span><br><span class="line">				 elem: <span class="string">&#x27;#menuTable&#x27;</span>   <span class="comment">//渲染的目标对象</span></span><br><span class="line">			    ,url:<span class="string">&#x27;$&#123;ctx&#125;/menu/loadAllMenu.action&#x27;</span> <span class="comment">//数据接口</span></span><br><span class="line">			    ,title: <span class="string">&#x27;用户数据表&#x27;</span><span class="comment">//数据导出来的标题</span></span><br><span class="line">			    ,toolbar:<span class="string">&quot;#menuToolBar&quot;</span>   <span class="comment">//表格的工具条</span></span><br><span class="line">			    ,height:<span class="string">&#x27;full-150&#x27;</span></span><br><span class="line">			    ,cellMinWidth:<span class="number">100</span> <span class="comment">//设置列的最小默认宽度</span></span><br><span class="line">			    ,page: <span class="keyword">true</span>  <span class="comment">//是否启用分页</span></span><br><span class="line">			    ,cols: [[   <span class="comment">//列表数据</span></span><br><span class="line">			     &#123;type: <span class="string">&#x27;checkbox&#x27;</span>, fixed: <span class="string">&#x27;left&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;id&#x27;</span>, title:<span class="string">&#x27;ID&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;80&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;pid&#x27;</span>, title:<span class="string">&#x27;父节点ID&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;title&#x27;</span>, title:<span class="string">&#x27;菜单名称&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;120&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;href&#x27;</span>, title:<span class="string">&#x27;菜单地址&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;220&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;spread&#x27;</span>, title:<span class="string">&#x27;是否展开&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> d.spread==<span class="string">&#x27;1&#x27;</span>?<span class="string">&#x27;&lt;font color=blue&gt;展开&lt;/font&gt;&#x27;</span>:<span class="string">&#x27;&lt;font color=red&gt;不展开&lt;/font&gt;&#x27;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;target&#x27;</span>, title:<span class="string">&#x27;TARGET&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;icon&#x27;</span>, title:<span class="string">&#x27;菜单图标&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> <span class="string">&quot;&lt;div class=&#x27;layui-icon&#x27;&gt;&quot;</span>+d.icon+<span class="string">&quot;&lt;/div&gt;&quot;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;available&#x27;</span>, title:<span class="string">&#x27;是否可用&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> d.available==<span class="string">&#x27;1&#x27;</span>?<span class="string">&#x27;&lt;font color=blue&gt;可用&lt;/font&gt;&#x27;</span>:<span class="string">&#x27;&lt;font color=red&gt;不可用&lt;/font&gt;&#x27;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;fixed: <span class="string">&#x27;right&#x27;</span>, title:<span class="string">&#x27;操作&#x27;</span>, toolbar: <span class="string">&#x27;#menuBar&#x27;</span>, width:<span class="number">180</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			    ]]</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//模糊查询</span></span><br><span class="line">			$(<span class="string">&quot;#doSearch&quot;</span>).click(function()&#123;</span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#searchFrm&quot;</span>).serialize();</span><br><span class="line">				alert(params);</span><br><span class="line">				tableIns.reload(&#123;</span><br><span class="line">					url:<span class="string">&quot;$&#123;ctx&#125;/menu/loadAllMenu.action?&quot;</span>+params</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//监听头部工具栏事件</span></span><br><span class="line">			table.on(<span class="string">&quot;toolbar(menuTable)&quot;</span>,function(obj)&#123;</span><br><span class="line">				 <span class="keyword">switch</span>(obj.event)&#123;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">				      openAddMenu();</span><br><span class="line">				    <span class="keyword">break</span>;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;batchDelete&#x27;</span>:</span><br><span class="line">				      layer.msg(<span class="string">&#x27;批量删除&#x27;</span>);</span><br><span class="line">				    <span class="keyword">break</span>;</span><br><span class="line">				  &#125;;</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//监听行工具事件</span></span><br><span class="line">		   table.on(<span class="string">&#x27;tool(menuTable)&#x27;</span>, function(obj)&#123;</span><br><span class="line">			   <span class="keyword">var</span> data = obj.data; <span class="comment">//获得当前行数据</span></span><br><span class="line">			   <span class="keyword">var</span> layEvent = obj.event; <span class="comment">//获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）</span></span><br><span class="line">			  <span class="keyword">if</span>(layEvent === <span class="string">&#x27;del&#x27;</span>)&#123; <span class="comment">//删除</span></span><br><span class="line">				 layer.msg(<span class="string">&quot;删除&quot;</span>);</span><br><span class="line">			     layer.confirm(<span class="string">&#x27;真的删除行么&#x27;</span>, function(index)&#123;</span><br><span class="line">			       layer.close(index);</span><br><span class="line">			       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">			     &#125;);</span><br><span class="line">			   &#125; <span class="keyword">else</span> <span class="keyword">if</span>(layEvent === <span class="string">&#x27;edit&#x27;</span>)&#123; <span class="comment">//编辑</span></span><br><span class="line">			     <span class="comment">//do something</span></span><br><span class="line">				   layer.msg(<span class="string">&quot;修改&quot;</span>)</span><br><span class="line">			   &#125;</span><br><span class="line">			 &#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">var</span> url;</span><br><span class="line">			<span class="keyword">var</span> mainIndex;</span><br><span class="line">			<span class="comment">//打开添加页面</span></span><br><span class="line">			<span class="function">function <span class="title">openAddMenu</span><span class="params">()</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;添加菜单&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;450px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						<span class="comment">//清空表单数据       </span></span><br><span class="line">						$(<span class="string">&quot;#dataFrm&quot;</span>)[<span class="number">0</span>].reset();</span><br><span class="line">						$(<span class="string">&quot;#menuSelectDiv&quot;</span>).removeClass(<span class="string">&quot;layui-show&quot;</span>);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/menu/addMenu.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//打开修改页面</span></span><br><span class="line">			<span class="function">function <span class="title">openUpdateMenu</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;修改用户&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;450px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						form.val(<span class="string">&quot;dataFrm&quot;</span>,data);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/menu/updateMenu.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//保存</span></span><br><span class="line">			form.on(<span class="string">&quot;submit(doSubmit)&quot;</span>,function(obj)&#123;</span><br><span class="line">				<span class="comment">//序列化表单数据</span></span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#dataFrm&quot;</span>).serialize();</span><br><span class="line">				$.post(url,params,function(obj)&#123;</span><br><span class="line">					layer.msg(obj.msg);</span><br><span class="line">					<span class="comment">//关闭弹出层</span></span><br><span class="line">					layer.close(mainIndex)</span><br><span class="line">					<span class="comment">//刷新数据 表格</span></span><br><span class="line">					tableIns.reload();</span><br><span class="line">					<span class="comment">//刷新左边的树</span></span><br><span class="line">					<span class="comment">//window.parent.left.menuTree.reload();</span></span><br><span class="line">					<span class="comment">//刷新添加和修改的下拉树</span></span><br><span class="line">					menuTree.reload();</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			<span class="comment">//初始化添加和修改页面的下拉树</span></span><br><span class="line">			<span class="keyword">var</span> menuTree = dtree.render(&#123;</span><br><span class="line">				  elem: <span class="string">&quot;#menuTree&quot;</span>,</span><br><span class="line">				  dataStyle: <span class="string">&quot;layuiStyle&quot;</span>,  <span class="comment">//使用layui风格的数据格式</span></span><br><span class="line">			      response:&#123;message:<span class="string">&quot;msg&quot;</span>,statusCode:<span class="number">0</span>&#125;,  <span class="comment">//修改response中返回数据的定义</span></span><br><span class="line">		          dataFormat: <span class="string">&quot;list&quot;</span>,  <span class="comment">//配置data的风格为list</span></span><br><span class="line">		          url: <span class="string">&quot;$&#123;ctx&#125;/menu/loadMenuManagerLeftTreeJson.action?spread=1&quot;</span>,  <span class="comment">// 使用url加载（可与data加载同时存在）</span></span><br><span class="line">				  icon: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">				  accordion:<span class="keyword">true</span></span><br><span class="line">				&#125;);</span><br><span class="line">				$(<span class="string">&quot;#pid_div&quot;</span>).on(<span class="string">&quot;click&quot;</span>,function()&#123;</span><br><span class="line">				  $(<span class="keyword">this</span>).toggleClass(<span class="string">&quot;layui-form-selected&quot;</span>);</span><br><span class="line">				  $(<span class="string">&quot;#menuSelectDiv&quot;</span>).toggleClass(<span class="string">&quot;layui-show layui-anim layui-anim-upbit&quot;</span>);</span><br><span class="line">				&#125;);</span><br><span class="line">				dtree.on(<span class="string">&quot;node(menuTree)&quot;</span>, function(obj)&#123;</span><br><span class="line">				  $(<span class="string">&quot;#pid_str&quot;</span>).val(obj.param.context);</span><br><span class="line">				  $(<span class="string">&quot;#pid&quot;</span>).val(obj.param.nodeId);</span><br><span class="line">				  $(<span class="string">&quot;#pid_div&quot;</span>).toggleClass(<span class="string">&quot;layui-form-selected&quot;</span>);</span><br><span class="line">				  $(<span class="string">&quot;#menuSelectDiv&quot;</span>).toggleClass(<span class="string">&quot;layui-show layui-anim layui-anim-upbit&quot;</span>);</span><br><span class="line">				&#125;);</span><br><span class="line">			</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">		<span class="function">function <span class="title">reloadTable</span><span class="params">(id)</span></span>&#123;</span><br><span class="line">			tableIns.reload(&#123;</span><br><span class="line">				url:<span class="string">&quot;$&#123;ctx&#125;/menu/loadAllMenu.action?id=&quot;</span>+id</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h4 id="最终结果"><a href="#最终结果" class="headerlink" title="最终结果"></a>最终结果</h4><p><img src="https://s1.ax1x.com/2020/10/16/0bm8Zq.png" alt="0bm8Zq.png"></p>
<h3 id="添加功能"><a href="#添加功能" class="headerlink" title="添加功能"></a>添加功能</h3><h4 id="修改system-menu-menuRight-jsp"><a href="#修改system-menu-menuRight-jsp" class="headerlink" title="修改system/menu/menuRight.jsp"></a>修改system/menu/menuRight.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;菜单管理&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;Access-Control-Allow-Origin&quot;</span> content=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/dtree.css&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/font/dtreefont.css&quot;</span>&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;style type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">		.select-test&#123;position: absolute;max-height: <span class="number">500</span>px;height: <span class="number">350</span>px;overflow: auto;width: <span class="number">100</span>%;z-index: <span class="number">123</span>;display: none;border:<span class="number">1</span>px solid silver;top: <span class="number">42</span>px;&#125;</span><br><span class="line">		.layui-show&#123;display: block!important;&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;childrenBody&quot;</span>&gt;</span><br><span class="line">	&lt;!-- 搜索条件开始 --&gt;</span><br><span class="line">	&lt;fieldset <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-elem-field layui-field-title&quot;</span> style=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span><br><span class="line">	  &lt;legend&gt;查询条件&lt;/legend&gt;</span><br><span class="line">	&lt;/fieldset&gt;</span><br><span class="line">	&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span> method=<span class="string">&quot;post&quot;</span> id=<span class="string">&quot;searchFrm&quot;</span>&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;菜单名称:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;title&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal  layui-icon layui-icon-search&quot; id=&quot;doSearch&quot;&gt;查询&lt;/button&gt;</span><br><span class="line">		      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm  layui-icon layui-icon-refresh&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		 &lt;/div&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 搜索条件结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 数据表格开始 --&gt;</span><br><span class="line">	&lt;table class=&quot;layui-hide&quot; id=&quot;menuTable&quot; lay-filter=&quot;menuTable&quot;&gt;&lt;/table&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;&quot;</span> id=<span class="string">&quot;menuToolBar&quot;</span>&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-sm&quot; lay-event=&quot;add&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-sm&quot; lay-event=&quot;batchDelete&quot;&gt;批量删除&lt;/button&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div  id=<span class="string">&quot;menuBar&quot;</span> style=<span class="string">&quot;display: none;&quot;</span>&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-xs&quot; lay-event=&quot;edit&quot;&gt;编辑&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-danger layui-btn-xs&quot; lay-event=&quot;del&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 数据表格结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 添加和修改的弹出层开始 --&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;padding: 20px&quot;</span> id=<span class="string">&quot;saveOrUpdateDiv&quot;</span> &gt;</span><br><span class="line">		&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span>  lay-filter=<span class="string">&quot;dataFrm&quot;</span> id=<span class="string">&quot;dataFrm&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				  &lt;label class=&quot;layui-form-label&quot;&gt;父给菜单：&lt;/label&gt;</span><br><span class="line">				   &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">				      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-unselect layui-form-select&quot;</span> id=<span class="string">&quot;pid_div&quot;</span>&gt;</span><br><span class="line">				        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-select-title&quot;</span>&gt;</span><br><span class="line">				          &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;pid&quot;</span> id=<span class="string">&quot;pid&quot;</span>&gt;</span><br><span class="line">				          &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;pid_str&quot;</span> id=<span class="string">&quot;pid_str&quot;</span> placeholder=<span class="string">&quot;请选择&quot;</span> readonly=<span class="string">&quot;&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input layui-unselect&quot;</span>&gt;</span><br><span class="line">				          &lt;i class=&quot;layui-edge&quot;&gt;&lt;/i&gt;</span><br><span class="line">				        &lt;/div&gt;</span><br><span class="line">				      &lt;/div&gt;</span><br><span class="line">				      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-card select-test&quot;</span> id=<span class="string">&quot;menuSelectDiv&quot;</span>&gt;</span><br><span class="line">				        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-card-body&quot;</span>&gt;</span><br><span class="line">				          &lt;div id=&quot;toolbarDiv&quot;&gt;&lt;ul id=&quot;menuTree&quot; class=&quot;dtree&quot; data-id=&quot;0&quot; style=&quot;width: 100%;&quot;&gt;&lt;/ul&gt;&lt;/div&gt;</span><br><span class="line">				        &lt;/div&gt;</span><br><span class="line">				      &lt;/div&gt;</span><br><span class="line">				  &lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;菜单名称:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;id&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;title&quot;</span>  placeholder=<span class="string">&quot;请输入菜单名称&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;菜单地址:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;href&quot;</span> placeholder=<span class="string">&quot;请输入菜单地址&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;菜单图标:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;icon&quot;</span>   placeholder=<span class="string">&quot;请输入菜单图标&quot;</span> lay-verify=<span class="string">&quot;required&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">							<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;TARGET:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;target&quot;</span>  placeholder=<span class="string">&quot;请输入TRAGET&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">							<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;是否展开:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;spread&quot;</span> value=<span class="string">&quot;1&quot;</span> title=<span class="string">&quot;展开&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;spread&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不展开&quot;</span>  checked=<span class="string">&quot;checked&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> checked=<span class="string">&quot;checked&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span> style=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span><br><span class="line">			    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">			      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal layui-btn-sm layui-icon layui-icon-release&quot; lay-filter=&quot;doSubmit&quot; lay-submit=&quot;&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">			      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm layui-btn-sm layui-icon layui-icon-refresh&quot; &gt;重置&lt;/button&gt;</span><br><span class="line">			    &lt;/div&gt;</span><br><span class="line">		  	&lt;/div&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 添加和修改的弹出层结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;script src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	    <span class="keyword">var</span> tableIns;</span><br><span class="line">	    layui.extend(&#123;</span><br><span class="line">			dtree:<span class="string">&#x27;$&#123;ctx&#125;/resources/layui_ext/dist/dtree&#x27;</span></span><br><span class="line">		&#125;).use([ <span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;form&#x27;</span>, <span class="string">&#x27;table&#x27;</span>,<span class="string">&#x27;dtree&#x27;</span>  ], function() &#123;</span><br><span class="line">			<span class="keyword">var</span> $ = layui.jquery;</span><br><span class="line">			<span class="keyword">var</span> layer = layui.layer;</span><br><span class="line">			<span class="keyword">var</span> form = layui.form;</span><br><span class="line">			<span class="keyword">var</span> table = layui.table;</span><br><span class="line">			<span class="keyword">var</span> dtree=layui.dtree;</span><br><span class="line">			<span class="comment">//渲染数据表格</span></span><br><span class="line">			 tableIns=table.render(&#123;</span><br><span class="line">				 elem: <span class="string">&#x27;#menuTable&#x27;</span>   <span class="comment">//渲染的目标对象</span></span><br><span class="line">			    ,url:<span class="string">&#x27;$&#123;ctx&#125;/menu/loadAllMenu.action&#x27;</span> <span class="comment">//数据接口</span></span><br><span class="line">			    ,title: <span class="string">&#x27;用户数据表&#x27;</span><span class="comment">//数据导出来的标题</span></span><br><span class="line">			    ,toolbar:<span class="string">&quot;#menuToolBar&quot;</span>   <span class="comment">//表格的工具条</span></span><br><span class="line">			    ,height:<span class="string">&#x27;full-150&#x27;</span></span><br><span class="line">			    ,cellMinWidth:<span class="number">100</span> <span class="comment">//设置列的最小默认宽度</span></span><br><span class="line">			    ,page: <span class="keyword">true</span>  <span class="comment">//是否启用分页</span></span><br><span class="line">			    ,cols: [[   <span class="comment">//列表数据</span></span><br><span class="line">			     &#123;type: <span class="string">&#x27;checkbox&#x27;</span>, fixed: <span class="string">&#x27;left&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;id&#x27;</span>, title:<span class="string">&#x27;ID&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;80&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;pid&#x27;</span>, title:<span class="string">&#x27;父节点ID&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;title&#x27;</span>, title:<span class="string">&#x27;菜单名称&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;120&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;href&#x27;</span>, title:<span class="string">&#x27;菜单地址&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;220&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;spread&#x27;</span>, title:<span class="string">&#x27;是否展开&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> d.spread==<span class="string">&#x27;1&#x27;</span>?<span class="string">&#x27;&lt;font color=blue&gt;展开&lt;/font&gt;&#x27;</span>:<span class="string">&#x27;&lt;font color=red&gt;不展开&lt;/font&gt;&#x27;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;target&#x27;</span>, title:<span class="string">&#x27;TARGET&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;icon&#x27;</span>, title:<span class="string">&#x27;菜单图标&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> <span class="string">&quot;&lt;div class=&#x27;layui-icon&#x27;&gt;&quot;</span>+d.icon+<span class="string">&quot;&lt;/div&gt;&quot;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;available&#x27;</span>, title:<span class="string">&#x27;是否可用&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,width:<span class="string">&#x27;100&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> d.available==<span class="string">&#x27;1&#x27;</span>?<span class="string">&#x27;&lt;font color=blue&gt;可用&lt;/font&gt;&#x27;</span>:<span class="string">&#x27;&lt;font color=red&gt;不可用&lt;/font&gt;&#x27;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;fixed: <span class="string">&#x27;right&#x27;</span>, title:<span class="string">&#x27;操作&#x27;</span>, toolbar: <span class="string">&#x27;#menuBar&#x27;</span>, width:<span class="number">180</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			    ]]</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//模糊查询</span></span><br><span class="line">			$(<span class="string">&quot;#doSearch&quot;</span>).click(function()&#123;</span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#searchFrm&quot;</span>).serialize();</span><br><span class="line">				alert(params);</span><br><span class="line">				tableIns.reload(&#123;</span><br><span class="line">					url:<span class="string">&quot;$&#123;ctx&#125;/menu/loadAllMenu.action?&quot;</span>+params</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//监听头部工具栏事件</span></span><br><span class="line">			table.on(<span class="string">&quot;toolbar(menuTable)&quot;</span>,function(obj)&#123;</span><br><span class="line">				 <span class="keyword">switch</span>(obj.event)&#123;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">				      openAddMenu();</span><br><span class="line">				    <span class="keyword">break</span>;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;batchDelete&#x27;</span>:</span><br><span class="line">				      layer.msg(<span class="string">&#x27;批量删除&#x27;</span>);</span><br><span class="line">				    <span class="keyword">break</span>;</span><br><span class="line">				  &#125;;</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//监听行工具事件</span></span><br><span class="line">		   table.on(<span class="string">&#x27;tool(menuTable)&#x27;</span>, function(obj)&#123;</span><br><span class="line">			   <span class="keyword">var</span> data = obj.data; <span class="comment">//获得当前行数据</span></span><br><span class="line">			   <span class="keyword">var</span> layEvent = obj.event; <span class="comment">//获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）</span></span><br><span class="line">			  <span class="keyword">if</span>(layEvent === <span class="string">&#x27;del&#x27;</span>)&#123; <span class="comment">//删除</span></span><br><span class="line">				 layer.msg(<span class="string">&quot;删除&quot;</span>);</span><br><span class="line">			     layer.confirm(<span class="string">&#x27;真的删除行么&#x27;</span>, function(index)&#123;</span><br><span class="line">			       layer.close(index);</span><br><span class="line">			       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">			     &#125;);</span><br><span class="line">			   &#125; <span class="keyword">else</span> <span class="keyword">if</span>(layEvent === <span class="string">&#x27;edit&#x27;</span>)&#123; <span class="comment">//编辑</span></span><br><span class="line">			     <span class="comment">//do something</span></span><br><span class="line">				   layer.msg(<span class="string">&quot;修改&quot;</span>)</span><br><span class="line">			   &#125;</span><br><span class="line">			 &#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">var</span> url;</span><br><span class="line">			<span class="keyword">var</span> mainIndex;</span><br><span class="line">			<span class="comment">//打开添加页面</span></span><br><span class="line">			<span class="function">function <span class="title">openAddMenu</span><span class="params">()</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;添加菜单&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;450px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						<span class="comment">//清空表单数据       </span></span><br><span class="line">						$(<span class="string">&quot;#dataFrm&quot;</span>)[<span class="number">0</span>].reset();</span><br><span class="line">						$(<span class="string">&quot;#menuSelectDiv&quot;</span>).removeClass(<span class="string">&quot;layui-show&quot;</span>);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/menu/addMenu.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//打开修改页面</span></span><br><span class="line">			<span class="function">function <span class="title">openUpdateMenu</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;修改用户&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;450px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						form.val(<span class="string">&quot;dataFrm&quot;</span>,data);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/menu/updateMenu.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//保存</span></span><br><span class="line">			form.on(<span class="string">&quot;submit(doSubmit)&quot;</span>,function(obj)&#123;</span><br><span class="line">				<span class="comment">//序列化表单数据</span></span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#dataFrm&quot;</span>).serialize();</span><br><span class="line">				$.post(url,params,function(obj)&#123;</span><br><span class="line">					layer.msg(obj.msg);</span><br><span class="line">					<span class="comment">//关闭弹出层</span></span><br><span class="line">					layer.close(mainIndex)</span><br><span class="line">					<span class="comment">//刷新数据 表格</span></span><br><span class="line">					tableIns.reload();</span><br><span class="line">					<span class="comment">//刷新左边的树</span></span><br><span class="line">					<span class="comment">//window.parent.left.menuTree.reload();</span></span><br><span class="line">					<span class="comment">//刷新添加和修改的下拉树</span></span><br><span class="line">					menuTree.reload();</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			<span class="comment">//初始化添加和修改页面的下拉树</span></span><br><span class="line">			<span class="keyword">var</span> menuTree = dtree.render(&#123;</span><br><span class="line">				  elem: <span class="string">&quot;#menuTree&quot;</span>,</span><br><span class="line">				  dataStyle: <span class="string">&quot;layuiStyle&quot;</span>,  <span class="comment">//使用layui风格的数据格式</span></span><br><span class="line">			      response:&#123;message:<span class="string">&quot;msg&quot;</span>,statusCode:<span class="number">0</span>&#125;,  <span class="comment">//修改response中返回数据的定义</span></span><br><span class="line">		          dataFormat: <span class="string">&quot;list&quot;</span>,  <span class="comment">//配置data的风格为list</span></span><br><span class="line">		          url: <span class="string">&quot;$&#123;ctx&#125;/menu/loadMenuManagerLeftTreeJson.action?spread=1&quot;</span>,  <span class="comment">// 使用url加载（可与data加载同时存在）</span></span><br><span class="line">				  icon: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">				  accordion:<span class="keyword">true</span></span><br><span class="line">				&#125;);</span><br><span class="line">				$(<span class="string">&quot;#pid_div&quot;</span>).on(<span class="string">&quot;click&quot;</span>,function()&#123;</span><br><span class="line">				  $(<span class="keyword">this</span>).toggleClass(<span class="string">&quot;layui-form-selected&quot;</span>);</span><br><span class="line">				  $(<span class="string">&quot;#menuSelectDiv&quot;</span>).toggleClass(<span class="string">&quot;layui-show layui-anim layui-anim-upbit&quot;</span>);</span><br><span class="line">				&#125;);</span><br><span class="line">				dtree.on(<span class="string">&quot;node(menuTree)&quot;</span>, function(obj)&#123;</span><br><span class="line">				  $(<span class="string">&quot;#pid_str&quot;</span>).val(obj.param.context);</span><br><span class="line">				  $(<span class="string">&quot;#pid&quot;</span>).val(obj.param.nodeId);</span><br><span class="line">				  $(<span class="string">&quot;#pid_div&quot;</span>).toggleClass(<span class="string">&quot;layui-form-selected&quot;</span>);</span><br><span class="line">				  $(<span class="string">&quot;#menuSelectDiv&quot;</span>).toggleClass(<span class="string">&quot;layui-show layui-anim layui-anim-upbit&quot;</span>);</span><br><span class="line">				&#125;);</span><br><span class="line">			</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">		<span class="function">function <span class="title">reloadTable</span><span class="params">(id)</span></span>&#123;</span><br><span class="line">			tableIns.reload(&#123;</span><br><span class="line">				url:<span class="string">&quot;$&#123;ctx&#125;/menu/loadAllMenu.action?id=&quot;</span>+id</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="修改SysConstas类"><a href="#修改SysConstas类" class="headerlink" title="修改SysConstas类"></a>修改SysConstas类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.constast;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者 张帅:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 12, 2020 6:11:25 PM 类说明:常量接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SysConstast</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	String USER_LOGIN_ERROR_MSG = <span class="string">&quot;用户名或密码不正确&quot;</span>;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 可用状态</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Integer AVAILABLE_TRUE = <span class="number">1</span>;</span><br><span class="line">	Integer AVAILABLE_FALSE = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 用户类型</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Integer USER_TYPE_SUPER = <span class="number">1</span>;</span><br><span class="line">	Integer USER_TYPE_NORMAL = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 是否展开</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Integer SPREAD_TRUE = <span class="number">1</span>;</span><br><span class="line">	Integer SPREAD_FALSE = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 操作状态</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	String ADD_SUCCESS = <span class="string">&quot;添加成功&quot;</span>;</span><br><span class="line">	String ADD_ERROR = <span class="string">&quot;添加失败&quot;</span>;</span><br><span class="line"></span><br><span class="line">	String UPDATE_SUCCESS = <span class="string">&quot;更新成功&quot;</span>;</span><br><span class="line">	String UPDATE_ERROR = <span class="string">&quot;更新失败&quot;</span>;</span><br><span class="line"></span><br><span class="line">	String DELETE_SUCCESS = <span class="string">&quot;删除成功&quot;</span>;</span><br><span class="line">	String DELETE_ERROR = <span class="string">&quot;删除失败&quot;</span>;</span><br><span class="line"></span><br><span class="line">	String RESET_SUCCESS = <span class="string">&quot;重置成功&quot;</span>;</span><br><span class="line">	String RESET_ERROR = <span class="string">&quot;重置失败&quot;</span>;</span><br><span class="line"></span><br><span class="line">	String DISPATCH_SUCCESS = <span class="string">&quot;分配成功&quot;</span>;</span><br><span class="line">	String DISPATCH_ERROR = <span class="string">&quot;分配失败&quot;</span>;</span><br><span class="line"></span><br><span class="line">	Integer CODE_SUCCESS = <span class="number">0</span>; <span class="comment">// 操作成功</span></span><br><span class="line">	Integer CODE_ERROR = <span class="number">1</span>;<span class="comment">//操作失败</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="创建ResultObj-java类"><a href="#创建ResultObj-java类" class="headerlink" title="创建ResultObj.java类"></a>创建ResultObj.java类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.constast.SysConstast;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 17, 2020 2:30:40 PM</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResultObj</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> Integer code=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">private</span> String msg;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 添加成功</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj ADD_SUCCESS=<span class="keyword">new</span> ResultObj(SysConstast.CODE_SUCCESS, SysConstast.ADD_SUCCESS); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 添加失败</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj ADD_ERROR=<span class="keyword">new</span> ResultObj(SysConstast.CODE_ERROR, SysConstast.ADD_ERROR); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 更新成功</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj UPDATE_SUCCESS=<span class="keyword">new</span> ResultObj(SysConstast.CODE_SUCCESS, SysConstast.UPDATE_SUCCESS); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 更新失败</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj UPDATE_ERROR=<span class="keyword">new</span> ResultObj(SysConstast.CODE_ERROR, SysConstast.UPDATE_ERROR); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 删除成功</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj DELETE_SUCCESS=<span class="keyword">new</span> ResultObj(SysConstast.CODE_SUCCESS, SysConstast.DELETE_SUCCESS); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 删除失败</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj DELETE_ERROR=<span class="keyword">new</span> ResultObj(SysConstast.CODE_ERROR, SysConstast.DELETE_ERROR); </span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 重置成功</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj RESET_SUCCESS=<span class="keyword">new</span> ResultObj(SysConstast.CODE_SUCCESS, SysConstast.RESET_SUCCESS); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 重置失败</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj RESET_ERROR=<span class="keyword">new</span> ResultObj(SysConstast.CODE_ERROR, SysConstast.RESET_ERROR); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 分配成功</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj DISPATCH_SUCCESS=<span class="keyword">new</span> ResultObj(SysConstast.CODE_SUCCESS, SysConstast.DISPATCH_SUCCESS); </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 分配失败</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResultObj DISPATCH_ERROR=<span class="keyword">new</span> ResultObj(SysConstast.CODE_ERROR, SysConstast.DISPATCH_ERROR); </span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">ResultObj</span><span class="params">(Integer code, String msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.code = code;</span><br><span class="line">		<span class="keyword">this</span>.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> code;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCode</span><span class="params">(Integer code)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.code = code;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> msg;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="修改MenuController"><a href="#修改MenuController" class="headerlink" title="修改MenuController"></a>修改MenuController</h4><p>新增方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 添加菜单</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;addMenu&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">addMenu</span><span class="params">(MenuVo menVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.menuService.addMenu(menVo);</span><br><span class="line">			<span class="keyword">return</span> ResultObj.ADD_SUCCESS;</span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> ResultObj.ADD_ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改MenuService"><a href="#修改MenuService" class="headerlink" title="修改MenuService"></a>修改MenuService</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 添加菜单</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> menVo</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addMenu</span><span class="params">(MenuVo menVo)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="修改MenuServiceImpl"><a href="#修改MenuServiceImpl" class="headerlink" title="修改MenuServiceImpl"></a>修改MenuServiceImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addMenu</span><span class="params">(MenuVo menVo)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">this</span>.menuMapper.insertSelective(menVo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="修改功能"><a href="#修改功能" class="headerlink" title="修改功能"></a>修改功能</h3><h4 id="修改menuRight-jsp"><a href="#修改menuRight-jsp" class="headerlink" title="修改menuRight.jsp"></a>修改menuRight.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//打开修改页面</span></span><br><span class="line">			<span class="function">function <span class="title">openUpdateMenu</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;修改用户&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;450px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						form.val(<span class="string">&quot;dataFrm&quot;</span>,data);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/menu/updateMenu.action&quot;</span>;</span><br><span class="line">						<span class="comment">//反选下拉树</span></span><br><span class="line">						<span class="keyword">var</span> pid=data.pid;</span><br><span class="line">					    <span class="keyword">var</span> params = dtree.dataInit(<span class="string">&quot;menuTree&quot;</span>, pid);</span><br><span class="line">					    <span class="comment">//移除打开的样式</span></span><br><span class="line">					    $(<span class="string">&quot;#menuSelectDiv&quot;</span>).removeClass(<span class="string">&quot;layui-show&quot;</span>);</span><br><span class="line">					    <span class="comment">//给下拉框的text框赋值</span></span><br><span class="line">					    $(<span class="string">&quot;#pid_str&quot;</span>).val(params.context);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//保存</span></span><br><span class="line">			form.on(<span class="string">&quot;submit(doSubmit)&quot;</span>,function(obj)&#123;</span><br><span class="line">				<span class="comment">//序列化表单数据</span></span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#dataFrm&quot;</span>).serialize();</span><br><span class="line">				$.post(url,params,function(obj)&#123;</span><br><span class="line">					layer.msg(obj.msg);</span><br><span class="line">					<span class="comment">//关闭弹出层</span></span><br><span class="line">					layer.close(mainIndex)</span><br><span class="line">					<span class="comment">//刷新数据 表格</span></span><br><span class="line">					tableIns.reload();</span><br><span class="line">					<span class="comment">//刷新左边的树</span></span><br><span class="line">					window.parent.left.menuTree.reload();</span><br><span class="line">					<span class="comment">//刷新添加和修改的下拉树</span></span><br><span class="line">					menuTree.reload();</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="为MenuControler新增方法"><a href="#为MenuControler新增方法" class="headerlink" title="为MenuControler新增方法"></a>为MenuControler新增方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 修改菜单</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;updateMenu&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">updateMenu</span><span class="params">(MenuVo menVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.menuService.updateMenu(menVo);</span><br><span class="line">			<span class="keyword">return</span> ResultObj.UPDATE_SUCCESS;</span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> ResultObj.UPDATE_ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h4 id="在MenuService接口中添加修改菜单的接口"><a href="#在MenuService接口中添加修改菜单的接口" class="headerlink" title="在MenuService接口中添加修改菜单的接口"></a>在MenuService接口中添加修改菜单的接口</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 修改菜单</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> menVo</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateMenu</span><span class="params">(MenuVo menVo)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="在MenuServiceImpl中实现该方法"><a href="#在MenuServiceImpl中实现该方法" class="headerlink" title="在MenuServiceImpl中实现该方法"></a>在MenuServiceImpl中实现该方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateMenu</span><span class="params">(MenuVo menVo)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">this</span>.menuMapper.updateByPrimaryKeySelective(menVo);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h3 id="删除功能"><a href="#删除功能" class="headerlink" title="删除功能"></a>删除功能</h3><h4 id="功能分析-1"><a href="#功能分析-1" class="headerlink" title="功能分析"></a>功能分析</h4><p>删除菜单时候需要先判断这个菜单有没有子菜单（前台传入一个id，后台拿到这个id首先去sys_role_menu中判断pid=id的数据是否大于0，如果大于0，说明有子菜单，不能删除，否则继续往下进行以下的步骤），没有子菜单需要删除sys_menu表中的节点，同时删除sys_role_menu表中pid=id的数据</p>
<h4 id="修改menuRight-jsp-1"><a href="#修改menuRight-jsp-1" class="headerlink" title="修改menuRight.jsp"></a>修改menuRight.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//监听行工具事件</span></span><br><span class="line">		   table.on(<span class="string">&#x27;tool(menuTable)&#x27;</span>, function(obj)&#123;</span><br><span class="line">			   <span class="keyword">var</span> data = obj.data; <span class="comment">//获得当前行数据</span></span><br><span class="line">			   <span class="keyword">var</span> layEvent = obj.event; <span class="comment">//获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）</span></span><br><span class="line">			  <span class="keyword">if</span>(layEvent === <span class="string">&#x27;del&#x27;</span>)&#123; <span class="comment">//删除</span></span><br><span class="line">				  <span class="comment">//先判断当前菜单有没有子节点</span></span><br><span class="line">				  $.post(<span class="string">&quot;$&#123;ctx&#125;/menu/checkMenuHasChildren.action?id=&quot;</span>+data.id,function(obj)&#123;</span><br><span class="line">					  <span class="keyword">if</span>(obj.code&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">						  layer.msg(<span class="string">&quot;当前菜单有子节点同，请先删子节点&quot;</span>);</span><br><span class="line">					  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">						  layer.confirm(<span class="string">&#x27;真的删除【&#x27;</span>+data.title+<span class="string">&#x27;】这个菜单吗&#x27;</span>, function(index)&#123;</span><br><span class="line">						       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">						       $.post(<span class="string">&quot;$&#123;ctx&#125;/menu/deleteMenu.action&quot;</span>,&#123;id:data.id&#125;,function(res)&#123;</span><br><span class="line">						    	   layer.msg(res.msg);</span><br><span class="line">						    	    <span class="comment">//刷新数据 表格</span></span><br><span class="line">									tableIns.reload();</span><br><span class="line">									<span class="comment">//刷新左边的树</span></span><br><span class="line">									window.parent.left.menuTree.reload();</span><br><span class="line">									<span class="comment">//刷新添加和修改的下拉树</span></span><br><span class="line">									menuTree.reload();</span><br><span class="line">						       &#125;)</span><br><span class="line">						     &#125;); </span><br><span class="line">					  &#125;</span><br><span class="line">				  &#125;)</span><br><span class="line">				  </span><br><span class="line">			   </span><br><span class="line">			   &#125; <span class="keyword">else</span> <span class="keyword">if</span>(layEvent === <span class="string">&#x27;edit&#x27;</span>)&#123; <span class="comment">//编辑</span></span><br><span class="line">			     openUpdateMenu(data);</span><br><span class="line">			   &#125;</span><br><span class="line">			 &#125;);</span><br></pre></td></tr></table></figure>

<h4 id="修改MenuController-1"><a href="#修改MenuController-1" class="headerlink" title="修改MenuController"></a>修改MenuController</h4><p>新增两个方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据id判断当前菜单有没有子节点</span></span><br><span class="line"><span class="comment">	 * 有返回code&gt;=0</span></span><br><span class="line"><span class="comment">	 * 没有 返回code&lt;0</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;checkMenuHasChildren&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">checkMenuHasChildren</span><span class="params">(MenuVo menuVo)</span></span>&#123;</span><br><span class="line">		<span class="comment">//根据pid查询菜单数量</span></span><br><span class="line">		Integer count=<span class="keyword">this</span>.menuService.queryMenuByPid(menuVo.getId());</span><br><span class="line">		<span class="keyword">if</span>(count&gt;<span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> ResultObj.STATUS_TRUE;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> ResultObj.STATUS_FALSE;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 删除菜单</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;deleteMenu&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">deleteMenu</span><span class="params">(MenuVo menuVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.menuService.deleteMenu(menuVo);</span><br><span class="line">			<span class="keyword">return</span> ResultObj.DELETE_SUCCESS;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> ResultObj.DELETE_ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h4 id="在MenuService中新增方法"><a href="#在MenuService中新增方法" class="headerlink" title="在MenuService中新增方法"></a>在MenuService中新增方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据pid查询菜单数量</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> pid</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">queryMenuByPid</span><span class="params">(Integer pid)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 删除菜单</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> menuVo</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteMenu</span><span class="params">(MenuVo menuVo)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="在MenuServiceImpl中实现该方法-1"><a href="#在MenuServiceImpl中实现该方法-1" class="headerlink" title="在MenuServiceImpl中实现该方法"></a>在MenuServiceImpl中实现该方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">queryMenuByPid</span><span class="params">(Integer pid)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.menuMapper.queryMenuByPid(pid);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteMenu</span><span class="params">(MenuVo menuVo)</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//删除菜单表的数据</span></span><br><span class="line">	<span class="keyword">this</span>.menuMapper.deleteByPrimaryKey(menuVo.getId());</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//根据菜单id删除sys_role_menu里面的数据</span></span><br><span class="line">	<span class="keyword">this</span>.menuMapper.deleteRoleMenuByMid(menuVo.getId());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="MenuMapper接口中定义该方法"><a href="#MenuMapper接口中定义该方法" class="headerlink" title="MenuMapper接口中定义该方法"></a>MenuMapper接口中定义该方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 根据pid查询菜单数量 </span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> pid</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="function">Integer <span class="title">queryMenuByPid</span><span class="params">(<span class="meta">@Param(&quot;pid&quot;)</span>Integer pid)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据菜单id删除sys_role_menu里面的数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deleteRoleMenuByMid</span><span class="params">(<span class="meta">@Param(&quot;mid&quot;)</span>Integer mid)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="在MenuMapper-xml中新增方法"><a href="#在MenuMapper-xml中新增方法" class="headerlink" title="在MenuMapper.xml中新增方法"></a>在MenuMapper.xml中新增方法</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 根据pid查询菜单数量 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryMenuByPid&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">	select count(1) from</span><br><span class="line">	sys_menu where pid=#&#123;pid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 根据菜单id删除sys_role_menu里面的数据 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteRoleMenuByMid&quot;</span>&gt;</span></span><br><span class="line">	delete from sys_role_menu where mid=#&#123;mid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="角色管理-1"><a href="#角色管理-1" class="headerlink" title="角色管理"></a>角色管理</h1><h2 id="角色CRUD"><a href="#角色CRUD" class="headerlink" title="角色CRUD"></a>角色CRUD</h2><h3 id="在sys-role下创建roleManager-jsp"><a href="#在sys-role下创建roleManager-jsp" class="headerlink" title="在sys/role下创建roleManager.jsp"></a>在sys/role下创建roleManager.jsp</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;角色管理&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;Access-Control-Allow-Origin&quot;</span> content=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/dtree.css&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/font/dtreefont.css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;childrenBody&quot;</span>&gt;</span><br><span class="line">	&lt;!-- 搜索条件开始 --&gt;</span><br><span class="line">	&lt;fieldset <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-elem-field layui-field-title&quot;</span> style=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span><br><span class="line">	  &lt;legend&gt;查询条件&lt;/legend&gt;</span><br><span class="line">	&lt;/fieldset&gt;</span><br><span class="line">	&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span> method=<span class="string">&quot;post&quot;</span> id=<span class="string">&quot;searchFrm&quot;</span>&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;角色名称:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;rolename&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;角色备注:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;roledesc&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		     &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		       		 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">					 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal  layui-icon layui-icon-search&quot; id=&quot;doSearch&quot;&gt;查询&lt;/button&gt;</span><br><span class="line">		      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm  layui-icon layui-icon-refresh&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		 &lt;/div&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 搜索条件结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 数据表格开始 --&gt;</span><br><span class="line">	&lt;table class=&quot;layui-hide&quot; id=&quot;roleTable&quot; lay-filter=&quot;roleTable&quot;&gt;&lt;/table&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;&quot;</span> id=<span class="string">&quot;roleToolBar&quot;</span>&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-sm&quot; lay-event=&quot;add&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-danger layui-btn-sm&quot; lay-event=&quot;deleteBatch&quot;&gt;批量删除&lt;/button&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div  id=<span class="string">&quot;roleBar&quot;</span> style=<span class="string">&quot;display: none;&quot;</span>&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-xs&quot; lay-event=&quot;edit&quot;&gt;编辑&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-warm layui-btn-xs&quot; lay-event=&quot;selectRoleMenu&quot;&gt;分配菜单&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-danger layui-btn-xs&quot; lay-event=&quot;del&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 数据表格结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 添加和修改的弹出层开始 --&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;padding: 20px&quot;</span> id=<span class="string">&quot;saveOrUpdateDiv&quot;</span> &gt;</span><br><span class="line">		&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span>  lay-filter=<span class="string">&quot;dataFrm&quot;</span> id=<span class="string">&quot;dataFrm&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;角色名称:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;roleid&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;rolename&quot;</span>  placeholder=<span class="string">&quot;请输入角色名称&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;角色备注:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;roledesc&quot;</span> placeholder=<span class="string">&quot;请输入角色备注&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> checked=<span class="string">&quot;checked&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可用&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span> style=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span><br><span class="line">			    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">			      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal layui-btn-sm layui-icon layui-icon-release&quot; lay-filter=&quot;doSubmit&quot; lay-submit=&quot;&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">			      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm layui-btn-sm layui-icon layui-icon-refresh&quot; &gt;重置&lt;/button&gt;</span><br><span class="line">			    &lt;/div&gt;</span><br><span class="line">		  	&lt;/div&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 添加和修改的弹出层结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;script src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	    <span class="keyword">var</span> tableIns;</span><br><span class="line">	    layui.extend(&#123;</span><br><span class="line">			dtree:<span class="string">&#x27;$&#123;ctx&#125;/resources/layui_ext/dist/dtree&#x27;</span></span><br><span class="line">		&#125;).use([ <span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;form&#x27;</span>, <span class="string">&#x27;table&#x27;</span>,<span class="string">&#x27;dtree&#x27;</span>  ], function() &#123;</span><br><span class="line">			<span class="keyword">var</span> $ = layui.jquery;</span><br><span class="line">			<span class="keyword">var</span> layer = layui.layer;</span><br><span class="line">			<span class="keyword">var</span> form = layui.form;</span><br><span class="line">			<span class="keyword">var</span> table = layui.table;</span><br><span class="line">			<span class="keyword">var</span> dtree=layui.dtree;</span><br><span class="line">			<span class="comment">//渲染数据表格</span></span><br><span class="line">			 tableIns=table.render(&#123;</span><br><span class="line">				 elem: <span class="string">&#x27;#roleTable&#x27;</span>   <span class="comment">//渲染的目标对象</span></span><br><span class="line">			    ,url:<span class="string">&#x27;$&#123;ctx&#125;/role/loadAllRole.action&#x27;</span> <span class="comment">//数据接口</span></span><br><span class="line">			    ,title: <span class="string">&#x27;用户数据表&#x27;</span><span class="comment">//数据导出来的标题</span></span><br><span class="line">			    ,toolbar:<span class="string">&quot;#roleToolBar&quot;</span>   <span class="comment">//表格的工具条</span></span><br><span class="line">			    ,height:<span class="string">&#x27;full-150&#x27;</span></span><br><span class="line">			    ,cellMinWidth:<span class="number">100</span> <span class="comment">//设置列的最小默认宽度</span></span><br><span class="line">			    ,page: <span class="keyword">true</span>  <span class="comment">//是否启用分页</span></span><br><span class="line">			    ,cols: [[   <span class="comment">//列表数据</span></span><br><span class="line">			     &#123;type: <span class="string">&#x27;checkbox&#x27;</span>, fixed: <span class="string">&#x27;left&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;roleid&#x27;</span>, title:<span class="string">&#x27;ID&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;rolename&#x27;</span>, title:<span class="string">&#x27;角色名称&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;roledesc&#x27;</span>, title:<span class="string">&#x27;角色备注&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;available&#x27;</span>, title:<span class="string">&#x27;是否可用&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> d.available==<span class="string">&#x27;1&#x27;</span>?<span class="string">&#x27;&lt;font color=blue&gt;可用&lt;/font&gt;&#x27;</span>:<span class="string">&#x27;&lt;font color=red&gt;不可用&lt;/font&gt;&#x27;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;fixed: <span class="string">&#x27;right&#x27;</span>, title:<span class="string">&#x27;操作&#x27;</span>, toolbar: <span class="string">&#x27;#roleBar&#x27;</span>, width:<span class="number">220</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			    ]]</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//模糊查询</span></span><br><span class="line">			$(<span class="string">&quot;#doSearch&quot;</span>).click(function()&#123;</span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#searchFrm&quot;</span>).serialize();</span><br><span class="line">				tableIns.reload(&#123;</span><br><span class="line">					url:<span class="string">&quot;$&#123;ctx&#125;/role/loadAllRole.action?&quot;</span>+params</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//监听头部工具栏事件</span></span><br><span class="line">			table.on(<span class="string">&quot;toolbar(roleTable)&quot;</span>,function(obj)&#123;</span><br><span class="line">				 <span class="keyword">switch</span>(obj.event)&#123;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">				      openAddRole();</span><br><span class="line">				    <span class="keyword">break</span>;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;deleteBatch&#x27;</span>:</span><br><span class="line">				    	deleteBatch();</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				  &#125;;</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//监听行工具事件</span></span><br><span class="line">		   table.on(<span class="string">&#x27;tool(roleTable)&#x27;</span>, function(obj)&#123;</span><br><span class="line">			   <span class="keyword">var</span> data = obj.data; <span class="comment">//获得当前行数据</span></span><br><span class="line">			   <span class="keyword">var</span> layEvent = obj.event; <span class="comment">//获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）</span></span><br><span class="line">			  <span class="keyword">if</span>(layEvent === <span class="string">&#x27;del&#x27;</span>)&#123; <span class="comment">//删除</span></span><br><span class="line">				  layer.confirm(<span class="string">&#x27;真的删除【&#x27;</span>+data.rolename+<span class="string">&#x27;】这个角色吗&#x27;</span>, function(index)&#123;</span><br><span class="line">				       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">				       $.post(<span class="string">&quot;$&#123;ctx&#125;/role/deleteRole.action&quot;</span>,&#123;roleid:data.roleid&#125;,function(res)&#123;</span><br><span class="line">				    	   layer.msg(res.msg);</span><br><span class="line">				    	    <span class="comment">//刷新数据 表格</span></span><br><span class="line">							tableIns.reload();</span><br><span class="line">				       &#125;)</span><br><span class="line">				     &#125;); </span><br><span class="line">			   &#125; <span class="keyword">else</span> <span class="keyword">if</span>(layEvent === <span class="string">&#x27;edit&#x27;</span>)&#123; <span class="comment">//编辑</span></span><br><span class="line">			     openUpdateRole(data);</span><br><span class="line">			   &#125;</span><br><span class="line">			 &#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">var</span> url;</span><br><span class="line">			<span class="keyword">var</span> mainIndex;</span><br><span class="line">			<span class="comment">//打开添加页面</span></span><br><span class="line">			<span class="function">function <span class="title">openAddRole</span><span class="params">()</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;添加角色&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;300px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						<span class="comment">//清空表单数据       </span></span><br><span class="line">						$(<span class="string">&quot;#dataFrm&quot;</span>)[<span class="number">0</span>].reset();</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/role/addRole.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//打开修改页面</span></span><br><span class="line">			<span class="function">function <span class="title">openUpdateRole</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;修改用户&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;300px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						form.val(<span class="string">&quot;dataFrm&quot;</span>,data);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/role/updateRole.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//保存</span></span><br><span class="line">			form.on(<span class="string">&quot;submit(doSubmit)&quot;</span>,function(obj)&#123;</span><br><span class="line">				<span class="comment">//序列化表单数据</span></span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#dataFrm&quot;</span>).serialize();</span><br><span class="line">				$.post(url,params,function(obj)&#123;</span><br><span class="line">					layer.msg(obj.msg);</span><br><span class="line">					<span class="comment">//关闭弹出层</span></span><br><span class="line">					layer.close(mainIndex)</span><br><span class="line">					<span class="comment">//刷新数据 表格</span></span><br><span class="line">					tableIns.reload();</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//批量删除</span></span><br><span class="line">			<span class="function">function <span class="title">deleteBatch</span><span class="params">()</span></span>&#123;</span><br><span class="line">				<span class="comment">//得到选中的数据行</span></span><br><span class="line">				<span class="keyword">var</span> checkStatus = table.checkStatus(<span class="string">&#x27;roleTable&#x27;</span>);</span><br><span class="line">			    <span class="keyword">var</span> data = checkStatus.data;</span><br><span class="line">			    <span class="keyword">var</span> params=<span class="string">&quot;&quot;</span>;</span><br><span class="line">			    $.each(data,function(i,item)&#123;</span><br><span class="line">			    	<span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</span><br><span class="line">			    		params+=<span class="string">&quot;ids=&quot;</span>+item.roleid;</span><br><span class="line">			    	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			    		params+=<span class="string">&quot;&amp;ids=&quot;</span>+item.roleid;</span><br><span class="line">			    	&#125;</span><br><span class="line">			    &#125;);</span><br><span class="line">			    layer.confirm(<span class="string">&#x27;真的删除选中的这些角色吗&#x27;</span>, function(index)&#123;</span><br><span class="line">				       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">				       $.post(<span class="string">&quot;$&#123;ctx&#125;/role/deleteBatchRole.action&quot;</span>,params,function(res)&#123;</span><br><span class="line">				    	   layer.msg(res.msg);</span><br><span class="line">				    	    <span class="comment">//刷新数据 表格</span></span><br><span class="line">							tableIns.reload();</span><br><span class="line">				       &#125;)</span><br><span class="line">				     &#125;); </span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="修改页面路径"><a href="#修改页面路径" class="headerlink" title="修改页面路径"></a>修改页面路径</h3><p><a target="_blank" rel="noopener" href="https://imgchr.com/i/BSa9yT"><img src="https://s1.ax1x.com/2020/10/20/BSa9yT.png" alt="BSa9yT.png"></a></p>
<h3 id="创建role"><a href="#创建role" class="headerlink" title="创建role"></a>创建role</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.domain;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 20, 2020 11:03:10 AM</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Role</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Integer roleid;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String rolename;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String roledesc;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Integer available;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getRoleid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> roleid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRoleid</span><span class="params">(Integer roleid)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.roleid = roleid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getRolename</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> rolename;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRolename</span><span class="params">(String rolename)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.rolename = rolename == <span class="keyword">null</span> ? <span class="keyword">null</span> : rolename.trim();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getRoledesc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> roledesc;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRoledesc</span><span class="params">(String roledesc)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.roledesc = roledesc == <span class="keyword">null</span> ? <span class="keyword">null</span> : roledesc.trim();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getAvailable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> available;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAvailable</span><span class="params">(Integer available)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.available = available;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建RoleMapper"><a href="#创建RoleMapper" class="headerlink" title="创建RoleMapper"></a>创建RoleMapper</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Role;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 20, 2020 11:05:24 AM</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RoleMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">deleteByPrimaryKey</span><span class="params">(Integer roleid)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(Role record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">insertSelective</span><span class="params">(Role record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">Role <span class="title">selectByPrimaryKey</span><span class="params">(Integer roleid)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">updateByPrimaryKeySelective</span><span class="params">(Role record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">updateByPrimaryKey</span><span class="params">(Role record)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询角色</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">List&lt;Role&gt; <span class="title">queryAllRole</span><span class="params">(Role role)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据角色id删除sys_role_menu里面的数据</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleid</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">deleteRoleMenuByRid</span><span class="params">(Integer roleid)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据角色id删除sys_role_user里面的数据</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleid</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">deleteRoleUserByRid</span><span class="params">(Integer roleid)</span></span>;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建RoleMapper-xml"><a href="#创建RoleMapper-xml" class="headerlink" title="创建RoleMapper.xml"></a>创建RoleMapper.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.study.sys.mapper.RoleMapper&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.study.sys.domain.Role&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;roleid&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;roleid&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;rolename&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">property</span>=<span class="string">&quot;rolename&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;roledesc&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">property</span>=<span class="string">&quot;roledesc&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;available&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">property</span>=<span class="string">&quot;available&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;Base_Column_List&quot;</span>&gt;</span></span><br><span class="line">		roleid, rolename, roledesc, available</span><br><span class="line">	<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByPrimaryKey&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">		select</span><br><span class="line">		<span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">		from sys_role</span><br><span class="line">		where roleid = #&#123;roleid,jdbcType=INTEGER&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByPrimaryKey&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">		delete from sys_role</span><br><span class="line">		where roleid = #&#123;roleid,jdbcType=INTEGER&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Role&quot;</span>&gt;</span></span><br><span class="line">		insert into sys_role (roleid, rolename, roledesc,</span><br><span class="line">		available)</span><br><span class="line">		values (#&#123;roleid,jdbcType=INTEGER&#125;, #&#123;rolename,jdbcType=VARCHAR&#125;,</span><br><span class="line">		#&#123;roledesc,jdbcType=VARCHAR&#125;,</span><br><span class="line">		#&#123;available,jdbcType=INTEGER&#125;)</span><br><span class="line">	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertSelective&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Role&quot;</span>&gt;</span></span><br><span class="line">		insert into sys_role</span><br><span class="line">		<span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;(&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;roleid != null&quot;</span>&gt;</span></span><br><span class="line">				roleid,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;rolename != null&quot;</span>&gt;</span></span><br><span class="line">				rolename,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;roledesc != null&quot;</span>&gt;</span></span><br><span class="line">				roledesc,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">				available,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;values (&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;roleid != null&quot;</span>&gt;</span></span><br><span class="line">				#&#123;roleid,jdbcType=INTEGER&#125;,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;rolename != null&quot;</span>&gt;</span></span><br><span class="line">				#&#123;rolename,jdbcType=VARCHAR&#125;,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;roledesc != null&quot;</span>&gt;</span></span><br><span class="line">				#&#123;roledesc,jdbcType=VARCHAR&#125;,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">				#&#123;available,jdbcType=INTEGER&#125;,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKeySelective&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Role&quot;</span>&gt;</span></span><br><span class="line">		update sys_role</span><br><span class="line">		<span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;rolename != null&quot;</span>&gt;</span></span><br><span class="line">				rolename = #&#123;rolename,jdbcType=VARCHAR&#125;,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;roledesc != null&quot;</span>&gt;</span></span><br><span class="line">				roledesc = #&#123;roledesc,jdbcType=VARCHAR&#125;,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available != null&quot;</span>&gt;</span></span><br><span class="line">				available = #&#123;available,jdbcType=INTEGER&#125;,</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">		where roleid = #&#123;roleid,jdbcType=INTEGER&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKey&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">parameterType</span>=<span class="string">&quot;com.study.sys.domain.Role&quot;</span>&gt;</span></span><br><span class="line">		update sys_role</span><br><span class="line">		set rolename = #&#123;rolename,jdbcType=VARCHAR&#125;,</span><br><span class="line">		roledesc = #&#123;roledesc,jdbcType=VARCHAR&#125;,</span><br><span class="line">		available = #&#123;available,jdbcType=INTEGER&#125;</span><br><span class="line">		where roleid = #&#123;roleid,jdbcType=INTEGER&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 查询角色 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllRole&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">		select</span><br><span class="line">		<span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">		from sys_role</span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;rolename!=null and rolename!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">				and rolename like concat(&quot;%&quot;,#&#123;rolename&#125;,&quot;%&quot;)</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;roledesc!=null and roledesc!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">				and roledesc like concat(&quot;%&quot;,#&#123;roledesc&#125;,&quot;%&quot;)</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;available!=null&quot;</span>&gt;</span></span><br><span class="line">				and available =#&#123;available&#125;</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 根据角色id删除sys_role_menu里面的数据 deleteRolMenuByRid --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteRoleMenuByRid&quot;</span>&gt;</span></span><br><span class="line">		delete from sys_role_menu where rid=#&#123;value&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 根据角色id删除sys_role_user里面的数据 deleteRoleUserByRid --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteRoleUserByRid&quot;</span>&gt;</span></span><br><span class="line">		delete from sys_role_user where rid=#&#123;value&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 保存角色和菜单之间的关系 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertRoleMenu&quot;</span>&gt;</span></span><br><span class="line">		insert into sys_role_menu(rid,mid) values(#&#123;rid&#125;,#&#123;mid&#125;)</span><br><span class="line">	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 根据用户id删除sys_role_user里面的数据  --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteRoleUserByUid&quot;</span>&gt;</span></span><br><span class="line">		delete from sys_role_user where uid=#&#123;value&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="创建RoleVo"><a href="#创建RoleVo" class="headerlink" title="创建RoleVo"></a>创建RoleVo</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Role;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 创建时间：Oct 20, 2020 11:39:58 AM</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RoleVo</span> <span class="keyword">extends</span> <span class="title">Role</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 分页参数</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> Integer page;</span><br><span class="line">	<span class="keyword">private</span> Integer limit;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 接收多个角色id</span></span><br><span class="line">	<span class="keyword">private</span> Integer[] ids;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Integer[] getIds() &#123;</span><br><span class="line">		<span class="keyword">return</span> ids;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIds</span><span class="params">(Integer[] ids)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.ids = ids;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> page;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPage</span><span class="params">(Integer page)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.page = page;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getLimit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> limit;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLimit</span><span class="params">(Integer limit)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.limit = limit;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建RoleService"><a href="#创建RoleService" class="headerlink" title="创建RoleService"></a>创建RoleService</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Role;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.DataGridView;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.RoleVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 20, 2020 11:40:53 AM</span></span><br><span class="line"><span class="comment">* 角色管理的服务接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RoleService</span> </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询所有角色返回</span></span><br><span class="line"><span class="comment">	 * List&lt;Role&gt;</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Role&gt; <span class="title">queryAllRoleForList</span><span class="params">(RoleVo roleVo)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据用户id查询用户的可用角色</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Role&gt; <span class="title">queryRoleByUserIdForList</span><span class="params">(RoleVo roleVo,Integer userId)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询所有角色</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleVo</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataGridView <span class="title">queryAllRole</span><span class="params">(RoleVo roleVo)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 添加角色</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleVo</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addRole</span><span class="params">(RoleVo roleVo)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 修改角色</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleVo</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateRole</span><span class="params">(RoleVo roleVo)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据id删除角色</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleid</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteRole</span><span class="params">(Integer roleid)</span></span>;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 批量删除角色</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleVo</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteBatchRole</span><span class="params">(Integer [] ids)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建RoleServiceImpl"><a href="#创建RoleServiceImpl" class="headerlink" title="创建RoleServiceImpl"></a>创建RoleServiceImpl</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.Page;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.domain.Role;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.mapper.RoleMapper;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.service.RoleService;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.DataGridView;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.RoleVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 20, 2020 11:42:47 AM</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RoleServiceImpl</span> <span class="keyword">implements</span> <span class="title">RoleService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> RoleMapper roleMapper;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Role&gt; <span class="title">queryAllRoleForList</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> roleMapper.queryAllRole(roleVo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Role&gt; <span class="title">queryRoleByUserIdForList</span><span class="params">(RoleVo roleVo, Integer userId)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> roleMapper.queryAllRole(roleVo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataGridView <span class="title">queryAllRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		Page&lt;Object&gt; page = PageHelper.startPage(roleVo.getPage(), roleVo.getLimit());</span><br><span class="line">		List&lt;Role&gt; data = <span class="keyword">this</span>.roleMapper.queryAllRole(roleVo);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> DataGridView(page.getTotal(), data);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.roleMapper.insertSelective(roleVo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.roleMapper.updateByPrimaryKeySelective(roleVo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteRole</span><span class="params">(Integer roleid)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 删除角色表的数据</span></span><br><span class="line">		<span class="keyword">this</span>.roleMapper.deleteByPrimaryKey(roleid);</span><br><span class="line">		<span class="comment">// 根据角色id删除sys_role_meun里面的数据</span></span><br><span class="line">		<span class="keyword">this</span>.roleMapper.deleteRoleMenuByRid(roleid);</span><br><span class="line">		<span class="comment">// 根据角色id删除sys_role_user里面的数据</span></span><br><span class="line">		<span class="keyword">this</span>.roleMapper.deleteRoleUserByRid(roleid);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteBatchRole</span><span class="params">(Integer[] ids)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (Integer rid : ids) &#123;</span><br><span class="line">			deleteRole(rid);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建RoleController"><a href="#创建RoleController" class="headerlink" title="创建RoleController"></a>创建RoleController</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.sys.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.sys.service.RoleService;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.DataGridView;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.utils.ResultObj;</span><br><span class="line"><span class="keyword">import</span> com.study.sys.vo.RoleVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 作者:张帅</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：Oct 20, 2020 12:14:57 PM</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;role&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RoleController</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> RoleService roleService;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 加载角色列表返回DataGridView</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;loadAllRole&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataGridView <span class="title">loadAllRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.roleService.queryAllRole(roleVo);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 添加角色</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;addRole&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">addRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.roleService.addRole(roleVo);</span><br><span class="line">			<span class="keyword">return</span> ResultObj.ADD_SUCCESS;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> ResultObj.ADD_ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 修改角色</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;updateRole&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">updateRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.roleService.updateRole(roleVo);</span><br><span class="line">			<span class="keyword">return</span> ResultObj.UPDATE_SUCCESS;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> ResultObj.UPDATE_ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 删除角色</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;deleteRole&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">deleteRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.roleService.deleteRole(roleVo.getRoleid());</span><br><span class="line">			<span class="keyword">return</span> ResultObj.DELETE_SUCCESS;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> ResultObj.DELETE_ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 批量删除角色</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;deleteBatchRole&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultObj <span class="title">deleteBatchRole</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.roleService.deleteBatchRole(roleVo.getIds());</span><br><span class="line">			<span class="keyword">return</span> ResultObj.DELETE_SUCCESS;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> ResultObj.DELETE_ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="在SysController中新增路由"><a href="#在SysController中新增路由" class="headerlink" title="在SysController中新增路由"></a>在SysController中新增路由</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 跳转角色管理页面</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping(&quot;toRoleManager&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toRoleManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;system/role/roleManager&quot;</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h3 id="功能完成效果"><a href="#功能完成效果" class="headerlink" title="功能完成效果"></a>功能完成效果</h3><p><a target="_blank" rel="noopener" href="https://imgchr.com/i/BSaoN9"><img src="https://s1.ax1x.com/2020/10/20/BSaoN9.png" alt="BSaoN9.png"></a></p>
<h2 id="角色分配菜单"><a href="#角色分配菜单" class="headerlink" title="角色分配菜单"></a>角色分配菜单</h2><h3 id="修改system-role-roleManager-jsp"><a href="#修改system-role-roleManager-jsp" class="headerlink" title="修改system/role/roleManager.jsp"></a>修改system/role/roleManager.jsp</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;角色管理&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;Access-Control-Allow-Origin&quot;</span> content=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/dtree.css&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/font/dtreefont.css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;childrenBody&quot;</span>&gt;</span><br><span class="line">	&lt;!-- 搜索条件开始 --&gt;</span><br><span class="line">	&lt;fieldset <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-elem-field layui-field-title&quot;</span> style=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span><br><span class="line">	  &lt;legend&gt;查询条件&lt;/legend&gt;</span><br><span class="line">	&lt;/fieldset&gt;</span><br><span class="line">	&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span> method=<span class="string">&quot;post&quot;</span> id=<span class="string">&quot;searchFrm&quot;</span>&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;角色名称:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;rolename&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;角色备注:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;roledesc&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		     &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		       		 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">					 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可用&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal  layui-icon layui-icon-search&quot; id=&quot;doSearch&quot;&gt;查询&lt;/button&gt;</span><br><span class="line">		      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm  layui-icon layui-icon-refresh&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		 &lt;/div&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 搜索条件结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 数据表格开始 --&gt;</span><br><span class="line">	&lt;table class=&quot;layui-hide&quot; id=&quot;roleTable&quot; lay-filter=&quot;roleTable&quot;&gt;&lt;/table&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;&quot;</span> id=<span class="string">&quot;roleToolBar&quot;</span>&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-sm&quot; lay-event=&quot;add&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-danger layui-btn-sm&quot; lay-event=&quot;deleteBatch&quot;&gt;批量删除&lt;/button&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div  id=<span class="string">&quot;roleBar&quot;</span> style=<span class="string">&quot;display: none;&quot;</span>&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-xs&quot; lay-event=&quot;edit&quot;&gt;编辑&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-warm layui-btn-xs&quot; lay-event=&quot;selectRoleMenu&quot;&gt;分配菜单&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-danger layui-btn-xs&quot; lay-event=&quot;del&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 数据表格结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 添加和修改的弹出层开始 --&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;padding: 20px&quot;</span> id=<span class="string">&quot;saveOrUpdateDiv&quot;</span> &gt;</span><br><span class="line">		&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span>  lay-filter=<span class="string">&quot;dataFrm&quot;</span> id=<span class="string">&quot;dataFrm&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;角色名称:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;roleid&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;rolename&quot;</span>  placeholder=<span class="string">&quot;请输入角色名称&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;角色备注:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;roledesc&quot;</span> placeholder=<span class="string">&quot;请输入角色备注&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> checked=<span class="string">&quot;checked&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可用&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span> style=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span><br><span class="line">			    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">			      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal layui-btn-sm layui-icon layui-icon-release&quot; lay-filter=&quot;doSubmit&quot; lay-submit=&quot;&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">			      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm layui-btn-sm layui-icon layui-icon-refresh&quot; &gt;重置&lt;/button&gt;</span><br><span class="line">			    &lt;/div&gt;</span><br><span class="line">		  	&lt;/div&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 添加和修改的弹出层结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 角色分配菜单的弹出层开始 --&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;&quot;</span> id=<span class="string">&quot;selectRoleMenu&quot;</span>&gt;</span><br><span class="line">		&lt;ul id=&quot;menuTree&quot; class=&quot;dtree&quot; data-id=&quot;0&quot;&gt;&lt;/ul&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 角色分配菜单的弹出层结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;script src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	    <span class="keyword">var</span> tableIns;</span><br><span class="line">	    layui.extend(&#123;</span><br><span class="line">			dtree:<span class="string">&#x27;$&#123;ctx&#125;/resources/layui_ext/dist/dtree&#x27;</span></span><br><span class="line">		&#125;).use([ <span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;form&#x27;</span>, <span class="string">&#x27;table&#x27;</span>,<span class="string">&#x27;dtree&#x27;</span>  ], function() &#123;</span><br><span class="line">			<span class="keyword">var</span> $ = layui.jquery;</span><br><span class="line">			<span class="keyword">var</span> layer = layui.layer;</span><br><span class="line">			<span class="keyword">var</span> form = layui.form;</span><br><span class="line">			<span class="keyword">var</span> table = layui.table;</span><br><span class="line">			<span class="keyword">var</span> dtree=layui.dtree;</span><br><span class="line">			<span class="comment">//渲染数据表格</span></span><br><span class="line">			 tableIns=table.render(&#123;</span><br><span class="line">				 elem: <span class="string">&#x27;#roleTable&#x27;</span>   <span class="comment">//渲染的目标对象</span></span><br><span class="line">			    ,url:<span class="string">&#x27;$&#123;ctx&#125;/role/loadAllRole.action&#x27;</span> <span class="comment">//数据接口</span></span><br><span class="line">			    ,title: <span class="string">&#x27;用户数据表&#x27;</span><span class="comment">//数据导出来的标题</span></span><br><span class="line">			    ,toolbar:<span class="string">&quot;#roleToolBar&quot;</span>   <span class="comment">//表格的工具条</span></span><br><span class="line">			    ,height:<span class="string">&#x27;full-150&#x27;</span></span><br><span class="line">			    ,cellMinWidth:<span class="number">100</span> <span class="comment">//设置列的最小默认宽度</span></span><br><span class="line">			    ,page: <span class="keyword">true</span>  <span class="comment">//是否启用分页</span></span><br><span class="line">			    ,cols: [[   <span class="comment">//列表数据</span></span><br><span class="line">			     &#123;type: <span class="string">&#x27;checkbox&#x27;</span>, fixed: <span class="string">&#x27;left&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;roleid&#x27;</span>, title:<span class="string">&#x27;ID&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;rolename&#x27;</span>, title:<span class="string">&#x27;角色名称&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;roledesc&#x27;</span>, title:<span class="string">&#x27;角色备注&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;available&#x27;</span>, title:<span class="string">&#x27;是否可用&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> d.available==<span class="string">&#x27;1&#x27;</span>?<span class="string">&#x27;&lt;font color=blue&gt;可用&lt;/font&gt;&#x27;</span>:<span class="string">&#x27;&lt;font color=red&gt;不可用&lt;/font&gt;&#x27;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;fixed: <span class="string">&#x27;right&#x27;</span>, title:<span class="string">&#x27;操作&#x27;</span>, toolbar: <span class="string">&#x27;#roleBar&#x27;</span>, width:<span class="number">220</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			    ]]</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//模糊查询</span></span><br><span class="line">			$(<span class="string">&quot;#doSearch&quot;</span>).click(function()&#123;</span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#searchFrm&quot;</span>).serialize();</span><br><span class="line">				tableIns.reload(&#123;</span><br><span class="line">					url:<span class="string">&quot;$&#123;ctx&#125;/role/loadAllRole.action?&quot;</span>+params</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//监听头部工具栏事件</span></span><br><span class="line">			table.on(<span class="string">&quot;toolbar(roleTable)&quot;</span>,function(obj)&#123;</span><br><span class="line">				 <span class="keyword">switch</span>(obj.event)&#123;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">				      openAddRole();</span><br><span class="line">				    <span class="keyword">break</span>;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;deleteBatch&#x27;</span>:</span><br><span class="line">				    	deleteBatch();</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				  &#125;;</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//监听行工具事件</span></span><br><span class="line">		   table.on(<span class="string">&#x27;tool(roleTable)&#x27;</span>, function(obj)&#123;</span><br><span class="line">			   <span class="keyword">var</span> data = obj.data; <span class="comment">//获得当前行数据</span></span><br><span class="line">			   <span class="keyword">var</span> layEvent = obj.event; <span class="comment">//获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）</span></span><br><span class="line">			  <span class="keyword">if</span>(layEvent === <span class="string">&#x27;del&#x27;</span>)&#123; <span class="comment">//删除</span></span><br><span class="line">				  layer.confirm(<span class="string">&#x27;真的删除【&#x27;</span>+data.rolename+<span class="string">&#x27;】这个角色吗&#x27;</span>, function(index)&#123;</span><br><span class="line">				       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">				       $.post(<span class="string">&quot;$&#123;ctx&#125;/role/deleteRole.action&quot;</span>,&#123;roleid:data.roleid&#125;,function(res)&#123;</span><br><span class="line">				    	   layer.msg(res.msg);</span><br><span class="line">				    	    <span class="comment">//刷新数据 表格</span></span><br><span class="line">							tableIns.reload();</span><br><span class="line">				       &#125;)</span><br><span class="line">				     &#125;); </span><br><span class="line">			   &#125; <span class="keyword">else</span> <span class="keyword">if</span>(layEvent === <span class="string">&#x27;edit&#x27;</span>)&#123; <span class="comment">//编辑</span></span><br><span class="line">			     openUpdateRole(data);</span><br><span class="line">			   &#125;<span class="keyword">else</span> <span class="keyword">if</span>(layEvent===<span class="string">&#x27;selectRoleMenu&#x27;</span>)&#123;</span><br><span class="line">				 openselectRoleMenu(data);</span><br><span class="line">			   &#125;</span><br><span class="line">			 &#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">var</span> url;</span><br><span class="line">			<span class="keyword">var</span> mainIndex;</span><br><span class="line">			<span class="comment">//打开添加页面</span></span><br><span class="line">			<span class="function">function <span class="title">openAddRole</span><span class="params">()</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;添加角色&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;300px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						<span class="comment">//清空表单数据       </span></span><br><span class="line">						$(<span class="string">&quot;#dataFrm&quot;</span>)[<span class="number">0</span>].reset();</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/role/addRole.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//打开修改页面</span></span><br><span class="line">			<span class="function">function <span class="title">openUpdateRole</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;修改用户&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;300px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						form.val(<span class="string">&quot;dataFrm&quot;</span>,data);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/role/updateRole.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//保存</span></span><br><span class="line">			form.on(<span class="string">&quot;submit(doSubmit)&quot;</span>,function(obj)&#123;</span><br><span class="line">				<span class="comment">//序列化表单数据</span></span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#dataFrm&quot;</span>).serialize();</span><br><span class="line">				$.post(url,params,function(obj)&#123;</span><br><span class="line">					layer.msg(obj.msg);</span><br><span class="line">					<span class="comment">//关闭弹出层</span></span><br><span class="line">					layer.close(mainIndex)</span><br><span class="line">					<span class="comment">//刷新数据 表格</span></span><br><span class="line">					tableIns.reload();</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//批量删除</span></span><br><span class="line">			<span class="function">function <span class="title">deleteBatch</span><span class="params">()</span></span>&#123;</span><br><span class="line">				<span class="comment">//得到选中的数据行</span></span><br><span class="line">				<span class="keyword">var</span> checkStatus = table.checkStatus(<span class="string">&#x27;roleTable&#x27;</span>);</span><br><span class="line">			    <span class="keyword">var</span> data = checkStatus.data;</span><br><span class="line">			    <span class="keyword">var</span> params=<span class="string">&quot;&quot;</span>;</span><br><span class="line">			    $.each(data,function(i,item)&#123;</span><br><span class="line">			    	<span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</span><br><span class="line">			    		params+=<span class="string">&quot;ids=&quot;</span>+item.roleid;</span><br><span class="line">			    	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			    		params+=<span class="string">&quot;&amp;ids=&quot;</span>+item.roleid;</span><br><span class="line">			    	&#125;</span><br><span class="line">			    &#125;);</span><br><span class="line">			    layer.confirm(<span class="string">&#x27;真的删除选中的这些角色吗&#x27;</span>, function(index)&#123;</span><br><span class="line">				       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">				       $.post(<span class="string">&quot;$&#123;ctx&#125;/role/deleteBatchRole.action&quot;</span>,params,function(res)&#123;</span><br><span class="line">				    	   layer.msg(res.msg);</span><br><span class="line">				    	    <span class="comment">//刷新数据 表格</span></span><br><span class="line">							tableIns.reload();</span><br><span class="line">				       &#125;)</span><br><span class="line">				     &#125;); </span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//打开分配菜单的弹出层</span></span><br><span class="line">			<span class="function">function <span class="title">openselectRoleMenu</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				<span class="keyword">var</span> menuTree;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;分配【&#x27;</span>+data.rolename+<span class="string">&#x27;】的角色&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#selectRoleMenu&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;400px&#x27;</span>,<span class="string">&#x27;500px&#x27;</span>],</span><br><span class="line">					btnAlign:<span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">					btn:[<span class="string">&#x27;&lt;div class=&quot;layui-icon layui-icon-release&quot;&gt;确认分配&lt;/div&gt;&#x27;</span>,<span class="string">&#x27;&lt;div class=&quot;layui-icon layui-icon-close&quot;&gt;取消分配&lt;/div&gt;&#x27;</span>],</span><br><span class="line">					yes:function(index, layero)&#123;</span><br><span class="line">						<span class="keyword">var</span> nodes = dtree.getCheckbarNodesParam(<span class="string">&quot;menuTree&quot;</span>);</span><br><span class="line">						<span class="keyword">var</span> roleid=data.roleid;</span><br><span class="line">						<span class="keyword">var</span> params=<span class="string">&quot;roleid=&quot;</span>+roleid;</span><br><span class="line">						</span><br><span class="line">						$.each(nodes,function(i,item)&#123;</span><br><span class="line">							params+=<span class="string">&quot;&amp;ids=&quot;</span>+item.nodeId;</span><br><span class="line">						&#125;)</span><br><span class="line">						<span class="comment">//保存角色和菜单的关系</span></span><br><span class="line">						$.post(<span class="string">&quot;$&#123;ctx&#125;/role/saveRoleMenu.action&quot;</span>,params,function(obj)&#123;</span><br><span class="line">							layer.msg(obj.msg);</span><br><span class="line">						&#125;)</span><br><span class="line">					&#125;,</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						<span class="comment">//初始化树</span></span><br><span class="line">					   menuTree = dtree.render(&#123;</span><br><span class="line">					      elem: <span class="string">&quot;#menuTree&quot;</span>,</span><br><span class="line">						  dataStyle: <span class="string">&quot;layuiStyle&quot;</span>,  <span class="comment">//使用layui风格的数据格式</span></span><br><span class="line">					      response:&#123;message:<span class="string">&quot;msg&quot;</span>,statusCode:<span class="number">0</span>&#125;,  <span class="comment">//修改response中返回数据的定义</span></span><br><span class="line">				          dataFormat: <span class="string">&quot;list&quot;</span>,  <span class="comment">//配置data的风格为list</span></span><br><span class="line">				          checkbar: <span class="keyword">true</span>,  </span><br><span class="line">			              checkbarType: <span class="string">&quot;all&quot;</span>, <span class="comment">// 默认就是all，其他的值为： no-all  p-casc   self  only\</span></span><br><span class="line">			              checkbarData: <span class="string">&quot;choose&quot;</span> ,</span><br><span class="line">				          url: <span class="string">&quot;$&#123;ctx&#125;/role/initRoleMenuTreeJson.action?roleid=&quot;</span>+data.roleid <span class="comment">// 使用url加载（可与data加载同时存在）</span></span><br><span class="line">					    &#125;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="为RoleController新增方法"><a href="#为RoleController新增方法" class="headerlink" title="为RoleController新增方法"></a>为RoleController新增方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 加载角色管理分配菜单的json</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> roleid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;initRoleMenuTreeJson&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> DataGridView <span class="title">initRoleMenuTreeJson</span><span class="params">(Integer roleid)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.roleService.initRoleMenuTreeJson(roleid);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 保存角色和菜单的关系</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;saveRoleMenu&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ResultObj <span class="title">saveRoleMenu</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">this</span>.roleService.saveRoleMenu(roleVo);</span><br><span class="line">		<span class="keyword">return</span> ResultObj.DISPATCH_SUCCESS;</span><br><span class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">return</span> ResultObj.DISPATCH_ERROR;</span><br><span class="line">				</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="为RoleService新增方法"><a href="#为RoleService新增方法" class="headerlink" title="为RoleService新增方法"></a>为RoleService新增方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 加载角色管理分配菜单的json</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleid</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataGridView <span class="title">initRoleMenuTreeJson</span><span class="params">(Integer roleid)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 保存角色和菜单的关系</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleVo</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">saveRoleMenu</span><span class="params">(RoleVo roleVo)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="在RoleServiceImpl中实现该方法"><a href="#在RoleServiceImpl中实现该方法" class="headerlink" title="在RoleServiceImpl中实现该方法"></a>在RoleServiceImpl中实现该方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataGridView <span class="title">initRoleMenuTreeJson</span><span class="params">(Integer roleid)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="comment">//查询所有可用的菜单</span></span><br><span class="line">		Menu menu = <span class="keyword">new</span> Menu();</span><br><span class="line">		menu.setAvailable(SysConstast.AVAILABLE_TRUE);</span><br><span class="line">		List&lt;Menu&gt; allMenu = menuMapper.queryAllMenu(menu);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//根据角色ID查询当前角色拥有的菜单</span></span><br><span class="line">		List&lt;Menu&gt; roleMenu = menuMapper.queryMenuByRoleId(SysConstast.AVAILABLE_TRUE,roleid);</span><br><span class="line">		List&lt;TreeNode&gt; data = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		<span class="keyword">for</span> (Menu m1 : allMenu) &#123;</span><br><span class="line">			String checkArr = SysConstast.CODE_ZERO+<span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">for</span> (Menu m2 : roleMenu) &#123;</span><br><span class="line">				<span class="keyword">if</span> (m1.getId() == m2.getId()) &#123;</span><br><span class="line">					checkArr = SysConstast.CODE_ONE+<span class="string">&quot;&quot;</span>;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			Integer id = m1.getId();</span><br><span class="line">			Integer pid = m1.getPid();</span><br><span class="line">			String title = m1.getTitle();</span><br><span class="line">			Boolean spread = m1.getSpread() == SysConstast.SPREAD_TRUE ? <span class="keyword">true</span> : <span class="keyword">false</span>;</span><br><span class="line">			data.add(<span class="keyword">new</span> TreeNode(id, pid, title, spread, checkArr));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> DataGridView(data);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveRoleMenu</span><span class="params">(RoleVo roleVo)</span> </span>&#123;</span><br><span class="line">		Integer rid=roleVo.getRoleid();</span><br><span class="line">		Integer [] mids=roleVo.getIds();</span><br><span class="line">		<span class="comment">//根据rid删除sys_role_menu里面所有数据</span></span><br><span class="line">		<span class="keyword">this</span>.roleMapper.deleteRoleMenuByRid(rid);</span><br><span class="line">		<span class="comment">//保存角色和菜单的关系</span></span><br><span class="line">		<span class="keyword">for</span> (Integer mid : mids) &#123;</span><br><span class="line">			<span class="keyword">this</span>.roleMapper.insertRoleMenu(rid,mid);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="在TreeNode中新增属性"><a href="#在TreeNode中新增属性" class="headerlink" title="在TreeNode中新增属性"></a>在TreeNode中新增属性</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 复选树的必要属性</span></span><br><span class="line"><span class="keyword">private</span> String checkArr=<span class="string">&quot;0&quot;</span>;<span class="comment">//选中就是1</span></span><br></pre></td></tr></table></figure>

<h3 id="为MenuMapper新增方法"><a href="#为MenuMapper新增方法" class="headerlink" title="为MenuMapper新增方法"></a>为MenuMapper新增方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据角色ID查询菜单</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> availableTrue</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> roleid</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">List&lt;Menu&gt; <span class="title">queryMenuByRoleId</span><span class="params">(<span class="meta">@Param(&quot;available&quot;)</span>Integer available, <span class="meta">@Param(&quot;rid&quot;)</span>Integer rid)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="在MenuMapper-xml中实现方法"><a href="#在MenuMapper-xml中实现方法" class="headerlink" title="在MenuMapper.xml中实现方法"></a>在MenuMapper.xml中实现方法</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 根据角色ID查询菜单 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryMenuByRoleId&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">		select t1.* from</span><br><span class="line">		sys_menu t1 inner join sys_role_menu t2 on(t1.id=t2.mid) where</span><br><span class="line">		t2.rid=#&#123;rid&#125; and t1.available=#&#123;available&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="在RoleMapper中新增方法"><a href="#在RoleMapper中新增方法" class="headerlink" title="在RoleMapper中新增方法"></a>在RoleMapper中新增方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据用户id删除sys_role_user里面的数据</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> userid</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deleteRoleUserByUid</span><span class="params">(Integer userid)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="在RoleMapper-xml中实现方法"><a href="#在RoleMapper-xml中实现方法" class="headerlink" title="在RoleMapper.xml中实现方法"></a>在RoleMapper.xml中实现方法</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 根据用户id删除sys_role_user里面的数据  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteRoleUserByUid&quot;</span>&gt;</span></span><br><span class="line">	delete from sys_role_user where uid=#&#123;value&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="功能实现效果"><a href="#功能实现效果" class="headerlink" title="功能实现效果"></a>功能实现效果</h3><p><a href><img src="https://s1.ax1x.com/2020/10/21/BC9lhq.png" alt="BC9lhq.png"></a></p>
<h1 id="用户管理-1"><a href="#用户管理-1" class="headerlink" title="用户管理"></a>用户管理</h1><blockquote>
<p>实现功能，用户CRUD和重置密码</p>
</blockquote>
<h2 id="用户CRUD和重置密码"><a href="#用户CRUD和重置密码" class="headerlink" title="用户CRUD和重置密码"></a>用户CRUD和重置密码</h2><h3 id="在system-user目录下新建userManager-jsp"><a href="#在system-user目录下新建userManager-jsp" class="headerlink" title="在system/user目录下新建userManager.jsp"></a>在system/user目录下新建userManager.jsp</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">	&lt;title&gt;角色管理&lt;/title&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;renderer&quot;</span> content=<span class="string">&quot;webkit&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">&quot;Access-Control-Allow-Origin&quot;</span> content=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> content=<span class="string">&quot;black&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;apple-mobile-web-app-capable&quot;</span> content=<span class="string">&quot;yes&quot;</span>&gt;</span><br><span class="line">	&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;icon&quot;</span> href=<span class="string">&quot;favicon.ico&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui/css/layui.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/css/public.css&quot;</span> media=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/dtree.css&quot;</span>&gt;</span><br><span class="line">	&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;$&#123;ctx &#125;/resources/layui_ext/dtree/font/dtreefont.css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;childrenBody&quot;</span>&gt;</span><br><span class="line">	&lt;!-- 搜索条件开始 --&gt;</span><br><span class="line">	&lt;fieldset <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-elem-field layui-field-title&quot;</span> style=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span><br><span class="line">	  &lt;legend&gt;查询条件&lt;/legend&gt;</span><br><span class="line">	&lt;/fieldset&gt;</span><br><span class="line">	&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span> method=<span class="string">&quot;post&quot;</span> id=<span class="string">&quot;searchFrm&quot;</span>&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;角色名称:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;rolename&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;角色备注:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;roledesc&quot;</span>  autocomplete=<span class="string">&quot;off&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		     &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">		      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">		       		 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">					 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可用&quot;</span>&gt;</span><br><span class="line">		      &lt;/div&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">		      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal  layui-icon layui-icon-search&quot; id=&quot;doSearch&quot;&gt;查询&lt;/button&gt;</span><br><span class="line">		      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm  layui-icon layui-icon-refresh&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">		    &lt;/div&gt;</span><br><span class="line">		 &lt;/div&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 搜索条件结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 数据表格开始 --&gt;</span><br><span class="line">	&lt;table class=&quot;layui-hide&quot; id=&quot;roleTable&quot; lay-filter=&quot;roleTable&quot;&gt;&lt;/table&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;&quot;</span> id=<span class="string">&quot;roleToolBar&quot;</span>&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-sm&quot; lay-event=&quot;add&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">		    &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-danger layui-btn-sm&quot; lay-event=&quot;deleteBatch&quot;&gt;批量删除&lt;/button&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div  id=<span class="string">&quot;roleBar&quot;</span> style=<span class="string">&quot;display: none;&quot;</span>&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-xs&quot; lay-event=&quot;edit&quot;&gt;编辑&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-warm layui-btn-xs&quot; lay-event=&quot;selectRoleMenu&quot;&gt;分配菜单&lt;/a&gt;</span><br><span class="line">	  &lt;a class=&quot;layui-btn layui-btn-danger layui-btn-xs&quot; lay-event=&quot;del&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 数据表格结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 添加和修改的弹出层开始 --&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;padding: 20px&quot;</span> id=<span class="string">&quot;saveOrUpdateDiv&quot;</span> &gt;</span><br><span class="line">		&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form&quot;</span>  lay-filter=<span class="string">&quot;dataFrm&quot;</span> id=<span class="string">&quot;dataFrm&quot;</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;角色名称:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;roleid&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;rolename&quot;</span>  placeholder=<span class="string">&quot;请输入角色名称&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;label class=&quot;layui-form-label&quot;&gt;角色备注:&lt;/label&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;roledesc&quot;</span> placeholder=<span class="string">&quot;请输入角色备注&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span><br><span class="line">				&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-inline&quot;</span>&gt;</span><br><span class="line">					&lt;label class=&quot;layui-form-label&quot;&gt;是否可用:&lt;/label&gt;</span><br><span class="line">					&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;1&quot;</span> checked=<span class="string">&quot;checked&quot;</span> title=<span class="string">&quot;可用&quot;</span>&gt;</span><br><span class="line">						 &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;available&quot;</span> value=<span class="string">&quot;0&quot;</span> title=<span class="string">&quot;不可用&quot;</span>&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-form-item&quot;</span> style=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span><br><span class="line">			    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span><br><span class="line">			      &lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-normal layui-btn-sm layui-icon layui-icon-release&quot; lay-filter=&quot;doSubmit&quot; lay-submit=&quot;&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">			      &lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-warm layui-btn-sm layui-icon layui-icon-refresh&quot; &gt;重置&lt;/button&gt;</span><br><span class="line">			    &lt;/div&gt;</span><br><span class="line">		  	&lt;/div&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 添加和修改的弹出层结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 角色分配菜单的弹出层开始 --&gt;</span><br><span class="line">	&lt;div style=<span class="string">&quot;display: none;&quot;</span> id=<span class="string">&quot;selectRoleMenu&quot;</span>&gt;</span><br><span class="line">		&lt;ul id=&quot;menuTree&quot; class=&quot;dtree&quot; data-id=&quot;0&quot;&gt;&lt;/ul&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;!-- 角色分配菜单的弹出层结束 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;script src=&quot;$&#123;ctx &#125;/resources/layui/layui.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	    <span class="keyword">var</span> tableIns;</span><br><span class="line">	    layui.extend(&#123;</span><br><span class="line">			dtree:<span class="string">&#x27;$&#123;ctx&#125;/resources/layui_ext/dist/dtree&#x27;</span></span><br><span class="line">		&#125;).use([ <span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;form&#x27;</span>, <span class="string">&#x27;table&#x27;</span>,<span class="string">&#x27;dtree&#x27;</span>  ], function() &#123;</span><br><span class="line">			<span class="keyword">var</span> $ = layui.jquery;</span><br><span class="line">			<span class="keyword">var</span> layer = layui.layer;</span><br><span class="line">			<span class="keyword">var</span> form = layui.form;</span><br><span class="line">			<span class="keyword">var</span> table = layui.table;</span><br><span class="line">			<span class="keyword">var</span> dtree=layui.dtree;</span><br><span class="line">			<span class="comment">//渲染数据表格</span></span><br><span class="line">			 tableIns=table.render(&#123;</span><br><span class="line">				 elem: <span class="string">&#x27;#roleTable&#x27;</span>   <span class="comment">//渲染的目标对象</span></span><br><span class="line">			    ,url:<span class="string">&#x27;$&#123;ctx&#125;/role/loadAllRole.action&#x27;</span> <span class="comment">//数据接口</span></span><br><span class="line">			    ,title: <span class="string">&#x27;用户数据表&#x27;</span><span class="comment">//数据导出来的标题</span></span><br><span class="line">			    ,toolbar:<span class="string">&quot;#roleToolBar&quot;</span>   <span class="comment">//表格的工具条</span></span><br><span class="line">			    ,height:<span class="string">&#x27;full-150&#x27;</span></span><br><span class="line">			    ,cellMinWidth:<span class="number">100</span> <span class="comment">//设置列的最小默认宽度</span></span><br><span class="line">			    ,page: <span class="keyword">true</span>  <span class="comment">//是否启用分页</span></span><br><span class="line">			    ,cols: [[   <span class="comment">//列表数据</span></span><br><span class="line">			     &#123;type: <span class="string">&#x27;checkbox&#x27;</span>, fixed: <span class="string">&#x27;left&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;roleid&#x27;</span>, title:<span class="string">&#x27;ID&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;rolename&#x27;</span>, title:<span class="string">&#x27;角色名称&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;roledesc&#x27;</span>, title:<span class="string">&#x27;角色备注&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			      ,&#123;field:<span class="string">&#x27;available&#x27;</span>, title:<span class="string">&#x27;是否可用&#x27;</span>,align:<span class="string">&#x27;center&#x27;</span>,templet:function(d)&#123;</span><br><span class="line">			    	  <span class="keyword">return</span> d.available==<span class="string">&#x27;1&#x27;</span>?<span class="string">&#x27;&lt;font color=blue&gt;可用&lt;/font&gt;&#x27;</span>:<span class="string">&#x27;&lt;font color=red&gt;不可用&lt;/font&gt;&#x27;</span>;</span><br><span class="line">			      &#125;&#125;</span><br><span class="line">			      ,&#123;fixed: <span class="string">&#x27;right&#x27;</span>, title:<span class="string">&#x27;操作&#x27;</span>, toolbar: <span class="string">&#x27;#roleBar&#x27;</span>, width:<span class="number">220</span>,align:<span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line">			    ]]</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//模糊查询</span></span><br><span class="line">			$(<span class="string">&quot;#doSearch&quot;</span>).click(function()&#123;</span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#searchFrm&quot;</span>).serialize();</span><br><span class="line">				tableIns.reload(&#123;</span><br><span class="line">					url:<span class="string">&quot;$&#123;ctx&#125;/role/loadAllRole.action?&quot;</span>+params</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//监听头部工具栏事件</span></span><br><span class="line">			table.on(<span class="string">&quot;toolbar(roleTable)&quot;</span>,function(obj)&#123;</span><br><span class="line">				 <span class="keyword">switch</span>(obj.event)&#123;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">				      openAddRole();</span><br><span class="line">				    <span class="keyword">break</span>;</span><br><span class="line">				    <span class="keyword">case</span> <span class="string">&#x27;deleteBatch&#x27;</span>:</span><br><span class="line">				    	deleteBatch();</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				  &#125;;</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">//监听行工具事件</span></span><br><span class="line">		   table.on(<span class="string">&#x27;tool(roleTable)&#x27;</span>, function(obj)&#123;</span><br><span class="line">			   <span class="keyword">var</span> data = obj.data; <span class="comment">//获得当前行数据</span></span><br><span class="line">			   <span class="keyword">var</span> layEvent = obj.event; <span class="comment">//获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）</span></span><br><span class="line">			  <span class="keyword">if</span>(layEvent === <span class="string">&#x27;del&#x27;</span>)&#123; <span class="comment">//删除</span></span><br><span class="line">				  layer.confirm(<span class="string">&#x27;真的删除【&#x27;</span>+data.rolename+<span class="string">&#x27;】这个角色吗&#x27;</span>, function(index)&#123;</span><br><span class="line">				       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">				       $.post(<span class="string">&quot;$&#123;ctx&#125;/role/deleteRole.action&quot;</span>,&#123;roleid:data.roleid&#125;,function(res)&#123;</span><br><span class="line">				    	   layer.msg(res.msg);</span><br><span class="line">				    	    <span class="comment">//刷新数据 表格</span></span><br><span class="line">							tableIns.reload();</span><br><span class="line">				       &#125;)</span><br><span class="line">				     &#125;); </span><br><span class="line">			   &#125; <span class="keyword">else</span> <span class="keyword">if</span>(layEvent === <span class="string">&#x27;edit&#x27;</span>)&#123; <span class="comment">//编辑</span></span><br><span class="line">			     openUpdateRole(data);</span><br><span class="line">			   &#125;<span class="keyword">else</span> <span class="keyword">if</span>(layEvent===<span class="string">&#x27;selectRoleMenu&#x27;</span>)&#123;</span><br><span class="line">				 openselectRoleMenu(data);</span><br><span class="line">			   &#125;</span><br><span class="line">			 &#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">var</span> url;</span><br><span class="line">			<span class="keyword">var</span> mainIndex;</span><br><span class="line">			<span class="comment">//打开添加页面</span></span><br><span class="line">			<span class="function">function <span class="title">openAddRole</span><span class="params">()</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;添加角色&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;300px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						<span class="comment">//清空表单数据       </span></span><br><span class="line">						$(<span class="string">&quot;#dataFrm&quot;</span>)[<span class="number">0</span>].reset();</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/role/addRole.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//打开修改页面</span></span><br><span class="line">			<span class="function">function <span class="title">openUpdateRole</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;修改用户&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#saveOrUpdateDiv&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;800px&#x27;</span>,<span class="string">&#x27;300px&#x27;</span>],</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						form.val(<span class="string">&quot;dataFrm&quot;</span>,data);</span><br><span class="line">						url=<span class="string">&quot;$&#123;ctx&#125;/role/updateRole.action&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//保存</span></span><br><span class="line">			form.on(<span class="string">&quot;submit(doSubmit)&quot;</span>,function(obj)&#123;</span><br><span class="line">				<span class="comment">//序列化表单数据</span></span><br><span class="line">				<span class="keyword">var</span> params=$(<span class="string">&quot;#dataFrm&quot;</span>).serialize();</span><br><span class="line">				$.post(url,params,function(obj)&#123;</span><br><span class="line">					layer.msg(obj.msg);</span><br><span class="line">					<span class="comment">//关闭弹出层</span></span><br><span class="line">					layer.close(mainIndex)</span><br><span class="line">					<span class="comment">//刷新数据 表格</span></span><br><span class="line">					tableIns.reload();</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//批量删除</span></span><br><span class="line">			<span class="function">function <span class="title">deleteBatch</span><span class="params">()</span></span>&#123;</span><br><span class="line">				<span class="comment">//得到选中的数据行</span></span><br><span class="line">				<span class="keyword">var</span> checkStatus = table.checkStatus(<span class="string">&#x27;roleTable&#x27;</span>);</span><br><span class="line">			    <span class="keyword">var</span> data = checkStatus.data;</span><br><span class="line">			    <span class="keyword">var</span> params=<span class="string">&quot;&quot;</span>;</span><br><span class="line">			    $.each(data,function(i,item)&#123;</span><br><span class="line">			    	<span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</span><br><span class="line">			    		params+=<span class="string">&quot;ids=&quot;</span>+item.roleid;</span><br><span class="line">			    	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			    		params+=<span class="string">&quot;&amp;ids=&quot;</span>+item.roleid;</span><br><span class="line">			    	&#125;</span><br><span class="line">			    &#125;);</span><br><span class="line">			    layer.confirm(<span class="string">&#x27;真的删除选中的这些角色吗&#x27;</span>, function(index)&#123;</span><br><span class="line">				       <span class="comment">//向服务端发送删除指令</span></span><br><span class="line">				       $.post(<span class="string">&quot;$&#123;ctx&#125;/role/deleteBatchRole.action&quot;</span>,params,function(res)&#123;</span><br><span class="line">				    	   layer.msg(res.msg);</span><br><span class="line">				    	    <span class="comment">//刷新数据 表格</span></span><br><span class="line">							tableIns.reload();</span><br><span class="line">				       &#125;)</span><br><span class="line">				     &#125;); </span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//打开分配菜单的弹出层</span></span><br><span class="line">			<span class="function">function <span class="title">openselectRoleMenu</span><span class="params">(data)</span></span>&#123;</span><br><span class="line">				<span class="keyword">var</span> menuTree;</span><br><span class="line">				mainIndex=layer.open(&#123;</span><br><span class="line">					type:<span class="number">1</span>,</span><br><span class="line">					title:<span class="string">&#x27;分配【&#x27;</span>+data.rolename+<span class="string">&#x27;】的角色&#x27;</span>,</span><br><span class="line">					content:$(<span class="string">&quot;#selectRoleMenu&quot;</span>),</span><br><span class="line">					area:[<span class="string">&#x27;400px&#x27;</span>,<span class="string">&#x27;500px&#x27;</span>],</span><br><span class="line">					btnAlign:<span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">					btn:[<span class="string">&#x27;&lt;div class=&quot;layui-icon layui-icon-release&quot;&gt;确认分配&lt;/div&gt;&#x27;</span>,<span class="string">&#x27;&lt;div class=&quot;layui-icon layui-icon-close&quot;&gt;取消分配&lt;/div&gt;&#x27;</span>],</span><br><span class="line">					yes:function(index, layero)&#123;</span><br><span class="line">						<span class="keyword">var</span> nodes = dtree.getCheckbarNodesParam(<span class="string">&quot;menuTree&quot;</span>);</span><br><span class="line">						<span class="keyword">var</span> roleid=data.roleid;</span><br><span class="line">						<span class="keyword">var</span> params=<span class="string">&quot;roleid=&quot;</span>+roleid;</span><br><span class="line">						</span><br><span class="line">						$.each(nodes,function(i,item)&#123;</span><br><span class="line">							params+=<span class="string">&quot;&amp;ids=&quot;</span>+item.nodeId;</span><br><span class="line">						&#125;)</span><br><span class="line">						<span class="comment">//保存角色和菜单的关系</span></span><br><span class="line">						$.post(<span class="string">&quot;$&#123;ctx&#125;/role/saveRoleMenu.action&quot;</span>,params,function(obj)&#123;</span><br><span class="line">							layer.msg(obj.msg);</span><br><span class="line">						&#125;)</span><br><span class="line">					&#125;,</span><br><span class="line">					success:function(index)&#123;</span><br><span class="line">						<span class="comment">//初始化树</span></span><br><span class="line">					   menuTree = dtree.render(&#123;</span><br><span class="line">					      elem: <span class="string">&quot;#menuTree&quot;</span>,</span><br><span class="line">						  dataStyle: <span class="string">&quot;layuiStyle&quot;</span>,  <span class="comment">//使用layui风格的数据格式</span></span><br><span class="line">					      response:&#123;message:<span class="string">&quot;msg&quot;</span>,statusCode:<span class="number">0</span>&#125;,  <span class="comment">//修改response中返回数据的定义</span></span><br><span class="line">				          dataFormat: <span class="string">&quot;list&quot;</span>,  <span class="comment">//配置data的风格为list</span></span><br><span class="line">				          checkbar: <span class="keyword">true</span>,  </span><br><span class="line">			              checkbarType: <span class="string">&quot;all&quot;</span>, <span class="comment">// 默认就是all，其他的值为： no-all  p-casc   self  only\</span></span><br><span class="line">			              checkbarData: <span class="string">&quot;choose&quot;</span> ,</span><br><span class="line">				          url: <span class="string">&quot;$&#123;ctx&#125;/role/initRoleMenuTreeJson.action?roleid=&quot;</span>+data.roleid <span class="comment">// 使用url加载（可与data加载同时存在）</span></span><br><span class="line">					    &#125;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="新增路由在SysController中"><a href="#新增路由在SysController中" class="headerlink" title="新增路由在SysController中"></a>新增路由在SysController中</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 跳转用户管理页面</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;toUserManager&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toUserManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;system/user/userManager&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="在菜单中新增路由配置"><a href="#在菜单中新增路由配置" class="headerlink" title="在菜单中新增路由配置"></a>在菜单中新增路由配置</h3><p><a target="_blank" rel="noopener" href="https://imgchr.com/i/BCsBnA"><img src="https://s1.ax1x.com/2020/10/21/BCsBnA.png" alt="BCsBnA.png"></a></p>
<h3 id="为UserMapper新增方法"><a href="#为UserMapper新增方法" class="headerlink" title="为UserMapper新增方法"></a>为UserMapper新增方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询用户</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">List&lt;User&gt; <span class="title">queryAllUser</span><span class="params">(User user)</span></span>;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    
<div>
      
        
      
</div>
<div>
  
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
  
</div>
      <footer class="post-footer">
          <div class="post-tags">
              <a href="/blog/tags/java/" rel="tag"> java</a>
              <a href="/blog/tags/ssm%E6%A1%86%E6%9E%B6/" rel="tag"> ssm框架</a>
              <a href="/blog/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" rel="tag"> 项目实战</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/2020/10/06/java%E9%AB%98%E7%BA%A7%E6%95%99%E7%A8%8B/" rel="prev" title="java学习">
      <i class="fa fa-chevron-left"></i> java学习
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/2020/10/09/oracle11g%E5%9C%A8windows10%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%8C%E5%85%A8%E5%8D%B8%E8%BD%BD/" rel="next" title="oracle11g在windows环境下完全卸载">
      oracle11g在windows环境下完全卸载 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD%E5%88%86%E6%9E%90"><span class="nav-number">1.</span> <span class="nav-text">功能分析</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD"><span class="nav-number">1.1.</span> <span class="nav-text">业务功能</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E7%AE%A1%E7%90%86"><span class="nav-number">1.1.1.</span> <span class="nav-text">客户管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%A6%E8%BE%86%E7%AE%A1%E7%90%86"><span class="nav-number">1.1.2.</span> <span class="nav-text">车辆管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B1%BD%E8%BD%A6%E5%87%BA%E7%A7%9F"><span class="nav-number">1.1.3.</span> <span class="nav-text">汽车出租</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%A7%9F%E5%8D%95%E4%BD%8D%E7%AE%A1%E7%90%86"><span class="nav-number">1.1.4.</span> <span class="nav-text">出租单位管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B1%BD%E8%BD%A6%E5%85%A5%E5%BA%93"><span class="nav-number">1.1.5.</span> <span class="nav-text">汽车入库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A3%80%E6%9F%A5%E5%8D%95%E7%AE%A1%E7%90%86"><span class="nav-number">1.1.6.</span> <span class="nav-text">检查单管理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90"><span class="nav-number">1.2.</span> <span class="nav-text">统计分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E5%8A%9F%E8%83%BD"><span class="nav-number">1.3.</span> <span class="nav-text">系统功能</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="nav-number">1.3.1.</span> <span class="nav-text">用户登录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8F%9C%E5%8D%95%E7%AE%A1%E7%90%86"><span class="nav-number">1.3.2.</span> <span class="nav-text">菜单管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%92%E8%89%B2%E7%AE%A1%E7%90%86"><span class="nav-number">1.3.3.</span> <span class="nav-text">角色管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="nav-number">1.3.4.</span> <span class="nav-text">用户管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81"><span class="nav-number">1.3.5.</span> <span class="nav-text">修改密码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86"><span class="nav-number">1.3.6.</span> <span class="nav-text">日志管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E5%85%AC%E5%91%8A%E7%AE%A1%E7%90%86"><span class="nav-number">1.3.7.</span> <span class="nav-text">系统公告管理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8"><span class="nav-number">2.</span> <span class="nav-text">数据库表</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%9A%E5%8A%A1%E8%A1%A8"><span class="nav-number">2.1.</span> <span class="nav-text">业务表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E8%A1%A8%EF%BC%88RBAC%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%EF%BC%89"><span class="nav-number">2.2.</span> <span class="nav-text">系统表（RBAC权限管理）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E8%A1%A8%EF%BC%88%E5%85%B6%E4%BB%96%EF%BC%89"><span class="nav-number">2.3.</span> <span class="nav-text">系统表（其他）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83%EF%BC%88eclipse%EF%BC%89"><span class="nav-number">3.</span> <span class="nav-text">搭建环境（eclipse）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEmaven%E4%BB%93%E5%BA%93"><span class="nav-number">3.1.</span> <span class="nav-text">配置maven仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jar%E5%8C%85%E8%AF%B4%E6%98%8E"><span class="nav-number">3.2.</span> <span class="nav-text">jar包说明</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#commons%E5%8C%85"><span class="nav-number">3.2.1.</span> <span class="nav-text">commons包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#spring%E4%B9%8Baspects%E5%8C%85%E3%80%81aop%E5%8C%85%E5%92%8Caspectj%E5%8C%85%E7%9A%84%E7%AE%80%E5%8D%95%E6%A2%B3%E7%90%86"><span class="nav-number">3.2.2.</span> <span class="nav-text">spring之aspects包、aop包和aspectj包的简单梳理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jackson%E5%8C%85"><span class="nav-number">3.2.3.</span> <span class="nav-text">jackson包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsqlparser%E5%8C%85"><span class="nav-number">3.2.4.</span> <span class="nav-text">jsqlparser包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pagehelper%E5%8C%85"><span class="nav-number">3.2.5.</span> <span class="nav-text">pagehelper包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#slf4j%E5%8C%85"><span class="nav-number">3.2.6.</span> <span class="nav-text">slf4j包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kotlin%E5%8C%85"><span class="nav-number">3.2.7.</span> <span class="nav-text">kotlin包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86"><span class="nav-number">3.3.</span> <span class="nav-text">配置文件处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAdb-properties"><span class="nav-number">3.3.1.</span> <span class="nav-text">创建db.properties</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAlog4j-properties"><span class="nav-number">3.3.2.</span> <span class="nav-text">创建log4j.properties</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAapplication-dao-xml"><span class="nav-number">3.3.3.</span> <span class="nav-text">创建application-dao.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAapplication-service-xml"><span class="nav-number">3.3.4.</span> <span class="nav-text">创建application-service.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAapplicationContext-xml"><span class="nav-number">3.3.5.</span> <span class="nav-text">创建applicationContext.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAspringmvc-xml"><span class="nav-number">3.3.6.</span> <span class="nav-text">创建springmvc.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9web-xml"><span class="nav-number">3.3.7.</span> <span class="nav-text">修改web.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAfile-properties"><span class="nav-number">3.3.8.</span> <span class="nav-text">创建file.properties</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAAppLister"><span class="nav-number">3.3.9.</span> <span class="nav-text">创建AppLister</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AppFileUtils"><span class="nav-number">3.3.10.</span> <span class="nav-text">AppFileUtils</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BARandomUtils"><span class="nav-number">3.3.11.</span> <span class="nav-text">创建RandomUtils</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAWebUtils"><span class="nav-number">3.3.12.</span> <span class="nav-text">创建WebUtils</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E5%85%A5layuicms%E7%9A%84%E6%A8%A1%E6%9D%BF"><span class="nav-number">3.3.13.</span> <span class="nav-text">引入layuicms的模板</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="nav-number">4.</span> <span class="nav-text">用户登录功能实现</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8mybatisplus%E7%94%9F%E6%88%90%E5%99%A8%E7%94%9F%E6%88%90User"><span class="nav-number">4.1.</span> <span class="nav-text">使用mybatisplus生成器生成User</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%9F%E6%88%90UserMapper"><span class="nav-number">4.2.</span> <span class="nav-text">生成UserMapper</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%9F%E6%88%90UserMapper-xml"><span class="nav-number">4.3.</span> <span class="nav-text">生成UserMapper.xml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAUserVo"><span class="nav-number">4.4.</span> <span class="nav-text">创建UserVo</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAUserService"><span class="nav-number">4.5.</span> <span class="nav-text">创建UserService</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAUserService%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="nav-number">4.6.</span> <span class="nav-text">创建UserService实现类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%B8%B8%E9%87%8F%E6%8E%A5%E5%8F%A3%EF%BC%88SysConstast%EF%BC%89"><span class="nav-number">4.7.</span> <span class="nav-text">创建常量接口（SysConstast）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BALoginController"><span class="nav-number">4.8.</span> <span class="nav-text">创建LoginController</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAindex-jsp"><span class="nav-number">4.9.</span> <span class="nav-text">创建index.jsp</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAlogin-jsp"><span class="nav-number">4.10.</span> <span class="nav-text">创建login.jsp</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAindex-jsp-1"><span class="nav-number">4.11.</span> <span class="nav-text">创建index.jsp</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E7%99%BB%E5%BD%95%E6%95%88%E6%9E%9C"><span class="nav-number">4.12.</span> <span class="nav-text">测试登录效果</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E4%B8%8D%E6%AD%A3%E7%A1%AE"><span class="nav-number">4.12.1.</span> <span class="nav-text">账号密码不正确</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E5%8C%B9%E9%85%8D%EF%BC%8C%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F%E8%BF%9B%E5%85%A5index-jsp"><span class="nav-number">4.12.2.</span> <span class="nav-text">账号密码匹配，登录成功进入index.jsp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E9%94%81%E5%AE%9A%E5%8A%9F%E8%83%BD"><span class="nav-number">4.12.3.</span> <span class="nav-text">前端页面锁定功能</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E5%8F%B0%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0"><span class="nav-number">5.</span> <span class="nav-text">工作台简单实现</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BADeskController"><span class="nav-number">5.1.</span> <span class="nav-text">创建DeskController</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAdeskManager-jsp"><span class="nav-number">5.2.</span> <span class="nav-text">创建deskManager.jsp</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9index-jsp"><span class="nav-number">5.3.</span> <span class="nav-text">修改index.jsp</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E5%8F%B0%E5%8A%9F%E8%83%BD%E5%AE%8C%E6%88%90%E6%95%88%E6%9E%9C"><span class="nav-number">5.4.</span> <span class="nav-text">工作台功能完成效果</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%8F%9C%E5%8D%95%E7%AE%A1%E7%90%86-1"><span class="nav-number">6.</span> <span class="nav-text">菜单管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8F%9C%E5%8D%95%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">6.1.</span> <span class="nav-text">菜单初始化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAMenu%E7%B1%BB"><span class="nav-number">6.1.1.</span> <span class="nav-text">创建Menu类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E5%86%99%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B7%A5%E5%85%B7%E7%B1%BB-InitMenuDataUtil-java"><span class="nav-number">6.1.2.</span> <span class="nav-text">编写初始化工具类:InitMenuDataUtil.java</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%85%E7%A9%BAsys-menu%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8"><span class="nav-number">6.1.3.</span> <span class="nav-text">清空sys_menu数据库表</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A0%E8%BD%BD%E8%8F%9C%E5%8D%95"><span class="nav-number">6.2.</span> <span class="nav-text">加载菜单</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAMenuMapper%E6%8E%A5%E5%8F%A3"><span class="nav-number">6.2.1.</span> <span class="nav-text">创建MenuMapper接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E5%86%99MenuMapper-xml"><span class="nav-number">6.2.2.</span> <span class="nav-text">编写MenuMapper.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAMenuVo"><span class="nav-number">6.2.3.</span> <span class="nav-text">创建MenuVo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAMenuService%E6%8E%A5%E5%8F%A3"><span class="nav-number">6.2.4.</span> <span class="nav-text">创建MenuService接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E7%B1%BBMenuServiceImpl"><span class="nav-number">6.2.5.</span> <span class="nav-text">创建接口实现类MenuServiceImpl</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9SysConstast"><span class="nav-number">6.2.6.</span> <span class="nav-text">修改SysConstast</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BATreeNode"><span class="nav-number">6.2.7.</span> <span class="nav-text">创建TreeNode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BATreeNodeBuilder%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="nav-number">6.2.8.</span> <span class="nav-text">创建TreeNodeBuilder工具类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAMenuController"><span class="nav-number">6.2.9.</span> <span class="nav-text">创建MenuController</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9system-main-index-jsp"><span class="nav-number">6.2.10.</span> <span class="nav-text">修改system&#x2F;main&#x2F;index.jsp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E6%B5%8B%E8%AF%95"><span class="nav-number">6.2.11.</span> <span class="nav-text">启动测试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9%E8%8F%9C%E5%8D%95%E8%BF%9B%E8%A1%8C%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E5%88%86%E9%85%8D"><span class="nav-number">6.3.</span> <span class="nav-text">对菜单进行权限管理分配</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%83%E9%99%90%E5%92%8C%E8%A7%92%E8%89%B2%E5%92%8C%E7%94%A8%E6%88%B7%E8%AF%B4%E6%98%8E"><span class="nav-number">6.3.1.</span> <span class="nav-text">权限和角色和用户说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E6%B7%B1%E7%90%86%E8%A7%A3"><span class="nav-number">6.3.2.</span> <span class="nav-text">加深理解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8F%9C%E5%8D%95%E8%A1%A8"><span class="nav-number">6.3.2.1.</span> <span class="nav-text">菜单表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%92%E8%89%B2%E8%A1%A8"><span class="nav-number">6.3.2.2.</span> <span class="nav-text">角色表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%92%E8%89%B2%E5%92%8C%E8%8F%9C%E5%8D%95%E8%A1%A8%E7%9A%84%E4%B8%AD%E9%97%B4%E8%A1%A8"><span class="nav-number">6.3.2.3.</span> <span class="nav-text">角色和菜单表的中间表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="nav-number">6.3.2.4.</span> <span class="nav-text">问题：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E8%A1%A8"><span class="nav-number">6.3.2.5.</span> <span class="nav-text">用户表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E5%92%8C%E8%A7%92%E8%89%B2%E5%85%B3%E7%B3%BB%E8%A1%A8"><span class="nav-number">6.3.2.6.</span> <span class="nav-text">用户和角色关系表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%97%AE%E9%A2%98"><span class="nav-number">6.3.2.7.</span> <span class="nav-text">问题</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="nav-number">6.4.</span> <span class="nav-text">功能实现</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD"><span class="nav-number">6.4.1.</span> <span class="nav-text">查询功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B0%E5%A2%9ESysController%EF%BC%88%E7%94%A8%E6%9D%A5%E5%AE%9A%E5%90%91%E8%B7%AF%E5%BE%84%EF%BC%89"><span class="nav-number">6.4.1.1.</span> <span class="nav-text">新增SysController（用来定向路径）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BAMenuController%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="nav-number">6.4.1.2.</span> <span class="nav-text">为MenuController新增方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BADataGridView"><span class="nav-number">6.4.1.3.</span> <span class="nav-text">创建DataGridView</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9MenuVo"><span class="nav-number">6.4.1.4.</span> <span class="nav-text">修改MenuVo</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BAMenuService%E6%8E%A5%E5%8F%A3%E6%B7%BB%E5%8A%A0%E6%96%B9%E6%B3%95"><span class="nav-number">6.4.1.5.</span> <span class="nav-text">为MenuService接口添加方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0MenuServiceImpl%E5%AE%9E%E7%8E%B0%E6%B7%BB%E5%8A%A0%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">6.4.1.6.</span> <span class="nav-text">添加MenuServiceImpl实现添加的方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BAMenuMapper-xml%E6%B7%BB%E5%8A%A0%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95"><span class="nav-number">6.4.1.7.</span> <span class="nav-text">为MenuMapper.xml添加查询方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%8F%9C%E5%8D%95%E5%9C%B0%E5%9D%80"><span class="nav-number">6.4.1.8.</span> <span class="nav-text">修改数据库的菜单地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAsystem-menu-menuManager-jsp"><span class="nav-number">6.4.1.9.</span> <span class="nav-text">创建system&#x2F;menu&#x2F;menuManager.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAsystem-menu-menuLeft-jsp"><span class="nav-number">6.4.1.10.</span> <span class="nav-text">创建system&#x2F;menu&#x2F;menuLeft.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAsystem-menu-menuRight-jsp"><span class="nav-number">6.4.1.11.</span> <span class="nav-text">创建system&#x2F;menu&#x2F;menuRight.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%80%E7%BB%88%E7%BB%93%E6%9E%9C"><span class="nav-number">6.4.1.12.</span> <span class="nav-text">最终结果</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%8A%9F%E8%83%BD"><span class="nav-number">6.4.2.</span> <span class="nav-text">添加功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9system-menu-menuRight-jsp"><span class="nav-number">6.4.2.1.</span> <span class="nav-text">修改system&#x2F;menu&#x2F;menuRight.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9SysConstas%E7%B1%BB"><span class="nav-number">6.4.2.2.</span> <span class="nav-text">修改SysConstas类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAResultObj-java%E7%B1%BB"><span class="nav-number">6.4.2.3.</span> <span class="nav-text">创建ResultObj.java类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9MenuController"><span class="nav-number">6.4.2.4.</span> <span class="nav-text">修改MenuController</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9MenuService"><span class="nav-number">6.4.2.5.</span> <span class="nav-text">修改MenuService</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9MenuServiceImpl"><span class="nav-number">6.4.2.6.</span> <span class="nav-text">修改MenuServiceImpl</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%8A%9F%E8%83%BD"><span class="nav-number">6.4.3.</span> <span class="nav-text">修改功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9menuRight-jsp"><span class="nav-number">6.4.3.1.</span> <span class="nav-text">修改menuRight.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BAMenuControler%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="nav-number">6.4.3.2.</span> <span class="nav-text">为MenuControler新增方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8MenuService%E6%8E%A5%E5%8F%A3%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BF%AE%E6%94%B9%E8%8F%9C%E5%8D%95%E7%9A%84%E6%8E%A5%E5%8F%A3"><span class="nav-number">6.4.3.3.</span> <span class="nav-text">在MenuService接口中添加修改菜单的接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8MenuServiceImpl%E4%B8%AD%E5%AE%9E%E7%8E%B0%E8%AF%A5%E6%96%B9%E6%B3%95"><span class="nav-number">6.4.3.4.</span> <span class="nav-text">在MenuServiceImpl中实现该方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD"><span class="nav-number">6.4.4.</span> <span class="nav-text">删除功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD%E5%88%86%E6%9E%90-1"><span class="nav-number">6.4.4.1.</span> <span class="nav-text">功能分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9menuRight-jsp-1"><span class="nav-number">6.4.4.2.</span> <span class="nav-text">修改menuRight.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9MenuController-1"><span class="nav-number">6.4.4.3.</span> <span class="nav-text">修改MenuController</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8MenuService%E4%B8%AD%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="nav-number">6.4.4.4.</span> <span class="nav-text">在MenuService中新增方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8MenuServiceImpl%E4%B8%AD%E5%AE%9E%E7%8E%B0%E8%AF%A5%E6%96%B9%E6%B3%95-1"><span class="nav-number">6.4.4.5.</span> <span class="nav-text">在MenuServiceImpl中实现该方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MenuMapper%E6%8E%A5%E5%8F%A3%E4%B8%AD%E5%AE%9A%E4%B9%89%E8%AF%A5%E6%96%B9%E6%B3%95"><span class="nav-number">6.4.4.6.</span> <span class="nav-text">MenuMapper接口中定义该方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8MenuMapper-xml%E4%B8%AD%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="nav-number">6.4.4.7.</span> <span class="nav-text">在MenuMapper.xml中新增方法</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%92%E8%89%B2%E7%AE%A1%E7%90%86-1"><span class="nav-number">7.</span> <span class="nav-text">角色管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%92%E8%89%B2CRUD"><span class="nav-number">7.1.</span> <span class="nav-text">角色CRUD</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8sys-role%E4%B8%8B%E5%88%9B%E5%BB%BAroleManager-jsp"><span class="nav-number">7.1.1.</span> <span class="nav-text">在sys&#x2F;role下创建roleManager.jsp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E9%A1%B5%E9%9D%A2%E8%B7%AF%E5%BE%84"><span class="nav-number">7.1.2.</span> <span class="nav-text">修改页面路径</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BArole"><span class="nav-number">7.1.3.</span> <span class="nav-text">创建role</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BARoleMapper"><span class="nav-number">7.1.4.</span> <span class="nav-text">创建RoleMapper</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BARoleMapper-xml"><span class="nav-number">7.1.5.</span> <span class="nav-text">创建RoleMapper.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BARoleVo"><span class="nav-number">7.1.6.</span> <span class="nav-text">创建RoleVo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BARoleService"><span class="nav-number">7.1.7.</span> <span class="nav-text">创建RoleService</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BARoleServiceImpl"><span class="nav-number">7.1.8.</span> <span class="nav-text">创建RoleServiceImpl</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BARoleController"><span class="nav-number">7.1.9.</span> <span class="nav-text">创建RoleController</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8SysController%E4%B8%AD%E6%96%B0%E5%A2%9E%E8%B7%AF%E7%94%B1"><span class="nav-number">7.1.10.</span> <span class="nav-text">在SysController中新增路由</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD%E5%AE%8C%E6%88%90%E6%95%88%E6%9E%9C"><span class="nav-number">7.1.11.</span> <span class="nav-text">功能完成效果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%92%E8%89%B2%E5%88%86%E9%85%8D%E8%8F%9C%E5%8D%95"><span class="nav-number">7.2.</span> <span class="nav-text">角色分配菜单</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9system-role-roleManager-jsp"><span class="nav-number">7.2.1.</span> <span class="nav-text">修改system&#x2F;role&#x2F;roleManager.jsp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BARoleController%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="nav-number">7.2.2.</span> <span class="nav-text">为RoleController新增方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BARoleService%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="nav-number">7.2.3.</span> <span class="nav-text">为RoleService新增方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8RoleServiceImpl%E4%B8%AD%E5%AE%9E%E7%8E%B0%E8%AF%A5%E6%96%B9%E6%B3%95"><span class="nav-number">7.2.4.</span> <span class="nav-text">在RoleServiceImpl中实现该方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8TreeNode%E4%B8%AD%E6%96%B0%E5%A2%9E%E5%B1%9E%E6%80%A7"><span class="nav-number">7.2.5.</span> <span class="nav-text">在TreeNode中新增属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BAMenuMapper%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="nav-number">7.2.6.</span> <span class="nav-text">为MenuMapper新增方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8MenuMapper-xml%E4%B8%AD%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="nav-number">7.2.7.</span> <span class="nav-text">在MenuMapper.xml中实现方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8RoleMapper%E4%B8%AD%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="nav-number">7.2.8.</span> <span class="nav-text">在RoleMapper中新增方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8RoleMapper-xml%E4%B8%AD%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="nav-number">7.2.9.</span> <span class="nav-text">在RoleMapper.xml中实现方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0%E6%95%88%E6%9E%9C"><span class="nav-number">7.2.10.</span> <span class="nav-text">功能实现效果</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86-1"><span class="nav-number">8.</span> <span class="nav-text">用户管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E6%88%B7CRUD%E5%92%8C%E9%87%8D%E7%BD%AE%E5%AF%86%E7%A0%81"><span class="nav-number">8.1.</span> <span class="nav-text">用户CRUD和重置密码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8system-user%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%B0%E5%BB%BAuserManager-jsp"><span class="nav-number">8.1.1.</span> <span class="nav-text">在system&#x2F;user目录下新建userManager.jsp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%A2%9E%E8%B7%AF%E7%94%B1%E5%9C%A8SysController%E4%B8%AD"><span class="nav-number">8.1.2.</span> <span class="nav-text">新增路由在SysController中</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E8%8F%9C%E5%8D%95%E4%B8%AD%E6%96%B0%E5%A2%9E%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="nav-number">8.1.3.</span> <span class="nav-text">在菜单中新增路由配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BAUserMapper%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="nav-number">8.1.4.</span> <span class="nav-text">为UserMapper新增方法</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="白小纯"
      src="/blog/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">白小纯</p>
  <div class="site-description" itemprop="description">不忘初心，方得始终</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">12</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="{fa fa-star"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">白小纯</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">237k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">3:35</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>




  




  
<script src="/blog/js/local-search.js"></script>













  

  

<script src="/blog/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/blog/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":70,"height":120},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
